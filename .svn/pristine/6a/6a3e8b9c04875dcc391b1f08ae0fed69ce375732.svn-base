"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[3664,5682],{19223:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(2803),o=(a(72791),a(56355)),r=a(81320),n=a(80184);const l=function(e){let{title:t,total:a,data:l,setCurrentDate:i,currentDate:c}=e;const d=[{color:"blue-500"},{color:"yellow-500"},{color:"green-500"},{color:"red-500"}];return(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("h4",{className:"mb-4",children:t}),(0,n.jsxs)("div",{className:"flex justify-between items-center col-span-3 mb-2",children:[(0,n.jsx)("div",{className:"p-2 rounded hover:bg-sky-700  cursor-pointer",onClick:()=>{const e=new Date(c);e.setDate(e.getDate()-1),e.setMonth(e.getMonth()),i(e)},children:(0,n.jsx)(o.bUI,{})}),(0,n.jsxs)("div",{className:"flex mb-0 mt-0",children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"600"},className:"dark:!text-amber-400 !text-amber-400 ",children:c.toLocaleDateString("en-US",{weekday:"long"})}),(0,n.jsxs)("p",{style:{fontSize:16,fontWeight:"600",marginLeft:5},className:"dark:!text-gray-400 !text-gray-600",children:[","," ",c.toLocaleDateString("en-US",{day:"numeric"})," ",c.toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),(0,n.jsx)("div",{className:"p-2 rounded hover:bg-sky-700  cursor-pointer",onClick:()=>{const e=new Date(c);e.setDate(e.getDate()+1),e.setMonth(e.getMonth()),i(e)},children:(0,n.jsx)(o.Dli,{})})]}),(0,n.jsx)("div",{className:"grow overflow-hidden hover:overflow-y-scroll mt-2",children:l.map(((e,t)=>{var o;return(0,n.jsxs)("div",{className:0!==t?"mt-5":"",children:[(0,n.jsxs)("div",{className:"flex items-center mb-2",children:[(0,n.jsx)("h6",{className:"text-sm",children:(0,n.jsx)(r.CurrencyFormatter,{amountString:e.RevenueAmount})}),(0,n.jsxs)("p",{className:"ml-2 font-regular",style:{fontSize:13,color:"#9B9B9B"},children:["(",e.FieldType,")"]})]}),(0,n.jsx)(s.Ex,{percent:e.RevenueAmount*a.value/100,color:null===(o=d[t])||void 0===o?void 0:o.color,customInfo:(0,n.jsx)(n.Fragment,{})})]})}))}),(0,n.jsxs)("div",{className:"flex items-baseline mb-1 mt-2",children:[(0,n.jsx)("h6",{style:{color:"rgba(255, 255, 255, 0.8)"},className:"font-semibold text-xl",children:(0,n.jsx)(r.CurrencyFormatter,{amountString:a.value})}),(0,n.jsxs)("p",{className:"ml-2 font-regular text-sm",style:{color:"rgba(255, 255, 255, 0.8)"},children:["(",a.label,")"]})]})]})}},45682:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(2803),o=(a(72791),a(80184));const r=function(e){let{showLoader:t}=e;return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,o.jsx)(s.$j,{size:"3.25rem"})}):(0,o.jsx)(o.Fragment,{})})}},63664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(72791),o=a(60364),r=a(19129),n=a(13496),l=a(25808),i=a(19223),c=a(20724),d=a(9494),u=a(85214),m=a(94604),h=a(43235),p=a(45682),x=a(56355),g=a(80184);const b=e=>{const t=new Date(e),a=new Date(t);a.setDate(t.getDate()+(6-t.getDay()));const s=e=>e.toISOString().split("T")[0];return{start:s(t),end:s(a)}},f=()=>{var e;const t=new Date;t.setDate(t.getDate());const[a,f]=(0,s.useState)(t),v=new Date(t.setDate(t.getDate()-t.getDay())),[y,j]=(0,s.useState)(!1),[k,C]=(0,s.useState)(b(v.toISOString().split("T")[0])),D=(0,o.useSelector)((e=>e.locale.selectedChannel)),[w,N]=(0,s.useState)({options:{},series:[]}),[S,T]=(0,s.useState)({options:{},series:[]}),[R,L]=(0,s.useState)({title:"",total:{},data:[]});(0,s.useEffect)((()=>{F()}),[a,D]);const F=async()=>{const{data:e}=await(0,d.apiCallstoreprocedure)("GetTodayRevenueSummary",{LocationCode:D.LocationCode,ChannelCode:D.ChannelCode,par_NTCFlag:1,ScheduleDate:a}),t=e.find((e=>"Total Revenue"===e.FieldType)),s=e.filter((e=>"Total Revenue"!==e.FieldType));L({title:"Today's Summary",total:{label:"Total Revenue",value:(null===t||void 0===t?void 0:t.RevenueAmount)||"N/A"},data:s})};(0,s.useEffect)((()=>{(async()=>{j(!0);try{const{data:e,status:t}=await(0,d.apiCallstoreprocedure)("GetMonthlyBookedRevenue",{LocationCode:D.LocationCode,ChannelCode:D.ChannelCode,par_NTCFlag:1});if(204==t)return N({options:{},series:[]}),T({options:{},series:[]}),void j(!1);const a=e.map((e=>((e,t)=>{var a;return(null===(a=u.Month.find((t=>t.id===e)))||void 0===a?void 0:a.name)+"-"+t||null})(e.RevenueMonth,e.RevenueYear))).filter(Boolean),s=e.map((e=>e.BookedRevenue));N({options:{tooltip:{y:{formatter:e=>"".concat(e," Lakhs")}},chart:{toolbar:{show:!1},dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},zoom:{enabled:!1}},xaxis:{categories:a,axisTicks:{show:!1}},stroke:{curve:"smooth"},dataLabels:{enabled:!1,style:{color:u.TW_COLORS.gray[400],fontWeight:400},background:{borderColor:u.TW_COLORS.gray[400]}},legend:{show:!0,markers:{strokeWidth:0}}},series:[{name:"Bookings",data:s}]}),j(!1);const{data:o,status:r}=await(0,d.apiCallstoreprocedure)("GetBookvsAvailableInvStatus",{LocationCode:D.LocationCode,ChannelCode:D.ChannelCode,par_NTCFlag:1,par_FromTelecastDate:k.start,par_ToTelecastDate:k.end});if(204==r)return void T({options:{},series:[]});const n=e=>e.map((e=>(0,h.WU)(new Date(e.ScheduleDate),"dd-MMM")));T({options:{chart:{stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"40%",horizontal:!1,borderRadius:4,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}},dataLabels:{enabled:!1,style:{color:u.TW_COLORS.gray[300],fontWeight:400}},xaxis:{categories:n(o),axisTicks:{show:!1}},legend:{markers:{strokeWidth:0}}},series:[{name:"Booked",data:o.map((e=>e.ConsumedInventory)),color:"#b69f15"},{name:"Available",data:o.map((e=>e.BalanceInventory)),color:"#4675bb"}]})}catch(e){console.error("Error fetching data:",e),j(!1)}})()}),[D,k]);const B=(0,s.useRef)(null),W=(0,s.useRef)(null);return(0,s.useEffect)((()=>{B.current&&W.current&&(B.current.chart.windowResizeHandler(),W.current.chart.windowResizeHandler())}),[w,S,D]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.default,{showLoader:y}),(0,g.jsx)(c.Z,{Name:"NTC Dashboard",Page:"NTC",Links:"Ntc"}),(0,g.jsx)("div",{className:"grid grid-cols-".concat(m.Zb.length," gap-4"),children:(0,g.jsx)(l.Z,{shortcuts:m.Zb})}),(0,g.jsxs)("div",{className:"grid grid-cols-9 gap-4",children:[(0,g.jsxs)("div",{className:"col-span-3 web-card pb-1 pt-3.5 mb-0 px-2 dark:!bg-[#1f2639] !bg-[#fff] ",children:[(0,g.jsxs)("h4",{className:"pb-3 flex items-center px-2 dark:!text-gray-400 !text-black",style:{borderBottom:"1px solid #595959"},children:[(0,g.jsx)(r.MvL,{className:"mr-2",size:23})," Bookings"]}),(0,g.jsxs)("p",{className:"mt-3 pl-4 dark:!text-gray-400 !text-black",children:[null===(e=w.series[0])||void 0===e?void 0:e.data.length," months"]}),(0,g.jsx)(n.Z,{ref:B,options:w.options,series:w.series,type:"line",width:"100%"})]}),(0,g.jsx)("div",{className:"col-span-3 web-card p-3.5 h-full  mb-0 dark:!bg-[#1f2639] !bg-[#fff]",children:(0,g.jsx)(i.Z,{title:R.title,total:R.total,data:R.data,setCurrentDate:f,currentDate:a})}),(0,g.jsxs)("div",{className:"col-span-3 web-card pt-3.5 pb-1 mb-0 dark:!bg-[#1f2639] !bg-[#fff]",children:[(0,g.jsx)("h4",{className:"px-3.5",children:"Inventory"}),(0,g.jsxs)("div",{className:"flex justify-between items-center col-span-3 mb-2 px-4",children:[(0,g.jsx)("div",{className:"p-2 rounded bg-black dark:bg-sky-700  hover:bg-sky-700  cursor-pointer",onClick:()=>{const e=new Date(k.start);e.setDate(e.getDate()-7),C(b(e.toISOString().split("T")[0]))},children:(0,g.jsx)(x.bUI,{})}),(0,g.jsx)("div",{className:"p-2 rounded bg-black  dark:bg-sky-700  hover:bg-sky-700  cursor-pointer",onClick:()=>{const e=new Date(k.start);e.setDate(e.getDate()+7),C(b(e.toISOString().split("T")[0]))},children:(0,g.jsx)(x.Dli,{})})]}),(0,g.jsx)(n.Z,{ref:W,options:S.options,series:S.series,type:"bar",width:"100%"})]})]})]})}}}]);
//# sourceMappingURL=3664.c0dd8c13.chunk.js.map