"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[2146],{77828:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(1413),i=s(2803),r=s(72791),o=s(67388),n=s(96361),l=s(46657),c=s(60364),u=s(4621),m=s(32640),d=s(80184);const p=()=>{const e=(0,c.useSelector)((e=>e.auth.session.token)),t=(0,r.useRef)(0);function s(e,t){i.Am.push((0,d.jsx)(i.P_,{closable:!0,type:t,duration:1e3,title:t.charAt(0).toUpperCase()+t.slice(1),children:e}))}const[p,A]=(0,r.useState)(""),[y,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)(""),[N,g]=(0,r.useState)(!1),[v,T]=(0,r.useState)(),b=(0,r.useRef)(null),[j,w]=(0,r.useState)();(0,r.useEffect)((()=>{t.current=t.current+1,1==t.current&&(async e=>{const t=[...(await(0,o.apiGetAmortisationMaster)()).data].reverse().map(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{serialNumber:t+1})));w(t)})()}),[]);const S=t=>{console.log("AmortisationType",j);const a=[...j];let i=a[t];i.IsActive=1==i.IsActive?0:1,(0,o.UpdateAmortisationType)(i,e).then((e=>{if(204!=e.status)return e.json();s("Data Already Exists.","warning")})).then((e=>{e.serialNumber=i.serialNumber,e.IsActive=i.IsActive,e.AmortisationTypeName=i.AmortisationTypeName,a[t]=e,w(a),s("Data Updated Succesfully","success")})).catch((e=>{console.log(e)}))},I=[{field:"serialNumber",header:"Sr.",width:"0.5%"},{field:"AmortisationTypeName",header:"AmortisationTypeName",width:"20%"}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.F,{ref:b}),(0,d.jsx)(u.Q,{group:"declarative",visible:N,onHide:()=>g(!1),message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{S(v)}}),(0,d.jsx)(i.Zb,{header:(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("div",{children:(0,d.jsx)("span",{className:"flex items-center",children:(0,d.jsx)(n.Z,{})})}),(0,d.jsx)("div",{className:"flex flex-col items-center",style:{marginLeft:"-20%"}}),(0,d.jsx)("div",{})]}),headerExtra:(0,m.W)(f,x,h,y,(()=>{if(p){const t={AmortisationTypeName:p,IsActive:1};(0,o.AddAmortisationType)(t,e).then((e=>{204!=e.status?(200==e.status&&(t.serialNumber=j.length+1,w((e=>[...e,t])),s("Data Added Succesfully","success")),A(""),h(!1)):s("Data Already Exists.","warning")})).catch((e=>{console.log(e)}))}else s("Kindly Enter Amortisation Type Name","danger")}),p,A,"Amortisation Type",j,I),bodyClass:"text-center",children:(0,d.jsx)(m.Z,{data:j,onRowEditComplete:t=>{let a=[...j],{newData:i,index:r}=t;i.AmortisationTypeName&&(a[r].AmortisationTypeName=i.AmortisationTypeName,a[r].IsActive=i.IsActive,console.log("_AmortisationType",a),(0,o.UpdateAmortisationType)(i,e).then((e=>{if(204!=e.status)return e.json();s("Data Already Exists.","warning")})).then((e=>{console.log(e),a[r]=e,a[r].serialNumber=i.serialNumber,a[r].AmortisationTypeName=i.AmortisationTypeName,a[r].IsActive=i.IsActive,w(a),s("Data Updated Succesfully","success")})).catch((e=>{console.log(e)})))},globalFilter:f,dataKey:"AmortisationTypeCode",columns:I,setyup:T,scrollHeight:"70vh",setVisible:g})})]})}}}]);
//# sourceMappingURL=2146.6946080d.chunk.js.map