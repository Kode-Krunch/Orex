{"version":3,"file":"static/js/5216.bc25077b.chunk.js","mappings":"oMAwEA,QAnEA,SAA+B,GAK3B,IAL2B,OAC7BA,EAAM,UACNC,EAAS,iBACTC,EAAgB,oBAChBC,GACD,EAEC,MAAOC,EAAoBC,IAAyBC,EAAAA,EAAAA,UAClDC,SAASL,EAAmB,KAIxBM,EAAc,KAClB,IACEP,GAAU,EAGZ,CAFE,MAAOQ,GACPC,QAAQD,MAAMA,EAChB,GAGF,OACE,UAAC,KAAM,CAACT,OAAQA,EAAQW,QAASH,EAAaI,eAAgBJ,EAAY,WACxE,eAAIK,UAAU,uCAAsC,4BACpD,iBAAKA,UAAU,oCAAmC,WAChD,cAAGA,UAAU,aAAY,uBACzB,iBAAKA,UAAU,0CAAyC,WACtD,SAAC,KAAM,CACLC,MAAM,SAAC,MAAO,CAACD,UAAU,eACzBE,KAAK,KACLC,QAAS,KACHZ,EAAqB,GACvBC,EAAsBD,EAAqB,EAAE,EAEjDa,SAAiC,IAAvBb,KAEZ,gCACGA,EAAqB,GAAE,WAChBA,GACJA,EAAoB,IAAG,UAG7B,SAAC,KAAM,CACLU,MAAM,SAAC,MAAO,CAACD,UAAU,eACzBE,KAAK,KACLC,QAAS,KACHZ,EAAqB,IACvBC,EAAsBD,EAAqB,EAAE,EAEjDa,SAAiC,KAAvBb,WAIhB,gBAAKS,UAAU,kDAAiD,UAC9D,SAAC,KAAM,CACLK,QAAQ,QACRF,QAAS,KACPb,EAAyC,GAArBC,GACpBI,GAAa,EACb,sBAOZ,ECqEA,QAtIA,SAAoC,GAOhC,IAPgC,MAClCW,EAAK,YACLC,EAAW,MACXC,EACAnB,iBAAkBoB,EAAoB,aACtCC,EAAY,gBACZC,GACD,EAEC,MAAOC,EAAcC,IAAmBpB,EAAAA,EAAAA,UAASgB,IAC1CpB,EAAkBC,IACvBG,EAAAA,EAAAA,UAASgB,IACJK,EAAkBC,IAAuBtB,EAAAA,EAAAA,WAAS,IAClDuB,EAA6BC,IAClCxB,EAAAA,EAAAA,WAAS,GAGLyB,GAAiBC,EAAAA,EAAAA,SAAO,GACxBC,GAAuBD,EAAAA,EAAAA,QAAOE,KAAKC,OAGzC,IAAIC,EACFC,EAAI,UACF9B,SAASkB,EAAe,IAAM,GAAE,WACxBlB,SAASkB,EAAe,KAC5BlB,SAASkB,EAAe,IAAG,YAC7BA,EAAe,GAAK,GAAE,WAAOA,EAAe,IAAOA,EAAe,KAGxEa,EAAAA,EAAAA,YAAU,KACR,IAgBE,OAfIX,EACFS,EAAWG,aAAYC,UACrB,GAAqB,IAAjBf,EAAoB,CACtB,GAA+B,oBAApBD,EAAgC,CACzC,GAAIO,EAAeU,QAAS,OAC5BV,EAAeU,SAAU,QACnBjB,IACNO,EAAeU,SAAU,CAC3B,CACAf,EAAgBxB,EAClB,MACEwB,GAAiBgB,GAAgBA,EAAc,GACjD,GACC,KACAC,cAAcP,GACZ,IAAMO,cAAcP,EAG7B,CAFE,MAAO3B,GACPC,QAAQD,MAAMA,EAChB,IACC,CAACkB,EAAkBF,KAAiBF,KAEvCe,EAAAA,EAAAA,YAAU,KACR,IACEZ,EAAgBxB,GAChB,MAAM0C,EAAkBL,aAAY,KAEhCL,KAAKC,MAAQF,EAAqBQ,QAClC,EAAIvC,EAAmB,KAEvB0B,GAAoB,EACtB,GACC,KAEH,OADAiB,OAAOC,iBAAiB,YAAaC,GAC9B,KACLF,OAAOG,oBAAoB,YAAaD,GACxCJ,cAAcC,EAAgB,CAIlC,CAFE,MAAOnC,GACPC,QAAQD,MAAMA,EAChB,IACC,CAACP,IAGJ,MAAM6C,EAAkB,KACtBd,EAAqBQ,QAAUP,KAAKC,KAAK,EAG3C,OACE,iCACE,SAAC,KAAQ,CACPjB,QAAQ,SACR+B,QAAUxB,EAAevB,EAAoB,IAC7CiB,MAAOA,EACP+B,YACE,eAAGrC,UAAU,mDAAkD,WAC7D,SAAC,IAAO,CACNsC,MAAK,UACHxB,EAAgB,yBACMU,GAAI,8BACCA,GAAM,oBAEnCe,UAAU,UACVC,aAAa,uBAAsB,UAEnC,iBACExC,UAAU,wBACVG,QAAS,IAAMc,GAA+B,GAAM,SAEnDO,OAGL,gBAAKrB,QAAS,IAAMY,GAAqBD,GAAkB,UACzD,SAAC,IAAO,CACNwB,MAAOxB,EAAmB,kBAAoB,iBAC9C0B,aAAa,iBAAgB,SAE5B1B,GACC,SAAC,MAAc,CACbd,UAAS,kDAA6CQ,EAAK,sBAG7D,SAAC,MAAW,CACVR,UAAS,kDAA6CQ,EAAK,4BAOvED,YAAaA,EACbC,MAAOA,EACPR,UAAU,YAEZ,SAAC,EAAqB,CACpBb,OAAQ6B,EACR5B,UAAW6B,EACX5B,iBAAkBA,EAClBC,oBAAqBA,MAI7B,C","sources":["views/Controls/AutoExecuteFunctionCounter/components/EditMaxCountDialog.js","views/Controls/AutoExecuteFunctionCounter/AutoExecuteFunctionCounter.js"],"sourcesContent":["import { Button, Dialog } from 'components/ui';\r\nimport React, { useState } from 'react';\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport { IoMdAdd } from 'react-icons/io';\r\n\r\nfunction EditMaxDurationDialog({\r\n  isOpen,\r\n  setIsOpen,\r\n  maxDurationInSec,\r\n  setMaxDurationInSec,\r\n}) {\r\n  /* STATES */\r\n  const [durationInputInMin, setDurationInputInMin] = useState(\r\n    parseInt(maxDurationInSec / 60),\r\n  );\r\n\r\n  /* EVENT HANDLERS */\r\n  const handleClose = () => {\r\n    try {\r\n      setIsOpen(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog isOpen={isOpen} onClose={handleClose} onRequestClose={handleClose}>\r\n      <h5 className=\"mb-4 pb-2 border-b border-b-gray-700\">Edit Duration</h5>\r\n      <div className=\"flex justify-between items-center\">\r\n        <p className=\"text-white\">Duration</p>\r\n        <div className=\"mt-1 flex items-center gap-3 text-white\">\r\n          <Button\r\n            icon={<FiMinus className=\"text-white\" />}\r\n            size=\"xs\"\r\n            onClick={() => {\r\n              if (durationInputInMin > 1)\r\n                setDurationInputInMin(durationInputInMin - 1);\r\n            }}\r\n            disabled={durationInputInMin === 1}\r\n          />\r\n          <>\r\n            {durationInputInMin < 10\r\n              ? `0${durationInputInMin}`\r\n              : durationInputInMin}{' '}\r\n            Min\r\n          </>\r\n          <Button\r\n            icon={<IoMdAdd className=\"text-white\" />}\r\n            size=\"xs\"\r\n            onClick={() => {\r\n              if (durationInputInMin < 61)\r\n                setDurationInputInMin(durationInputInMin + 1);\r\n            }}\r\n            disabled={durationInputInMin === 59}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"text-right mt-4 pt-4 border-t border-t-gray-700\">\r\n        <Button\r\n          variant=\"solid\"\r\n          onClick={() => {\r\n            setMaxDurationInSec(durationInputInMin * 60);\r\n            handleClose();\r\n          }}\r\n        >\r\n          Save\r\n        </Button>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default EditMaxDurationDialog;\r\n","import { Progress, Tooltip } from 'components/ui';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { MdOutlinePause, MdPlayArrow } from 'react-icons/md';\r\nimport EditMaxDurationDialog from './components/EditMaxCountDialog';\r\n\r\nfunction AutoExecuteFunctionCounter({\r\n  width,\r\n  strokeWidth,\r\n  color,\r\n  maxDurationInSec: maxDurationInSecProp,\r\n  dependencies,\r\n  executeFunction,\r\n}) {\r\n  /* STATE */\r\n  const [counterInSec, setCounterInSec] = useState(maxDurationInSecProp);\r\n  const [maxDurationInSec, setMaxDurationInSec] =\r\n    useState(maxDurationInSecProp);\r\n  const [isCounterRunning, setIsCounterRunning] = useState(false);\r\n  const [isEditMaxDurationDialogOpen, setIsEditMaxDurationDialogOpen] =\r\n    useState(false);\r\n\r\n  /* HOOKS */\r\n  const isExecutingRef = useRef(false);\r\n  const lastMouseMoveTimeRef = useRef(Date.now());\r\n\r\n  /* VARIABLES */\r\n  let interval,\r\n    time = `${\r\n      parseInt(counterInSec / 60) < 10\r\n        ? `0${parseInt(counterInSec / 60)}`\r\n        : parseInt(counterInSec / 60)\r\n    }:${counterInSec % 60 < 10 ? `0${counterInSec % 60}` : counterInSec % 60}`;\r\n\r\n  /* USE EFFECTS */\r\n  useEffect(() => {\r\n    try {\r\n      if (isCounterRunning)\r\n        interval = setInterval(async () => {\r\n          if (counterInSec === 0) {\r\n            if (typeof executeFunction === 'function') {\r\n              if (isExecutingRef.current) return;\r\n              isExecutingRef.current = true;\r\n              await executeFunction();\r\n              isExecutingRef.current = false;\r\n            }\r\n            setCounterInSec(maxDurationInSec);\r\n          } else {\r\n            setCounterInSec((prevCounter) => prevCounter - 1);\r\n          }\r\n        }, 1000);\r\n      else clearInterval(interval);\r\n      return () => clearInterval(interval);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [isCounterRunning, counterInSec, ...dependencies]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setCounterInSec(maxDurationInSec);\r\n      const checkInactivity = setInterval(() => {\r\n        if (\r\n          Date.now() - lastMouseMoveTimeRef.current >\r\n          2 * maxDurationInSec * 1000\r\n        ) {\r\n          setIsCounterRunning(false);\r\n        }\r\n      }, 1000);\r\n      window.addEventListener('mousemove', handleMouseMove);\r\n      return () => {\r\n        window.removeEventListener('mousemove', handleMouseMove);\r\n        clearInterval(checkInactivity);\r\n      };\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [maxDurationInSec]);\r\n\r\n  /* EVENT HANDLERS */\r\n  const handleMouseMove = () => {\r\n    lastMouseMoveTimeRef.current = Date.now();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Progress\r\n        variant=\"circle\"\r\n        percent={(counterInSec / maxDurationInSec) * 100}\r\n        width={width}\r\n        customInfo={\r\n          <p className=\"flex flex-col items-center justify-center mt-2.5\">\r\n            <Tooltip\r\n              title={`${\r\n                isCounterRunning\r\n                  ? `Auto saving in ${time}`\r\n                  : `Auto save paused at ${time}`\r\n              }. Click to edit.`}\r\n              placement=\"top-end\"\r\n              wrapperClass=\"hover:cursor-pointer\"\r\n            >\r\n              <span\r\n                className=\"text-xs font-semibold\"\r\n                onClick={() => setIsEditMaxDurationDialogOpen(true)}\r\n              >\r\n                {time}\r\n              </span>\r\n            </Tooltip>\r\n            <div onClick={() => setIsCounterRunning(!isCounterRunning)}>\r\n              <Tooltip\r\n                title={isCounterRunning ? 'Pause Auto Save' : 'Play Auto Save'}\r\n                wrapperClass=\"transition-all\"\r\n              >\r\n                {isCounterRunning ? (\r\n                  <MdOutlinePause\r\n                    className={`text-sm hover:cursor-pointer hover:text-${color} transition-all`}\r\n                  />\r\n                ) : (\r\n                  <MdPlayArrow\r\n                    className={`text-sm hover:cursor-pointer hover:text-${color} transition-all`}\r\n                  />\r\n                )}\r\n              </Tooltip>\r\n            </div>\r\n          </p>\r\n        }\r\n        strokeWidth={strokeWidth}\r\n        color={color}\r\n        className=\"!w-max\"\r\n      />\r\n      <EditMaxDurationDialog\r\n        isOpen={isEditMaxDurationDialogOpen}\r\n        setIsOpen={setIsEditMaxDurationDialogOpen}\r\n        maxDurationInSec={maxDurationInSec}\r\n        setMaxDurationInSec={setMaxDurationInSec}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AutoExecuteFunctionCounter;\r\n"],"names":["isOpen","setIsOpen","maxDurationInSec","setMaxDurationInSec","durationInputInMin","setDurationInputInMin","useState","parseInt","handleClose","error","console","onClose","onRequestClose","className","icon","size","onClick","disabled","variant","width","strokeWidth","color","maxDurationInSecProp","dependencies","executeFunction","counterInSec","setCounterInSec","isCounterRunning","setIsCounterRunning","isEditMaxDurationDialogOpen","setIsEditMaxDurationDialogOpen","isExecutingRef","useRef","lastMouseMoveTimeRef","Date","now","interval","time","useEffect","setInterval","async","current","prevCounter","clearInterval","checkInactivity","window","addEventListener","handleMouseMove","removeEventListener","percent","customInfo","title","placement","wrapperClass"],"sourceRoot":""}