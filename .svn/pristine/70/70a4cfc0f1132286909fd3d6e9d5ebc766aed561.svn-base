"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[5733],{35648:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(72791),o=r(8458),s=r(81320),a=r(91615),l=r(80184);const c=function(e){let{tableData:t,columns:r,scrollFunction:c}=e;const{schedulingTableRef:i}=(0,n.useContext)(a.Z),[d,u]=(0,n.useState)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex bg-gray-700 font-semibold text-white text-[12px] sticky top-0",children:r.map(((e,t)=>(0,l.jsx)("div",{style:{width:e.style.width,height:"".concat(o.eX,"px")},className:"flex items-center justify-".concat(e.style.align," border-gray-400 border-y border-r ").concat(0===t&&"border-l"),children:e.header},e.accessorKey)))}),(0,l.jsx)("div",{children:t.map((e=>(0,l.jsx)("div",{className:"hover:cursor-pointer flex",onMouseEnter:()=>u(e),onMouseLeave:()=>u(null),onClick:"function"===typeof c?()=>c(e):()=>{var t;return null===(t=i.current)||void 0===t?void 0:t.scrollToItem(e.rowIndex,"center")},children:r.map(((t,r)=>(0,l.jsx)("div",{style:{height:"".concat(o.eX,"px"),width:t.style.width,backgroundColor:d&&d.rowId===e.rowId?(0,s.getHexColorWithOpacity)(e.EventDefaultBackColor,.8):e.EventDefaultBackColor,color:e.EventDefaultFrontColor,borderColor:"rgb(107, 114, 128)"},className:"flex items-center justify-".concat(t.style.align," text-[12px] py-1 px-2.5 border-b border-r ").concat(0===r&&"border-l"),children:(0,l.jsx)("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap",children:e[t.accessorKey]})},r)))},e.rowId)))})]})}},75733:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(72791),o=r(91615),s=r(2803),a=r(84373),l=r(29851),c=r(21260),i=r(1413),d=r(54748),u=r(87350),h=r(81320);const f=async(e,t,r)=>{try{let n=[];const o=await(0,u.sb)({LocationCode:e.LocationCode,ChannelCode:e.ChannelCode},(0,d.Tk)(t));return 200===o.status&&o.data.length>0?(n=((e,t)=>{try{let r=[];const n=e.filter((e=>e.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION));return t.filter((e=>e.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION)).forEach(((e,o)=>{n[o]&&e.FPC_Time!==n[o].FPC_Time||n[o]&&e.Event_Name!==n[o].Event_Name?r.push((0,i.Z)((0,i.Z)({},e),{},{EventDefaultBackColor:"#b91b1c",EventDefaultFrontColor:"white",rowId:(0,l.XQ)(c.tableTypesEnum.SECONDARY,e)})):r.push((0,i.Z)((0,i.Z)({},e),{},{rowId:(0,l.XQ)(c.tableTypesEnum.SECONDARY,e)})),r.push(...t.filter((t=>t.F_C_S_P===c.rowDataTypesEnum.SEGMENT&&t.FPC_ID===e.FPC_ID)).map((e=>(0,i.Z)((0,i.Z)({},e),{},{rowId:(0,l.XQ)(c.tableTypesEnum.SECONDARY,e)}))))})),r}catch(r){throw r}})(r,o.data),n=n.map(((e,t)=>(0,i.Z)((0,i.Z)({},e),{},{rowIndex:t})))):204===o.status?(0,h.openNotification)("info","No programs found"):(0,h.openNotification)("danger","Something went wrong while fetching programs"),n}catch(n){throw n}};var m=r(60364),x=r(35648),p=r(8458),g=r(80184);const C=function(){const e=(0,m.useSelector)((e=>e.locale.selectedChannel)),{date:t,schedulingTableData:r,setSecondaryTableData:i,setActiveFeatures:d,schedulingTableRef:u,resetSecondaryTableStates:C}=(0,n.useContext)(o.Z),[w,y]=(0,n.useState)([]),[N,b]=(0,n.useState)(!1);return(0,n.useEffect)((()=>C),[]),(0,n.useEffect)((()=>{(async()=>{try{b(!0);const n=await f(e,t,r);i(n),y(n.filter((e=>e.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION))),b(!1)}catch(n){b(!1),(0,h.openNotification)("danger","Something went wrong while fetching programs"),console.error(n)}})()}),[r]),(0,g.jsxs)("div",{className:"h-full w-full flex flex-col overflow-auto no-scrollbar bg-gray-800 p-3 pt-2 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("h5",{children:"Programs"}),w.length>0&&(0,g.jsx)("h6",{className:"rounded-md px-1.5 py-0.5 bg-gray-600 flex items-center justify-center",children:w.length})]}),(0,g.jsx)("div",{className:"flex gap-1.5",children:(0,g.jsx)(s.u,{title:"Close",children:(0,g.jsx)(s.zx,{size:"xs",icon:(0,g.jsx)(a.QAE,{}),onClick:()=>(0,l.FG)(d,c.featuresEnum.CHANGE_PROGRAM)})})})]}),(0,g.jsx)("div",{className:"h-[92%] flex flex-col gap-3",children:w.length>0?(0,g.jsx)("div",{className:"grow",children:(0,g.jsx)(x.Z,{tableData:w,columns:p.Ut,scrollFunction:e=>(e=>{try{var t;-1!==r.findIndex((t=>t.FPC_Time===e.FPC_Time))?null===(t=u.current)||void 0===t||t.scrollToItem(r.findIndex((t=>t.FPC_Time===e.FPC_Time)),"center"):(0,h.openNotification)("danger","Program not present in schedule")}catch(n){(0,h.openNotification)("danger","Something went wrong while auto scrolling"),console.error(n)}})(e)})}):(0,g.jsx)(s.Zb,{className:"h-full",bodyClass:"h-full flex justify-center items-center",children:N?(0,g.jsx)(s.$j,{size:"45px"}):"No programs to show"})})]})}}}]);
//# sourceMappingURL=5733.30cd7855.chunk.js.map