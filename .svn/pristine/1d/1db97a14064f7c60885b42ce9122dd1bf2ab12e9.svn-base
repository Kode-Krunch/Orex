"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[7065],{26235:(e,a,t)=>{t.d(a,{Z:()=>d});var o=t(1413),s=(t(72791),t(81694)),l=t.n(s),n=t(52639),r=t(57689),c=t(80184);const i=e=>{const{type:a,mode:t,gutter:s,className:i,imgClass:d,style:m,logoWidth:h}=e,u=(0,r.s0)();return(0,c.jsx)("div",{className:l()(" flex logo",i,s),style:(0,o.Z)((0,o.Z)({},m),{width:h}),onClick:()=>u("/home"),children:(0,c.jsx)("img",{style:{height:48,width:100,marginTop:"-10px"},src:"".concat("/img/logo/","logo-").concat(t,"-").concat(a,".png"),alt:"".concat(n.iC," logo")})})};i.defaultProps={mode:"light",type:"full",logoWidth:"auto"};const d=i},25579:(e,a,t)=>{t.d(a,{Ei:()=>f,I6:()=>y,Qj:()=>i,U$:()=>m,Uy:()=>j,Z_:()=>n,_K:()=>p,b6:()=>r,d:()=>c,db:()=>N,fh:()=>u,gg:()=>x,hu:()=>l,iD:()=>d,rd:()=>h,w_:()=>g});t(54048);var o=t(46152),s=t(54748);t(74569);async function l(e){return o.Z.fetchData({url:"/dealmaster/".concat(e),method:"get"})}async function n(e){return o.Z.fetchData({url:"/dealattachment/".concat(e),method:"get"})}async function r(e,a,t){return o.Z.fetchData({url:"/dealmaster/dealforapproval/?DealNumber=".concat(e,"&IsApproved=").concat(a,"&RejectRemark=").concat(t),method:"get"})}async function c(e,a){return o.Z.fetchData({url:"/dealmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&StartDate=").concat((0,s.Tk)(a[0]),"&EndDate=").concat((0,s.Tk)(a[1])),method:"get"})}async function i(e){return o.Z.fetchData({url:"/sponsortypemaster/drop/",method:"get",data:e})}async function d(e){return o.Z.fetchData({url:"/spottypemaster/drop/",method:"get",data:e})}async function m(e){return o.Z.fetchData({url:"/dealdetail/".concat(e),method:"get"})}async function h(e){return o.Z.fetchData({url:"/dealmaster/USP_Sch_DealConsumptionCheck/?DealNumber=".concat(e),method:"get"})}async function u(e,a,t,s,l,n){return o.Z.fetchData({url:"/dealmaster/bindstartnendtime/?LocationCode=".concat(l,"&ChannelCode=").concat(n,"&DealPeriodToDate=").concat(e,"&DealPeriodFromDate=").concat(a,"&ContentCode=").concat(t,"&OriginalRepeatCode=").concat(s),method:"get"})}async function p(e,a,t){return o.Z.fetchData({url:"/bookingdetails/bookingchange/?flag=".concat(e,"&IsNtc=").concat(t),method:"put",data:a})}async function x(e,a){var t={params:a};return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:t,method:"post"})}async function f(e){return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:{params:{}},method:"post"})}async function y(e,a,t){var s={params:{Bookingcode:a,IsNTC:t}};return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:s,method:"post"})}async function N(e){var a={params:{CheckMonth:e}};return o.Z.fetchData({url:"/callstoreprocedure/USP_DealDashboardDoughnut",data:a,method:"post"})}async function j(e,a){var t={params:{BookingNumber:a,deallineitemno:0}};return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:t,method:"post"})}async function g(e){return o.Z.fetchData({url:"currencyexchangerate/?basecurrency=".concat(e),method:"post"})}},27065:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var o=t(81721),s=t(26235),l=t(2803),n=t(72791),r=t(58617),c=t(60364),i=t(25579),d=t(23532),m=t(60647),h=(t(24564),t(36996)),u=t(48080),p=t(30948),x=t(80184);const{Tr:f,Th:y,Td:N,THead:j,TBody:g,TFoot:D}=l.iA,v=e=>{let{label:a,value:t,DealData:o}=e;return(0,x.jsxs)(f,{children:[(0,x.jsx)(N,{className:"!border-t-0",colSpan:"11"}),(0,x.jsx)(N,{className:"font-semibold !border-t-0",style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsx)("p",{style:{fontSize:14,fontWeight:900,color:"white"},children:a})}),(0,x.jsx)(N,{className:"!py-5 !border-t-0",style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsxs)("h6",{className:"flex",children:["Total Seconds"==a||"Total Spots"==a?null:(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",o.CurrencySymbol]}),"Total Seconds"==a||"Total Spots"==a?t:(0,x.jsx)(S,{amount:t})]})})]})},S=e=>{let{amount:a}=e;return(0,x.jsx)(p.Z,{displayType:"text",style:{fontSize:16,color:"white"},value:a,thousandSeparator:!0})},C=e=>{let{DealDataDetails:a=[],DealData:t={}}=e;const o=(0,n.useMemo)((()=>[{header:"Deal",accessorKey:"DealLineItemTypeName"},{header:"Content",accessorKey:"ContentName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.ContentName?a.ContentName:"NA"})}},{header:"TimeBand",accessorKey:"TimeBandName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.TimeBandName?a.TimeBandName:"NA"})}},{header:"Spot Type",accessorKey:"SpotTypeName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.SpotTypeName?a.SpotTypeName:"NA"})}},{header:"NTC Type",accessorKey:"NTCTypeName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.NTCTypeName?a.NTCTypeName:"NA"})}},{header:"Weekdays",accessorKey:"WeekdaysName"},{header:"Start",accessorKey:"StartTime"},{header:"End",accessorKey:"EndTime"},{header:"Rate",accessorKey:"Rate",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("h6",{className:"flex",children:[(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",t.CurrencySymbol]}),(0,x.jsx)(S,{amount:a.Rate})]})})}},{header:"Spots",accessorKey:"TotalSpots",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.TotalSpots?a.TotalSpots:"0"})}},{header:"NTC Spots",accessorKey:"NTCTotalSpots",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.NTCTotalSpots?a.NTCTotalSpots:"0"})}},{header:"Seconds",accessorKey:"Seconds",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.Seconds?a.Seconds:"0"})}},{header:"Amount",accessorKey:"Amount",cell:e=>{const a=e.row.original;return console.log(a),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("h6",{className:"flex",children:[(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",t.CurrencySymbol]}),(0,x.jsx)(S,{amount:a.Amount})]})})}}]),[]),s=(0,h.b7)({data:a,columns:o,getCoreRowModel:(0,u.sC)()});return(0,x.jsxs)(l.iA,{children:[(0,x.jsx)(j,{children:s.getHeaderGroups().map((e=>(0,x.jsx)(f,{children:e.headers.map((e=>(0,x.jsx)(y,{colSpan:e.colSpan,children:(0,h.ie)(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,x.jsx)(g,{children:s.getRowModel().rows.map((e=>(0,x.jsx)(f,{style:{height:"50px",borderBottom:"1px solid #fffafa40"},children:e.getVisibleCells().map((e=>(0,x.jsx)(N,{children:(0,h.ie)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))}),(0,x.jsxs)(D,{children:[(0,x.jsx)(v,{label:"Total Seconds",value:t.TotalSeconds,DealData:t}),(0,x.jsx)(v,{label:"Total Spots",value:t.NTCTotalSpots?t.NTCTotalSpots:0+t.TotalSpots?t.TotalSpots:0,DealData:t}),(0,x.jsxs)(f,{children:[(0,x.jsx)(N,{className:"!border-t-0",colSpan:"11"}),(0,x.jsx)(N,{style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsx)("p",{style:{fontSize:14,fontWeight:900,color:"white"},children:"Grand Amount"})}),(0,x.jsx)(N,{style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsxs)("h6",{className:"flex",children:[(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",t.CurrencySymbol]}),(0,x.jsx)(S,{amount:t.TotalAmount})]})})]})]})]})};var T=t(81320);const b=e=>{let{Deal:a,setIsOpenApproval:t}=e;const h=(0,c.useSelector)((e=>e.auth.session.Username)),[u,p]=(0,n.useState)([]),[f,y]=(0,n.useState)(""),[N,j]=(0,n.useState)(""),[g,D]=(0,n.useState)(""),[v,S]=(0,n.useState)(!1),b=e=>{S(!1),y(""),j(""),D("")};(0,n.useEffect)((()=>{(async e=>{const t=await(0,i.U$)(a.DealNumber);p(t.data)})()}),[]);const w=(0,c.useSelector)((e=>e.theme.mode)),{textTheme:k}=(0,d.Z)(),Z={weekday:"long",year:"numeric",month:"long",day:"numeric"},A=async(e,a,o)=>{if(""!==o)try{const s=await(0,i.b6)(e,a,o);if(204==s.status)return(0,T.openNotification)("warning","Deal Not Found"),void t(!1);if(200==s.status)return void(1==a?((0,T.openNotification)("success","Deal Approved Successfully"),t(!1)):((0,T.openNotification)("success","Deal Rejected Successfully"),t(!1)))}catch(s){if(500==s.response.status)return(0,T.openNotification)("danger","Server Error"),void t(!1)}finally{S(!1)}else(0,T.openNotification)("warning","Please Enter Valid Remark to Reject Deal.")};return(0,x.jsxs)(o.W2,{className:"h-full",children:[(0,x.jsxs)(l.Zb,{className:"h-full",bodyClass:"h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-10",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(s.Z,{className:"mb-3",mode:w}),(0,x.jsx)("address",{className:"not-italic",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("h5",{className:"mb-3 capitalize ",children:[null===a||void 0===a?void 0:a.DealTypeName,", ",null===a||void 0===a?void 0:a.Emp_FirstName,"."]}),(0,x.jsxs)("span",{className:"IN",children:["Client & City : ",null===a||void 0===a?void 0:a.ClientName," & ",null===a||void 0===a?void 0:a.ClientPlaceName]}),(0,x.jsxs)("span",{className:"IN",children:["Agency & City : ",null===a||void 0===a?void 0:a.AgencyName," & ",null===a||void 0===a?void 0:a.AgencyPlaceName]}),(0,x.jsxs)("span",{className:"IN",children:["Pay Route : ",null===a||void 0===a?void 0:a.PayRouteName]})]})})]}),(0,x.jsxs)("div",{className:"my-4",children:[(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsxs)("h4",{children:["Deal #",null===a||void 0===a?void 0:a.DealCode]}),(0,x.jsxs)("span",{children:["Date:"," ",new Date(null===a||void 0===a?void 0:a.DealCreatedDate).toLocaleDateString("en-US",Z)]})]}),(0,x.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,x.jsx)(r.Bge,{size:30,className:"".concat(k)}),(0,x.jsx)("div",{className:"ltr:ml-3 rtl:mr-3 ",children:(0,x.jsx)(l.u,{title:"Start Date / End Date",children:(0,x.jsxs)("div",{className:"mb-1 ",children:[new Date(null===a||void 0===a?void 0:a.DealPeriodFromDate).toLocaleDateString("en-US",Z)," ",(0,x.jsx)("br",{})," ",new Date(null===a||void 0===a?void 0:a.DealPeriodToDate).toLocaleDateString("en-US",Z)]})})})]})]})]}),(0,x.jsx)(C,{DealDataDetails:u,DealData:a}),(0,x.jsxs)("div",{className:"flex justify-between mt-5",children:[(0,x.jsx)(l.zx,{className:"mr-2",onClick:()=>t(!1),children:"Back"}),(0,x.jsxs)("div",{className:"flex justify-end ",children:[(0,x.jsx)(l.zx,{className:"mr-2",onClick:()=>{j(null===a||void 0===a?void 0:a.DealNumber),D(2),S(!0)},children:"Reject"}),(0,x.jsx)(l.zx,{variant:"solid",onClick:()=>{A(null===a||void 0===a?void 0:a.DealNumber,1,"Approved BY"+h)},children:"Approve"})]})]})]}),(0,x.jsxs)(m.Z,{isOpen:v,onClose:b,onRequestClose:b,children:[(0,x.jsx)("h5",{className:"mb-4",children:"Deal Reject Remark"}),(0,x.jsx)(l.II,{placeholder:"Remark",onChange:e=>y(e.target.value),textArea:!0}),(0,x.jsxs)("div",{className:"text-right mt-6",children:[(0,x.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:b,children:"Cancel"}),(0,x.jsx)(l.zx,{variant:"solid",onClick:()=>A(N,g,f),children:"Okay"})]})]})]})}},24564:()=>{}}]);
//# sourceMappingURL=7065.d7672ce4.chunk.js.map