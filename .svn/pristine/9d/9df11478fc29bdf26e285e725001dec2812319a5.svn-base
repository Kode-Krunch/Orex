(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[6591],{28179:(e,t,a)=>{"use strict";a.d(t,{$H:()=>i,$o:()=>T,Bo:()=>j,D_:()=>B,Eg:()=>S,JN:()=>x,M0:()=>u,ND:()=>l,OY:()=>s,SR:()=>g,Sd:()=>v,U2:()=>k,U3:()=>D,XV:()=>m,fU:()=>b,fy:()=>C,fz:()=>w,g7:()=>O,h:()=>h,iH:()=>c,ih:()=>A,jS:()=>N,kP:()=>d,ko:()=>p,m1:()=>f,mg:()=>I,pc:()=>L,qm:()=>y});var n=a(54048),o=a(46152);a(60630);const r=a(74569);async function i(e){return o.Z.fetchData({url:"/commercialtypemaster/",method:"get",data:e})}async function l(e,t,a){return o.Z.fetchData({url:"/spotcancellation/?CancelRemarkCode=".concat(t,"&IsNTC=").concat(a),method:"put",data:e})}const s=(e,t)=>new Promise(((a,o)=>{let i=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),l={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialtypemaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:i};r.request(l).then((e=>{a(e)})).catch((e=>{o(e)}))})),c=(e,t)=>new Promise(((a,o)=>{let i=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),l={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialtypemaster/".concat(e.CommercialTypeCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:i};r.request(l).then((e=>{a(e)})).catch((e=>{o(e)}))}));async function d(e){return o.Z.fetchData({url:"/commercialmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&IsNTC=").concat(e.IsNTC,"&fromdate=").concat(e.FromDate,"&todate=").concat(e.ToDate),method:"get"})}async function u(e,t){return o.Z.fetchData({url:"/bookingmaster/?IsNTC=".concat(e.IsNTC,"&LocationCode=").concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function m(e,t,a,n,r,i,l,s,c,d,u){return o.Z.fetchData({url:"/spotschedule/USP_SA_RO_SpotSchedule/?From_DT=".concat(e,"&To_DT=").concat(t,"&DealNumber=").concat(a,"&BookingNumber=").concat(n,"&ChannelCode=").concat(i,"&LocationCode=").concat(l,"&ScheduleDate=").concat(r,"&IsMakeGoodRO=").concat(s?1:0,"&BookingRefNumber=").concat(c,"&IsNTC=").concat(d,"&BrandCode=").concat(u),method:"get"})}async function p(e,t,a,n,r,i){return o.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(n,"&ChannelCode=").concat(r,"&ClientCode=").concat(t.value,"&BrandCode=").concat(e.value,"&DurInSec=").concat(a.DurInSec,"&IsNTC=").concat(i),method:"get"})}async function h(e,t,a,n,r){return o.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(a,"&ChannelCode=").concat(n,"&ClientCode=").concat(t,"&BrandCode=").concat(e,"&IsNTC=").concat(r),method:"get"})}const g=(e,t)=>new Promise(((a,o)=>{let i={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};console.log(i.url),r.request(i).then((e=>{a(e)})).catch((e=>{o(e)}))})),f=(e,t,a)=>new Promise(((o,i)=>{let l={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(l).then((e=>{o(e)})).catch((e=>{i(e)}))}));async function v(e){return o.Z.fetchData({url:"/positionmaster/drop/",method:"get",data:e})}async function y(e){return o.Z.fetchData({url:"/spotpositiontypemaster/drop/",method:"get",data:e})}async function C(e){return o.Z.fetchData({url:"/cancelremarkmaster/",method:"get",data:e})}const x=(e,t)=>fetch(n.Z.apiPrefix+"/cancelremarkmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})}),S=(e,t)=>fetch(n.Z.apiPrefix+"/cancelremarkmaster/".concat(e.CancelRemarkCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})});async function D(e){return o.Z.fetchData({url:"/yearmaster/",method:"get",data:e})}const b=(e,t)=>fetch(n.Z.apiPrefix+"/yearmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})}),j=(e,t)=>fetch(n.Z.apiPrefix+"/yearmaster/".concat(e.Yearcode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})});async function N(e){return o.Z.fetchData({url:"/taxmaster/",method:"get",data:e})}async function T(e){return o.Z.fetchData({url:"/taxmaster/",method:"post",data:e})}async function k(e,t){return o.Z.fetchData({url:"/taxmaster/".concat(t),method:"put",data:e})}const w=(e,t,a)=>{try{return o.Z.fetchData({method:"get",url:"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&traficmonth=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(n){throw new Error(n)}},B=(e,t,a,n)=>{try{return o.Z.fetchData({method:"get",url:"/trafficdayclose/asperfromto/?LocationCode=".concat(a.LocationCode,"&ChannelCode=").concat(a.ChannelCode,"&fromdate=").concat(e,"&todate=").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})}catch(r){throw new Error(r)}},I=async(e,t,a)=>{try{return new Promise(((o,i)=>{let l={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};r.request(l).then((e=>{o(e)})).catch((e=>{i(e)}))}))}catch(o){throw o}},A=(e,t,a)=>{try{return o.Z.fetchData({method:"get",url:"/bookingmaster/getbookingbyclient/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&ClientCode=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(n){throw new Error(n)}},O=(e,t)=>{try{return o.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivity/?BookingNumber=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},L=(e,t,a)=>{try{return console.log(e),o.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivitybydate?BookingNumber=".concat(t,"&ChangeType=").concat(e.type,"&ChangeOn=").concat(e.dateTime,"&ChangeBy=").concat(e.executerId),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(n){throw new Error(n)}}},17771:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(1413),o=a(2803),r=(a(72791),a(80184));const i=e=>{let{selected:t,setSelected:a,List:i,name:l,handleCommercialTypeChange:s,byagecy:c}=e;return(0,r.jsx)("div",{className:"card flex flex-column align-items-center  h-9",children:(0,r.jsx)(o.Ph,{size:"sm",className:"mb-4 w-full",placeholder:"Select",options:i,value:null!==i?i.filter((e=>e.value==t)):[{value:"",label:"Data Not Found"}].filter((e=>e.value)),onChange:e=>{"CommercialType"!=l&&"NTCTypeCode"!=l||s(e.value),"brand"==l&&a((e=>(0,n.Z)((0,n.Z)({},e),{},{Commercial:[]}))),a((t=>(0,n.Z)((0,n.Z)({},t),{},{epNo:e.end}))),a((t=>(0,n.Z)((0,n.Z)({},t),{},{[l]:e.value}))),c&&c(e.value)}})})}},24347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{VisableColumns:()=>Q,default:()=>J});var n=a(1413),o=a(45987),r=a(2803),i=a(72791),l=a(57689),s=a(34786),c=a(56355),d=a(81320),u=a(60364),m=a(80184);const{Tr:p,Th:h,Td:g,THead:f,TBody:v}=r.iA,y=e=>{let{DealData:t}=e;return(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,m.jsxs)("div",{className:"col-span-1",children:[(0,m.jsx)("span",{style:{fontSize:18,lineHeight:1.5,fontWeight:400,opacity:.8},children:"Agency & Booking"}),(0,m.jsxs)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:400,fontSize:16,lineHeight:1.5},children:[" ",null===t||void 0===t?void 0:t.AgencyName]})," ",(0,m.jsx)(r.Vp,{prefix:!0,prefixClass:"bg-emerald-500",showCloseButton:!1,children:(0,m.jsx)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:400,fontSize:16,lineHeight:1.5},children:null===t||void 0===t?void 0:t.BookingCode})})]}),(0,m.jsxs)("div",{className:"col-span-1",children:[(0,m.jsxs)("span",{style:{fontSize:18,lineHeight:1.5,fontWeight:400,opacity:.8},children:[" ","Advertiser"]}),(0,m.jsxs)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:400,fontSize:16,lineHeight:1.5},children:[" ",null===t||void 0===t?void 0:t.ClientName]})]}),(0,m.jsxs)("div",{className:"col-span-1",children:[(0,m.jsx)("span",{style:{fontSize:17,lineHeight:1.5,fontWeight:400,opacity:.8},children:"Start & End Date"}),(0,m.jsxs)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:500,fontSize:17,lineHeight:1.5},children:[(0,d.FORMATDATE_FOR_EVERY)(new Date(null===t||void 0===t?void 0:t.DealPeriodFromDate))," ,"]}),(0,m.jsx)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:500,fontSize:17,lineHeight:1.5},children:(0,d.FORMATDATE_FOR_EVERY)(new Date(null===t||void 0===t?void 0:t.DealPeriodToDate))})]}),(0,m.jsxs)("div",{className:"col-span-1",children:[(0,m.jsx)("span",{style:{fontSize:17,lineHeight:1.5,fontWeight:400,opacity:.8},children:"Sales Person / Zone"}),(0,m.jsxs)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:500,fontSize:18,lineHeight:1.5},children:[" ",null===t||void 0===t?void 0:t.Emp_FirstName," ",null===t||void 0===t?void 0:t.Emp_LastName]}),(0,m.jsxs)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:500,fontSize:18,lineHeight:1.5},children:[" ",null===t||void 0===t?void 0:t.ZoneName]})]}),(0,m.jsxs)("div",{className:"col-span-1 ",children:[(0,m.jsxs)("span",{style:{fontSize:18,lineHeight:1.5,fontWeight:400,opacity:.8},children:["Amount (",null===t||void 0===t?void 0:t.CurrencyName,")"]}),(0,m.jsxs)("h6",{style:{color:"rgba(255, 255, 255, 0.8)",fontWeight:600,fontSize:34,lineHeight:1.5},children:[null===t||void 0===t?void 0:t.CurrencySymbol," ",null===t||void 0===t?void 0:t.TotalAmount.toLocaleString("en-IN")]})]})]})})},C=e=>{let{DealDataDetails:t,handleCheckboxChange:a,DealData:n,setmyid:o,openDialog:i,Deatils:l,checkedItems:s,IsNTCPage:d}=e;const y=window.location.href.split("#")[1],C=y?y.split("/")[1]:"",x=(0,u.useSelector)((e=>e.locale.selectedChannel));return(0,m.jsx)("div",{className:"mt-5 mb-5",children:(null===t||void 0===t?void 0:t.length)>0&&(0,m.jsxs)(r.iA,{compact:!0,children:[(0,m.jsx)(f,{children:(0,m.jsxs)(p,{children:[!("RoImportDetails"===C)&&(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Action"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Type"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"NTC Type"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Deal Description"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Spot Type"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Week Days "}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Rate"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Total"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Used"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Balance"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Total Amount"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:" Used Amt"}),(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"Balance Amt"}),l.length>0&&(0,m.jsx)(h,{style:{textTransform:"capitalize"},children:"View"})]})}),(0,m.jsx)(v,{children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,m.jsxs)(p,{style:{borderBottom:"1px solid #6d6a6a70"},children:[!("RoImportDetails"===C)&&(0,m.jsx)(g,{children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{style:{height:30,width:5},className:"BorderIwant mr-3 ".concat(4==e.DealLineItemTypeCode?"bg-lime-300":null," ").concat(3==e.DealLineItemTypeCode?"bg-rose-600":null," ").concat(1==e.DealLineItemTypeCode?"bg-teal-300":null," ").concat(5==e.DealLineItemTypeCode?"bg-orange-200":null," ").concat(6==e.DealLineItemTypeCode?"bg-orange-200":null," ").concat(2==e.DealLineItemTypeCode?"bg-cyan-300":null)}),(0,m.jsx)(r.XZ,{disabled:1==d?4!=e.DealLineItemTypeCode:e.ChannelCode!=x.ChannelCode&&4==e.DealLineItemTypeCode,checked:s.some((e=>e.Id===t)),onChange:n=>a(e,n,t)})]})}),(0,m.jsx)(g,{style:{width:30,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textTransform:"capitalize",textAlign:"right"},children:e.DealLineItemTypeName}),(0,m.jsx)(g,{children:e.NTCTypeName?e.NTCTypeName:""}),(0,m.jsxs)(g,{children:[0!=e.TimeBandCode&&e.TimeBandName,0!=e.ContentCode&&e.ContentName]}),(0,m.jsx)(g,{children:e.SpotTypeName}),(0,m.jsx)(g,{children:e.WeekdaysName}),(0,m.jsxs)(g,{children:[null===n||void 0===n?void 0:n.CurrencySymbol,e.Rate.toLocaleString("en-IN")]}),(0,m.jsxs)(g,{children:[0!=e.TotalSpots&&e.TotalSpots+"Spots",0!=e.Seconds&&e.Seconds+"Sec",0!=e.NTCTotalSpots&&e.NTCTotalSpots+"Spots"]}),(0,m.jsx)(g,{children:[5,6].includes(e.DealLineItemTypeCode)?e.ConsumedSpots+"Spots":[1,2,3].includes(e.DealLineItemTypeCode)?e.ConsumedSeconds+"Sec":[4].includes(e.DealLineItemTypeCode)?e.NTCConsumedSpots+"Spots":null}),(0,m.jsx)(g,{children:[5,6].includes(e.DealLineItemTypeCode)?e.BalancedSpots+"Spots":[1,2,3].includes(e.DealLineItemTypeCode)?e.BalancedSeconds+"Sec":[4].includes(e.DealLineItemTypeCode)?e.NTCBalanceSpots+"Spots":null}),(0,m.jsxs)(g,{children:[null===n||void 0===n?void 0:n.CurrencySymbol,e.Amount.toLocaleString("en-IN")]}),(0,m.jsxs)(g,{children:[null===n||void 0===n?void 0:n.CurrencySymbol,e.ConsumedAmount.toLocaleString("en-IN")]}),(0,m.jsxs)(g,{children:[null===n||void 0===n?void 0:n.CurrencySymbol,e.BalancedAmount.toLocaleString("en-IN")]}),l.length>0&&(0,m.jsx)(g,{onClick:()=>{i(e.DealLineItemNo)},className:"cursor-pointer",children:(0,m.jsx)(c.z5B,{size:20})})]},t)))})]})})};var x=a(17771),S=a(28179),D=a(87537),b=a(54748),j=a(84373),N=a(41213);const T=e=>{let{date1:t,date2:a,formState:o,setFormState:l,checkedItems:s,CommercialMasterData:c,setThe_data_I_want_To_Upload:u,trafficDayList:p,generateCustomArray:h}=e;const g=e=>{const t=new Intl.DateTimeFormat("en-US",{day:"2-digit"}).format(e),a=e.toLocaleString("en-US",{month:"short"}).substring(0,3);return"".concat(t,"-").concat(a)},f=e=>{const t=new Intl.DateTimeFormat("en-US",{day:"2-digit"}).format(e),a=e.toLocaleString("en-US",{month:"short"}).substring(0,3),n=e.toLocaleString("en-US",{year:"numeric"});return"".concat(t,"-").concat(a,"-").concat(n)},v=(e,t,a,n)=>{const r={};for(const l in e)if(!l.endsWith("total")&&"Y"!==l[0]){const t=l.split("|");if(t.length>=3){const[a,i,s]=t,c=s.split("-");if(2===c.length){const[t,s]=c;r["".concat(a,"|").concat(i,"|").concat(t,"-").concat(s,"-").concat(n.split("-")[2],"|").concat(o.MID,"|").concat(o.position)]=e[l]}}}for(const o in r){const e=r[o];r[o]="".concat(o,"|").concat(e)}const i=JSON.stringify(r).replace(/[%{}]/g,"");u(i)},y=(e,t,a,n,r,i,l,s,c,u)=>{const{value:m,name:p}=e.target,h=p.split("|").slice(0,2).join("|"),g=C(c,l,i,r);if(""!==m){const e=parseInt(m),a=x(o,t),r=D(o,p);(6===c||5===c||4===c?r+e<=g:a+e*n<=g)?T(p,e,n,h,s,u):(0,d.openNotification)("info",6===c||5===c?"Booking not allowed due to insufficient Spots.":"Booking not allowed due to insufficient balance.")}else k(p,h,s,u)},C=(e,t,a,n)=>4===e?t:5===e||6===e?a:n,x=(e,t)=>Object.keys(e).filter((e=>e[1]===t.toString()&&"Y"===e[0]&&!e.includes("total"))).reduce(((t,a)=>t+e[a].total),0),S=(e,t)=>Object.keys(e).filter((e=>e.startsWith("Y"+t)&&!e.endsWith("|total"))).reduce(((t,a)=>t+e[a].value),0),D=(e,t)=>Object.keys(e).filter((e=>e.startsWith("Y")&&!e.endsWith("|total")&&e!=="Y".concat(t))).reduce(((t,a)=>t+e[a].value),0),T=(e,t,a,o,r,i)=>{l((l=>{const s=(0,n.Z)({},l);s["Y"+e]={value:t,date:i,total:t*a},s[e]=t;const c=S(s,o);return s["".concat(o,"|total")]=c,v(s,r.getFullYear(),0,i),s}))},k=(e,t,a,r)=>{e in o&&l((o=>{const i=(0,n.Z)({},o);delete i["Y"+e],delete i[e];const l=S(i,t);return i["".concat(t,"|total")]=l,v(i,a.getFullYear(),0,r),i}))},w=(0,i.useRef)([]),B=(e,t,a,n)=>{const o=e.target,r=0===o.selectionStart,i=o.selectionStart===o.value.length;switch(e.key){case"ArrowLeft":a>0&&r&&w.current[t][a-1].focus();break;case"ArrowRight":a<n&&i&&w.current[t][a+1].focus();break;case"ArrowUp":t>0&&w.current[t-1][a].focus();break;case"ArrowDown":t<Y&&w.current[t+1][a].focus()}},I=(e,n,r,i,l,s,c,d,u,h)=>{const v=new Date(t),C=new Date(a),x=[];let S=0,D=Math.floor((C.getTime()-v.getTime())/864e5);for(let t=new Date(v);t<=C;t.setDate(t.getDate()+1)){const a=t.getDay(),h=c.some((e=>e.Day===a));if(0!==p.length){if(!p.some((e=>e.date===(0,b.Tk)(t)&&1===e.IsActive)))continue}(a=>{var c;const p="".concat(e,"|").concat(l,"|").concat(g(t).replace(/\s+/g,"-")),v="".concat(g(t).replace(/\s+/g,"-")),C="".concat(f(t).replace(/\s+/g,"-"));x.push((0,m.jsx)("input",{style:{width:45,border:"1px solid rgb(75, 84, 97)",color:"rgb(246, 247, 250)",height:30,borderRadius:".375rem",paddingLeft:2,marginRight:2,backgroundColor:h?"initial":"#5757578c",textAlign:"center"},size:"xs",type:"text",value:(null===(c=o["Y"+p])||void 0===c?void 0:c.value)||"",name:p,label:v,disabled:!h,"data-index":"".concat(u,"-").concat(a),onKeyDown:e=>B(e,u,a,D),ref:e=>{w.current[u]||(w.current[u]=[]),w.current[u][a]=e},onChange:a=>{(0,b.n1)(a.target.value)&&y(a,e,0,s,n,r,i,t,d.DealLineItemTypeCode,C)}},t.getDate()))})(S),S+=1}return x},[A,O]=(0,i.useState)([]),[L,R]=(0,i.useState)(!1),[P,Z]=(0,i.useState)(0),[E,M]=(0,i.useState)(0),[z,_]=(0,i.useState)([]);let F=0,Y=Array.isArray(s)&&Array.isArray(c)?s.length*c.length:[];return(0,i.useEffect)((()=>{const e=new Date(o.datesrange[0]),t=new Date(o.datesrange[1]),a={};s.forEach((n=>{var r;const i="Y".concat(n.DealLineItemNo);a[i]={},null===(r=o.Commercial)||void 0===r||r.forEach((n=>{const r=n.value;a[i][r]=[];((e,t)=>{const a=[],n=new Date(e);for(;n<=t;)a.push(new Date(n)),n.setDate(n.getDate()+1);return a})(e,t).forEach((e=>{const t="".concat(i,"|").concat(r,"|").concat(g(new Date(e)));o[t]?a[i][r].push({[t]:o[t].value}):a[i][r].push({[t]:""})}))}))})),O(a)}),[o]),(0,i.useEffect)((()=>{A&&Object.keys(A).forEach((e=>{Object.keys(A[e]).forEach((t=>{let a="";A[e][t].forEach((e=>{a+=""===e[Object.keys(e)[0]]?"-,":e[Object.keys(e)[0]]+","}));const n=Object.keys(A[e][t][0])[0].split("|")[0][1];(function(e){const t=e.slice(0,2).every((e=>!isNaN(e)&&"-"!==e)),a=e.slice(2).some((e=>!isNaN(e)&&"-"!==e));return t&&!a})(a.split(",").filter((e=>""!==e)))&&(R(!0),Z(t),M(n),_(a.split(",").filter((e=>""!==e&&"-"!==e))))}))}))}),[A]),(0,m.jsxs)("div",{style:{width:"100%",overflow:"scroll"},className:"mt-5",children:[s.map(((e,s)=>(0,m.jsx)("div",{children:(0,m.jsx)(i.Fragment,{children:null===c||void 0===c?void 0:c.map(((c,d)=>{const{DealLineItemNo:p,BalancedSeconds:f,BalancedSpots:v,NTCBalanceSpots:y,weekendsdetail:C,DealLineItemTypeCode:x}=e,S=(0,m.jsxs)("div",{children:[0===s&&0===d&&(0,m.jsxs)("div",{className:"flex",style:{marginTop:6},children:[(0,m.jsx)("p",{style:{width:150,fontSize:"10px"},children:"TimeBand/Program"}),(0,m.jsx)("p",{style:{width:100,fontSize:"10px"},children:"HouseID"}),(0,m.jsx)("p",{style:{width:40,fontSize:"10px"},children:"Dur"}),(0,m.jsx)("p",{style:{width:60,fontSize:"10px"},children:"Spots"}),(0,m.jsx)("p",{style:{width:60,fontSize:"10px"},children:"Total Dur"})]}),(0,m.jsxs)("div",{className:"flex mt-1 items-center",children:[(0,m.jsxs)("p",{style:{width:150,fontSize:"11px",marginTop:2},children:[e.TimeBandName," ",e.ContentName]}),(0,m.jsx)(r.u,{title:c.CommercialCaption,children:(0,m.jsxs)("p",{style:{width:100,fontSize:"11px",marginTop:2},className:"flex items-center",children:[c.VideoID,(0,m.jsx)(j.UYI,{className:"text-gray-200 ml-1 text-xs"})]})}),(0,m.jsx)("p",{style:{width:60,fontSize:"11px",marginTop:2},children:c.DurInSec}),(0,m.jsx)("p",{style:{width:60,fontSize:"11px",marginTop:2},children:o["".concat(p,"|").concat(c.value,"|total")]||"0"}),(0,m.jsx)("p",{style:{width:40,fontSize:"11px",marginTop:2},children:((o["".concat(p,"|").concat(c.value,"|total")]||0)*c.DurInSec).toString()}),(0,m.jsx)("div",{style:{width:70,marginTop:2},children:(0,m.jsx)("div",{className:"flex",children:(0,m.jsx)(r.u,{title:"Reset Pattern",children:(0,m.jsx)(r.zx,{size:"xs",className:"ml-2",variant:"twoTone",icon:(0,m.jsx)(N.Z4w,{}),onClick:()=>{const e=new Date(t),r=new Date(a),i=(0,n.Z)({},o);for(let t=new Date(e),a=0;t<=r;t.setDate(t.getDate()+1),a++){const e=g(t).replace(/\s+/g,"-"),a="".concat(p,"|").concat(c.value,"|").concat(e);delete i[a],delete i["Y".concat(a)],delete i["".concat(p,"|").concat(c.value,"|total")]}const s=((e,t)=>{const a=(0,n.Z)({},e);return Object.keys(a).forEach((e=>{e.startsWith(t)&&delete a[e]})),a})(i,"".concat(p,"|").concat(c.value,"|"));R(!1),Z(0),M(0),_([]),O([]),l(s);const d=h(s).map((e=>{let t=Object.keys(e)[0];return'"'.concat(t,'":"').concat(e[t],'"')})).join(",");u(d)}})})})}),(0,m.jsx)("div",{className:"flex items-center",style:{maxWidth:window.innerWidth-1200,marginTop:2},children:I(p,f,v,y,c.value,c.DurInSec,e.weekendsdetail,e,F).map(((e,t)=>(0,m.jsx)(i.Fragment,{children:(0,m.jsxs)("div",{children:[0===s&&0===d&&(0,m.jsx)("p",{style:{fontSize:"10px"},children:e.props.label}),e]})},t)))})]})]},"".concat(s,"-").concat(d));return F+=1,S}))},s)},s))),(0,m.jsx)("br",{})]})};var k=a(81721),w=a(36064),B=a(33009),I=a(78498),A=a(25579),O=a(4500),L=a(97892),R=a.n(L),P=a(93673),Z=a(54048),E=a(14651),M=a(96361),z=a(9494),_=a(45682),F=a(58617),Y=a(59856);const K=["MID","position","brand","datesrange","BookingRefNumber","Commercial"],{TabNav:U,TabList:V,TabContent:W}=r.mQ,H={groupBy:!0,manageColumns:!0},q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function X(e){return Object.keys(e).filter((e=>e.startsWith("Y"))).map((t=>{let[a,n]=t.split("|"),o=a.substring(1),{date:r,value:i}=e[t];if(i>0&&null!==i&&void 0!==i){let t="".concat(o,"|").concat(n,"|").concat(r,"|").concat(e.MID,"|").concat(e.position);return{[t]:"".concat(t,"|").concat(i)}}return null})).filter(Boolean)}const G=e=>{let{Deatils:t,onDialogClose:a,onDialogOk:n,DealData:o}=e;const i=(0,u.useSelector)((e=>e.auth.session.ChannelSetting));let l=0,s=0;return t.forEach((e=>{l+=(0,d.parseDurationE)(Number(i[0].FramePerSec),e.Duration),s+=e.SpotAmount})),(0,m.jsxs)("div",{className:"flex item-center justify-between",children:[(0,m.jsxs)("div",{className:"flex",children:[" ",(0,m.jsx)("div",{className:"mr-2 w-[150px]",style:{backgroundColor:"rgb(26, 36, 48)",borderColor:"rgb(75, 85, 99)",padding:"0.50rem",borderRadius:"10px"},children:(0,m.jsxs)("div",{className:" w-full",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("p",{children:"Total Amount"}),(0,m.jsx)("p",{className:"dark:text-sky-500 text-xl font-normal",children:null===o||void 0===o?void 0:o.CurrencySymbol})]}),(0,m.jsxs)("h3",{children:[null===o||void 0===o?void 0:o.CurrencySymbol,(0,d.numberToINRFormat)(s)]})]})}),(0,m.jsx)("div",{className:"mr-2 w-[150px]",style:{backgroundColor:"rgb(26, 36, 48)",borderColor:"rgb(75, 85, 99)",padding:"0.50rem",borderRadius:"10px"},children:(0,m.jsxs)("div",{className:" w-full",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("p",{children:"Duration [MIN]"}),(0,m.jsx)("p",{className:"dark:text-sky-500 text-xl font-normal",children:(0,m.jsx)(E.QA_,{size:20,className:"text-rose-700"})})]}),(0,m.jsx)("h3",{className:"m-1",children:Math.round(l/60)})]})}),(0,m.jsx)("div",{className:"mr-2 w-[150px]",style:{backgroundColor:"rgb(26, 36, 48)",borderColor:"rgb(75, 85, 99)",padding:"0.50rem",borderRadius:"10px"},children:(0,m.jsxs)("div",{className:" w-full",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("p",{children:"Spots Count"}),(0,m.jsx)("p",{className:"dark:text-sky-500 text-xl font-normal",children:(0,m.jsx)(E.QA_,{size:20,className:"text-rose-700"})})]}),(0,m.jsx)("h3",{className:"m-1",children:t.length})]})})]}),(0,m.jsxs)("div",{className:"text-right mt-6",children:[(0,m.jsx)(r.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:a,children:"Cancel"}),(0,m.jsx)(r.zx,{variant:"solid",onClick:n,children:"Okay"})]})]})},J=()=>{var e,t,a,p,h;const g=(0,i.useMemo)((()=>[{header:"Commercial",accessorKey:"Commercial"},{header:"Schedule Date",accessorKey:"ScheduleDate"},{header:"Schedule Time",accessorKey:"ScheduleTime"},{header:"Content",accessorKey:"ContentName"},{header:"Break",accessorKey:"BreakNumber"},{header:"Position",accessorKey:"PositionNumber"},{header:"Spot",accessorKey:"SpotPosition"},{header:"Time Band",accessorKey:"TimeBand"},{header:"Spot Type",accessorKey:"SpotType"},{header:"Commercial",accessorKey:"Commercial"},{header:"VideoID",accessorKey:"VideoID"},{header:"Duration",accessorKey:"Duration"},{header:"Spot Rate",accessorKey:"SpotRate",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsxs)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:[null===ae||void 0===ae?void 0:ae.CurrencySymbol," ",t.SpotRate.toLocaleString("en-IN")]})})}},{header:"Spot Amount",accessorKey:"SpotAmount",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsxs)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:[null===ae||void 0===ae?void 0:ae.CurrencySymbol," ",t.SpotAmount.toLocaleString("en-IN")]})})}},{header:"Status",accessorKey:"BookingStatus"},{header:"SpotStatus",accessorKey:"SpotStatus"}]),[]),f=(0,i.useMemo)((()=>[{header:"Schedule Date",accessorKey:"ScheduleDate"},{header:"Commercial Caption",accessorKey:"CommercialCaption"},{header:"Commercial Dur",accessorKey:"CommercialDuration"},{header:"Amount",accessorKey:"TotalAmount",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsxs)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:[null===ae||void 0===ae?void 0:ae.CurrencySymbol,(0,d.numberToINRFormat)(Number(t.TotalAmount||t.TotalSpot*t.Rate))]})})}},{header:"Schedule Spot",accessorKey:"AddedSpotCount",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsx)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:t.AddedSpotCount||t.SpotCount})})}},{header:"Total Spot",accessorKey:"SpotCount",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsx)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:t.SpotCount||t.TotalSpot})})}},{header:"Remark",accessorKey:"Remark"}]),[]),v=(0,i.useMemo)((()=>[{header:"Schedule Date",accessorKey:"ScheduleDate"},{header:"Schedule Time",accessorKey:"ScheduleTime"},{header:"Content Name",accessorKey:"ContentName"},{header:"Commercial Caption",accessorKey:"CommercialCaption"},{header:"Brk",accessorKey:"BreakNumber"},{header:"BookingStatus",accessorKey:"BookingStatus"},{header:"SpotStatus",accessorKey:"SpotStatus"},{header:"TimeBand",accessorKey:"TimeBandName"},{header:"House ID",accessorKey:"HouseID"},{header:"Spot Rate",accessorKey:"SpotRate",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsxs)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:[null===ae||void 0===ae?void 0:ae.CurrencySymbol,(0,d.numberToINRFormat)(Number(t.SpotRate))]})})}},{header:"Spot Amount",accessorKey:"SpotAmount",cell:e=>{const t=e.row.original;return(0,m.jsx)("div",{className:"flex items-center",children:(0,m.jsxs)("span",{className:"ml-2 rtl:mr-2 flex items-center",children:[null===ae||void 0===ae?void 0:ae.CurrencySymbol,(0,d.numberToINRFormat)(Number(t.SpotAmount))]})})}},{header:"Billed",accessorKey:"IsBilled"}]),[]),j=window.location.href.split("#")[1],N=j?j.split("/")[1]:"",[L,J]=(0,i.useState)("tab1"),Q="RoImportDetails"===N||"BookingDetails"===N?0:1,{Content:$}=(0,u.useSelector)((e=>e.base.common)),ee=(0,u.useSelector)((e=>e.locale.selectedChannel)),{DealDataDetails:te,DealData:ae}=(0,u.useSelector)((e=>e.auth.user));console.log(te);const ne=R()(),oe=R()(null===ae||void 0===ae?void 0:ae.DealPeriodFromDate),re=R()(null===ae||void 0===ae?void 0:ae.DealPeriodToDate),[ie,le]=(0,i.useState)(),[se,ce]=(0,i.useState)([]),[de,ue]=(0,i.useState)([]),[me,pe]=(0,i.useState)(),[he,ge]=(0,i.useState)($||[]),[fe,ve]=(0,i.useState)(g),[ye,Ce]=(0,i.useState)([]),[xe,Se]=(0,i.useState)([]),[De,be]=(0,i.useState)([]),[je,Ne]=(0,i.useState)([]),[Te,ke]=(0,i.useState)(!1),[we,Be]=(0,i.useState)(!1),[Ie,Ae]=(0,i.useState)(!1),[Oe,Le]=(0,i.useState)(!1),[Re,Pe]=(0,i.useState)([]),[Ze,Ee]=(0,i.useState)([]),[Me,ze]=(0,i.useState)([]),[_e,Fe]=(0,i.useState)([]),[Ye,Ke]=(0,i.useState)([]),[Ue,Ve]=(0,i.useState)([]),[We,He]=(0,i.useState)([]),[qe,Xe]=(0,i.useState)([]),[Ge,Je]=(0,i.useState)(""),[Qe,$e]=(0,i.useState)([null,null]),[et,tt]=(0,i.useState)(!1),[at,nt]=(0,i.useState)({MID:2,position:3,brand:null===$||void 0===$||null===(e=$.BrandMaster)||void 0===e?void 0:e.BrandCode,datesrange:[],Commercial:[],date:new Date,BookingRefNumber:null!==$&&void 0!==$&&$.BookingRefNumber?null===$||void 0===$?void 0:$.BookingRefNumber:""}),[ot,rt]=(0,i.useState)({BONUS:0,PAID:0,Drop:0,Cancelled:0,spotAmountSum:0,lengthof:0}),[it,lt]=(0,i.useState)(!1),[st,ct]=(0,i.useState)([]),dt=ne.isAfter(oe.startOf("month"))&&ne.isBefore(re.endOf("month"))?ne.startOf("month").toDate():re.toDate();(0,i.useEffect)((()=>{le(Q),null!==ae&&void 0!==ae&&ae.DealPeriodFromDate&&(async()=>{const e=await(0,S.D_)(null===ae||void 0===ae?void 0:ae.DealPeriodFromDate,null===ae||void 0===ae?void 0:ae.DealPeriodToDate,ee,Nt);204!=e.status?Ne(e.data):Ne([])})()}),[Q,ae]);const ut=(0,l.s0)();(0,i.useEffect)((()=>{var e,t,a;null!==(e=$.Channel)&&void 0!==e&&e.ChannelCode&&((null===(t=$.Channel)||void 0===t?void 0:t.ChannelCode)==ee.ChannelCode&&(null===(a=$.locations)||void 0===a?void 0:a.LocationCode)==ee.LocationCode||ut("RoImportDetails"===N?"/RoImport":"BookingDetails"===N?"/SpotBooking":"/NtcSpotBooking"))}),[ee]);const[mt,pt]=(0,i.useState)();(0,i.useEffect)((()=>{(async e=>{const t=await(0,A.Uy)("GetBookingDetail",null===$||void 0===$?void 0:$.BookingNumber),a=t.data.filter((e=>"BONUS"===e.SpotType.toUpperCase())).length,n=t.data.filter((e=>"PAID"!==e.SpotType.toUpperCase()||!mt||e.DealLineItemNo===mt)).length,o=t.data.filter((e=>"E"===e.BookingStatus.toUpperCase())).length,r=t.data.filter((e=>"C"===e.BookingStatus.toUpperCase())).length,i=t.data.filter((e=>!mt||e.DealLineItemNo===mt)).reduce(((e,t)=>(t.BookingStatus&&(e.bookingStatusCount++,e.spotAmountSum+=Number(t.SpotRate)*Number(function(e){const[t,a,n,o]=e.split(":").map(Number);return 3600*t+60*a+n}(t.Duration))),e)),{bookingStatusCount:0,spotAmountSum:0});rt({BONUS:a,PAID:n,Drop:o,Cancelled:r,spotAmountSum:null===i||void 0===i?void 0:i.spotAmountSum,lengthof:t.data.filter((e=>!mt||e.DealLineItemNo===mt)).length}),yt(t.data),jt(t.data)})()}),[$,mt]);(0,i.useEffect)((()=>{(async e=>{const t=(await(0,S.Sd)(void 0)).data.map((e=>({value:e.PositionCode,label:e.PositionName})));be(t)})(),(async e=>{const t=(await(0,S.qm)(void 0)).data.map((e=>({value:e.SpotPositionTypeCode,label:e.SpotPositionTypeName})));Pe(t)})(),(async e=>{let t={LocationCode:ee.LocationCode,ChannelCode:ee.ChannelCode};const a=(await(0,I.Q)(t,"%20")).data.map((e=>({value:e.DealNumber,label:e.DealCode+" | "+e.ClientName+" | "+e.AgencyName+" ["+(0,d.formatDateToDDMMMYYYY)(e.DealPeriodFromDate)+" To "+(0,d.formatDateToDDMMMYYYY)(e.DealPeriodToDate)+"] "})));ze(a)})()}),[]),(0,i.useEffect)((()=>{(async e=>{try{const e=await(0,s.Bw)(null===ae||void 0===ae?void 0:ae.ClientCode);if(200==e.status){const t=""!=e.data?e.data.map((e=>({value:e.BrandMaster.BrandCode,label:e.BrandMaster.BrandName}))):[];Se(t)}}catch(t){404==t.response.status&&(0,d.openNotification)("warning","Brand Not Found"),500==t.response.status&&(0,d.openNotification)("danger","Server Error.")}})()}),[null===ae||void 0===ae?void 0:ae.ClientCode]),(0,i.useEffect)((()=>{null!==ae&&void 0!==ae&&ae.ClientCode&&null!==at&&void 0!==at&&at.brand&&(Ee([]),(async()=>{const e=await(0,S.h)(at.brand,null===ae||void 0===ae?void 0:ae.ClientCode,ee.LocationCode,ee.ChannelCode,ie);if(204==e.status)return void Ee([]);const t=e.data.filter((e=>{const t=e.StartDate?new Date(e.StartDate):null,a=e.KillDate?new Date(e.KillDate):null,n=new Date(at.datesrange[0]),o=new Date(at.datesrange[1]);return!(t&&t>n)&&!(a&&a<o)})).map((e=>{let t={};return t.label="[".concat(e.VideoID,"] ").concat(e.CommercialCaption),t.value=e.CommercialCode,t.CommercialCaption=e.CommercialCaption,t.DurInSec=e.DurInSec,t.VideoID=e.VideoID,t}));Ee(t)})())}),[null===ae||void 0===ae?void 0:ae.ClientCode,at.brand]);const ht=(0,u.useDispatch)();(0,i.useEffect)((()=>{ht((0,O.XZ)([])),ht((0,O.mi)([])),ht((0,w.rh)(["","RoImportDetails"===N?"RO Import":"BookingDetails"===N?"Spot Booking":"Spot NTC Booking"]));const e=document.getElementsByClassName("Gbox19")[0],t=document.getElementsByClassName("Gbox10")[0],a=document.getElementsByClassName("Gbox2")[0];return a.style.display="block",t.style.display="flex",e.style.display="none",()=>{a.style.display="none",t.style.display="none",e.style.display="flex"}}),[]),(0,i.useEffect)((()=>{Object.keys(he).length>0?((async e=>{try{const e=await(0,A.hu)(he.value);ht((0,O.XZ)(e.data))}catch(t){}})(),(async e=>{try{const e=await(0,A.U$)(he.value);ht((0,O.mi)(e.data))}catch(t){}})()):(ht((0,O.XZ)({})),ht((0,O.mi)([])))}),[he]);const gt=e=>{pt(e),ke(!0)},ft=e=>{ke(!1)},[vt,yt]=(0,i.useState)([]),[Ct,xt]=(0,i.useState)([]),[St,Dt]=(0,i.useState)([]);(0,i.useEffect)((()=>{if(Ae(!0),mt){const e=("Y"!==mt?vt.filter((e=>e.DealLineItemNo===mt)):vt).map((e=>(0,n.Z)((0,n.Z)({},e),{},{ScheduleDate:(0,d.FORMATDATE_FOR_EVERY)(null===e||void 0===e?void 0:e.ScheduleDate)})));Dt(e)}Ae(!1)}),[mt,vt]);const[bt,jt]=(0,i.useState)([]),Nt=(0,u.useSelector)((e=>e.auth.session.token)),[Tt,kt]=(0,i.useState)(!1),[wt,Bt]=(0,i.useState)(""),[It,At]=(0,i.useState)(""),[Ot,Lt]=(0,i.useState)({}),Rt=(0,d.generateMultiYearMonthOptions)(new Date(null===ae||void 0===ae?void 0:ae.DealPeriodFromDate),new Date(null===ae||void 0===ae?void 0:ae.DealPeriodToDate));function Pt(e){return e.reduce(((e,t)=>e+Number(t.AddedSpotCount||t.TotalSpot)),0)}return(0,m.jsxs)(r.Zb,{header:(0,m.jsx)(M.Z,{Component:"Booking Master"}),children:[(0,m.jsxs)(k.W2,{className:"h-100",children:[(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsx)("div",{children:(0,m.jsx)("div",{className:"",children:(0,m.jsxs)("div",{className:"m-2 ",children:[(0,m.jsx)(B.Z,{setCheckedItems:Ce,SelectedItem:he,setSelectedItem:ge,data:Me,placeholder:"Search Deal Here...",DealData:ae,length:null===me||void 0===me?void 0:me.length,setFormState:nt,setThe_data_I_want_To_Upload:pe,InputValue:wt,setInputValue:Bt,Deatils:vt}),null!==ae&&void 0!==ae&&ae.DealNumber?(0,m.jsx)(y,{DealData:ae,onCollapse:()=>{lt(!it)},collapse:it}):null]})})}),(0,m.jsxs)("div",{className:"flex justify-end items-center",children:[(null===te||void 0===te?void 0:te.length)>0?(0,m.jsxs)("div",{className:"flex justify-end items-center",children:[(0,m.jsx)("div",{className:"mr-2",children:(0,m.jsxs)("div",{children:[(0,m.jsx)(r.XZ,{className:"mr-4 lbale",checked:Tt,onChange:kt,name:"IsMakeGoodRO",style:{marginTop:"-10px"},children:(0,m.jsx)("div",{children:(0,m.jsx)("p",{className:" lbale",style:{marginTop:"-10px"},children:"Is MakeGood RO"})})}),(0,m.jsx)("p",{className:"font-medium text-[12px] text-[red]",children:"(Check for RO Re-airing )"})]})}),"RoImportDetails"===N&&(0,m.jsxs)("div",{className:"mr-4",children:[(0,m.jsxs)("p",{className:"lbale",children:["Select Month ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsx)(r.Ph,{placeholder:"Please Select Month",options:Rt,onChange:e=>Lt(e.value)})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"lbale",children:["Booking Ref Number ",(0,m.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,m.jsx)(r.II,{value:null===at||void 0===at?void 0:at.BookingRefNumber,size:"sm",maxLength:"20",onChange:e=>{/^[a-zA-Z0-9@_-]*$/.test(e.target.value)&&nt((t=>(0,n.Z)((0,n.Z)({},t),{},{BookingRefNumber:e.target.value})))}})]})]}):null,vt.length>0&&(0,m.jsx)("div",{className:"mt-8 ml-2",children:(0,m.jsx)(r.zx,{variant:"solid",onClick:()=>gt("Y"),children:"Show Booking"})})]}),(0,m.jsx)("div",{children:he?(0,m.jsx)(C,{DealData:ae,DealDataDetails:te,handleCheckboxChange:(e,t,a)=>{e.BalancedSeconds>0||e.NTCBalanceSpots>0||e.BalancedSpots>0?Ce(t?t=>[...t,(0,n.Z)((0,n.Z)({},e),{},{Id:a})]:e=>e.filter((e=>e.Id!==a))):((0,d.openNotification)("warning","Over Booking Not Allowed"),Ce([]))},setmyid:pt,openDialog:gt,Deatils:vt,checkedItems:ye,IsNTCPage:ie}):null}),"RoImportDetails"===N&&he.value&&(0,m.jsxs)("div",{children:[(0,m.jsx)(r.gq,{beforeUpload:async(e,t)=>{if(t.length>=1)return"You can only upload ".concat(1," file(s)");const a=e[0];if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(a.type))return"Please upload an XLSX file!";At(a)},uploadLimit:1,draggable:!0}),(0,m.jsx)(r.zx,{onClick:()=>(async()=>{if(It.type)if(Ot[0]&&null!==at&&void 0!==at&&at.BookingRefNumber)try{const e={Accept:"*/*",Authorization:"Bearer ".concat(Nt)},t=new FormData,a=new FileReader;a.onload=async a=>{const o=a.target.result,r=new Blob([o],{type:It.type});t.append("file",r,It.name);try{Ae(!0);const a=await fetch("".concat(Z.Z.apiPrefix,"/spotschedule/USP_SA_RO_SpotSchedule_import/?DealNumber=").concat(he.value,"&LocationCode=").concat(ee.LocationCode,"&ChannelCode=").concat(ee.ChannelCode,"&month=").concat(Ot,"&IsMakeGoodRO=").concat(Tt?1:0,"&BookingNumber=".concat(null!==$&&void 0!==$&&$.BookingNumber?null===$||void 0===$?void 0:$.BookingNumber:0),"&BookingRefNumber=").concat(null===at||void 0===at?void 0:at.BookingRefNumber,"&IsNTC=").concat(ie),{method:"POST",body:t,headers:e}),o=await a.json();if(204===a.status)Ae(!1),(0,d.openNotification)("warning","Data Already Exist");else if(200===a.status){(0,d.openNotification)("success","Ro Imported Successfully"),Be(!0),Ae(!1);const e=o.map((e=>(0,n.Z)((0,n.Z)({},e),{},{ScheduleDate:(0,d.FORMATDATE_FOR_EVERY)(null===e||void 0===e?void 0:e.ScheduleDate)})));ct(e)}else Ae(!1),(0,d.openNotification)("danger","Unexpected Response: ".concat(a.status))}catch(i){Ae(!1),console.error("Error during API call:",i),(0,d.openNotification)("danger","Server Error during file upload.")}},a.readAsArrayBuffer(It),Ae(!1)}catch(e){console.error("Error during file processing:",e),(0,d.openNotification)("danger","File processing failed.")}else(0,d.openNotification)("warning","Please Select Month And Booking Ref Number "),Ae(!1);else(0,d.openNotification)("warning","Please Select Ro Import File"),Ae(!1);Ae(!1)})(),variant:"solid",type:"button",size:"sm",icon:(0,m.jsx)(c.ZNz,{}),children:"Schedule Spot"})]}),ye.length>0&&("BookingDetails"===N||"NTCBookingDetails"===N)?(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,m.jsxs)("div",{className:" col-span-1",children:[(0,m.jsx)("p",{className:"lbale",children:"Booking Date"}),(0,m.jsx)(r.Mt,{value:at.date,inputFormat:"DD-MM-YYYY",defaultMonth:R()(new Date).subtract(0,"day").startOf("day").toDate(),minDate:R()(new Date(null===ae||void 0===ae?void 0:ae.DealPeriodFromDate)).subtract(0,"day").startOf("day").toDate(),maxDate:R()(new Date(null===ae||void 0===ae?void 0:ae.DealPeriodToDate)).subtract(0,"day").startOf("day").toDate(),onChange:e=>{nt((t=>(0,n.Z)((0,n.Z)({},t),{},{date:e})))}})]}),(0,m.jsxs)("div",{className:" col-span-1",children:[(0,m.jsx)("p",{className:"lbale",children:"Date Range"}),(0,m.jsx)(D.Z,{placeholder:"Select date range",defaultMonth:dt,inputFormat:"DD-MM-YYYY",minDate:0==je.length&&R()(new Date(null===ae||void 0===ae?void 0:ae.DealPeriodFromDate).getDate()>(new Date).getDate()?new Date(null===ae||void 0===ae?void 0:ae.DealPeriodFromDate):new Date).subtract(0,"day").startOf("day").toDate(),maxDate:0==je.length&&R()(new Date(null===ae||void 0===ae?void 0:ae.DealPeriodToDate)).subtract(0,"day").startOf("day").toDate(),disableDate:e=>{if(0!==je.length){const t=R()(e).format("YYYY-MM-DD"),a=je.find((e=>e.date===t));return!a||1!==a.IsActive}},onChange:e=>{var t;nt({MID:2,position:3,brand:null===$||void 0===$||null===(t=$.BrandMaster)||void 0===t?void 0:t.BrandCode,datesrange:[],BookingRefNumber:null!==$&&void 0!==$&&$.BookingRefNumber?null===$||void 0===$?void 0:$.BookingRefNumber:""}),nt((t=>(0,n.Z)((0,n.Z)({},t),{},{datesrange:e})))}})]}),(0,m.jsxs)("div",{className:" col-span-2",children:[!(null!==(t=$.BrandMaster)&&void 0!==t&&t.BrandCode)&&at.datesrange[0]&&at.datesrange[1]&&(0,m.jsxs)("div",{children:[" ",(0,m.jsx)("p",{className:"lbale",children:"Brand "}),(0,m.jsx)(x.Z,{selected:at.brand,setSelected:nt,List:xe,name:"brand"})]}),(null===(a=$.BrandMaster)||void 0===a?void 0:a.BrandCode)&&(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"lbale",children:"Brand"}),(0,m.jsx)(r.II,{value:null===(p=$.BrandMaster)||void 0===p?void 0:p.BrandName,disabled:!0})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,m.jsxs)("div",{className:" col-span-1",children:[(0,m.jsx)("p",{className:"lbale",children:" MID-OCL-CCL"}),(0,m.jsx)(x.Z,{selected:at.MID,setSelected:nt,List:Re,name:"MID"})]}),(0,m.jsxs)("div",{className:" col-span-1",children:[(0,m.jsx)("p",{className:"lbale",children:" Position"}),(0,m.jsx)(x.Z,{selected:at.position,setSelected:nt,List:De,name:"position"})]}),(0,m.jsxs)("div",{className:" ".concat(at.brand?"col-span-2":"hidden"," "),children:[(0,m.jsx)("p",{className:"lbale flex",children:"Commercial"}),(0,m.jsx)(r.Ph,{isMulti:!0,options:Ze,value:at.Commercial,onChange:e=>{nt((t=>{const a=Object.entries(t).reduce(((t,a)=>{let[n,o]=a;if(["MID","position","brand","datesrange","BookingRefNumber","Commercial"].includes(n))t[n]=o;else{const[,a]=n.split("|");e.some((e=>e.value===Number(a)))&&(t[n]=o)}return t}),{});return(0,n.Z)((0,n.Z)({},a),{},{Commercial:e})}));try{const t=JSON.parse("{".concat(me,"}")),a=Object.entries(t).reduce(((t,a)=>{let[n,o]=a;const[,r]=n.split("|");return e.some((e=>e.value===Number(r)))&&(t[n]=o),t}),{});pe(JSON.stringify(a,null,2).replace(/^{|}$/g,"").trim())}catch(t){console.error("Error parsing JSON:",t)}}})]}),(0,m.jsx)("div",{className:" ".concat(at.brand&&0!=(null===(h=at.Commercial)||void 0===h?void 0:h.length)?"col-span-1":"hidden"," "),children:(0,m.jsx)(r.Lt,{title:(0,m.jsx)(r.zx,{className:"mt-5",size:"sm",variant:"solid",children:"Copy Pattern"}),className:"mr-2",placement:"top-end",children:(0,m.jsxs)("div",{className:"p-5 ",children:[(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsxs)("h6",{children:["Select Date Range ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)(D.Z,{size:"sm",inputFormat:"DD-MM-YYYY",minDate:R()(new Date(null===at||void 0===at?void 0:at.datesrange[0]).getDate()>(new Date).getDate()?new Date(null===at||void 0===at?void 0:at.datesrange[0]):new Date).subtract(0,"day").startOf("day").toDate(),maxDate:R()(new Date(null===at||void 0===at?void 0:at.datesrange[1])).subtract(0,"day").startOf("day").toDate(),value:Qe,onChange:e=>{$e(e)}})]}),(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsx)("h6",{children:"Select Days "}),(0,m.jsxs)(r.XZ.Group,{value:Ye,onChange:e=>{Ke(e)},children:[(0,m.jsx)(r.XZ,{value:"Sunday",children:"Sun "}),(0,m.jsx)(r.XZ,{value:"Monday",children:"Mon"}),(0,m.jsx)(r.XZ,{value:"Tuesday",children:"Tue"}),(0,m.jsx)(r.XZ,{value:"Wednesday",children:"Wed"}),(0,m.jsx)(r.XZ,{value:"Thursday",children:"Thu"}),(0,m.jsx)(r.XZ,{value:"Friday",children:"Fri"}),(0,m.jsx)(r.XZ,{value:"Saturday",children:"Sat"})]})]}),(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsxs)("h6",{children:["Select DealLine Line ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)(r.XZ.Group,{vertical:!0,value:_e,onChange:e=>{Fe(e),Ve((t=>{const a=t.filter((t=>e.includes(t.DealLineItemNo))),n=te.filter((t=>e.includes(t.DealLineItemNo)&&!a.some((e=>e.DealLineItemNo===t.DealLineItemNo))));return[...a,...n]}))},children:ye.map(((e,t)=>(0,m.jsxs)(r.XZ,{value:e.DealLineItemNo,children:[" ",0!=e.TimeBandCode&&e.TimeBandName,0!=e.ContentCode&&e.ContentName," "]})))})]}),(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsx)("h6",{children:" Alternate Days "}),(0,m.jsx)(r.XZ,{checked:et,onChange:tt,children:"Alternate Days"})]}),(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsxs)("h6",{children:["Select Commercial ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)(r.XZ.Group,{vertical:!0,value:qe,onChange:e=>{Xe(e),He((t=>{const a=t.filter((t=>e.includes(t.value))),n=null===at||void 0===at?void 0:at.Commercial.filter((t=>e.includes(t.value)&&!a.some((e=>{var a;return(null===(a=e[0])||void 0===a?void 0:a.value)===t.value}))));return[...a,...n]}))},children:(null===at||void 0===at?void 0:at.Commercial)&&at.Commercial.map(((e,t)=>(0,m.jsxs)(r.XZ,{value:e.value,children:[e.CommercialCaption," "]})))})]}),(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsxs)("h6",{children:["Select Value ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)(r.II,{size:"sm",value:Ge,onChange:e=>{Je(Number(e.target.value))}})]}),(0,m.jsx)(r.zx,{size:"xs",variant:"solid",onClick:()=>{if(0!=_e.length&&0!=qe.length&&null!=Qe[0]&&null!=Qe[1]&&Ge){const{MID:e,position:t,brand:a,datesrange:r,BookingRefNumber:i,Commercial:l}=at,s=(0,o.Z)(at,K),c=((e,t)=>{const a=[];for(;e<=t;)a.push(e.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-")),e.setDate(e.getDate()+1);return a})(Qe[0],Qe[1]),u=(0,n.Z)({},s);Ue.forEach((e=>{let t=0,a=[];4===e.DealLineItemTypeCode||5===e.DealLineItemTypeCode||6===e.DealLineItemTypeCode?a=e.weekendsdetail||[]:2!==e.DealLineItemTypeCode&&1!==e.DealLineItemTypeCode||(a=e.weekendsdetail||[]);const n=a.map((e=>q[e.Day]));We.forEach((a=>{for(let o=0;o<c.length;o++){const r=new Date(c[o]),i=r.toLocaleString("en-GB",{weekday:"long"}),l=n.includes(i),s=!(Ye.length>0)||Ye.includes(i),d=!l||Ye.length>0&&!s,m=et&&o%2!==0,p=r.toLocaleDateString("en-GB",{day:"2-digit",month:"short"}).replace(/ /g,"-"),h="".concat(e.DealLineItemNo,"|").concat(a.value,"|").concat(p),g="Y".concat(e.DealLineItemNo,"|").concat(a.value,"|").concat(p);if(m||d)u[h]=0,u[g]={value:0,date:r.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-"),total:0};else{const n=4===e.DealLineItemTypeCode||5===e.DealLineItemTypeCode||6===e.DealLineItemTypeCode?Ge:(2===e.DealLineItemTypeCode||e.DealLineItemTypeCode,Ge*a.DurInSec),o=t+n,i=4===e.DealLineItemTypeCode?e.NTCBalanceSpots:5===e.DealLineItemTypeCode||6===e.DealLineItemTypeCode?e.BalancedSpots:2===e.DealLineItemTypeCode||1===e.DealLineItemTypeCode?e.BalancedSeconds:0;console.log(o>i),o>i?(u[h]=0,u[g]={value:0,date:r.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-"),total:0}):(u[h]=Ge,u[g]={value:Ge,date:r.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-"),total:n},t=o)}}}))}));const m=Object.fromEntries(Object.entries(u).filter((e=>{let[t]=e;return!t.includes("total")})));function p(e){const t={};return Object.keys(e).forEach((a=>{const n=a.replace(/^Y/,"").split("|").slice(0,2).join("|")+"|total";"object"===typeof e[a]&&null!==e[a]&&(t[n]||(t[n]=0),t[n]+=e[a].value)})),t}const h=p(m);nt((0,n.Z)((0,n.Z)({MID:e,position:t,brand:a,datesrange:r,BookingRefNumber:i,Commercial:l},h),m));const g=X((0,n.Z)((0,n.Z)({MID:e,position:t,brand:a,datesrange:r,BookingRefNumber:i,Commercial:l},h),m)).map((e=>{let t=Object.keys(e)[0];return'"'.concat(t,'":"').concat(e[t],'"')})).join(",");console.log(g),pe(g),$e({})}else(0,d.openNotification)("warning","Please Select All Field")},children:"Apply"})]})})})]})," "]}):null,((null===at||void 0===at?void 0:at.datesrange[0])||(null===at||void 0===at?void 0:at.datesrange[1]))&&(0,m.jsx)("div",{children:(0,m.jsx)(T,{date1:null===at||void 0===at?void 0:at.datesrange[0],date2:null===at||void 0===at?void 0:at.datesrange[1],formState:at,setFormState:nt,checkedItems:ye,CommercialMasterData:at.Commercial,setThe_data_I_want_To_Upload:pe,IsNTCPage:ie,trafficDayList:je,generateCustomArray:X})}),(0,m.jsx)(k.gi,{className:"-mx-8 px-8 flex items-center justify-between py-4 pt-2 pb-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,m.jsxs)("div",{className:"md:flex items-center",children:[((null===at||void 0===at?void 0:at.datesrange[0])||(null===at||void 0===at?void 0:at.datesrange[1]))&&(0,m.jsx)(r.zx,{disabled:Oe,icon:(0,m.jsx)(c.ZNz,{}),onClick:()=>{null!==ae&&void 0!==ae&&ae.ChannelCode?(async e=>{if(""!=(null===at||void 0===at?void 0:at.BookingRefNumber))try{Ae(!0),Le(!0);const e=await(0,S.XV)((0,b.Tk)(null===at||void 0===at?void 0:at.datesrange[0]),(0,b.Tk)(null===at||void 0===at?void 0:at.datesrange[1]),null===ae||void 0===ae?void 0:ae.DealNumber,null!==$&&void 0!==$&&$.BookingNumber?null===$||void 0===$?void 0:$.BookingNumber:0,"{".concat(me," } "),null===ae||void 0===ae?void 0:ae.ChannelCode,null===ae||void 0===ae?void 0:ae.LocationCode,Tt,null===at||void 0===at?void 0:at.BookingRefNumber,ie,null===at||void 0===at?void 0:at.brand);if(200==e.status){const t=e.data.map((e=>(0,n.Z)((0,n.Z)({},e),{},{ScheduleDate:(0,d.FORMATDATE_FOR_EVERY)(null===e||void 0===e?void 0:e.ScheduleDate)})));ct(t),Be(!0),Ae(!1)}}catch(t){500==t.response.status&&(Ae(!1),(0,d.openNotification)("danger","Server  Error"),ct([]),xt([]),Be(!1))}else(0,d.openNotification)("warning","Please Select Booking Ref Number   ")})():(Ae(!1),(0,d.openNotification)("warning","Please Select Global Channel"),ct([]))},variant:"solid",type:"submit",size:"sm",children:"Schedule Spot"}),"\xa0",(0,m.jsx)(r.zx,{type:"button",size:"sm",icon:(0,m.jsx)(F.XJf,{}),onClick:()=>ut("RoImportDetails"===N?"/RoImport":"BookingDetails"===N?"/SpotBooking":"/NtcSpotBooking"),children:"Back"})]})})]}),(0,m.jsx)(Y.V,{visible:Te,style:{width:"100vw",height:"100%"},onHide:ft,footer:(0,m.jsx)(G,{Deatils:vt,onDialogOk:e=>{ke(!1)},onDialogClose:ft,DealData:ae}),children:(0,m.jsxs)("div",{className:"flex flex-col h-full ",children:[(0,m.jsx)("h4",{className:"mb-4 ml-5",children:"Show Bookings"}),vt.length>0&&(0,m.jsx)(r.Zb,{className:" overflow-scroll",children:(0,m.jsx)(P.Z,{tableData:St,originalColumns:g,managedColumns:fe,setManagedColumns:ve,tableName:"Booked Spots"})})]})}),(0,m.jsx)(Y.V,{visible:we,style:{width:"100vw",height:"100%"},onHide:()=>Be(!1),footer:(0,m.jsx)("div",{className:" px-6 py-1 bg-gray-100 dark:bg-gray-700 rounded-bl-lg rounded-br-lg",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("div",{className:"flex ",children:[" ",(0,m.jsx)("div",{className:"mr-2",style:{backgroundColor:"rgb(26, 36, 48)",borderColor:"rgb(75, 85, 99)",padding:"0.50rem",borderRadius:"10px"},children:(0,m.jsxs)("div",{className:" w-full",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("p",{children:"Total Amount"}),(0,m.jsx)("p",{className:"dark:text-sky-500 text-xl font-normal",children:null===ae||void 0===ae?void 0:ae.CurrencySymbol})]}),(0,m.jsxs)("h3",{children:[null===ae||void 0===ae?void 0:ae.CurrencySymbol,(0,d.numberToINRFormat)((Zt=st,null===Zt||void 0===Zt?void 0:Zt.reduce(((e,t)=>e+Number((null===t||void 0===t?void 0:t.TotalAmount)||t.Rate*t.SpotCount)),0)))]})]})}),(0,m.jsx)("div",{style:{backgroundColor:"rgb(26, 36, 48)",borderColor:"rgb(75, 85, 99)",padding:"0.50rem",borderRadius:"10px",width:100},children:(0,m.jsxs)("div",{className:" w-full",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("p",{children:"Spots"}),(0,m.jsx)("p",{className:"dark:text-sky-500 text-xl font-normal",children:(0,m.jsx)(E.QA_,{size:20,className:"text-rose-700"})})]}),(0,m.jsx)("h3",{className:"m-1",children:Pt(st)})]})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(r.zx,{className:"ltr:mr-2 rtl:ml-2",onClick:()=>(async e=>{try{Be(!1),await(0,z.apiCallstoreprocedure)("USP_DELETE_TEMPBooking",{par_BookingNumber:e}),ct((t=>t.filter((t=>t.BookingCode!==e))))}catch(t){console.error("Error calling stored procedure:",t)}})(st[0].BookingNumber),children:"Discard"}),(0,m.jsx)(r.zx,{variant:"solid",onClick:async()=>{try{Ae(!0);const t=await(0,A.I6)("USP_SA_RO_BookingSave",null!==$&&void 0!==$&&$.BookingCode?null===$||void 0===$?void 0:$.BookingCode.replace("_unsave",""):st[0].BookingCode.replace("_unsave",""),ie);var e;if(Ae(!1),Be(!1),200==t.status)(0,d.SEND_NOTIFICATION)(8,"Spot Booking for ".concat(ee.ChannelName," is confirmed from ").concat((0,d.FORMATDATE_FOR_EVERY)(at.datesrange[0])," to ").concat((0,d.FORMATDATE_FOR_EVERY)(at.datesrange[1]),", total ").concat(Pt(st)," Bookings Done.\n                          "),"","Spot Booking for ".concat(ee.ChannelName," is confirmed from ").concat((0,d.FORMATDATE_FOR_EVERY)(at.datesrange[0])," to ").concat((0,d.FORMATDATE_FOR_EVERY)(at.datesrange[1]),", total ").concat(Pt(st)," Bookings Done.\n                          "),1,1,"Booking","Booking"),(0,d.openNotification)("success","Data saved!!! ".concat(null===(e=t.data[0])||void 0===e?void 0:e.BookingCode," ")),Ae(!1),pe()}catch(t){500==t.response.status&&((0,d.openNotification)("danger","Server Error."),Ae(!1),Be(!1))}Ae(!1)},children:"Save"})]})]})}),children:(0,m.jsxs)(r.mQ,{value:L,onChange:e=>J(e),children:[(0,m.jsxs)(V,{children:[(0,m.jsx)(U,{value:"tab1",icon:(0,m.jsx)(F.VRM,{}),children:"Booking Spots Summary"}),(0,m.jsx)(U,{value:"tab2",icon:(0,m.jsx)(F.HHH,{}),onClick:async()=>{Ae(!0),J("tab2");try{const e=await(0,z.apiCallstoreprocedure)("GetNewBookSpot",{par_BookingCode:st[0].BookingCode,par_BookingNumber:st[0].BookingNumber});if(console.log(e),200===e.status){Ae(!1);const t=e.data.map((e=>(0,n.Z)((0,n.Z)({},e),{},{ScheduleDate:(0,d.FORMATDATE_FOR_EVERY)(new Date(null===e||void 0===e?void 0:e.ScheduleDate))})));xt(t)}else 204===e.status&&(xt([]),Ae(!1))}catch(e){xt([]),Ae(!1)}},children:"Booking Spots Details"})]}),(0,m.jsxs)("div",{className:"p-4",children:[(0,m.jsx)(W,{value:"tab1",children:(0,m.jsx)("div",{className:"px-3  overflow-scroll",children:(0,m.jsx)(P.Z,{tableData:st,toolbarOptions:H,originalColumns:f,managedColumns:se,setManagedColumns:ce,exportFileName:"Booking Master",columnsToFormatInINR:[],tableName:"Booking Spots Summary"})})}),(0,m.jsx)(W,{value:"tab2",children:(0,m.jsx)("div",{className:"px-3  overflow-scroll",children:(0,m.jsx)(P.Z,{tableData:Ct,toolbarOptions:H,originalColumns:v,managedColumns:de,setManagedColumns:ue,exportFileName:"Booking Master",columnsToFormatInINR:[],tableName:"Booking Spots Details"})})})]})]})})]}),(0,m.jsx)(_.default,{showLoader:Ie})]});var Zt},Q=[{header:"Commercial",name:"Commercial",code:"Commercial",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Schedule Date",name:"ScheduleDate",code:"ScheduleDate",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Schedule Time",name:"ScheduleTime",code:"ScheduleTime",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Content",name:"ContentName",code:"ContentName",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Break",name:"BreakNumber",code:"BreakNumber",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Position",name:"PositionNumber",code:"PositionNumber",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Spot",name:"SpotPosition",code:"SpotPosition",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Time Band",name:"TimeBand",code:"TimeBand",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Spot Type",name:"SpotType",code:"SpotType",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"VideoID",name:"VideoID",code:"VideoID",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Duration",name:"Duration",code:"Duration",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Spot Rate",name:"SpotRate",code:"SpotRate",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Spot Amount",name:"SpotAmount",code:"SpotAmount",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Booking Status",name:"BookingStatus",code:"BookingStatus",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0},{header:"Spot Status",name:"SpotStatus",code:"SpotStatus",width:"auto",ScreenType:"SpotBooking",Sequence:2,isvisible:!0}]},987:(e,t,a)=>{"use strict";a.d(t,{v:()=>i});var n=a(72791),o=a(15036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}var i=n.memo(n.forwardRef((function(e,t){var a=o.A.getPTI(e);return n.createElement("svg",r({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),n.createElement("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"}))})));i.displayName="ChevronDownIcon"},88170:(e,t,a)=>{"use strict";a.d(t,{X:()=>i});var n=a(72791),o=a(15036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}var i=n.memo(n.forwardRef((function(e,t){var a=o.A.getPTI(e);return n.createElement("svg",r({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),n.createElement("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"}))})));i.displayName="ChevronRightIcon"},38718:(e,t,a)=>{"use strict";a.d(t,{q:()=>i});var n=a(72791),o=a(15036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}var i=n.memo(n.forwardRef((function(e,t){var a=o.A.getPTI(e);return n.createElement("svg",r({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),n.createElement("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"}))})));i.displayName="TimesIcon"},79022:(e,t,a)=>{"use strict";a.d(t,{h:()=>u});var n=a(72791),o=a(54164),r=a(87890),i=a(42062),l=a(95854);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r,i,l=[],s=!0,c=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=r.call(a)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d={defaultProps:{__TYPE:"Portal",element:null,appendTo:null,visible:!1,onMounted:null,onUnmounted:null,children:void 0},getProps:function(e){return l.gb.getMergedProps(e,d.defaultProps)},getOtherProps:function(e){return l.gb.getDiffProps(e,d.defaultProps)}},u=n.memo((function(e){var t=d.getProps(e),a=n.useContext(r.Ou),s=c(n.useState(t.visible&&l.p7.isClient()),2),u=s[0],m=s[1];(0,i.nw)((function(){l.p7.isClient()&&!u&&(m(!0),t.onMounted&&t.onMounted())})),(0,i.rf)((function(){t.onMounted&&t.onMounted()}),[u]),(0,i.zq)((function(){t.onUnmounted&&t.onUnmounted()}));var p=t.element||t.children;if(p&&u){var h=t.appendTo||a&&a.appendTo||r.ZP.appendTo||document.body;return"self"===h?p:o.createPortal(p,h)}return null}));u.displayName="Portal"},49411:(e,t,a)=>{"use strict";a.d(t,{H:()=>p});var n=a(72791),o=a(87890),r=a(42062),i=a(95854);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}function d(e,t,a){return(t=c(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=a(85388).V.extend({defaultProps:{__TYPE:"Ripple",children:void 0},css:{styles:"\n@layer primereact {\n    .p-ripple {\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-ink {\n        display: block;\n        position: absolute;\n        background: rgba(255, 255, 255, 0.5);\n        border-radius: 100%;\n        transform: scale(0);\n    }\n    \n    .p-ink-active {\n        animation: ripple 0.4s linear;\n    }\n    \n    .p-ripple-disabled .p-ink {\n        display: none !important;\n    }\n}\n\n@keyframes ripple {\n    100% {\n        opacity: 0;\n        transform: scale(2.5);\n    }\n}\n\n",classes:{root:"p-ink"}},getProps:function(e){return i.gb.getMergedProps(e,u.defaultProps)},getOtherProps:function(e){return i.gb.getDiffProps(e,u.defaultProps)}});function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var p=n.memo(n.forwardRef((function(e,t){var a=n.useRef(null),s=n.useRef(null),c=n.useContext(o.Ou),p=u.getProps(e,c),h={props:p};(0,r.Xj)(u.css.styles,{name:"ripple"});var g=u.setMetaData(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},h)),f=g.ptm,v=g.cx,y=function(){return a.current&&a.current.parentElement},C=function(){s.current&&s.current.addEventListener("pointerdown",x)},x=function(e){var t=i.p7.getOffset(s.current),n=e.pageX-t.left+document.body.scrollTop-i.p7.getWidth(a.current)/2,o=e.pageY-t.top+document.body.scrollLeft-i.p7.getHeight(a.current)/2;S(n,o)},S=function(e,t){a.current&&"none"!==getComputedStyle(a.current,null).display&&(i.p7.removeClass(a.current,"p-ink-active"),D(),a.current.style.top=t+"px",a.current.style.left=e+"px",i.p7.addClass(a.current,"p-ink-active"))},D=function(){if(a.current&&!i.p7.getHeight(a.current)&&!i.p7.getWidth(a.current)){var e=Math.max(i.p7.getOuterWidth(s.current),i.p7.getOuterHeight(s.current));a.current.style.height=e+"px",a.current.style.width=e+"px"}};n.useImperativeHandle(t,(function(){return{props:p,getInk:function(){return a.current},getTarget:function(){return s.current}}})),(0,r.nw)((function(){a.current&&(s.current=y(),D(),C())})),(0,r.rf)((function(){a.current&&!s.current&&(s.current=y(),D(),C())})),(0,r.zq)((function(){a.current&&(s.current=null,s.current&&s.current.removeEventListener("pointerdown",x))}));var b=(0,i.dG)({className:(0,i.AK)(v("root"))},f("root"));return c&&c.ripple||o.ZP.ripple?n.createElement("span",l({role:"presentation",ref:a},b,{onAnimationEnd:function(e){i.p7.removeClass(e.currentTarget,"p-ink-active")}})):null})));p.displayName="Ripple"},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=6591.3086d4a6.chunk.js.map