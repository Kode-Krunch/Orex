"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[7045,5682],{60370:(e,a,t)=>{t.d(a,{Lx:()=>l,br:()=>s,mX:()=>n});const s={TelecastDate:"15-04-2025",ContentName:"Morning News",SlotDuration:30,Season:1,Episode:1},l={Location:"India",Channel:"Channel Name",PromoCaption:"Promo 1",PromoType:"Generic",Duration:"00:00:10:00",Language:"Hindi"},n={"SEG NO":1,"CONTENT NAME":"BHAGYAVIDHATA",TCIN:"10:00:00:00",TCOUT:"10:00:04:24","EPISODE NO":"71","HOUSE ID":"IG001380","Season No":"1"}},45682:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var s=t(2803),l=(t(72791),t(80184));const n=function(e){let{showLoader:a}=e;return(0,l.jsx)(l.Fragment,{children:a?(0,l.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,l.jsx)(s.$j,{size:"3.25rem"})}):(0,l.jsx)(l.Fragment,{})})}},89923:(e,a,t)=>{t.r(a),t.d(a,{default:()=>B});var s=t(1413),l=t(72791),n=t(9494),o=t(54748),r=t(60364),i=t(1682),c=t(60488),d=t(2803),m=t(83659),u=t(81721),x=t(57689),h=t(58617),p=t(19315),y=t(81320),f=t(68014),C=t(80184);const g=function(e){let{name:a,value:t}=e;return(0,C.jsxs)("p",{className:"text-gray-300 text-[15px] flex justify-between",children:[a,(0,C.jsx)("span",{className:"font-semibold text-white",children:t})]})};const k=function(e){let{fileArray:a,arrayCounts:t,typewiseSummary:s,setShowTables:l}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"mb-6",children:[(0,C.jsx)("h5",{className:"mb-2",children:"Summary"}),(0,C.jsx)("div",{className:"flex justify-between p-3 rounded-lg",style:{backgroundColor:"rgb(41 52 69)"},children:t.map(((e,a)=>(0,C.jsxs)("div",{className:"w-full text-center ".concat(0===a?"pr-2":a===t.length-1?"pl-2":"px-2"),style:{borderRight:a===t.length-1?"":"1px solid rgb(55 65 81)"},children:[(0,C.jsx)("p",{className:"text-[14.5px] text-gray-300",children:e.key}),(0,C.jsx)("p",{className:"text-white text-[15px] font-semibold",children:e.value.length})]},e.key)))})]}),(0,C.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,C.jsx)("h5",{children:"Date wise Summary"}),(0,C.jsx)(d.zx,{icon:(0,C.jsx)(f.vHB,{}),onClick:()=>l(!0),size:"sm",variant:"solid",children:"View Contents"})]}),(0,C.jsx)("div",{className:"rounded-lg gap-3 grid grid-cols-4",children:Object.entries(a.reduce(((e,a)=>{const t=a.TelecastDate,s=1===a.statuscode;return e[t]||(e[t]={Success:0,Failed:0}),s?e[t].Success+=1:e[t].Failed+=1,e}),{})).map((e=>{let[a,t]=e;return(0,C.jsxs)("div",{className:"rounded-lg p-3 ",style:{backgroundColor:"rgb(41 52 69)"},children:[(0,C.jsx)("h6",{className:"font-semibold",children:a}),(0,C.jsx)(g,{name:"Success",value:t.Success}),(0,C.jsx)(g,{name:"Failed",value:t.Failed})]},a)}))})]})};var S=t(72299),b=t(63821),j=t(34927),N=t(78820),w=t(30203),T=t(16856),v=t(93673);const F=[{accessorKey:"Status",header:"Status"},{accessorKey:"TelecastDate",header:"Telecast Date"},{accessorKey:"StartTime",header:"Start Time"},{accessorKey:"EndTime",header:"End Time"},{accessorKey:"ContentName",header:"Content Name"},{accessorKey:"Episode",header:"Episode"},{accessorKey:"Season",header:"Season"},{accessorKey:"EpisodeNumber",header:"EpisodeNumber"},{accessorKey:"orginaldate",header:"Original Date"},{accessorKey:"Duration",header:"Duration"}],E={groupBy:!1,manageColumns:!1};const P=function(e){let{fileArray:a,successArray:t,failedArray:s,setShowTables:n}=e;const[o,r]=(0,l.useState)([]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"flex justify-between items-center -mb-1",children:[(0,C.jsx)("h5",{children:"Content Details"}),(0,C.jsx)(d.zx,{icon:(0,C.jsx)(T.JZ9,{}),onClick:()=>n(!1),size:"sm",variant:"solid",children:"View Summary"})]}),(0,C.jsxs)(d.mQ,{defaultValue:"all",children:[(0,C.jsxs)(b.Z,{children:[(0,C.jsxs)(j.Z,{value:"all",icon:(0,C.jsx)(f.vHB,{}),children:["All (",a.length,")"]}),(0,C.jsxs)(j.Z,{value:"success",icon:(0,C.jsx)(w.ReY,{}),children:["Success (",t.length,")"]}),(0,C.jsxs)(j.Z,{value:"failed",icon:(0,C.jsx)(N.SV5,{}),children:["Failed (",s.length,")"]})]}),(0,C.jsxs)("div",{className:"p-4",children:[(0,C.jsx)(S.Z,{value:"all",children:(0,C.jsx)(v.Z,{tableData:a,originalColumns:F,managedColumns:o,setManagedColumns:r,toolbarOptions:E,externalGlobalFilter:"",exportFileName:"Weekly FPC All Contents",columnsToFormatInINR:[],tableName:"WeeklyFPCAllContents",hideMaxPageSelector:!0})}),(0,C.jsx)(S.Z,{value:"success",children:(0,C.jsx)(v.Z,{tableData:t,originalColumns:F,managedColumns:o,setManagedColumns:r,toolbarOptions:E,externalGlobalFilter:"",exportFileName:"Weekly FPC Success Contents",columnsToFormatInINR:[],tableName:"WeeklyFPCSuccessContents",hideMaxPageSelector:!0})}),(0,C.jsx)(S.Z,{value:"failed",children:(0,C.jsx)(v.Z,{tableData:s,originalColumns:F,managedColumns:o,setManagedColumns:r,toolbarOptions:E,externalGlobalFilter:"",exportFileName:"Weekly FPC Failed Contents",columnsToFormatInINR:[],tableName:"WeeklyFPCFailedContents",hideMaxPageSelector:!0})})]})]})]})};const D=function(e){let{fileArray:a,setFileArray:t,isOpen:s,setIsOpen:n}=e;const[o,r]=(0,l.useState)([]),[i,c]=(0,l.useState)({}),[m,u]=(0,l.useState)(!1);(0,l.useEffect)((()=>{try{const{arrayCounts:e,typewiseSummary:a}=h();r(e),c(a)}catch(e){console.error(e),(0,y.openNotification)("danger","Something went wrong while generating file summary")}}),[a]);const x=()=>{n(!1),t(null)},h=()=>{try{let e=[{key:"Total Contents",value:a}],t={},s=[],l=[];return a.forEach((e=>{e.TelecastDate in t?t[e.TelecastDate].push(e):t[e.TelecastDate]=[e],0===e.statuscode?l.push(e):s.push(e)})),e.push({key:"Success",value:s}),e.push({key:"Failed",value:l}),{arrayCounts:e,typewiseSummary:t}}catch(e){throw e}},p=e=>{var a;return null===(a=o.filter((a=>a.key===e))[0])||void 0===a?void 0:a.value},f=p("Success"),g=p("Failed");return(0,C.jsx)(d.Vq,{isOpen:s,onClose:x,onRequestClose:x,width:"60%",contentClassName:"mt-8",children:m?(0,C.jsx)(P,{fileArray:a,successArray:f,failedArray:g,setShowTables:u}):(0,C.jsx)(k,{fileArray:a,arrayCounts:o,typewiseSummary:i,setShowTables:u})})};var A=t(54048),I=t(85214),L=t(45682),O=t(6755),Z=t(1680),G=(t(60370),t(56355));const V=[{header:"Start Time",accessorKey:"startlabel"},{header:"End Time",accessorKey:"endLabel"},{header:"Telecast Date",accessorKey:"start"},{header:"Content Name",accessorKey:"title"}],B=()=>{const e=(0,r.useSelector)((e=>e.locale.selectedChannel)),a=(0,r.useSelector)((e=>e.auth.session.token)),[t,f]=(0,l.useState)({start:"",end:""}),[g,k]=(0,l.useState)(!1),[S,b]=(0,l.useState)([]),[j,N]=(0,l.useState)(null),[w,T]=(0,l.useState)(null),[v,F]=(0,l.useState)(!1),[E,P]=(0,l.useState)(!1),[B,_]=(0,l.useState)(0),[W,U]=(0,l.useState)(!1),[z,R]=(0,l.useState)(!1),K=(0,x.s0)();(0,l.useEffect)((()=>{(0,c.Dh)();t.start&&t.end&&(async()=>{try{const a=await(0,n.apiCallstoreprocedure)("USP_PG_GetWeeklyFPC",{Locationcode:e.LocationCode,ChannelCode:e.ChannelCode,FromDate:t.start,Todate:t.end});if(204==a.status)return void b([]);const s=a.data.map(((e,a)=>({id:a,title:" ".concat(e.ContentName," "),start:"".concat(e.TelecastDate,"T").concat(e.TelecastStartTime,":00"),startlabel:"".concat(e.TelecastStartTime),end:"".concat(e.TelecastDate,"T").concat(e.TelecastEndTime,":00"),endLabel:"".concat(e.TelecastEndTime),eventColor:"".concat(e.Colour)})));b(s)}catch(a){console.error("Error fetching data:",a)}})()}),[t,e]),(0,l.useEffect)((()=>{(async()=>{try{j&&(T(await M()),_(100),await new Promise((e=>setTimeout(e,1e3))),N(null),F(!1),P(!0))}catch(e){console.error(e),N(null),F(!1),P(!1),(0,y.openNotification)("danger","Something went wrong while uploading file")}})()}),[j]),(0,l.useEffect)((()=>{let e;return v?e=setInterval((()=>{B>=90?clearInterval(e):B<100&&_((e=>e+1))}),1e3):_(0),()=>clearInterval(e)}),[v,B]);const M=async()=>{try{const t=new FormData;F(!0);const l=await new Promise(((e,a)=>{const t=new FileReader;t.readAsArrayBuffer(j),t.onload=function(a){e(a.target.result)},t.onerror=function(e){a(e)}})),n=new Blob([l],{type:j.type});t.append("file",n,j.name);let r=await fetch(A.Z.apiPrefix+"/fpcmaster/upload/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat((0,o.Tk)(new Date)),{method:"POST",body:t,headers:{Accept:"*/*",Authorization:"Bearer ".concat(a)}});if(r=await r.json(),Array.isArray(r))return r=r.map((e=>0===e.statuscode?(0,s.Z)((0,s.Z)({},e),{},{bgColor:I.RED_700,fontColor:"white"}):(0,s.Z)((0,s.Z)({},e),{},{bgColor:I.GREEN_700,fontColor:"white"}))),r;throw new Error("Something went wrong while uploading file")}catch(t){throw F(!1),t}};return console.log(e),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(L.default,{showLoader:g}),(0,C.jsx)(i.Z,{initialView:"timeGridWeek",headerToolbar:{left:"",center:"title",right:"prev,next"},selectable:!0,events:S,datesSet:e=>{f({start:(0,o.Tk)(e.start),end:(0,o.Tk)(e.end)})},contentHeight:"auto"})," ",(0,C.jsxs)(u.gi,{className:"-mx-8 px-8 flex items-center justify-start py-4 z-10",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,C.jsx)(d.zx,{onClick:()=>{K("/Programming")},className:"mr-2",children:"Back"}),(0,C.jsx)(d.zx,{variant:"solid",className:"mr-2",icon:(0,C.jsx)(G.u$v,{}),onClick:()=>{const e=e=>new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}).replace(",",""),a=S.map((a=>(0,s.Z)((0,s.Z)({},a),{},{start:e(a.start),end:e(a.end),startlabel:a.startlabel,endLabel:a.endLabel,title:a.title})));(0,m.U)(V,a,"WeeklyFPC")},children:"Export Excel"}),Z.CLIENT.ASIANET!==e.label&&(0,C.jsx)(d.zx,{variant:"twoTone",className:"mr-2",icon:(0,C.jsx)(h.yFZ,{}),onClick:()=>{try{const e=document.createElement("a");e.href="".concat("","/FPC_Import_Template.xlsx"),e.download="FPC_Import_Template.xlsx",e.click()}catch(e){console.error(e),(0,y.openNotification)("danger","Something went wrong")}},children:"Download Template"}),Z.CLIENT.ASIANET===e.label&&(0,C.jsx)("div",{className:"ml-2",children:(0,C.jsx)(d.u,{title:"Upload Weekly FPC",placement:"top",children:(0,C.jsx)(d.zx,{variant:"twoTone",icon:(0,C.jsx)(h.qX3,{}),onClick:()=>{U(!0)},color:"blue-600",children:"Upload Weekly FPC"})})}),Z.CLIENT.ASIANET!==e.label&&(0,C.jsx)("div",{className:"ml-2",children:(0,C.jsx)(d.u,{title:"Upload Standard Format",placement:"top",children:(0,C.jsx)(d.zx,{variant:"twoTone",icon:(0,C.jsx)(h.qX3,{}),onClick:()=>{R(!0)},color:"blue-600",children:"Upload Weekly FPC"})})})]}),(0,C.jsx)(O.Z,{setShowLoader:k,isDialogOpen:W,setIsDialogOpen:U,submissionSP:"USP_PG_WeeklyFPCSave",valdationSP:"USP_PG_WeeklyFPC_Validation",successMessage:"Weekly FPC Created successfully",fileUploadapi:e.label==(Z.CLIENT.ASIANET||Z.CLIENT.ANI_PLUS||Z.CLIENT.MASST_INDIA)?"fpcmaster/uploadFileNewFormat":"fpcmaster/uploadintenclient",name:"Weekly FPC",tableName:"WeeklyFPC"}),(0,C.jsx)(O.Z,{setShowLoader:k,isDialogOpen:z,setIsDialogOpen:R,submissionSP:"USP_PG_WeeklyFPCSave",valdationSP:"USP_PG_WeeklyFPC_Validation",successMessage:"Weekly FPC Created successfully",fileUploadapi:e.label===Z.CLIENT.GEC||e.label===Z.CLIENT.INDIA_GEC||e.label===Z.CLIENT.USA_GEC?"fpcmaster/uploadintenclient":"fpcmaster/uploadFileStandardFormat",name:"Weekly FPC",tableName:"WeeklyFPC"}),(0,C.jsx)(p.Z,{title:"Uploading File",isOpen:v,uploadPercent:B}),Array.isArray(w)&&(0,C.jsx)(D,{fileArray:w,setFileArray:T,isOpen:E,setIsOpen:P})]})}},6755:(e,a,t)=>{t.d(a,{Z:()=>S});var s=t(1413),l=t(2803),n=t(54048),o=t(59741),r=t.n(o),i=t(72791),c=t(73728),d=t(60364),m=t(9494),u=t(85214),x=t(81320),h=t(93673);const p=JSON.parse('{"v":"5.12.1","fr":30,"ip":0,"op":64,"w":100,"h":100,"nm":"Verify","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[50.5,49,0],"ix":2,"l":2},"a":{"a":0,"k":[0.5,-1,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-8.25,0.125],[-3.25,6],[8.625,-6]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.0314,0.7373,0.6314,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":7,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.077],"y":[1]},"o":{"x":[0.013],"y":[0.108]},"t":10,"s":[0]},{"t":33,"s":[100]}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":4,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"circle 02","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[50,49.975,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.077,0.077,0.667],"y":[1,1,1]},"o":{"x":[0.013,0.013,0.333],"y":[0.108,0.108,0]},"t":5,"s":[0,0,100]},{"t":28,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-14.387,0],[0,-14.387],[14.387,0],[0,14.387]],"o":[[14.387,0],[0,14.387],[-14.387,0],[0,-14.387]],"v":[[0,-26.05],[26.05,0],[0,26.05],[-26.05,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.9136,0.9264,0.9245,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"circle 02","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"circle 01","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[50,50.009,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.077,0.077,0.667],"y":[1,1,1]},"o":{"x":[0.013,0.013,0.333],"y":[0.108,0.108,0]},"t":0,"s":[0,0,100]},{"t":23,"s":[100,100,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-0.001,0.411],[0,0],[3.933,0.004],[0,0],[0.289,0.289],[0,0],[2.819,-2.694],[0,0],[0.407,0],[0,0],[0.005,-3.933],[0,0],[0.29,-0.289],[0,0],[-2.772,-2.786],[0,0],[0.001,-0.411],[0,0],[-3.933,-0.004],[0,0],[-0.289,-0.289],[0,0],[-2.783,2.779],[-0.002,0.002],[0,0],[-0.407,0],[0,0],[-0.005,3.933],[0,0],[-0.292,0.29],[0,0],[2.772,2.786]],"o":[[-0.292,-0.29],[0,0],[-0.005,-3.933],[0,0],[-0.409,0],[0,0],[-2.818,-2.695],[0,0],[-0.289,0.287],[0,0],[-3.933,0.004],[0,0],[0.001,0.41],[0,0],[-2.77,2.788],[0,0],[0.292,0.29],[0,0],[0.005,3.933],[0,0],[0.409,0],[0,0],[2.779,2.783],[0.002,-0.002],[0,0],[0.289,-0.287],[0,0],[3.933,-0.004],[0,0],[-0.001,-0.411],[0,0],[2.77,-2.788],[0,0]],"v":[[30.829,-12.16],[30.375,-13.255],[30.375,-23.284],[23.248,-30.409],[13.221,-30.409],[12.131,-30.861],[5.041,-37.95],[-5.037,-37.952],[-12.135,-30.858],[-13.221,-30.409],[-23.248,-30.409],[-30.375,-23.284],[-30.375,-13.255],[-30.826,-12.163],[-37.923,-5.071],[-37.92,5.005],[-30.829,12.092],[-30.375,13.188],[-30.375,23.216],[-23.248,30.341],[-13.221,30.341],[-12.131,30.794],[-5.041,37.882],[5.032,37.89],[5.037,37.884],[12.135,30.79],[13.222,30.341],[23.248,30.341],[30.375,23.216],[30.375,13.188],[30.829,12.092],[37.923,5.003],[37.92,-5.073]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.0314,0.7373,0.6314,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"circle 01","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":300,"st":0,"ct":1,"bm":0}],"markers":[],"props":{}}');var y=t(1680),f=t(80184);const C=["Uploading","Validation","Submission"],g=[{value:"TelecastDate",label:"Date"}],k={groupBy:!0,manageColumns:!0},S=e=>{let{setShowLoader:a,isDialogOpen:t,setIsDialogOpen:o,submissionSP:S,valdationSP:b,successMessage:j,fileUploadapi:N,name:w,tableName:T}=e;const v=(0,d.useSelector)((e=>e.auth.session.LoginId)),F=(0,d.useSelector)((e=>e.locale.selectedChannel)),E=(0,d.useSelector)((e=>e.auth.session.token)),[P,D]=(0,i.useState)(null),[A,I]=(0,i.useState)([]),[L,O]=(0,i.useState)([]),[Z,G]=(0,i.useState)([""]),[V,B]=(0,i.useState)(!1),[_,W]=(0,i.useState)([]),[U,z]=(0,i.useState)(1),[R,K]=(0,i.useState)([]),[M,q]=(0,i.useState)([]);(0,i.useEffect)((()=>{(async()=>{try{P&&W(await H())}catch(e){D(null),W([]),(0,x.openNotification)("danger","Something went wrong while uploading file")}})()}),[P]),(0,i.useEffect)((()=>{t||X()}),[t]);const H=async()=>{a(!0);try{const{LocationCode:t,ChannelCode:l}=F,o=await(e=P,new Promise(((a,t)=>{const s=new FileReader;s.readAsArrayBuffer(e),s.onload=e=>a(e.target.result),s.onerror=e=>t(e)}))),r=new Blob([o],{type:P.type}),i=new FormData;i.append("file",r,P.name);const c=await fetch("".concat(n.Z.apiPrefix,"/").concat(N,"/?LocationCode=").concat(t,"&ChannelCode=").concat(l),{method:"POST",body:i,headers:{Accept:"*/*",Authorization:"Bearer ".concat(E)}}),d=await c.json();if(!Array.isArray(d))throw new Error("Invalid response format: Expected an array");const m=Object.keys(d[0]).map((e=>({accessorKey:e,header:e})));return K(m),d.map((e=>(0,s.Z)((0,s.Z)({},e),{},{GenrateFPC:1,TelecastDate:(0,x.FORMATDATE_FOR_EVERY)(new Date(e.date))})))}catch(t){throw console.error("Error uploading file:",t),t}finally{a(!1)}var e},X=()=>{o(!1),D(null),W([]),G([]),z(1),B(!1)};return(0,f.jsx)(l.Vq,{isOpen:t,width:1200,style:{content:{marginTop:"-50px"}},onClose:X,onRequestClose:X,children:(0,f.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,f.jsxs)("h5",{className:"mb-2",children:["Import ",w," & Verify"]}),(0,f.jsx)(l.Rg,{current:U,children:C.map(((e,a)=>(0,f.jsx)(l.Rg.Item,{title:e},a)))}),(0,f.jsx)("div",{className:"h-[500px] overflow-y-auto",children:(0,f.jsxs)("div",{className:"mt-4",children:[1===U&&(0,f.jsx)(f.Fragment,{children:0==_.length?(0,f.jsx)(l.gq,{draggable:!0,beforeUpload:async(e,a)=>{let t;e.length>0?(t=e[0],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(t.type)?D(t):(0,x.openNotification)("danger","Please upload an XLSX file!")):(0,x.openNotification)("danger","Please select a file!")},uploadLimit:1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, application/vnd.ms-excel.sheet.macroEnabled.12",showList:!0,children:(0,f.jsxs)("div",{className:"text-center mt-4",children:[(0,f.jsx)("div",{className:"text-6xl mb-4 flex justify-center",children:(0,f.jsx)(c.Z30,{})}),(0,f.jsxs)("p",{className:"font-semibold text-gray-800 dark:text-white",children:["Drop your file here, or ",(0,f.jsx)("span",{className:"text-blue-500",children:"browse"})]}),(0,f.jsx)("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: EXEL File Only"})]})}):(0,f.jsx)("div",{className:"text-center mt-4",children:(0,f.jsx)(h.Z,{tableData:_,defaultGroupByColumns:g,originalColumns:R,managedColumns:A,setManagedColumns:I,toolbarOptions:k,exportFileName:w,tableName:"".concat(T,"Table"),columnsToFormatInINR:[]})})}),2===U&&(0,f.jsx)("div",{className:"text-center",children:(0,f.jsx)("div",{className:"flex flex-col h-full justify-between ",children:(0,f.jsx)("div",{className:"h-[500px] overflow-y-auto",children:V?(0,f.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,f.jsx)(r(),{animationData:p,autoplay:!0,style:{height:"300px",width:"300px"},speed:.25})}):(0,f.jsx)(h.Z,{tableData:Z,originalColumns:M,managedColumns:L,setManagedColumns:O,toolbarOptions:k,exportFileName:"".concat(w," Validation"),tableName:"".concat(T,"Validation"),columnsToFormatInINR:[]})})})}),3===U&&(0,f.jsx)("div",{className:"text-center mt-4",children:(0,f.jsx)(h.Z,{tableData:_,defaultGroupByColumns:g,originalColumns:R,managedColumns:A,setManagedColumns:I,toolbarOptions:k,exportFileName:w,tableName:"".concat(T,"Table"),columnsToFormatInINR:[]})})]})}),(0,f.jsxs)("div",{className:"text-right mt-6",children:[1===U&&(0,f.jsx)(l.zx,{variant:"twoTone",className:"ltr:mr-2 rtl:ml-2",size:"sm",onClick:()=>{W([]),D(null)},children:"Upload New File"}),(0,f.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",size:"sm",onClick:()=>z(U-1),disabled:1===U,children:"Back Step"}),(0,f.jsx)(l.zx,{variant:"solid",size:"sm",onClick:()=>{1==U&&((async()=>{a(!0);try{const{LocationCode:e,ChannelCode:t}=F,l=await(0,m.apiCallstoreprocedure)(b,{LocationCode:e,ChannelCode:t,LoginCode:v,IsWeeklyFPC:1}),{data:n}=l;console.log("response",l);const o=n.filter((e=>""!==e.ContentStatus));if(console.log("filteredData",o),""==o||F.label==y.CLIENT.ASIANET)return B(!0),void G([]);const r=Object.keys(o[0]).map((e=>({accessorKey:e,header:e})));q(r),G(o.map((e=>(0,s.Z)((0,s.Z)({},e),{},{bgColor:u.RED_500,fontColor:"white"}))))}catch(e){console.error("Error fetching ".concat(w," Validation:"),e),G([])}finally{a(!1)}})(),z(U+1)),2==U&&z(U+1),3==U&&(async()=>{a(!0);try{const e=await(0,m.apiCallstoreprocedure)(S,{LoginCode:v}),{status:t}=e;200==t&&((0,x.openNotification)("success",j),D(null),W([]),G([]),z(1),o(!1))}catch(e){(0,x.openNotification)("danger","Import file not Valid")}finally{a(!1)}})()},disabled:1!==U&&(!P||Z.length>0),children:U===C.length?"Submit":"Next Step"})]})]})})}}}]);
//# sourceMappingURL=7045.cc6899ee.chunk.js.map