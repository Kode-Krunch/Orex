(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[3070,5682],{81411:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(1413),l=s(45987),n=s(2803),r=(s(72791),s(80184));const i=["children","labelClass"];const o=function(e){let{children:t,labelClass:s}=e,o=(0,l.Z)(e,i);return(0,r.jsx)(n.xJ,(0,a.Z)((0,a.Z)({labelClass:"mb-1 !text-gray-300 ".concat(s||"")},o),{},{children:t}))}},45682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(2803),l=(s(72791),s(80184));const n=function(e){let{showLoader:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,l.jsx)(a.$j,{size:"3.25rem"})}):(0,l.jsx)(l.Fragment,{})})}},6884:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s(1413),l=s(45987),n=s(2803),r=s(72791),i=s(80184);const o=["styles","size","placeholder"],c=r.memo(r.forwardRef(((e,t)=>{const{styles:s,size:r,placeholder:c}=e,d=(0,l.Z)(e,o);return(0,i.jsx)(n.Ph,(0,a.Z)((0,a.Z)({size:"sm"},d),{},{styles:(0,a.Z)({valueContainer:e=>(0,a.Z)((0,a.Z)({},e),{},{padding:"2px 5px"}),input:e=>(0,a.Z)((0,a.Z)({},e),{},{color:"white"}),control:e=>(0,a.Z)((0,a.Z)({},e),{},{minHeight:"30px"})},s),ref:t,placeholder:c||"Select"}))})))},55397:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a=s(72791),l=s(2803),n=s(36996),r=s(48080),i=s(40980),o=s(81694),c=s.n(o),d=s(80184);const{Tr:u,Th:m,Td:p,THead:y,TBody:g,Sorter:h}=l.iA,x=e=>{let{data:t,columns:s,trClassNames:o}=e;const[x,C]=(0,a.useState)([]),N=(0,n.b7)({data:t,columns:s,state:{sorting:x},onSortingChange:C,getCoreRowModel:(0,r.sC)(),getSortedRowModel:(0,r.tj)()});return(0,d.jsx)(i.ZP,{children:e=>{let{height:t,width:s}=e;return(0,d.jsx)("div",{style:{height:t,width:s},className:"overflow-auto",children:(0,d.jsxs)(l.iA,{children:[(0,d.jsx)(y,{className:"sticky top-0",children:N.getHeaderGroups().map((e=>(0,d.jsx)(u,{children:e.headers.map(((e,t)=>{var s,a,l;return(0,d.jsx)(m,{colSpan:e.colSpan,className:"overflow-hidden text-ellipsis whitespace-nowrap border-r border-r-gray-600 !normal-case w-max px-2 ".concat(0===t&&"border-l border-l-gray-600"),style:{width:null===(s=e.column.columnDef.headStyle)||void 0===s?void 0:s.width},children:e.isPlaceholder?null:(0,d.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none table-head-cell ":"",onClick:e.column.getToggleSortingHandler(),style:{fontSize:null===(a=e.column.columnDef.headStyle)||void 0===a?void 0:a.fontSize,justifyContent:null===(l=e.column.columnDef.headStyle)||void 0===l?void 0:l.align},children:[(0,n.ie)(e.column.columnDef.header,e.getContext()),(0,d.jsx)(h,{sort:e.column.getIsSorted()})]})},e.id)}))},e.id)))}),(0,d.jsx)(g,{children:N.getRowModel().rows.slice(0,10).map((e=>(0,d.jsx)(u,{className:"function"===typeof o?o(e.original):"",children:e.getVisibleCells().map(((e,t)=>{var s,a,l,r;return(0,d.jsx)(p,{className:c()("overflow-hidden text-ellipsis whitespace-nowrap border-r border-r-gray-700 text-gray-200 border-b border-b-gray-700 w-max px-2",0===t&&"border-l border-l-gray-700"),style:{width:null===(s=e.column.columnDef.cellStyle)||void 0===s?void 0:s.width,textAlign:null===(a=e.column.columnDef.cellStyle)||void 0===a?void 0:a.align},children:(0,d.jsx)("div",{className:"table-body-cell",style:{fontWeight:null===(l=e.column.columnDef.cellStyle)||void 0===l?void 0:l.fontWeight,fontSize:null===(r=e.column.columnDef.cellStyle)||void 0===r?void 0:r.fontSize},children:(0,n.ie)(e.column.columnDef.cell,e.getContext())})},e.id)}))},e.id)))})]})})}})}},51029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var a=s(2803),l=s(72791),n=s(92506),r=s(81411),i=s(6884),o=s(80184);const c=function(e){let{creditRateLimitOptions:t,businessTypeOptions:s}=e;const{values:l,touched:c,errors:d,setFieldValue:u}=(0,n.u6)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h6",{className:"mb-3",children:"BASIC DETAILS"}),(0,o.jsxs)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:[(0,o.jsx)(r.Z,{label:"Agency Name",className:"col-span-8",asterisk:!0,invalid:d.agencyName&&c.agencyName,errorMessage:d.agencyName,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"Agency Name",component:a.II,name:"agencyName",maxLength:50})}),(0,o.jsx)(r.Z,{label:"Short Name",className:"col-span-4",asterisk:!0,invalid:d.agencyShortName&&c.agencyShortName,errorMessage:d.agencyShortName,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"Short Name",component:a.II,name:"agencyShortName",maxLength:4})}),(0,o.jsx)(r.Z,{label:"ERP Code",className:"col-span-4",invalid:d.agencyDetailsErpCode&&c.agencyDetailsErpCode,errorMessage:d.agencyDetailsErpCode,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"ERP Code",component:a.II,name:"agencyDetailsErpCode",maxLength:50})}),(0,o.jsx)(r.Z,{label:"PAN",className:"col-span-4",invalid:d.pan&&c.pan,errorMessage:d.pan,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"PAN",component:a.II,name:"pan",maxLength:10,onChange:e=>u("pan",e.target.value.toUpperCase())})}),(0,o.jsx)(r.Z,{label:"TAN",className:"col-span-4",invalid:d.tan&&c.tan,errorMessage:d.tan,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"TAN",component:a.II,name:"tan",maxLength:10,onChange:e=>u("tan",e.target.value.toUpperCase())})}),(0,o.jsx)(r.Z,{label:"BARC Code",className:"col-span-4",invalid:d.barcCode&&c.barcCode,errorMessage:d.barcCode,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"BARC Code",component:a.II,name:"barcCode",maxLength:50})}),(0,o.jsx)(r.Z,{label:"Credit Rate Limit",className:"col-span-4",asterisk:!0,children:(0,o.jsx)(n.gN,{placeholder:"Select",component:i.Z,name:"creditRateLimit",options:t,value:l.creditRateLimit,onChange:e=>u("creditRateLimit",e)})}),(0,o.jsx)(r.Z,{label:"Business Type",className:"col-span-4",asterisk:!0,children:(0,o.jsx)(n.gN,{placeholder:"Select",component:i.Z,name:"businessType",options:s,value:l.businessType,onChange:e=>u("businessType",e)})}),(0,o.jsx)(r.Z,{label:"Agency Flags",className:"col-span-10",children:(0,o.jsx)(n.gN,{name:"agencyFlags",children:()=>(0,o.jsxs)(a.XZ.Group,{value:l.agencyFlags,onChange:e=>u("agencyFlags",e),children:[(0,o.jsx)(a.XZ,{value:1,children:"IBF"}),(0,o.jsx)(a.XZ,{value:2,children:"AAAI"}),(0,o.jsx)(a.XZ,{value:3,children:"On Hold"}),(0,o.jsx)(a.XZ,{value:4,children:"RCM"}),(0,o.jsx)(a.XZ,{value:5,children:"Direct Client"})]})})}),(0,o.jsx)(r.Z,{label:"Status",className:"col-span-2",children:(0,o.jsx)(n.gN,{component:a.T5,name:"status"})}),(0,o.jsx)(r.Z,{label:"Remarks",className:"col-span-12",children:(0,o.jsx)(n.gN,{placeholder:"Select",component:a.II,name:"remarks"})})]})]})},d=/^[A-Za-z0-9_\-,(). ]*$/,u=/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,m=/\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}/,p=/^\+?[0-9]*$/,y=/^\+?[0-9\- ]*$/,g=/^[0-9]*$/;const h=function(){const{touched:e,errors:t,setFieldValue:s}=(0,n.u6)();return(0,o.jsxs)("div",{children:[(0,o.jsx)("h6",{className:"mb-2",children:"CONTACT DETAILS"}),(0,o.jsx)(a.Yb,{size:"sm",className:"flex flex-col gap-5",children:(0,o.jsxs)("div",{className:"grid grid-cols-12 gap-x-3 gap-y-5",children:[(0,o.jsx)(r.Z,{label:"Mobile",className:"col-span-4",asterisk:!0,invalid:t.mobile&&e.mobile,errorMessage:t.mobile,children:(0,o.jsx)(n.gN,{type:"tel",placeholder:"Mobile",component:a.II,name:"mobile",maxLength:16,onChange:e=>(p.test(e.target.value)||""===e.target.value)&&s("mobile",e.target.value)})}),(0,o.jsx)(r.Z,{label:"Phone",className:"col-span-4",invalid:t.phone&&e.phone,errorMessage:t.phone,children:(0,o.jsx)(n.gN,{type:"tel",placeholder:"Phone",component:a.II,name:"phone",maxLength:16,onChange:e=>(p.test(e.target.value)||""===e.target.value)&&s("phone",e.target.value)})}),(0,o.jsx)(r.Z,{label:"FAX",className:"col-span-4",invalid:t.fax&&e.fax,errorMessage:t.fax,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"FAX",component:a.II,name:"fax",maxLength:16,onChange:e=>(y.test(e.target.value)||""===e.target.value)&&s("fax",e.target.value)})}),(0,o.jsx)(r.Z,{label:"Contact Person",className:"col-span-4",asterisk:!0,invalid:t.contactPerson&&e.contactPerson,errorMessage:t.contactPerson,children:(0,o.jsx)(n.gN,{type:"text",placeholder:"Contact Person",component:a.II,name:"contactPerson",maxLength:50})}),(0,o.jsx)(r.Z,{label:"Email",className:"col-span-4",asterisk:!0,invalid:t.email&&e.email,errorMessage:t.email,children:(0,o.jsx)(n.gN,{type:"email",placeholder:"Email",component:a.II,name:"email"})})]})})]})};const x=function(){const{values:e,touched:t,errors:s,setFieldValue:l}=(0,n.u6)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h6",{className:"mb-2",children:"CREDIT DETAILS"}),(0,o.jsx)(a.Yb,{size:"sm",className:"flex flex-col gap-5",children:(0,o.jsxs)("div",{className:"grid grid-cols-12 gap-3",children:[(0,o.jsx)(r.Z,{label:"Credit Type",className:"col-span-8",asterisk:!0,invalid:s.creditType&&t.creditType,errorMessage:s.creditType,children:(0,o.jsx)(n.gN,{name:"creditType",children:t=>{let{field:s,form:l}=t;return(0,o.jsxs)(a.Y8.Group,{value:e.creditType,onChange:e=>l.setFieldValue(s.name,e),children:[(0,o.jsx)(a.Y8,{value:1,children:"Credit"}),(0,o.jsx)(a.Y8,{value:2,children:"Advance Payment"}),(0,o.jsx)(a.Y8,{value:3,children:"PDC"})]})}})}),1===e.creditType&&(0,o.jsx)(r.Z,{label:"Credit Days",className:"col-span-4",asterisk:!0,invalid:s.creditDays&&t.creditDays,errorMessage:s.creditDays,children:(0,o.jsx)(a.II,{type:"text",placeholder:"Days",name:"creditDays",value:e.creditDays,onChange:e=>{g.test(e.target.value)&&l("creditDays",e.target.value)}})})]})})]})};const C=function(e){let{creditRateLimitOptions:t,businessTypeOptions:s}=e;return(0,o.jsxs)("div",{className:"grid grid-cols-2 h-full",children:[(0,o.jsx)("div",{className:"border-r border-r-gray-700 pr-3",children:(0,o.jsx)(c,{creditRateLimitOptions:t,businessTypeOptions:s})}),(0,o.jsxs)("div",{className:"px-3",children:[(0,o.jsx)(h,{}),(0,o.jsx)("div",{className:"mt-12",children:(0,o.jsx)(x,{})})]})]})};var N=s(1413),v=s(34786),b=s(11308),j=s(54261);const A=async e=>{try{const t=await(0,b.bT)(e);return 200===t.status?t.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.StateCode,label:e.StateName,tinNo:e.StateTinNo}))):[]}catch(t){return console.error(t),[]}},f=async e=>{try{const t=await(0,b.C2)(e);return 200===t.status?t.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.PlaceCode,label:e.PlaceName}))):[]}catch(t){return console.error(t),[]}},S=async e=>{let t=[];try{const s=await(0,b.Lu)(e);200===s.status&&(t=s.data.map((e=>({id:(0,j.Z)(),fullAddress:e.AddressLine1,country:{value:e.Country.CountryCode,label:e.Country.CountryName},state:{value:e.State.StateCode,label:e.State.StateName,tinNo:e.State.StateTinNo},city:{value:e.Place.PlaceCode,label:e.Place.PlaceName},postalCode:e.PinCode,erpCode:"",isGstRegistered:e.IsGST_registered,gstNumber:"0"===e.GSTN_id?"":e.GSTN_id}))))}catch(s){console.error(s)}finally{return t}},I=async e=>{let t=[];try{const s=await(0,v.Ul)(e);200===s.status&&(t=s.data.map((e=>({value:e.Employee.EmployeeCode,label:e.Employee.Emp_FirstName}))))}catch(s){console.error(s)}finally{return t}},Z=async e=>{let t=[];try{const s=await(0,v.vA)(e);200===s.status&&(t=s.data.map((e=>({value:e.ClientCode,label:e.ClientName}))))}catch(s){console.error(s)}finally{return t}},R={fullAddress:!1,country:!1,state:!1,city:!1,postalCode:!1,gstNumber:!1};const T=function(e){let{countryOptions:t,stateOptions:s,cityOptions:c,setStateOptions:d,setCityOptions:u,fullAddress:p,setFullAddress:y,country:h,setCountry:x,state:C,setState:v,city:b,setCity:S,postalCode:I,setPostalCode:Z,erpCode:T,setErpCode:w,isGstRegistered:P,setIsGstRegistered:E,gstNumber:D,setGstNumber:O,editAddressId:F,resetForm:L}=e;const[k,G]=(0,l.useState)(R);(0,l.useEffect)((()=>L),[]),(0,l.useEffect)((()=>{(async()=>{try{null!==h&&void 0!==h&&h.CountryCode&&d(await A(h.CountryCode))}catch(e){console.error(e)}})()}),[h]),(0,l.useEffect)((()=>{(async()=>{try{null!==C&&void 0!==C&&C.StateCode&&u(await f(C.StateCode))}catch(e){console.error(e)}})()}),[C]);const{values:M,setFieldValue:q}=(0,n.u6)(),z=()=>{const e=B("fullAddress"),t=B("country"),s=B("state"),a=B("city"),l=B("postalCode"),n=B("gstNumber");return!e&&!t&&!s&&!a&&!l&&(!P||!n)},B=e=>{let t=!1;return"fullAddress"===e?t=p?p.length<3&&"Too Short":"Required":"country"===e?t=!h&&"Required":"state"===e?t=!C&&"Required":"city"===e?t=!b&&"Required":"postalCode"===e?t=I?I.length<3&&"Too Short":"Required":"gstNumber"===e&&(t=P&&!D?"Required":!(!P||m.test(D)&&D.startsWith(C.tinNo))&&"Invalid GST Number"),G((s=>(0,N.Z)((0,N.Z)({},s),{},{[e]:t}))),t};return(0,o.jsxs)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:[(0,o.jsxs)(r.Z,{label:"Address",className:"col-span-12",asterisk:!0,children:[(0,o.jsx)(n.gN,{type:"text",placeholder:"Full Address",textArea:!0,component:a.II,className:"min-h-0",rows:2,value:p,onChange:e=>y(e.target.value),onBlur:()=>B("fullAddress")}),k.fullAddress&&(0,o.jsx)("span",{className:"text-red-500",children:k.fullAddress})]}),(0,o.jsxs)(r.Z,{label:"Country",className:"col-span-6",asterisk:!0,children:[(0,o.jsx)(n.gN,{placeholder:"Select",component:i.Z,options:t,value:h,onChange:e=>{x(e),v(null),S(null)},onBlur:()=>B("country")}),k.country&&(0,o.jsx)("span",{className:"text-red-500",children:k.country})]}),(0,o.jsxs)(r.Z,{label:"State",className:"col-span-6",asterisk:!0,children:[(0,o.jsx)(n.gN,{placeholder:"Select",component:i.Z,options:s,value:C,onChange:e=>{v(e),S(null)},onBlur:()=>B("state")}),k.state&&(0,o.jsx)("span",{className:"text-red-500",children:k.state})]}),(0,o.jsxs)(r.Z,{label:"City",className:"col-span-6",asterisk:!0,children:[(0,o.jsx)(n.gN,{placeholder:"Select",component:i.Z,options:c,value:b,onChange:S,onBlur:()=>B("city")}),k.city&&(0,o.jsx)("span",{className:"text-red-500",children:k.city})]}),(0,o.jsxs)(r.Z,{label:"Postal Code",className:"col-span-6",asterisk:!0,children:[(0,o.jsx)(n.gN,{placeholder:"Postal Code",component:a.II,maxLength:10,value:I,onChange:e=>""===e.target.value?Z(""):g.test(e.target.value)&&Z(Number(e.target.value)),onBlur:()=>B("postalCode")}),k.postalCode&&(0,o.jsx)("span",{className:"text-red-500",children:k.postalCode})]}),(0,o.jsxs)("div",{className:"col-span-6",children:[(0,o.jsx)(a.XZ,{className:"text-gray-300",checked:P,onChange:e=>{e||O(""),E(e),G((e=>(0,N.Z)((0,N.Z)({},e),{},{gstNumber:!1})))},children:"GST Registered"}),(0,o.jsx)(n.gN,{placeholder:"GST Number",component:a.II,disabled:!P,value:D,onChange:e=>O(e.target.value.toUpperCase()),onBlur:()=>B("gstNumber")}),k.gstNumber&&(0,o.jsx)("span",{className:"text-red-500",children:k.gstNumber})]}),(0,o.jsx)("div",{className:"col-span-12 flex justify-end",children:(0,o.jsx)(a.zx,{type:"button",size:"sm",onClick:()=>{if(z()){const e={id:F||(0,j.Z)(),fullAddress:p,country:h,state:C,city:b,postalCode:I,isGstRegistered:P,gstNumber:D},t=M.multipleAddresses.findIndex((e=>e.id===F));let s=[...M.multipleAddresses];F?s[t]=e:s=[...s,e],q("multipleAddresses",s),L()}},children:F?"Save":"Add"})})]})};var w=s(55397),P=s(16856);const E=[{accessorKey:"fullAddress",header:"Address"},{accessorKey:"country",header:"Country",cell:e=>e.row.original.country.label},{accessorKey:"state",header:"State",cell:e=>e.row.original.state.label},{accessorKey:"city",header:"City",cell:e=>e.row.original.city.label},{accessorKey:"postalCode",header:"Postal Code"},{accessorKey:"gstNumber",header:"GST Number"}];const D=function(e){let{countryOptions:t,stateOptions:s,cityOptions:r,setStateOptions:i,setCityOptions:c,fullAddress:d,setFullAddress:u,country:m,setCountry:p,state:y,setState:g,city:h,setCity:x,postalCode:C,setPostalCode:N,erpCode:v,setErpCode:b,isGstRegistered:j,setIsGstRegistered:S,gstNumber:I,setGstNumber:Z}=e;const[R,D]=(0,l.useState)(null),{values:O,setFieldValue:F}=(0,n.u6)();let L=[{accessorKey:"actions",header:"Actions",cell:e=>{const t=e.row.original.id===R;return(0,o.jsxs)("div",{className:"flex gap-1 items-center ".concat(t?"justify-end":"justify-center"),children:[!t&&(0,o.jsx)(a.u,{title:"Edit",children:(0,o.jsx)(a.zx,{type:"button",size:"xs",icon:(0,o.jsx)(P.zmo,{}),onClick:()=>k(e.row.original)})}),(0,o.jsx)(a.u,{title:"Delete",children:(0,o.jsx)(a.zx,{type:"button",size:"xs",icon:(0,o.jsx)(P.ZkW,{}),onClick:()=>{F("multipleAddresses",[...O.multipleAddresses].filter((t=>t.id!==e.row.original.id))),G()}})})]})}},...E];const k=async e=>{u(e.fullAddress),p(e.country),g(e.state),i(await A(e.country.value)),x(e.city),c(await f(e.state.value)),N(e.postalCode),S(e.isGstRegistered),Z(e.gstNumber),D(e.id)},G=()=>{u(""),p(null),g(null),i([]),x(null),c([]),N(""),S(!1),Z(""),D(null)};return(0,o.jsxs)("div",{className:"grid grid-cols-3 h-full",children:[(0,o.jsx)("div",{className:"pr-3 border-r border-r-gray-700",children:(0,o.jsx)(T,{countryOptions:t,stateOptions:s,cityOptions:r,setStateOptions:i,setCityOptions:c,fullAddress:d,setFullAddress:u,country:m,setCountry:p,state:y,setState:g,city:h,setCity:x,postalCode:C,setPostalCode:N,erpCode:v,setErpCode:b,isGstRegistered:j,setIsGstRegistered:S,gstNumber:I,setGstNumber:Z,editAddressId:R,resetForm:G})}),(0,o.jsxs)("div",{className:"col-span-2 px-3 h-full flex flex-col",children:[(0,o.jsx)("h6",{className:"mb-3",children:"MULTIPLE ADDRESSES"}),0===O.multipleAddresses.length?(0,o.jsx)("p",{className:"text-red-600",children:"Please add atleast one address"}):(0,o.jsx)("div",{className:"grow h-0",children:(0,o.jsx)(w.Z,{data:O.multipleAddresses,columns:L,trClassNames:e=>e.id===R?"bg-gray-600":""})})]})]})};const O=function(e){let{executiveOptions:t}=e;const{values:s,errors:l,touched:c}=(0,n.u6)();return(0,o.jsx)("div",{className:"h-full",children:(0,o.jsx)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:(0,o.jsx)(r.Z,{label:"Assign Executives",className:"col-span-12",asterisk:!0,invalid:l.mappedExecutives&&c.mappedExecutives,errorMessage:l.mappedExecutives,children:(0,o.jsx)(n.gN,{name:"mappedExecutives",children:e=>{let{field:a,form:l}=e;return(0,o.jsx)(i.Z,{isMulti:!0,field:a,form:l,options:t,value:s.mappedExecutives,onChange:e=>{l.setFieldValue(a.name,e)},onBlur:()=>{l.setFieldTouched(a.name,!0)}})}})})})})};const F=function(e){let{clientOptions:t}=e;const{values:s,errors:l,touched:c}=(0,n.u6)();return(0,o.jsx)("div",{className:"h-full",children:(0,o.jsx)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:(0,o.jsx)(r.Z,{label:"Assign Clients",className:"col-span-12",asterisk:!0,invalid:l.mappedClients&&c.mappedClients,errorMessage:l.mappedClients,children:(0,o.jsx)(n.gN,{name:"mappedClients",children:e=>{let{field:a,form:l}=e;return(0,o.jsx)(i.Z,{isMulti:!0,field:a,form:l,options:t,value:s.mappedClients,onChange:e=>{l.setFieldValue(a.name,e)},onBlur:()=>{l.setFieldTouched(a.name,!0)}})}})})})})};const L=function(e){let{step:t,creditRateLimitOptions:s,businessTypeOptions:a,countryOptions:l,stateOptions:n,cityOptions:r,executiveOptions:i,clientOptions:c,setStateOptions:d,setCityOptions:u,fullAddress:m,setFullAddress:p,country:y,setCountry:g,state:h,setState:x,city:N,setCity:v,postalCode:b,setPostalCode:j,erpCode:A,setErpCode:f,isGstRegistered:S,setIsGstRegistered:I,gstNumber:Z,setGstNumber:R}=e;return(0,o.jsxs)(o.Fragment,{children:[0===t&&(0,o.jsx)(C,{creditRateLimitOptions:s,businessTypeOptions:a}),1===t&&(0,o.jsx)(D,{countryOptions:l,stateOptions:n,cityOptions:r,setStateOptions:d,setCityOptions:u,fullAddress:m,setFullAddress:p,country:y,setCountry:g,state:h,setState:x,city:N,setCity:v,postalCode:b,setPostalCode:j,erpCode:A,setErpCode:f,isGstRegistered:S,setIsGstRegistered:I,gstNumber:Z,setGstNumber:R}),2===t&&(0,o.jsx)(O,{executiveOptions:i}),3===t&&(0,o.jsx)(F,{clientOptions:c})]})};const k=function(e){let{step:t,setStep:s,className:l}=e;const{values:r,errors:i,submitForm:c,validateForm:d}=(0,n.u6)(),u=async()=>{if(t<3)s((e=>e+1));else{const e=await d();0===Object.keys(e).length?c():console.warn("Form has errors:",e)}},m=0===t?!((e,t)=>e.agencyName&&!t.agencyName&&e.agencyShortName&&!t.agencyShortName&&!t.agencyDetailsErpCode&&!t.pan&&!t.tan&&!t.barcCode&&e.creditRateLimit&&e.businessType&&e.mobile&&!t.mobile&&!t.phone&&!t.fax&&e.contactPerson&&!t.contactPerson&&e.email&&!t.email&&(1===e.creditType?e.creditDays&&!t.creditDays:e.creditType))(r,i):1===t?0===r.multipleAddresses.length:2===t?0===r.mappedExecutives.length:3===t&&0===r.mappedClients.length,p=0===t?((e,t)=>{let s="";return s=e.agencyName?t.agencyName?"Agency Name Invalid":e.agencyShortName?t.agencyShortName?"Agency Short Name Invalid":t.agencyDetailsErpCode?"ERP Code Invalid":t.pan?"PAN Number Invalid":t.tan?"TAN Number Invalid":t.barcCode||t.barcCode?"BARC Code Invalid":e.creditRateLimit?e.businessType?e.mobile?t.mobile?"Mobile Number Invalid":t.phone?"Phone Number Invalid":t.fax||t.fax?"FAX Number Invalid":e.contactPerson?t.contactPerson?"Contact Person Invalid":e.email?t.email?"Email Address Invalid":e.creditType?1!==e.creditType||e.creditDays?!(1!==e.creditType||!e.creditDays||!t.creditDays)&&"Credit Days Invalid":"Credit Days Required":"Credit Type Required":"Email Address Required":"Contact Person Required":"Mobile Number Required":"Business Type Required":"Credit Rate Limit Required":"Agency Short Name Required":"Agency Name Required",s})(r,i):1===t?0===r.multipleAddresses.length&&"Please add atleast one address":2===t?0===r.mappedExecutives.length&&"Please assign atleast one executive":3===t&&(0===r.mappedClients.length&&"Please assign atleast one client");return(0,o.jsxs)("div",{className:"flex justify-end gap-3 ".concat(l),children:[(0,o.jsx)(a.zx,{type:"button",disabled:0===t,onClick:()=>s((e=>e-1)),children:"Previous"}),p?(0,o.jsx)(a.u,{title:p,children:(0,o.jsx)(a.zx,{type:"button",variant:"solid",disabled:m,onClick:u,children:t<3?"Next":"Submit"})}):(0,o.jsx)(a.zx,{type:"button",variant:"solid",disabled:m,onClick:u,children:t<3?"Next":"Submit"})]})};var G=s(81320),M=s(45682),q=s(60364),z=s(57689),B=s(81724);const _={agencyName:"",agencyShortName:"",agencyDetailsErpCode:"",pan:"",tan:"",barcCode:"",creditRateLimit:null,businessType:null,agencyFlags:[],status:!0,remarks:"",mobile:"",phone:"",fax:"",contactPerson:"",email:"",creditType:null,creditDays:"",multipleAddresses:[],mappedExecutives:[],mappedClients:[]},X=B.Ry().shape({agencyName:B.Z_().min(3,"Too short").matches(d,"Only '-_()' are allowed as special characters").required("Required"),agencyShortName:B.Z_().min(3,"Too short").matches(d,"Only '-_()' are allowed as special characters").required("Required"),agencyDetailsErpCode:B.Z_().min(3,"Too short").matches(d,"Only '-_()' are allowed as special characters"),pan:B.Z_().matches(u,"Invalid PAN Number"),tan:B.Z_().matches(u,"Invalid TAN Number"),barcCode:B.Z_().min(3,"Too short").matches(d,"Only '-_()' are allowed as special characters"),mobile:B.Z_().matches(p,"Invalid Mobile Number").required("Required"),phone:B.Z_().matches(p,"Invalid Phone Number"),fax:B.Z_().matches(y,"Invalid FAX Number"),contactPerson:B.Z_().min(3,"Too short").matches(/^[A-Za-z ]*$/,"Invalid Name").required("Required"),email:B.Z_().matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Invalid Email Address").required("Required"),creditDays:B.Rx().max(365,"Days must be less than or equal to 365").when("creditType",{is:1,then:e=>e.required("Required"),otherwise:e=>e.notRequired()}),mappedExecutives:B.IX().min(1,"Please assign atleast one executive"),mappedClients:B.IX().min(1,"Please assign atleast one client")});const Y=function(){const e=(0,q.useSelector)((e=>e.auth.session.token)),[t,s]=(0,l.useState)(0),[r,i]=(0,l.useState)(_),[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)([]),[p,y]=(0,l.useState)([]),[g,h]=(0,l.useState)([]),[x,C]=(0,l.useState)([]),[j,A]=(0,l.useState)([]),[f,R]=(0,l.useState)([]),[T,w]=(0,l.useState)([]),[P,E]=(0,l.useState)(""),[D,O]=(0,l.useState)(null),[F,B]=(0,l.useState)(null),[Y,V]=(0,l.useState)(null),[H,K]=(0,l.useState)(""),[$,W]=(0,l.useState)(""),[U,J]=(0,l.useState)(!1),[Q,ee]=(0,l.useState)(""),[te,se]=(0,l.useState)(!1),ae=(0,z.s0)(),le=(0,z.TH)();return(0,l.useEffect)((()=>((async()=>{try{se(!0),document.querySelector(".page-container").classList.add("!py-3"),m(await(async()=>{try{const e=await(0,v.TY)();return 200===e.status?e.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.CreditRateCode,label:e.CreditRateName}))):[]}catch(e){return console.error(e),[]}})()),y(await(async()=>{try{const e=await(0,b.IK)();return 200===e.status?e.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.BusinessTypeCode,label:e.BusinessTypeName}))):[]}catch(e){return console.error(e),[]}})()),h(await(async()=>{try{const e=await(0,b.oo)();return 200===e.status?e.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.CountryCode,label:e.CountryName}))):[]}catch(e){return console.error(e),[]}})()),R(await(async()=>{try{const e=await(0,b.ec)();return 200===e.status?e.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.EmployeeCode,label:e.Emp_FirstName}))):[]}catch(e){return console.error(e),[]}})()),w(await(async()=>{try{const e=await(0,v.Q8)();return 200===e.status?e.data.map((e=>(0,N.Z)((0,N.Z)({},e),{},{value:e.ClientCode,label:e.ClientName}))):[]}catch(e){return console.error(e),[]}})())}catch(e){console.error(e),(0,G.openNotification)("danger","Something went wrong while loading page")}finally{se(!1)}})(),()=>document.querySelector(".page-container").classList.remove("!py-2"))),[]),(0,l.useEffect)((()=>{le.state&&0!==u.length&&0!==p.length&&0!==g.length?(d(le.state.agencyDetails),(async(e,t,s,a)=>{try{let l=[];1===e.IBF&&l.push(1),1===e.IsAAAI&&l.push(2),1===e.OnHold&&l.push(3),1===e.IsGovernment&&l.push(4),1===e.IsDirect_Client&&l.push(5),a({agencyName:e.AgencyName,agencyShortName:e.AgencyShortName,agencyDetailsErpCode:e.ERPCode,pan:e.AgencyPANNumber,tan:e.AgencyTANNumber,barcCode:e.BarcCode,creditRateLimit:t.filter((t=>t.value===e.CreditRateMaster.CreditRateCode))[0],businessType:s.filter((t=>t.value===e.BusinessType.BusinessTypeCode))[0],agencyFlags:l,status:1===e.IsActive,remarks:e.Remarks,mobile:e.Mobile,phone:e.Phone,fax:e.Fax,contactPerson:e.ContactPerson,email:e.Email,creditType:1===e.IsCredit?1:1===e.IsAdvPmt?2:3,creditDays:1===e.IsCredit?e.CreditDays:"",multipleAddresses:await S(e.AgencyCode),mappedExecutives:await I(e.AgencyCode),mappedClients:await Z(e.AgencyCode)})}catch(l){console.error(l)}})(le.state.agencyDetails,u,p,i)):i(_)}),[le.state,u,p,g]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"h-full flex flex-col gap-2",children:[(0,o.jsxs)("h4",{children:[c?"Edit":"Add"," Agency"]}),(0,o.jsx)(n.J9,{initialValues:r,enableReinitialize:!0,validationSchema:X,onSubmit:async t=>{const s="Something went wrong while ".concat(c?"saving changes":"adding agency");try{se(!0);const a=(e=>{const t=e.multipleAddresses.map((e=>({AddressLine1:e.fullAddress,AddressLine2:"",CountryCode:e.country.value,StateCode:e.state.value,PlaceCode:e.city.value,PinCode:e.postalCode,GSTN_id:e.isGstRegistered?e.gstNumber:"0",IsGST_registered:e.isGstRegistered?1:0,NovCode:"",IsActive:1}))),s=e.mappedExecutives.map((e=>({EmployeeCode:e.value,IsActive:1}))),a=e.mappedClients.map((e=>({ClientCode:e.value,IsActive:1})));return{Agency:{AgencyName:e.agencyName,AgencyShortName:e.agencyShortName,ERPCode:e.agencyDetailsErpCode,Address1:t[0].AddressLine1,Address2:t[0].AddressLine2,PinCode:t[0].PinCode,PlaceCode:t[0].PlaceCode,StateCode:t[0].StateCode,CountryCode:t[0].CountryCode,ContactPerson:e.contactPerson,Mobile:e.mobile,Phone:e.phone,Fax:e.fax,Email:e.email,Website:"",OtherDetails:"",CreditRateCode:e.creditRateLimit.value,IsAAAI:e.agencyFlags.includes(2)?1:0,IBF:e.agencyFlags.includes(1)?1:0,TnC:"",AgencyPANNumber:e.pan,AgencyTANNumber:e.tan,Remarks:e.remarks,AgencyLoginID:"",AgencyLoginPWD:"",IsWebActive:0,cBillRegistrationNo:"",MPIN:"",TPIN:"",IsMobileActive:0,OnHold:e.agencyFlags.includes(3)?1:0,IsBillingAddress:0,IsDirect_Client:e.agencyFlags.includes(5)?1:0,IsGovernment:e.agencyFlags.includes(4)?1:0,BarcCode:e.barcCode,BusinessTypeCode:e.businessType.value,IsCredit:1===e.creditType?1:0,IsAdvPmt:2===e.creditType?1:0,IsPDC:3===e.creditType?1:0,CreditDays:e.creditDays?Number(e.creditDays):0,IsActive:e.status},agencycity:t,agencyempmap:s,agencyclientmap:a}})(t);let l;l=c?await(0,v.hR)(a,e,c.AgencyCode):await(0,v.h3)(a,e);"200"===(await l.json()).code?((0,G.openNotification)("success",c?"Agency updated successfully":"Agency added successfully"),ae("/AgencyMaster")):(0,G.openNotification)("danger",s)}catch(a){console.error(a),(0,G.openNotification)("danger",s)}finally{se(!1)}},children:()=>(0,o.jsxs)(n.l0,{className:"grow flex flex-col",children:[(0,o.jsxs)(a.Zb,{bordered:!1,className:"grow",bodyClass:"p-3 pb-4 h-full flex flex-col",children:[(0,o.jsxs)(a.Rg,{current:t,className:"border-b border-b-gray-700 pb-4",children:[(0,o.jsx)(a.Rg.Item,{title:"Agency Details"}),(0,o.jsx)(a.Rg.Item,{title:"Multiple Addresses"}),(0,o.jsx)(a.Rg.Item,{title:"Map Executive"}),(0,o.jsx)(a.Rg.Item,{title:"Map Client"})]}),(0,o.jsx)("div",{className:"grow h-0 overflow-auto pt-3",children:(0,o.jsx)(L,{step:t,creditRateLimitOptions:u,businessTypeOptions:p,countryOptions:g,stateOptions:x,cityOptions:j,setStateOptions:C,setCityOptions:A,executiveOptions:f,clientOptions:T,fullAddress:P,setFullAddress:E,country:D,setCountry:O,state:F,setState:B,city:Y,setCity:V,postalCode:H,setPostalCode:K,erpCode:$,setErpCode:W,isGstRegistered:U,setIsGstRegistered:J,gstNumber:Q,setGstNumber:ee})})]}),(0,o.jsx)(k,{step:t,setStep:s,className:"mt-3"})]})})]}),(0,o.jsx)(M.default,{showLoader:te})]})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=3070.a6614ee5.chunk.js.map