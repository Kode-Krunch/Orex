"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[8436,5682],{89151:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(45987),r=n(1413),s=n(2803),o=(n(72791),n(58617)),l=n(88406),i=n(80184);const c=["children"];const d=function(e){let{location:t,channel:n,channelList:d,onChange:h}=e;const{Control:u}=l.c;return console.log("channelList",d),(0,i.jsx)(s.Ph,{options:d,components:{Option:e=>{let{innerProps:t,label:n,data:a,isSelected:s}=e;return(0,i.jsxs)("div",(0,r.Z)((0,r.Z)({className:"flex items-center justify-between p-2 ".concat(s?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("img",{src:a.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),(0,i.jsx)("span",{className:"ml-2 rtl:mr-2",children:n})]}),s&&(0,i.jsx)(o.dZ6,{className:"text-emerald-500 text-xl"})]}))},Control:e=>{let{children:t}=e,n=(0,a.Z)(e,c);const s=n.getValue()[0];return(0,i.jsxs)(u,(0,r.Z)((0,r.Z)({},n),{},{children:["\xa0\xa0",s&&(0,i.jsx)("img",{src:s.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),t]}))}},value:d.filter((e=>e.ChannelCode===n&&e.LocationCode==t)),onChange:h,placeholder:"Select",className:"caret-white",defaultMenuIsOpen:!0,blurInputOnSelect:!0,autoFocus:!0,styles:{menuList:e=>(0,r.Z)((0,r.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),control:e=>(0,r.Z)((0,r.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),input:e=>(0,r.Z)((0,r.Z)({},e),{},{color:"white"})}})}},45682:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(2803),r=(n(72791),n(80184));const s=function(e){let{showLoader:t}=e;return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,r.jsx)(a.$j,{size:"3.25rem"})}):(0,r.jsx)(r.Fragment,{})})}},24933:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(2803),r=n(72791),s=n(60364),o=n(11308),l=n(36064),i=n(88406),c=n(81320),d=n(89151),h=n(80184);const{Control:u}=i.c;const m=function(){const e=(0,s.useSelector)((e=>e.locale.isSelectChannelDialogOpen)),t=(0,s.useSelector)((e=>e.locale.selectedChannel)),n=(0,s.useSelector)((e=>e.locale.channelList)),i=(0,s.useSelector)((e=>e.auth.session.LoginId)),u=(0,s.useDispatch)();(0,r.useEffect)((()=>{(async()=>{try{if((0,c.isChannelSelected)(t)?u((0,l.ar)(!1)):u((0,l.ar)(!0)),!n){const e=await C();u((0,l.Uy)(e))}}catch(e){console.error(e)}})()}),[]),(0,r.useEffect)((()=>{try{(0,c.isChannelSelected)(t)&&u((0,l.ar)(!1))}catch(e){console.error(e)}}),[t]);const m=()=>{try{u((0,l.ar)(!1))}catch(e){console.error(e)}},C=async()=>{try{const e=await(0,o.bu)(i);return e.data.map((e=>({value:e.ChannelCode,label:e.LocationName+" "+e.ChannelName,ChannelCode:e.ChannelCode,LocationCode:e.LocationCode,ChannelName:e.ChannelName,ColorClass:"bg-rose-500",LocationName:e.LocationName,imgPath:e.Channel_Image})))}catch(e){throw e}};return(0,h.jsx)(h.Fragment,{children:Array.isArray(n)&&(0,h.jsxs)(a.Vq,{isOpen:e,onClose:m,onRequestClose:m,children:[(0,h.jsx)("h5",{className:"mb-6",children:"Select Channel"}),(0,h.jsx)("p",{className:"text-white mb-1",children:"Channel"}),(0,h.jsx)(d.Z,{channel:t,channelList:n,onChange:e=>{u((0,l.z8)(e))}}),(0,h.jsx)("div",{className:"text-right mt-6",children:(0,h.jsx)(a.zx,{variant:"solid",onClick:m,children:"Close"})})]})})}},8784:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(2803),r=n(87537),s=n(72791),o=n(81320),l=n(93673),i=n(60364),c=n(76053),d=n(60488),h=n(54748),u=n(9494),m=n(45682),C=n(24933),p=n(80184);const f=function(){const[e,t]=(0,s.useState)([]),[n,f]=(0,s.useState)([]),[g,S]=(0,s.useState)([]),[x,v]=(0,s.useState)([]),[N,_]=(0,s.useState)(!0),[y,j]=(0,s.useState)([null,null]),[b,w]=(0,s.useState)(!1),T=(0,i.useSelector)((e=>e.locale.selectedChannel));(0,s.useEffect)((()=>{try{(async()=>{y&&y[0]&&y[1]&&((0,d.Dh)(),_(!1),w(!0),Z(),w(!1))})()}catch(e){console.error(e),I()}}),[y,T]),(0,s.useEffect)((()=>{try{if(e.length>0){var t,n;const a=Object.keys(e[0]).map((e=>({header:e,accessorKey:e})));f(a),S(a),v([{value:null===(t=a[0])||void 0===t?void 0:t.accessorKey,label:null===(n=a[0])||void 0===n?void 0:n.accessorKey}])}}catch(a){console.error(a)}}),[e]);const P=()=>{try{_(!1)}catch(e){console.error(e)}},Z=()=>{try{(async()=>{const e=await(0,u.apiCallstoreprocedure)("Sp_EPG_Generation",{par_LocationCode:T.LocationCode,par_ChannelCode:T.ChannelCode,par_FromDate:(0,h.Tk)(y[0]),par_ToDate:(0,h.Tk)(y[1])});e?200===e.status?t(e.data):204===e.status?t([]):(0,o.openNotification)("danger","Something went wrong. Server responded with status code ".concat(e.status,".")):(0,o.openNotification)("danger","Something went wrong")})()}catch(e){console.error(e)}},I=()=>{try{_(!0),j([null,null]),t([])}catch(e){console.error(e)}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"h-full flex gap-4 flex-col",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,p.jsx)("h3",{children:"EPG"}),(0,p.jsx)("div",{id:"date-picker-range-container",className:"w-1/5",children:(0,p.jsx)(r.Z,{placeholder:"Select dates range",size:"sm",onChange:e=>{null===e[0]&&null===e[1]?I():j(e)},value:y,clearable:!0,disabled:!(0,o.isChannelSelected)(T)||y[0]&&y[1],onDropdownOpen:()=>I()})})]}),(0,p.jsx)(a.Zb,{bordered:!1,className:"grow",bodyClass:"h-full p-3",children:(0,p.jsx)(l.Z,{tableData:e,tableName:"epgReport",originalColumns:g,managedColumns:n,setManagedColumns:f,exportFileName:"EPG",defaultGroupByColumns:x,columnsToFormatInINR:["BalancedAmount","TotalAmount"]})})]}),(0,p.jsxs)(a.Vq,{isOpen:(0,o.isChannelSelected)(T)&&N,bodyOpenClassName:"overflow-hidden",closable:!1,onClose:P,children:[(0,p.jsxs)("div",{className:"flex justify-between relative items-center border-b border-gray-200 dark:border-gray-600 pb-4 mb-4",children:[(0,p.jsx)("h5",{children:"Select Date Range"}),(0,p.jsx)(a.zx,{shape:"circle",variant:"plain",icon:(0,p.jsx)(c.nfZ,{className:"text-gray-600"}),onClick:P,className:"absolute -top-4 -right-4"})]}),(0,p.jsx)("div",{className:"mx-auto",children:(0,p.jsx)(a.Vv,{value:y,maxDate:new Date((new Date).setDate((new Date).getDate()+30)),onChange:e=>j(e)})})]}),(0,p.jsx)(m.default,{show:b}),(0,p.jsx)(C.Z,{})]})}},60488:(e,t,n)=>{n.d(t,{Dh:()=>C,SE:()=>m,SU:()=>S,a1:()=>d,aP:()=>c,f$:()=>p,rp:()=>u,yw:()=>f});var a=n(1413),r=(n(81320),n(72791)),s=n(56355),o=n(2803),l=n(80184);const i=e=>e.split(":").map((e=>e.padStart(2,"0"))).join(":").substring(0,11);function c(e){let t=0;const n=[];return e.forEach((e=>{"NTC"!==e.F_C_S_P&&t++;const r=(0,a.Z)((0,a.Z)({},e),{},{PrimaryID:t});n.push(r)})),n}function d(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"CM",s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c="00:00:00:00",d=s||"00:00:00:00";return e.map(((e,u)=>{if(o&&"NTC"===e.F_C_S_P&&"DTM"===e.NtcTypeName)return e;if("NTC"===e.F_C_S_P||"BR"===e.F_C_S_P)return e.OffsetStartTime?(0,a.Z)((0,a.Z)({},e),{},{Start_Time:e.OffsetStartTime,Tel_Time:e.OffsetStartTime}):(0,a.Z)((0,a.Z)({},e),{},{Start_Time:"00:00:00:00",Tel_Time:"00:00:00:00",OffsetStartTime:"00:00:00:00"});let m=d;if(t)return"CT"!==e.F_C_S_P?e.F_C_S_P===r&&n||"NTC"===e.F_C_S_P||"BR"===e.F_C_S_P?(d=i(d),(0,a.Z)((0,a.Z)({},e),{},{Start_Time:d,Tel_Time:d})):(m=h(d,c,l),c=e.Duration,m=i(m),d=i(m),(0,a.Z)((0,a.Z)({},e),{},{Start_Time:m,Tel_Time:m})):(d=e.FPC_Time+":00:00",c=e.Duration,m=i(m),d=i(d),(0,a.Z)((0,a.Z)({},e),{},{Start_Time:d,Tel_Time:d}));if(0===u)d=s||e.Start_Time,c=e.Duration;else{if(m=h(d,c,l),m=i(m),d=i(m),"NTC"===e.F_C_S_P&&n||"BR"===e.F_C_S_P)return(0,a.Z)((0,a.Z)({},e),{},{Start_Time:d,Tel_Time:d});c=e.Duration,m=i(m),d=i(m)}return(0,a.Z)((0,a.Z)({},e),{},{Start_Time:m,Tel_Time:m})}))}const h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24;try{const a=60,r=60,s=24,[o,l,i,c]=e.split(":").map(Number),[d,h,u,m]=t.split(":").map(Number);let C=c+m,p=Math.floor(C/n);C%=n;let f=i+u+p,g=Math.floor(f/a);f%=a;let S=l+h+g,x=Math.floor(S/r);S%=r;let v=o+d+x;v%=s;return String(v).padStart(2,"0")+":"+String(S).padStart(2,"0")+":"+String(f).padStart(2,"0")+":"+String(C).padStart(2,"0")}catch(a){throw a}};function u(e){let t=0;return e.forEach((e=>{const[n,a,r,s]=e.CommercialDuration.split(":").map((e=>parseInt(e)));t+=3600*n+60*a+r+s/30})),t}function m(){document.getElementsByClassName("stacked-side-nav")[0].classList.add("hidden");document.getElementsByClassName("footer")[0].classList.add("hidden")}function C(){var e,t;const n=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=n&&(null===n||void 0===n||n.classList.add("hidden")),null===(e=document.getElementById("rightIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("leftIndicator"))||void 0===t||t.classList.add("hidden")}function p(){var e,t;const n=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=n&&(null===n||void 0===n||n.classList.remove("hidden")),null===(e=document.getElementById("leftIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("rightIndicator"))||void 0===t||t.classList.add("hidden")}const f=(e,t)=>e.map((e=>{let n=(0,a.Z)({},e);return"S"===n.F_C_S_P||n.F_C_S_P,"NTC"===n.F_C_S_P?(n.PrimaryID=t.PrimaryID,n.SeasonNo=t.SeasonNo,n.Ep_No=t.Ep_No,n.ContentCode=t.ContentCode,n.BreakNumber=t.BreakNumber,n.SeasonNo=t.SeasonNo,n.FPC_ID=t.FPC_ID):"CM"===n.F_C_S_P?(n.PrimaryID=t.PrimaryID,n.SeasonNo=t.SeasonNo,n.Ep_No=t.Ep_No,n.ContentCode=t.ContentCode,n.BreakNumber=t.BreakNumber,n.SeasonNo=t.SeasonNo,n.FPC_ID=t.FPC_ID,n.ScheduleTime=t.ScheduleTime):(n.SeasonNo=t.SeasonNo,n.Ep_No=t.Ep_No,n.ContentCode=t.ContentCode,n.BreakNumber=t.BreakNumber,n.SeasonNo=t.SeasonNo,n.FPC_ID=t.FPC_ID),n.SequenceNo=t.SequenceNo,n.Start_Time="00:00:00:00",n})),g=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))};const S=e=>{let{Progress:t,PromoSchdulingSave:n,openNotification:a}=e;const[i,c]=(0,r.useState)(0),[d,h]=(0,r.useState)(0),[u,m]=(0,r.useState)(0),[C,p]=(0,r.useState)(!1),f=(0,r.useRef)(!0),[S,x]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),_=e=>{let{percent:t}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{onClick:()=>{x(!0)},style:{cursor:"pointer"},children:(0,l.jsx)("p",{style:{marginTop:"5px",fontSize:"12px",color:"white"},children:g(d)})}),(0,l.jsx)("p",{style:{cursor:"pointer",color:"white",marginLeft:"10px"},onClick:()=>{p(!C)},children:C?(0,l.jsx)(s.Wh,{}):(0,l.jsx)(s.gmG,{})})]})};(0,r.useEffect)((()=>{y(10)}),[]),(0,r.useEffect)((()=>{let e;return C&&d>0?e=setInterval((()=>{h((e=>Math.max(e-1,0))),c((e=>{const t=100-d/(u||1)*100;return Math.min(t,100)}))}),1e3):0===d&&C&&(n(),a("info"),h(u)),()=>clearInterval(e)}),[C,d,u]),(0,r.useEffect)((()=>{f.current&&(f.current=!1)}),[d]);const y=e=>{const t=parseInt(e,10);if(!isNaN(t)&&t>0){const e=60*t;h(e),m(e),c(0),p(!0)}},j=e=>{console.log("onDialogClose",e),x(!1)};return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(o.Vq,{isOpen:S,width:300,height:200,onClose:j,onRequestClose:j,children:(0,l.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,l.jsx)("h5",{className:"mb-4",children:"Set Timer"}),(0,l.jsx)("div",{className:"flex align-center",children:(0,l.jsx)(o.II,{maxLength:"2",value:v,onChange:e=>{const t=e.target.value;(/^\d{0,2}$/.test(t)||""===t)&&N(t)}})}),(0,l.jsxs)("div",{className:"text-right mt-6",children:[(0,l.jsx)(o.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:()=>{y(v),j()},children:"Set"}),(0,l.jsx)(o.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:j,children:"Cancel"})]})]})}),(0,l.jsx)("div",{className:"flex",style:{width:"120px"},children:(0,l.jsx)(t,{variant:"circle",className:"mx-6",size:"sm",width:50,percent:i,customInfo:(0,l.jsx)(_,{percent:i})})})]})}},987:(e,t,n)=>{n.d(t,{v:()=>o});var a=n(72791),r=n(15036);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}var o=a.memo(a.forwardRef((function(e,t){var n=r.A.getPTI(e);return a.createElement("svg",s({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),a.createElement("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"}))})));o.displayName="ChevronDownIcon"},88170:(e,t,n)=>{n.d(t,{X:()=>o});var a=n(72791),r=n(15036);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}var o=a.memo(a.forwardRef((function(e,t){var n=r.A.getPTI(e);return a.createElement("svg",s({ref:t,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),a.createElement("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"}))})));o.displayName="ChevronRightIcon"}}]);
//# sourceMappingURL=8436.d2a5df39.chunk.js.map