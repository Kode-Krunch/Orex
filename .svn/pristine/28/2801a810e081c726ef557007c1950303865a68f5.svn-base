"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[5100],{31562:(e,t,n)=>{n.d(t,{$o:()=>r,DY:()=>m,F5:()=>o,H6:()=>d,HE:()=>i,OR:()=>h,QW:()=>u,WV:()=>c});var a=n(54048),s=n(46152);const l=n(74569);async function o(e){return s.Z.fetchData({url:"/musicagencymst/",method:"get",data:e})}const i=(e,t)=>new Promise(((n,s)=>{let o=JSON.stringify({MusicAgencyName:e.MusicAgencyName,MusicAgency_Addr1:e.MusicAgency_Addr1,MusicAgency_Addr2:e.MusicAgency_Addr1,PlaceCode:e.PlaceCode,CountryCode:e.CountryCode,StateCode:e.StateCode,MusicAgency_Contact1:e.MusicAgency_Contact1,MusicAgency_Contact2:e.MusicAgency_Contact1,MusicAgency_Faxno:e.MusicAgency_Faxno,MusicAgency_Email:e.MusicAgency_Email,ContactPerson:e.ContactPerson,IsMusicAgency:1,IsMusicCompany:1,IsActive:1}),i={method:"post",maxBodyLength:1/0,url:a.Z.apiPrefix+"/musicagencymst/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:o};l.request(i).then((e=>{n(e)})).catch((e=>{s(e)}))})),r=(e,t)=>new Promise(((n,s)=>{let o=JSON.stringify({MusicAgencyName:e.MusicAgencyName,MusicAgency_Addr1:e.MusicAgency_Addr1,MusicAgency_Addr2:e.MusicAgency_Addr1,PlaceCode:e.PlaceCode,CountryCode:e.CountryCode,StateCode:e.StateCode,MusicAgency_Contact1:e.MusicAgency_Contact1,MusicAgency_Contact2:e.MusicAgency_Contact1,MusicAgency_Faxno:e.MusicAgency_Faxno,MusicAgency_Email:e.MusicAgency_Email,ContactPerson:e.ContactPerson,IsMusicAgency:1,IsMusicCompany:1,IsActive:1}),i={method:"put",maxBodyLength:1/0,url:a.Z.apiPrefix+"/musicagencymst/".concat(e.MusicAgencyCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:o};l.request(i).then((e=>{n(e)})).catch((e=>{s(e)}))})),c=(e,t)=>new Promise(((n,s)=>{let o={method:"post",maxBodyLength:1/0,url:a.Z.apiPrefix+"/autoshufflepromo/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};l.request(o).then((e=>{n(e)})).catch((e=>{s(e)}))}));async function d(e){return s.Z.fetchData({url:"/autoshufflepromo/drop/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get"})}async function u(e){return s.Z.fetchData({url:"/autoshufflepromo/".concat(e),method:"get"})}async function m(e,t,n){return s.Z.fetchData({url:"/promomaster/asperdate/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&fromdate=").concat(t,"&todate=").concat(n),method:"get"})}async function h(){return s.Z.fetchData({url:"/promomaster/drop/",method:"get"})}},44630:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(72791);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;const[t,n]=(0,a.useState)("");return(0,a.useEffect)((()=>{if(t){let t=setTimeout((()=>n("")),e);return()=>{clearTimeout(t)}}}),[t]),[t,n]}},24793:(e,t,n)=>{n.d(t,{Cy:()=>c,IG:()=>r,PW:()=>d,hW:()=>u});var a=n(45987),s=n(1413),l=n(53761),o=n(81320);const i=["FPC_Time","Event_Name","FPC_ID","BreakNumber","Duration","F_C_S_P"],r=[{header:"FPC_ID",name:"FPC_ID",code:"FPC_ID",width:"auto",ScreenType:"FinalLog",Sequence:1,isvisible:!0},{header:"FPC_Time",name:"FPC_Time",code:"FPC_Time",width:"auto",ScreenType:"FinalLog",Sequence:1,isvisible:!0},{header:"Event_Name",name:"Event_Name",code:"Event_Name",width:"auto",ScreenType:"FinalLog",Sequence:1,isvisible:!0},{header:"Duration",name:"Duration",code:"Duration",width:"auto",ScreenType:"FinalLog",Sequence:1,isvisible:!0}];const c=(e,t)=>{const n=e.filter((e=>"S"===e.F_C_S_P)),a=e.filter((e=>"PR"===e.F_C_S_P)),l=e.filter((e=>"SG"===e.F_C_S_P)),o=e.filter((e=>"C"===e.F_C_S_P)),i=e.filter((e=>"CT"===e.F_C_S_P)),r=e.filter((e=>"CM"===e.F_C_S_P));t({NTC:[],Promos:[],Songs:[],Commercial:[],Programs:[]}),t((e=>(0,s.Z)((0,s.Z)({},e),{},{NTC:[...e.NTC,...n],Promos:[...e.Promos,...a],Songs:[...e.Songs,...l],Commercial:[...e.Commercial,...o],Commercial2:[...e.Commercial,...r],Programs:[...e.Programs,...i]})))};function d(e,t,n,s){console.log("table1data",e),function(e,t){console.log("StartTimeArray*",e);var n=[],a="",s="",l="";let i=0;n=[];for(let u=0;u<e.length;u++)if("CT"===e[u].F_C_S_P){a=e[u].FPC_Time,s=e[u].FPC_TimeTo;var r,c,d=e.slice(u+1,e.length).find((e=>"CT"===e.F_C_S_P));null!==d&&void 0!==d||(d=e[e.length-2]),d&&void 0!=(l=e.indexOf(d))&&(n.push({StartTime:a,EndTime:s,PlayTime:null===(r=e[l+1])||void 0===r?void 0:r.Start_Time,Diffrance:(0,o.parseDuration)(null===(c=e[l+1])||void 0===c?void 0:c.Start_Time)-(0,o.parseDuration)(s+":00:00"),columnIndex:i+1}),i+=1)}t(n)}(e,n);const l=e.reduce(((e,t)=>{const{FPC_Time:n,Event_Name:s,FPC_ID:l,BreakNumber:r,Duration:c,F_C_S_P:d}=t,u=((0,a.Z)(t,i),e.find((e=>e.FPC_ID===l)));if(u){const e=u.data.find((e=>e.BreakNumber===r));e?"PR"===d?(void 0===e.totalDuration&&(e.totalDuration=0),e.totalDuration+=1):"NTC"===d?(void 0===e.totalNTCCount&&(e.totalNTCCount=0),e.totalNTCCount+=1):"CM"===d?(void 0===e.totalCMCount&&(e.totalCMCount=0),e.totalCMCount+=1):"SG"===d?(void 0===e.totalSGDuration&&(e.totalSGDuration=0),e.totalSGDuration+=1):(e.totalDuration+=0,e.totalSGDuration+=0,e.totalNTCCount+=0,e.totalCMCount+=0):u.data.push({BreakNumber:r,totalDuration:0,totalNTCCount:0,totalSGDuration:0,totalCMCount:0})}else e.push({FPC_Time:n,FPC_ID:l,Event_Name:s,data:[{BreakNumber:r,totalDuration:"PR"===d?(0,o.parseDuration)(c):0,totalNTCCount:"NTC"===d?(0,o.parseDuration)(c):0,totalCMCount:"CM"===d?(0,o.parseDuration)(c):0,totalSGDuration:"SG"===d?(0,o.parseDuration)(c):0}]});return e}),[]);console.log("groupedData",l);let r=l;const c=[];r.forEach(((e,t)=>{const n=e.data.reduce(((e,t)=>e+t.totalDuration),0),a=e.data.reduce(((e,t)=>e+t.totalSGDuration),0),s=e.data.reduce(((e,t)=>e+t.totalCMCount),0);c.push({FPC_Time:e.FPC_Time,totalDuration:Math.round(n),totalSGDuration:Math.round(a),totalCMCount:Math.round(s)})}));const d=r.map((e=>{const t=e.data.map((t=>({key:"".concat(e.FPC_ID,"-").concat(t.BreakNumber),label:"BreakNumber",icon:"pi pi-fw pi-file",data:{BreakNumber:t.BreakNumber,totalDuration:t.totalDuration,totalSGDuration:t.totalSGDuration,totalCMCount:t.totalCMCount}}))),n=t.reduce(((e,t)=>e+t.data.totalDuration),0),a=t.reduce(((e,t)=>e+t.data.totalSGDuration),0),s=t.reduce(((e,t)=>e+t.data.totalCMCount),0);return{key:"".concat(e.FPC_ID),label:"Event_Name",icon:"pi pi-fw pi-cog",data:{Event_Name:"["+e.FPC_Time+"] "+e.Event_Name,BreakNumber:t.length,totalDuration:n,totalSGDuration:a,totalCMCount:s,FPC_Time:e.FPC_Time},children:t}}));console.log("transformedData",d),t(d)}const u=(e,t,n,a,o,i)=>{const r=t.filter((t=>{if("CT"==t.F_C_S_P||"S"==t.F_C_S_P){return!e.find((e=>t.Event_Name==e.Event_Name&&t.FPC_Time==e.FPC_Time))}return!1})),c=e.filter((e=>{if("CT"===e.F_C_S_P){return!t.find((t=>e.Event_Name==t.Event_Name&&e.FPC_Time==t.FPC_Time))}return!1})),d=t.map((e=>r.find((t=>e.PrimaryID==t.PrimaryID&&"CT"==e.F_C_S_P))?(0,s.Z)((0,s.Z)({},e),{},{EventDefaultBackColor:"red"}):e)),u=e.map((e=>c.find((t=>e.FPC_ID==t.FPC_ID))?(0,s.Z)((0,s.Z)({},e),{},{EventDefaultBackColor:"red"}):e)),m=t.filter((e=>r.find((t=>e.FPC_ID===t.FPC_ID))));console.log("mismatched2x",m);const h=e.filter((e=>c.find((t=>e.FPC_ID==t.FPC_ID))));n(m);a(m.filter((e=>"CT"==e.F_C_S_P))),o((0,l.hp)(u)),o((0,l.jm)(d)),i(h)}},96379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var a=n(72791),s=n(81721),l=n(2803),o=n(60364),i=n(87350),r=n(54748),c=n(45987),d=n(1413),u=n(28536),m=n(46657),h=n(60488),x=n(50919),p=(n(88081),n(58617)),g=n(85880),C=n(67388),f=n(79577),j=n(59856),S=n(25146),y=n(4489),v=n(81320),b=n(1063),_=n(33792),N=(n(52249),n(80184));const P=e=>{let{BreakwiseData:t,colorMapping:n}=e;const a={alignItems:"center",borderColor:"rgb(70, 80, 94)",borderRadius:"9999px",borderWidth:"1px",display:"inline-flex",fontSize:".75rem",fontWeight:"600",lineHeight:"1rem",padding:".25rem .625rem",whiteSpace:"nowrap"};return(0,N.jsx)("div",{style:{width:"100%"},children:(0,N.jsxs)("div",{style:{height:"335px",overflow:"auto"},children:[(0,N.jsxs)("div",{className:"flex items-center mb-2",children:[(0,N.jsx)("div",{className:"mr-1",children:(0,N.jsxs)("p",{style:a,children:[(0,N.jsx)("span",{style:{marginRight:".375rem",backgroundColor:"red",borderRadius:"9999px",height:".5rem",width:".5rem"}}),"B: Break"]})}),(0,N.jsx)("div",{className:"mr-1 ",children:(0,N.jsxs)("p",{style:a,children:[(0,N.jsx)("span",{style:{marginRight:".375rem",backgroundColor:n.CM,borderRadius:"9999px",height:".5rem",width:".5rem"}})," ","C: Comm"]})}),(0,N.jsx)("div",{className:"mr-1",children:(0,N.jsxs)("p",{style:a,children:[(0,N.jsx)("span",{style:{marginRight:".375rem",backgroundColor:n.PR,borderRadius:"9999px",height:".5rem",width:".5rem"}})," ","P: Promo"]})})]}),(0,N.jsx)(l.Bl,{children:(0,N.jsxs)(_.i,{value:t,resizableColumns:!0,showGridlines:!0,rowClassName:e=>(e.parent,"subrow"),children:[(0,N.jsx)(b.s,{style:{width:"150px",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",background:"#111827",color:"white",fontSize:"13px"},field:"Event_Name",header:"Event Name",expander:!0}),(0,N.jsx)(b.s,{style:{width:"40px",maxWidth:"80px",background:"#111827",color:"white",fontSize:"13px",textAlign:"right"},field:"BreakNumber",header:"B"}),(0,N.jsx)(b.s,{style:{width:"40px",maxWidth:"80px",background:"#111827",color:"white",fontSize:"13px",textAlign:"right"},field:"totalCMCount",header:"C"}),(0,N.jsx)(b.s,{style:{width:"60px",maxWidth:"100px",background:"#111827",color:"white",fontSize:"13px",textAlign:"right"},field:"totalDuration",header:"P"})]})})]})})};var D=n(59054),T=n(37083),k=n(56355),w=n(78971),F=n(44630),E=n(31562),I=n(39126),z=n(36064),M=n(24793),R=n(81694),A=n.n(R),Z=n(78820),B=n(45682),q=n(43235);const L=["header"],{Tr:H,Th:O,Td:V,THead:G,TBody:W}=l.iA;var K=[];const Q=e=>{let{table1Data:t,setTable1Data:n,cities:b,setcities:_,Columnright:R,setColumnright:Q,table2Data:J,setTable2Data:X,table3Data:U,setTable3Data:$,fpcTimes:ee,value:te,value2:ne,setValue:ae,breaknumbers:se,setbreaknumbers:le,Columnleft:oe,setColumnleft:ie,onCellSelect:re,evendata:ce,setheadername:de}=e;console.log("Columnright",R);const ue=(0,o.useDispatch)(),me=(0,o.useSelector)((e=>e.locale.selectedChannel)),he=(0,o.useSelector)((e=>e.auth.session.ChannelSetting)),[xe,pe]=(0,a.useState)([]),[ge,Ce]=(0,a.useState)([]),[fe,je]=(0,a.useState)([]);(0,a.useEffect)((()=>(ue((0,z.rh)([te,"Promo Scheduling"])),de(""),()=>{de("Promo Scheduling")})),[]);const[Se,ye]=(0,a.useState)(!1),[ve,be]=(0,a.useState)(!1),[_e,Ne]=(0,a.useState)(0),[Pe,De]=(0,a.useState)(!1),[Te,ke]=(0,a.useState)([...t]),[we,Fe]=(0,a.useState)([]),[Ee,Ie]=(0,a.useState)([]),[ze,Me]=(0,a.useState)(null),[Re,Ae]=(0,a.useState)(null),[Ze,Be]=(0,a.useState)(!0),[qe,Le]=(0,a.useState)(!0),[He,Oe]=(0,a.useState)(!0),[Ve,Ge]=(0,a.useState)(!1),[We,Ke]=(0,a.useState)(!1),[Qe,Ye]=(0,a.useState)(!1),[Je,Xe]=(0,a.useState)(1),[Ue,$e]=(0,a.useState)([]),[et,tt]=(0,a.useState)({NTC:[],Promos:[],Songs:[],Commercial:[],Programs:[]}),[nt,at]=(0,a.useState)(!1),[st,lt]=(0,a.useState)(""),[ot,it]=(0,a.useState)(!1),[rt,ct]=(0,a.useState)("Maximize"),[dt,ut]=(0,a.useState)(),[mt,ht]=(0,a.useState)([{columnName:"",filterValue:"",filterOption:"contains"}]);const xt=(0,a.useRef)(null);"".concat(Number(window.innerHeight-140),"px");(0,a.useRef)(null),(0,a.useRef)(null);const pt=(0,a.useRef)(null),gt=(0,a.useRef)(0),Ct=[];Ct[0]=(0,a.useRef)(null),Ct[1]=(0,a.useRef)(null),Ct[2]=(0,a.useRef)(null),Ct[3]=(0,a.useRef)(null),Ct[4]=(0,a.useRef)(null),Ct[5]=(0,a.useRef)(null),Ct[6]=(0,a.useRef)(null),Ct[7]=(0,a.useRef)(null),Ct[8]=(0,a.useRef)(null),Ct[9]=(0,a.useRef)(null),Ct[10]=(0,a.useRef)(null);const[ft,jt]=(0,a.useState)([]),[St,yt]=(0,a.useState)({0:"contains",1:"contains",2:"contains",3:"contains",4:"contains",5:"contains",6:"contains",7:"contains",8:"contains",9:"contains",10:"contains"}),vt=(0,a.useRef)(null),[bt,_t]=(0,a.useState)(!1),[Nt,Pt]=(0,a.useState)(!1),[Dt,Tt]=(0,a.useState)(0),[kt,wt]=(0,a.useState)(!1),Ft=e=>{Pt(!1)},Et=e=>{console.log("onDialogClose",e),_t(!1)},[It,zt]=(0,a.useState)([]),[Mt,Rt]=(0,a.useState)(!0),[At,Zt]=(0,a.useState)(!1),[Bt,qt]=(0,a.useState)([]),[Lt,Ht]=(0,a.useState)([]),[Ot,Vt]=(0,a.useState)([]),[Gt,Wt]=(0,a.useState)(0),[Kt,Qt]=(0,a.useState)(null),[Yt,Jt]=(0,a.useState)([]),[Xt,Ut]=(0,a.useState)(!1),[$t,en]=(0,a.useState)(!1),[tn,nn]=(0,a.useState)(!1),[an,sn]=(0,a.useState)([]);console.log("BreakwiseData",an);const[ln,on]=(0,a.useState)(!1),[rn,cn]=(0,a.useState)(!1),[dn,un]=(0,a.useState)(!1),[mn,hn]=(0,a.useState)(!1),[xn,pn]=(0,a.useState)(""),[gn,Cn]=(0,a.useState)(""),[fn,jn]=(0,a.useState)("00:00"),[Sn,yn]=(0,a.useState)("23:59"),[vn,bn]=(0,a.useState)(null),[_n,Nn]=(0,a.useState)(!1),Pn=(0,o.useSelector)((e=>e.auth.session.token)),Dn=[{label:"Copy",icon:"pi pi-fw pi-copy",command:()=>{En()}},{label:"Cut",icon:"pi pi-fw pi-search",command:()=>{Fn(),Ut(!1)}},{label:"Paste",icon:"pi pi-fw pi-search",command:()=>{In()}},{label:"Rotation Info",icon:"pi pi-fw pi-info-circle",command:()=>{Tn()}},{label:"Remove",icon:"pi pi-fw pi-trash",command:()=>{Zn()}}],Tn=()=>{console.log("table1Data",t),lt("Rotation Info"),ia(!1),ca(!0),ua(!1);let e=t[Bt[0]].Event_Name,n=t.filter(((t,n)=>t.Event_Name==e));$([...n]),Wt(1)},kn=async()=>{Nn(!0);const e=t.map(((e,t)=>(0,d.Z)({Position:t+1},e))).filter((e=>"PR"===e.F_C_S_P)).map((e=>({LocationCode:ne.LocationCode,ChannelCode:ne.ChannelCode,TelecastDate:(0,r.Tk)(te),NewTelecastDate:(0,r.Tk)(te),TelecastTime:e.Start_Time,PromoCode:e.PromoCode,ContentCode:e.ContentCode,BreakNumber:e.BreakNumber,SeasonNo:e.SeasonNo,EpisodeNo:e.Ep_No,Position:e.Position,PromoTypeCode:Number(e.PromoTypeCode),ActualTelecastTime:e.Start_Time,DayOfWeek:0,NewDayOfWeek:0,FPC_ID:e.FPC_ID,IsActive:1})));try{const t=await(0,i.ae)(e,Pn);if(console.log(t),console.log(t.status),200==t.status&&(wn("success","Data Saved Successfully."),Nn(!1)),204===t.status)return wn("danger","Data Already Exists."),void Nn(!1)}catch(n){500==n.response.status&&(wn("danger","Server Error."),Nn(!1))}(()=>{if(It.length<=2)return;let e=It[It.length-1];gt.current=2,zt([[],e])})(),Nn(!1)},wn=(e,t)=>{l.Am.push((0,N.jsx)(l.P_,{title:e,type:e,children:t}))},Fn=()=>{Ut(!1);let e=t.filter(((e,t)=>Bt.includes(t)));Jt(e),Ht([...Bt])},En=()=>{Fn(),Ut(!0)},In=()=>{const e=Yt.filter((e=>"PR"===e.F_C_S_P));if(e.length<=0)return;let a=t.slice(0,Kt+1),s=t.slice(Kt+1,t.length),l=t[Kt];const o=[...a,...(0,h.yw)(e,l),...s];Xt?n(o):(console.log(Lt),n(o.filter(((e,t)=>!Lt.includes(t))))),qt([]),Ut(!1)};function zn(e,t,n,a){let s=0;const l=e.slice(n,a);return console.log("filterdata",l),l.forEach((e=>{e.F_C_S_P===t&&(console.log("F_C_S_P",e.F_C_S_P),s+=(0,v.parseDuration)(e.Duration))})),(0,v.formatDurationHHMMSSFF)(s)}(0,a.useEffect)((()=>{var e;let n=null===(e=t[Bt[0]])||void 0===e?void 0:e.Event_Name,a=t.filter(((e,t)=>e.Event_Name==n));$([...a])}),[Bt]);function Mn(e,t){const[n,a]=e.split(":").slice(0,2);let s=t.getHours(),l=t.getMinutes();const o=60*Number(n)+Number(a),i=60*Number(s)+Number(l);return o<i?0:o>i?1:2}function Rn(){let e=Ot.map((e=>J[e]));console.log("SelectedBrkNo",K),console.log("promoinsert");let a=1,s=[...t];t.forEach(((n,l)=>{if(K.includes(Number(n.BreakNumber))&&"PR"!==n.F_C_S_P){if(console.log("promoinsert"),console.log(n.Start_Time),console.log(fn),console.log(Mn(n.Start_Time,fn)),0==Mn(n.Start_Time,fn))return;if(1==Mn(n.Start_Time,Sn))return;const o=(0,h.yw)(e,t[l]);s.splice(l+a,0,...o),a+=e.length}}));let l=(0,h.a1)(s,Ze,qe);n(l)}function An(){if(Bt.length>1)return void wn("warning","Kindly select atleast one Promo.");if(Ot.length>1)return void wn("warning","Kindly select one Promo only.");let e=Ot.map((e=>J[e])),a=Bt[0],s=(0,d.Z)({},t[a]);if(console.log("promos",e),"PR"!==s.F_C_S_P)return void wn("warning","Kindly select promo.");s.Event_Name=e[0].Event_Name,s.Duration=e[0].Duration,s.Tape_ID=e[0].Tape_ID,s.VideoID=e[0].VideoID;const l=[...t.slice(0,a),s,...t.slice(a+1,t.length)];let o=(0,h.a1)(l,Ze,qe);n(o)}function Zn(){if(console.log("removepromo"),t.filter(((e,t)=>Bt.includes(t)&&"PR"!==e.F_C_S_P)).length>0)return void wn("warning","Kindly Select Only Promo.");let e=t.filter(((e,t)=>!Bt.includes(t))),a=(0,h.a1)(e,Ze,qe);n(a),qt([])}(0,a.useEffect)((()=>{(0,h.SE)();const e=document.getElementsByClassName("Gbox2")[0],t=document.getElementsByClassName("Gbox2")[0].children[1];return e.style.display="block",t.style.display="block",()=>{e.style.display="none",t.style.display="none"}}),[]),(0,a.useEffect)((()=>{console.log("starttime",fn),console.log("endtime",Sn)}),[fn,Sn]),(0,a.useEffect)((()=>{const e=t.filter(((e,t)=>Bt.includes(t)&&"PR"===e.F_C_S_P)),n=e.reduce(((e,t)=>e+(0,v.parseDuration)(t.Duration)),0);Ae((0,v.formatDurationHHMMSSFF)(n)),console.log("selectedItems Count",e.length,(0,v.formatDurationHHMMSSFF)(n));const a=Bt[0];console.log("inputId",a);const s=t.slice(0,t.findIndex(((e,t)=>t===a))).reverse().find((e=>"CT"===e.F_C_S_P)),l=t.slice(t.indexOf(s)+1,t.length).find((e=>"CT"===e.F_C_S_P));if(s&&l){const e=(0,v.timeToMilliseconds)(l.FPC_Time+":00:00")-(0,v.timeToMilliseconds)(s.FPC_Time+":00:00"),t=(0,v.millisecondsToTime)(e);Cn(t)}const o=zn(t,"PR",t.indexOf(s),t.indexOf(l)),i=zn(t,"S",t.indexOf(s),t.indexOf(l)),r=zn(t,"C",t.indexOf(s),t.indexOf(l));cn(o),un(i),hn(r),Me(e.length)}),[Bt]);const[Bn,qn]=(0,a.useState)({});(0,a.useEffect)((()=>{Se||ve?gt.current>1&&(Se&&ye(!1),ve&&be(!1)):(gt.current++,zt([...It,t])),(e=>{const t=e.filter((e=>"NTC"===e.F_C_S_P)),n=e.filter((e=>"PR"===e.F_C_S_P)),a=e.filter((e=>"SG"===e.F_C_S_P)),s=e.filter((e=>"C"===e.F_C_S_P)),l=e.filter((e=>"CT"===e.F_C_S_P)),o=e.reduce(((e,t)=>"PR"===t.F_C_S_P?e+(0,v.parseDuration)(t.Duration):e),0);tt({NTC:[],Promos:[],Songs:[],Commercial:[],Programs:[],Duration:[]}),tt((e=>(0,d.Z)((0,d.Z)({},e),{},{NTC:[...e.NTC,...t],Promos:[...e.Promos,...n],Songs:[...e.Songs,...a],Commercial:[...e.Commercial,...s],Programs:[...e.Programs,...l],Duration:[...e.Duration,o]})))})(t),(0,M.PW)(t,sn,$e,ee);qn((e=>{const n={};return t.forEach((e=>{const{EventDefaultBackColor:t,F_C_S_P:a}=e;n[a]||(n[a]=t)})),n})())}),[t]),(0,a.useEffect)((()=>{ue((0,w.u2)(t)),ue((0,w.MI)((new Date).toLocaleString())),ue((0,w.pz)(te))}),[t]),(0,a.useEffect)((()=>{}),[J]),(0,a.useEffect)((()=>{const e=b.filter((e=>!R.some((t=>t.code===e.code))));console.log(e),pe(e)}),[R]);const Ln=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):t&&(t.current=e)}))}},[Hn,On]=(0,a.useState)(!1),[Vn,Gn]=(0,a.useState)(null),[Wn,Kn]=(0,a.useState)(""),Qn=(e,t)=>{if("he"==dt){const n=[...xe];n[e].header=t,pe(n)}if("she"==dt){const n=[...ge];n[e].header=t,Ce(n)}},Yn=()=>{console.log("nonselectedCities",xe);const e=[{header:"FPC Time",name:"FPC_Time",code:"FPC_Time",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"Play Time",name:"Start_Time",code:"Start_Time",width:"auto",ScreenType:"Song",Sequence:1,isvisible:!0},{header:"Event Name",name:"Event_Name",code:"Event_Name",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0}],t=R.filter((t=>!e.some((e=>e.name===t.name))));return(0,N.jsxs)("div",{className:"grid grid-cols-2 gap-4",style:{background:"transparent"},children:["he"==dt&&(0,N.jsx)(l.Zb,{header:(0,N.jsx)("p",{style:{fontSize:"16px"},children:"Visible"}),children:null!=R&&(0,N.jsx)(u.Z5,{onDragEnd:n=>{if(!n.destination)return;let a=n.source.index,s=n.destination.index;if(a>s){let e=a;a=s,s=e}let l=t[a];const o=[...t.slice(0,a),...t.slice(a+1,s+1),l,...t.slice(s+1,t.length)];console.log("updatedTable1Data********",o),Q([...e,...o])},children:(0,N.jsx)(u.bK,{droppableId:"list",children:n=>(0,N.jsxs)("div",(0,d.Z)((0,d.Z)({ref:n.innerRef},n.droppableProps),{},{children:[e.map(((e,t)=>(0,N.jsx)("div",{className:"flex",children:e.header},e.name))),t.map(((n,a)=>(0,N.jsx)(u._l,{draggableId:"item-".concat(n.name),index:a,children:a=>(0,N.jsx)("div",(0,d.Z)((0,d.Z)((0,d.Z)({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{children:(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("i",{className:"pi pi-bars mr-2",onClick:()=>{let a=t.filter((e=>e.name!=n.name));console.log("setColumnright",a),Q([...e,...a])}}),(0,N.jsx)("i",{className:"pi pi-minus-circle mr-2",onClick:()=>{let a=t.filter((e=>e.name!=n.name));Q([...e,...a])}}),n.header]})}))},n.name))),n.placeholder]}))})})}),"she"==dt&&(0,N.jsx)(l.Zb,{header:(0,N.jsx)("p",{style:{fontSize:"16px"},children:"Visible"}),children:null!=oe&&(0,N.jsx)(u.Z5,{onDragEnd:e=>{if(console.log(e),!e.destination)return;let t=e.source.index,n=e.destination.index;if(t>n){let e=t;t=n,n=e}let a=oe[t];const s=[...oe.slice(0,t),...oe.slice(t+1,n+1),a,...oe.slice(n+1,oe.length)];ie(s)},children:(0,N.jsx)(u.bK,{droppableId:"list",children:e=>(0,N.jsxs)("div",(0,d.Z)((0,d.Z)({ref:e.innerRef},e.droppableProps),{},{children:[oe.map(((e,t)=>(0,N.jsx)(u._l,{draggableId:"item-".concat(e.name),index:t,children:t=>(0,N.jsx)("div",(0,d.Z)((0,d.Z)((0,d.Z)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("i",{className:"pi pi-bars mr-2",onClick:()=>{let t=oe.filter((t=>t.name!=e.name));ie(t)}}),oe.length<4?(0,N.jsx)("i",{className:"pi pi-minus-circle mr-2"}):(0,N.jsx)("i",{className:"pi pi-minus-circle mr-2",onClick:()=>{let t=oe.filter((t=>t.name!=e.name));ie(t)}}),e.header]})}))},e.name))),e.placeholder]}))})})}),"he"==dt&&(0,N.jsx)(l.Zb,{header:(0,N.jsx)("p",{style:{fontSize:"16px"},children:"Hidden"}),children:xe.map(((e,t)=>(0,N.jsxs)(N.Fragment,{children:[" ",(0,N.jsxs)("div",{children:[(0,N.jsx)("i",{className:"pi pi-plus-circle mr-2",onClick:()=>{let t=xe.filter((t=>t.name!=e.name));console.log(t),console.log(e),pe(t),Q([e,...R])}}),(0,N.jsx)("span",{onClick:()=>{Gn(t),Kn("")},children:e.header})]},t),Vn===t&&(0,N.jsxs)("div",{className:"flex",style:{marginBottom:"10px",marginTop:"10px"},children:[(0,N.jsx)("input",{style:{color:"black",borderRadius:"5px",padding:"5px",height:"35px",width:"150px",background:"transparent",border:"1px solid gray"},placeholder:"Header name",onBlur:e=>{Kn(e.target.value)}}),"\xa0",(0,N.jsx)(l.zx,{shape:"circle",variant:"plain",size:"xs",style:{padding:"5px",marginTop:"3px"},onClick:()=>{const e=Wn,n=e.length;console.log(e),console.log(n),Wn.length>0&&(Qn(t,Wn),Gn(null))},icon:(0,N.jsx)(g.Dey,{})}),"\xa0",(0,N.jsx)(l.zx,{shape:"circle",variant:"plain",size:"xs",style:{padding:"5px",marginTop:"3px"},onClick:()=>{Gn(null)},icon:(0,N.jsx)(g.Fk5,{})})]})]})))}),"she"==dt&&(0,N.jsx)(l.Zb,{header:(0,N.jsx)("p",{style:{fontSize:"16px"},children:"Hidden"}),children:ge.map(((e,t)=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("i",{className:"pi pi-plus-circle mr-2",onClick:()=>{let t=ge.filter((t=>t.name!=e.name));console.log(t),console.log(e),console.log(oe.length),oe.length>2&&(Ce(t),ie([e,...oe]))}}),(0,N.jsx)("span",{onClick:()=>{Gn(t),Kn("")},children:e.header})]},t),Vn===t&&(0,N.jsxs)("div",{className:"flex",style:{marginBottom:"10px",marginTop:"10px"},children:[(0,N.jsx)("input",{style:{color:"black",borderRadius:"5px",padding:"5px",height:"35px",width:"150px",background:"transparent",border:"1px solid gray"},placeholder:"Header name",onBlur:e=>{Kn(e.target.value)}}),"\xa0",(0,N.jsx)(l.zx,{shape:"circle",variant:"plain",size:"xs",style:{padding:"5px",marginTop:"3px"},onClick:()=>{const e=Wn,n=e.length;console.log(e),console.log(n),Wn.length>0&&(Qn(t,Wn),Gn(null))},icon:(0,N.jsx)(g.Dey,{})}),"\xa0",(0,N.jsx)(l.zx,{shape:"circle",variant:"plain",size:"xs",style:{padding:"5px",marginTop:"3px"},onClick:()=>{Gn(null)},icon:(0,N.jsx)(g.Fk5,{})})]})]})))})]})},[Jn,Xn]=(x.z,(0,a.useState)([{value:0,label:"All"}])),[Un,$n]=(0,a.useState)([]),[ea,ta]=(0,a.useState)("airtel"),[na,aa]=(0,a.useState)(),[sa,la]=(0,a.useState)(0),[oa,ia]=(0,a.useState)(!1),[ra,ca]=(0,a.useState)(!1),[da,ua]=(0,a.useState)(!1),[ma,ha]=(0,a.useState)([]);(0,a.useEffect)((()=>{pa(),ga(me,(0,r.Tk)(te))}),[]);const xa=(0,o.useSelector)((e=>e.auth.session.LoginId));(0,a.useEffect)((()=>{(async()=>{let e={LocationCode:me.LocationCode,ChannelCode:me.ChannelCode};const t=(await(0,E.H6)(e)).data.map((e=>({value:e.TemplateNo,label:e.TemplateNo})));console.log("mergedData",t),ha(t)})()}),[]);const pa=async()=>{const e=(await(0,C.apiGetPromotypemaster)(xa)).data.map((e=>({value:e.PromoTypeCode,label:e.PromoTypeName})));Xn([...Jn,...e])},ga=async(e,t)=>{var n;let a={LocationCode:me.LocationCode,ChannelCode:me.ChannelCode,FormName:"PromoScheduling",TelecastDate:t};const s=await(0,i.DD)(a);console.log("auditMaster",s);const l=null===(n=s.data)||void 0===n?void 0:n.map((e=>({value:e.D_date,label:e.D_date})));$n([...l])},Ca=()=>{(0,i.OK)(ne,(0,r.Tk)(te),na,ea).then((e=>e.data)).then((e=>{console.log(e),X(e);let t=Object.keys(e[0]),n=t.map((e=>{let t={};return t.name=e,t.code=e,t.width=100,t.header=e,t}));je(n),console.log(t),console.log(n),De(e);const a=n.filter((e=>!oe.some((t=>t.code===e.code))));console.log(t),Ce(a)}))};const fa=()=>{if(Bt.length>1)return void wn("warning","Kindly select one promo only.");if(Ot.length>1)return void wn("warning","Kindly Select one promo only.");let e=t[Bt[0]],a=J[Ot[0]],s=t.map((t=>t.Event_Name===e.Event_Name&&"PR"===t.F_C_S_P?(0,d.Z)((0,d.Z)({},t),{},{Event_Name:a.Event_Name,Duration:a.Duration,Tape_ID:a.Tape_ID,VideoID:a.VideoID}):t));console.log("res*",s);let l=(0,h.a1)(s,Ze,qe);n(l)},ja=e=>{(0,f.w)({target:e.currentTarget,message:Fa,defaultFocus:"accept",accept:Rn,reject:Sa})},Sa=()=>{},[ya,va]=(0,F.Z)(),[ba,_a]=(0,a.useState)(""),Na=(0,N.jsxs)("div",{children:[(0,N.jsx)(l.zx,{size:"sm",icon:(0,N.jsx)(g.Fk5,{}),onClick:()=>nn(!1),children:"Cancel"}),(0,N.jsx)(l.zx,{variant:"solid",icon:(0,N.jsx)(g.Dey,{style:{marginTop:"2px"}}),onClick:()=>{nn(!1),"he"==dt&&(async()=>{const e=R.map(((e,t)=>({ScreenName:"Promo",ColumnName:e.code,Header:e.header,SequenceNo:t,IsVisible:1})));if(console.log(R),console.log(e),e.length>4)try{const t=await(0,i.nR)(e,Pn);if(200===t.status)return _a("success"),void va("Data Inserted Successfully.");if(204===t.status)wn("danger","Data Already Exists.")}catch(t){if(500===t.response.status)return _a("error"),void va("Server Error.")}else _a("danger"),va("Kindly Select minimum 5 Columns")})(),"she"==dt&&(async()=>{const e=oe.map(((e,t)=>({ScreenName:"PromoLeft",ColumnName:e.code,Header:e.header,SequenceNo:t,IsVisible:1})));if(console.log(oe),console.log(e),e.length>2)try{const t=await(0,i.nR)(e,Pn);if(200===t.status)return _a("success"),void va("Data Inserted Successfully.");if(204===t.status)wn("danger","Data Already Exists.")}catch(t){if(500===t.response.status)return _a("error"),void va("Server Error.")}else _a("danger"),va("Kindly select minimum 2 columns")})()},autoFocus:!0,size:"sm",children:"Save\xa0\xa0"})]}),Pa=e=>{const t="".concat(e.className," justify-content-space-between");return(0,N.jsx)("div",{className:t,children:(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("span",{className:"font-bold",children:"Promo Search"}),(0,N.jsxs)("div",{className:"flex ",children:[Ot&&Ot.length>0&&(0,N.jsx)(l.u,{title:"Columns Setting",children:(0,N.jsx)("span",{style:{fontSize:20,marginRight:"10px",marginLeft:"10px",cursor:"pointer"},onClick:()=>{nn(!0),ut("she")},children:(0,N.jsx)(p.XlX,{})})}),(0,N.jsx)(l.zx,{icon:(0,N.jsx)(p.fMW,{}),size:"xs",style:{marginTop:-5},onClick:()=>lt(" ")})]})]})})},Da=e=>{const t="".concat(e.className," justify-content-space-between");return(0,N.jsx)("div",{className:t,children:(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("span",{className:"font-bold",children:"Rotation Info"}),(0,N.jsx)("div",{children:(0,N.jsx)("span",{className:"mt-1 mr-1",children:(0,N.jsx)(T.C,{value:U.length,severity:"success"})})})]})})},Ta=e=>{const t="".concat(e.className," justify-content-space-between");return(0,N.jsxs)("div",{className:t,children:[(0,N.jsx)("div",{className:"flex align-items-center",children:(0,N.jsx)("span",{className:"font-bold",children:"Break Wise Duration"})}),(0,N.jsx)("div",{className:"flex align-items-end",children:(0,N.jsx)("div",{children:e.togglerElement})})]})},ka=e=>{const t="".concat(e.className," flex flex-wrap align-items-center justify-content-between gap-3");return(0,N.jsx)("div",{className:t,children:(0,N.jsxs)("div",{className:"flex items-center gap-2 p-1",children:[(0,N.jsx)(l.u,{title:"Bulk Insert",children:(0,N.jsx)("button",{className:"p-panel-header-icon p-link mr-2 lbl ",onClick:ja,children:(0,N.jsx)("span",{className:"lbl pi pi-backward text-xl"})})}),(0,N.jsx)(l.u,{title:"Replace",children:(0,N.jsx)("button",{className:"p-panel-header-icon p-link mr-2 lbl ",onClick:An,children:(0,N.jsx)("span",{className:"lbl pi pi-file text-xl"})})}),(0,N.jsx)(l.u,{title:"Replace All",children:(0,N.jsx)("button",{className:"p-panel-header-icon p-link mr-2 lbl ",onClick:fa,children:(0,N.jsx)("span",{className:"lbl pi pi-clone text-xl"})})}),(0,N.jsx)(l.u,{title:"Delete Selected Promos",children:(0,N.jsx)("button",{className:"p-panel-header-icon p-link mr-2 lbl ",onClick:Zn,children:(0,N.jsx)("span",{className:"lbl pi pi-trash text-xl"})})}),(0,N.jsx)(l.u,{title:"Delete All Promos",children:(0,N.jsx)("button",{className:"p-panel-header-icon p-link mr-2 lbl ",onClick:()=>wt(!0),children:(0,N.jsx)("span",{className:"lbl pi pi-minus-circle text-xl"})})})]})})},wa=()=>{const e=[];for(let t=1;t<=6;t++)e.push((0,N.jsxs)(l.XZ,{value:t,children:["Break ",t]},t));return e},Fa=()=>(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"text-700 mb-6",children:"Are you sure you want to add promos at this breakes"}),(0,N.jsx)(l.XZ.Group,{value:se,onChange:e=>{console.log("options",e),K=e,le(e)},children:wa()}),(0,N.jsx)("ul",{className:"list-none p-0 m-0",children:(0,N.jsx)("li",{className:"flex align-items-center py-3 px-2 border-top-1 border-300 flex-wrap",children:(0,N.jsxs)("div",{className:"mr-5 flex align-items-center mt-3",children:[(0,N.jsx)(l.MG,{value:fn,onChange:jn,style:{color:"black"}}),(0,N.jsx)(l.MG,{value:Sn,onChange:yn,style:{color:"black"}})]})})})]}),Ea=[{value:"starts_with",label:"Starts With"},{value:"contains",label:"Contains"},{value:"not_contains",label:"Not Contains"},{value:"ends_with",label:"Ends With"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"}];let Ia="".concat(Mt?"80%":"100%");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(B.default,{showLoader:_n}),ya&&(0,N.jsx)(l.bZ,{className:"mb-4",type:ba,showIcon:!0,children:ya}),(0,N.jsx)("div",{children:me.AutoSave?(0,N.jsx)(l.u,{title:"Auto Save",children:(0,N.jsx)(h.SU,{Progress:l.Ex,PromoSchdulingSave:kn,openNotification:e=>{l.Am.push((0,N.jsx)(l.P_,{title:"Api Hit",type:e,children:"Timer End Api Hit"}))}})}):null}),(0,N.jsx)("div",{style:{marginBottom:"5px"},children:(0,N.jsxs)("div",{className:"flex justify-between ",children:[$t&&(0,N.jsx)("div",{className:"flex justify-start",children:(0,N.jsx)(l.u,{title:"Columns Setting",children:(0,N.jsx)("span",{style:{fontSize:25,marginTop:"5px",marginRight:"10px",cursor:"pointer"},onClick:()=>{nn(!0),ut("he")},children:(0,N.jsx)(p.XlX,{})})})}),(0,N.jsx)("div",{className:"flex justify-end",children:$t&&(0,N.jsx)("div",{className:"flex justify-end gap-2",children:(0,N.jsxs)("div",{className:"flex justify-justify-end gap-2",children:[(0,N.jsx)("div",{className:"",style:{overflow:"auto",whiteSpace:"nowrap",width:600,height:45},children:Ue.map(((e,t)=>(0,N.jsx)(l.zx,{size:"xs",className:"ml-1 fpctimebtn",onClick:()=>{document.getElementById("div1").querySelector(".row-".concat(e.columnIndex)).scrollIntoView({behavior:"smooth",block:"center"})},style:{backgroundColor:e.Diffrance>0?"#f26f7f":"#6ff2b9",color:"black"},children:e.StartTime},t)))}),(0,N.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,N.jsx)(l.u,{title:"Undo",children:(0,N.jsx)(l.zx,{shape:"circle",size:"sm",variant:"twoTone",onClick:()=>{It[gt.current-1];let e=It[gt.current-2];gt.current>1&&(ye(!0),gt.current--,n(e))},icon:(0,N.jsx)(g.HDP,{})})}),gt.current<It.length&&(0,N.jsx)(l.u,{title:"Redo",children:(0,N.jsx)(l.zx,{shape:"circle",size:"sm",variant:"twoTone",onClick:()=>{let e=It[gt.current];be(!0),gt.current++,n(e)},icon:(0,N.jsx)(g.RjR,{})})}),(0,N.jsx)(l.u,{title:"Hide",children:(0,N.jsx)(l.zx,{shape:"circle",size:"sm",variant:"twoTone",onClick:()=>Rt(!Mt),icon:Mt?(0,N.jsx)(g.gry,{}):(0,N.jsx)(g.OPR,{})})})]})]})})})]})}),(0,N.jsx)(m.F,{ref:xt}),(0,N.jsx)(y.x,{model:Dn,ref:pt,breakpoint:"767px"}),(0,N.jsx)(u.Z5,{onDragEnd:e=>{if("Drop Spot"!=st&&"table2"==e.destination.droppableId)return;if(!e.destination)return;console.log(t[e.destination.index].ContentCode),console.log(e.destination.index);let a="table2"==e.source.droppableId?J[e.source.index]:t[e.source.index];if("S"===a.F_C_S_P)return wn("warning","Content segment cannot be dragged"),void console.log("not dragg");if("CT"===a.F_C_S_P)return wn("warning","Content cannot be dragged"),void console.log("not dragg");if("C"===a.F_C_S_P)return wn("warning","Cannot drag"),void console.log("not dragg");if("table1"===e.source.droppableId&&"table2"==e.destination.droppableId)if(Bt.length){const a=t.filter(((e,t)=>Bt.includes(t)));n(t.filter(((e,t)=>!Bt.includes(t))));J.slice(0,e.destination.index),J.slice(e.destination.index,J.length);qt([])}else{let a=t[e.source.index],s=(0,d.Z)({},a);n(t.filter((e=>e!==a)));const l=[...J.slice(0,e.destination.index),s,...J.slice(e.destination.index,J.length)];X(l)}else if("table2"===e.source.droppableId&&"table1"==e.destination.droppableId)if(Ot.length){const a=J.filter(((e,t)=>Ot.includes(t)));let s=t[e.destination.index-1],l=(0,h.yw)(a,s);const o=[...t.slice(0,e.destination.index),...l,...t.slice(e.destination.index,t.length)];let i=(0,h.a1)(o,Ze,qe);n(i),Vt([])}else{let a=J[e.source.index],s=t[e.destination.index-1],l=(0,h.yw)(a,s);const o=[...t.slice(0,e.destination.index),l,...t.slice(e.destination.index,t.length)];let i=(0,h.a1)(o,Ze,qe);n(i)}else if("table1"===e.source.droppableId&&"table1"==e.destination.droppableId){console.log("selectedRows",Bt);let a=e.source.index,s=e.destination.index,l=t[a],o=[];if(Bt.length){const l=t.filter(((e,t)=>Bt.includes(t)));let o=0,i=0;a>s?o=1:i=1;let r=t[e.destination.index-o],c=(0,h.yw)(l,r);const u=t.map(((e,t)=>Bt.includes(t)?(0,d.Z)((0,d.Z)({},e),{},{F_C_S_P:At?e.F_C_S_P:"DELETE"}):e));console.log("updttable1Data",u);let m=e.destination.index;console.log("index",m);const x=[...u.slice(0,m+i),...c,...u.slice(m+i,u.length)].filter((e=>"DELETE"!==e.F_C_S_P));console.log(x);let p=(0,h.a1)(x,Ze,qe);return n(p),void qt([])}if(a>s){console.log("index1 > index2");let e=t[s-1],n=(0,h.yw)(l,e),i=a;a=s,s=i;let r=t.slice(0,a),c=t.slice(a,s),d=t.slice(s+1,t.length);o=[...r,n,...c,...d],At&&(o=[...r,n,...c,l,...d])}else{let e=t.slice(0,a),n=t.slice(a+1,s+1),i=t.slice(s+1,t.length),r=t[s],c=(0,h.yw)(l,r);o=[...e,...n,c,...i],At&&(o=[...e,l,...n,c,...i])}let i=(0,h.a1)(o,Ze,qe);n(i)}else if("table2"===e.source.droppableId&&"table2"==e.destination.droppableId){let t=e.source.index,n=e.destination.index;if(t>n){let e=t;t=n,n=e}let a=J[t];const s=[...J.slice(0,t),...J.slice(t+1,n+1),a,...J.slice(n+1,J.length)];let l=(0,h.a1)(s,Ze,qe);console.log("updatedTable2Data",s),console.log("res",l),X(s)}},children:(0,N.jsxs)("div",{className:Mt?"flex gap-1":"flex-full-width",children:[(0,N.jsx)("div",{className:"grid grid-cols-1 gap-2  table-container",style:{backgroundColor:"#1F2937",overflow:"auto",maxHeight:"100vh",maxWidth:Ia,height:"80vh"},id:"div1",children:(0,N.jsx)(l.Bl,{children:(0,N.jsx)(u.bK,{droppableId:"table1",children:e=>null!=R&&(0,N.jsxs)(l.iA,{ref:Ln(e.innerRef,vt),className:"resizable-table",children:[(0,N.jsx)(G,{className:"theade",children:(0,N.jsx)(H,{className:"tre",children:R.map(((e,a)=>(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(D.Z,{columnName:e.name,table2Data:t,setTable2Data:n,table2DataCopy:Te,filterOptions:Ea,columnFilters:mt,setColumnFilters:ht,IsSortingAllow:!1,selectedCities:R,setSelectedCities:Q,ColIndex:a,ColumnInfo:e,DisplayFilter:nt})})))})}),(0,N.jsxs)(W,(0,d.Z)((0,d.Z)({},e.droppableProps),{},{children:[t.map(((e,t)=>(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(u._l,{draggableId:"row-".concat(t),index:t,children:n=>(0,N.jsx)(H,(0,d.Z)((0,d.Z)((0,d.Z)({ref:Ln(n.innerRef,vt)},n.draggableProps),n.dragHandleProps),{},{className:"backcolor draggble-row row-".concat(e.Id," ").concat(qe||"CM"!==e.F_C_S_P?"":"Rowhidden"),onClick:e=>{e.ctrlKey?qt((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t])):qt([t])},onContextMenu:e=>{pt.current.show(e),Qt(t)},children:R.map((n=>(0,N.jsx)(V,{className:"jhh ",style:(0,d.Z)({borderBottom:"1px solid #8c7777",borderRight:"1px solid #8c7777"},Bt.includes(t)?Y.pressed:{backgroundColor:e.EventDefaultBackColor,color:e.EventDefaultFrontColor}),children:(0,N.jsxs)("div",{className:"Event_Name"===n.name?"flex items-center ":"flex justify-center items-center",children:["Event_Name"===n.name&&e.Event_Name&&e.F_C_S_P&&(0,N.jsx)(l.qE,{size:20,shape:"circle",className:A()("mr-4 text-white dark:text-white bg-black dark:bg-black"),children:e.F_C_S_P}),e[n.name],0===e.FPC_Time.length&&"FPC_Time"===n.name&&"PR"===e.F_C_S_P&&Bt.includes(t)&&(0,N.jsxs)("div",{className:"flex gap-2",children:[(0,N.jsx)("button",{onClick:()=>{Zn()},children:(0,N.jsx)("span",{className:"  pi pi-trash text-base"})}),(0,N.jsx)("button",{onClick:()=>(lt("Rotation Info"),void Tn()),children:(0,N.jsx)("span",{className:"  pi pi-info-circle text-base"})})]})]})},n.name)))}))},e.id)}))),e.placeholder]}))]})})})}),(0,N.jsxs)(l.Vq,{isOpen:Ve,onClose:()=>Ge(!1),onRequestClose:()=>Ge(!1),children:[(0,N.jsx)("h5",{className:"mb-4",children:"Are you sure to Generate log. ?"}),(0,N.jsxs)("div",{className:"text-right mt-6",children:[(0,N.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:()=>Ge(!1),children:"No"}),(0,N.jsx)(l.zx,{variant:"solid",children:"Yes"})]})]}),Mt?(0,N.jsxs)("div",{className:"card",children:[(0,N.jsxs)("div",{className:" ml-2 mb-2 grid grid-cols-9 gap-2",children:[(0,N.jsx)(l.u,{title:"Menu",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:$t?"solid":"twoTone",icon:(0,N.jsx)(I.mPA,{}),onClick:()=>{en(!$t)}})}),(0,N.jsx)(l.u,{title:"Export",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:"twoTone",icon:(0,N.jsx)(p.tw,{}),onClick:()=>{const e=R.map((e=>{const{header:t}=e;return(0,c.Z)(e,L)}));(0,S.J)(!1,!1,0,0,!0,t,"Promo Scheduling",e,!0)}})}),(0,N.jsx)(l.u,{title:"Start Time Program Base",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:Ze?"solid":"twoTone",icon:(0,N.jsx)(k.Psn,{}),onClick:()=>{Be(!Ze);let e=(0,h.a1)(t,Ze,qe);n(e)}})}),(0,N.jsx)(l.u,{title:rt,children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:ot?"solid":"twoTone",icon:ot?(0,N.jsx)(k.Al0,{}):(0,N.jsx)(p.TBf,{}),onClick:()=>{(()=>{it(!ot);const e=window.document,t=e.documentElement,n=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen,a=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?(ct(" Maximize"),a.call(e)):(ct("Minimize"),n.call(t))})()}})}),(0,N.jsx)(l.u,{title:"Filter",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:nt?"solid":"twoTone",icon:nt?(0,N.jsx)(p.Iit,{}):(0,N.jsx)(p.Yv7,{}),onClick:()=>{at(!nt)}})}),(0,N.jsx)(l.u,{title:"Copy Promo",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:At?"solid":"twoTone",icon:At?(0,N.jsx)(k.esY,{}):(0,N.jsx)(k.Dup,{}),onClick:()=>{Zt(!At)}})}),(0,N.jsx)(l.u,{title:"Show Commercial Break",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:qe?"solid":"twoTone",icon:(0,N.jsx)(I.N95,{}),onClick:()=>{Le(!qe);let e=(0,h.a1)(t,!0,qe);n(e)}})}),(0,N.jsx)(l.u,{title:"Restore",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:"twoTone",icon:(0,N.jsx)(p.zHJ,{}),onClick:()=>{ga(me,(0,r.Tk)(te)),_t(!0)}})}),(0,N.jsx)(l.u,{title:"Auto Shuffle",children:(0,N.jsx)(l.zx,{className:"text-lg",size:"sm",variant:"twoTone",icon:(0,N.jsx)(p.j7b,{}),onClick:()=>{Pt(!0)}})})]}),(0,N.jsxs)(l.Zb,{children:[(0,N.jsxs)("div",{className:"grid grid-flow-col auto-cols-fr gap-1",children:[(0,N.jsxs)("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},children:[(0,N.jsx)("p",{className:"CountDataLabel",children:"Prog"}),(0,N.jsx)("p",{className:"CountDatavalue",children:et.Programs.length})]}),(0,N.jsxs)("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},children:[(0,N.jsx)("p",{className:"CountDataLabel",children:"Promo"}),(0,N.jsx)("p",{className:"CountDatavalue",children:et.Promos.length})]}),(0,N.jsxs)("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto"},children:[(0,N.jsx)("p",{className:"CountDataLabel",children:"Dur."}),(0,N.jsx)("p",{className:"CountDatavalue",children:null===et||void 0===et?void 0:et.Duration})]})]}),(0,N.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,N.jsx)(l.zx,{size:"xs",onClick:()=>{lt("Event Search"),Xe(1),aa(2),ta("00"),(async e=>{if(1==e){const e=(await(0,C.apiGetPromotypemaster)(xa)).data.map((e=>({value:e.PromoTypeCode,label:e.PromoTypeName})));Xn([...e])}})(1),Ca(),Oe(!0)},children:"Insert Promo"}),(0,N.jsx)(l.zx,{size:"xs",onClick:()=>lt("Rotation Info"),children:"Rotation Info"}),(0,N.jsx)(l.zx,{size:"xs",onClick:()=>lt("Break Wise Duration"),children:"Duration"})]})]}),(()=>{switch(st){case"Event Search":return(0,N.jsxs)(l.Zb,{header:(0,N.jsx)(Pa,{}),footer:(0,N.jsx)(ka,{}),children:[He?(0,N.jsxs)(l.BZ,{className:"mb-4",children:[(0,N.jsx)("div",{className:"mr-1",style:{minWidth:110},children:(0,N.jsx)(l.Ph,{placeholder:"Event Type",size:"xs",isSearchable:!1,value:Jn.find((e=>e.value===na)),onChange:e=>{aa(e.value)},options:Jn})}),(0,N.jsx)(l.II,{placeholder:"Promo Caption\\Video ID",size:"sm",style:{height:"38px",width:"auto"},onChange:e=>{ta(e.target.value)},value:ea}),(0,N.jsx)(l.zx,{icon:(0,N.jsx)(g.lnn,{}),onClick:()=>Ca()})]}):null,(0,N.jsx)(f.P,{}),(0,N.jsx)("div",{style:{width:"auto"},children:(0,N.jsx)("div",{style:{height:"300px",overflow:"auto"},children:(0,N.jsx)(l.Bl,{children:(0,N.jsx)(u.bK,{droppableId:"table2",children:(e,t)=>(0,N.jsxs)(l.iA,(0,d.Z)((0,d.Z)({ref:e.innerRef},e.droppableProps),{},{className:"table table-striped",children:[(0,N.jsx)(G,{children:(0,N.jsx)(H,{className:"tre",children:oe.map(((e,t)=>(0,N.jsx)(D.Z,{columnName:e.name,table2Data:J,setTable2Data:X,table2DataCopy:Pe,filterOptions:Ea,columnFilters:mt,setColumnFilters:ht,IsSortingAllow:!0,selectedCities:oe,setSelectedCities:ie,ColIndex:t,ColumnInfo:e,DisplayFilter:nt})))})}),(0,N.jsxs)(W,(0,d.Z)((0,d.Z)({},e.droppableProps),{},{children:[J&&J.map(((e,t)=>(0,N.jsx)(u._l,{draggableId:"row1-".concat(t),index:t,children:n=>(0,N.jsx)(H,(0,d.Z)((0,d.Z)((0,d.Z)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{className:"backcolor draggble-row row-".concat(e.Id," ").concat(Qe||"S"!==e.F_C_S_P?"":"Rowhidden"),onClick:n=>{const a=function(e,t){const n=[];for(let a=0;a<e.length;a++)e[a].FPC_ID===t&&n.push(a);return n}(J,e.FPCIDForDrag);a.length>0?Vt(a):n.ctrlKey?Vt((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t])):n.shiftKey?(n.preventDefault(),Ot.length&&Vt((e=>{if(e.includes(t))return e.filter((e=>e!==t));{let n=e.sort(),a=function(e,t){if(e>t){let n=e;e=t,t=n}const n=t-e+1,a=Array(n).fill(0);for(let s=0;s<n;s++)a[s]=e+s;return a}(n[n.length-1],t);return[...e,...a]}}))):Vt([t])},children:oe.map((n=>(0,N.jsx)(V,{className:"jhh ",style:(0,d.Z)({borderBottom:"1px solid #8c7777",borderRight:"1px solid #8c7777"},Ot.includes(t)?Y.pressed:{backgroundColor:e.EventDefaultBackColor,color:e.EventDefaultFrontColor,width:e.width}),children:(0,N.jsx)("div",{className:"Event_Name"===n.name?"flex items-center ":"flex justify-center items-center",children:e[n.name]})},n.name)))}))},e.Id))),e.placeholder]}))]}))})})})})]});case"Rotation Info":return(0,N.jsx)(l.Zb,{header:(0,N.jsx)(Da,{}),children:(0,N.jsx)("div",{style:{width:380},children:(0,N.jsx)("div",{style:{height:"400px",overflow:"auto"},children:(0,N.jsx)(l.Bl,{children:(0,N.jsxs)(l.iA,{children:[(0,N.jsx)(G,{children:(0,N.jsxs)(H,{children:[(0,N.jsx)(O,{children:"Play Time"}),(0,N.jsx)(O,{children:"Event_Name"}),(0,N.jsx)(O,{children:"Duration"})]})}),(0,N.jsx)(W,{children:U.map(((e,t)=>(0,N.jsxs)(H,{onClick:()=>{console.log(e.SequenceNo);document.getElementById("div1").querySelector(".rowINeed-".concat(e.SequenceNo)).scrollIntoView({behavior:"smooth",block:"center"})},style:{cursor:"pointer"},className:"backcolor",children:[(0,N.jsx)(V,{className:"tde",style:(0,d.Z)({},Ot.includes(t)?Y.pressed:{backgroundColor:e.EventDefaultBackColor,color:e.EventDefaultFrontColor,width:e.width}),children:e.Start_Time}),(0,N.jsx)(V,{className:"tde",style:(0,d.Z)({},Ot.includes(t)?Y.pressed:{backgroundColor:e.EventDefaultBackColor,color:e.EventDefaultFrontColor,width:e.width}),children:e.Event_Name}),(0,N.jsx)(V,{className:"tde",style:(0,d.Z)({},Ot.includes(t)?Y.pressed:{backgroundColor:e.EventDefaultBackColor,color:e.EventDefaultFrontColor,width:e.width}),children:e.Duration})]},t)))})]})})})})});case"Break Wise Duration":return(0,N.jsx)(l.Zb,{header:(0,N.jsx)(Ta,{}),children:(0,N.jsx)(P,{className:"p-0",BreakwiseData:an,colorMapping:Bn})});default:return null}})()]}):(0,N.jsx)(N.Fragment,{})]})}),(0,N.jsxs)(s.gi,{className:"-mx-8 px-8 flex items-center justify-between py-4 pt-2 pb-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,N.jsxs)("div",{className:"md:flex items-center",children:[(0,N.jsx)(l.zx,{type:"button",onClick:()=>{let e=It[1];gt.current=1,n(e),zt([[]]),ae(null)},className:"mr-2",variant:"",size:"sm",icon:(0,N.jsx)(p.BCj,{}),children:"Back"}),"\xa0",(0,N.jsx)(l.zx,{onClick:kn,variant:"solid",type:"submit",size:"sm",disabled:(0,v.convertDateFormatyyyyMMdd)(te)<(0,q.WU)(new Date,"yyyy-MM-dd"),icon:(0,N.jsx)(Z.JMf,{}),children:"Save"})," ",(0,v.convertDateFormatyyyyMMdd)(te)<(0,q.WU)(new Date,"yyyy-MM-dd")&&(0,N.jsx)("p",{className:"ml-2 text-red-500",children:"Backdated Promos are non-editable"})]}),(0,N.jsxs)("div",{id:"myblock",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 p-4 pt-0 pb-1 bg-gray-100 dark:bg-gray-800",children:[(0,N.jsxs)("div",{className:"flex flex-col lbl",children:[(0,N.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Selected Promos"}),(0,N.jsxs)("span",{className:"font-medium text-lg",children:[ze,"-[",Re,"]"]})]}),(0,N.jsxs)("div",{className:"flex flex-col lbl",children:[(0,N.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Segments"}),(0,N.jsx)("span",{className:"font-medium text-lg",children:dn})]}),(0,N.jsxs)("div",{className:"flex flex-col lbl",children:[(0,N.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Commericals"}),(0,N.jsx)("span",{className:"font-medium text-lg   ",children:mn})]}),(0,N.jsxs)("div",{className:"flex flex-col lbl",children:[(0,N.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Promos"}),(0,N.jsx)("span",{className:"font-medium text-lg  ",children:rn})]}),(0,N.jsxs)("div",{className:"flex flex-col lbl",children:[(0,N.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Slot Duration"}),(0,N.jsxs)("span",{className:"font-medium text-lg",children:[" ",gn]})]}),(0,N.jsxs)("div",{className:"flex flex-col lbl",children:[(0,N.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Total"}),Bt.length>0&&(0,N.jsx)("span",{className:"font-medium text-lg  ",children:(0,v.addTimeDurations)((0,v.addTimeDurations)((0,v.addTimeDurations)(rn,"00:00:00:00"),dn),mn)})]})]})]}),(0,N.jsx)(j.V,{header:"Colums Setting",visible:tn,position:"top",style:{width:"40vw",backgroundColor:"#111827"},onHide:()=>nn(!1),footer:Na,draggable:!1,resizable:!1,className:"lmop",children:(0,N.jsx)(Yn,{})}),(0,N.jsxs)(l.Vq,{isOpen:bt,onClose:Et,onRequestClose:Et,children:[(0,N.jsx)("h5",{className:"mb-4",children:"Restore Previous Version "}),(0,N.jsx)(l.Ph,{placeholder:"Kindly Select",options:Un,onChange:e=>la(e)}),(0,N.jsxs)("div",{className:"text-right mt-6",children:[(0,N.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",onClick:Et,children:"Cancel"}),(0,N.jsx)(l.zx,{variant:"solid",onClick:async e=>{Nn(!0);try{console.log("auditValue",sa),console.log("auditValue.value)",sa.value);let e={LocationCode:me.LocationCode,ChannelCode:me.ChannelCode,FormName:"PromoScheduling",TelecastDate:(0,r.Tk)(te),D_date:sa.value};const t=await(0,i.FN)(e);if(console.log(t),console.log(t.status),200==t.status&&(re(ce,!1),wn("success","Data Saved Successfully."),Nn(!1)),204===t.status)return wn("danger","Data Already Exists."),void Nn(!1)}catch(t){500==t.response.status&&(wn("danger","Server Error."),Nn(!1))}Nn(!1),_t(!1)},children:"Ok"})]})]}),(0,N.jsxs)(l.Vq,{isOpen:Nt,onClose:Ft,onRequestClose:Ft,children:[(0,N.jsx)("h5",{className:"mb-4",children:"Auto Shuffle"}),(0,N.jsx)(l.Ph,{placeholder:"Kindly Select",options:ma,onChange:e=>Tt(e.value)}),(0,N.jsx)("ul",{className:"list-none p-0 m-0",children:(0,N.jsx)("li",{className:"flex align-items-center py-3 px-2 border-top-1 border-300 flex-wrap",children:(0,N.jsxs)("div",{className:"mr-5 flex align-items-center mt-3",children:[(0,N.jsx)(l.MG,{value:fn,onChange:jn}),(0,N.jsx)(l.MG,{value:Sn,onChange:yn})]})})}),(0,N.jsx)(l.II,{size:"sm",placeholder:"Duration",maxLength:"12",name:"Duration",value:xn,onChange:e=>(0,v.handleChangeWithFrameSingleValue)(e,pn),onBlur:e=>{var t;const{name:n,value:a}=e.target,s=(0,v.formatOnHHMMSSFFBlur)(a,Number((null===(t=he[0])||void 0===t?void 0:t.FramePerSec)||24));console.log("formattedValue",s),pn(s)}}),(0,N.jsxs)("div",{className:"text-right mt-6",children:[(0,N.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:Ft,children:"Cancel"}),(0,N.jsx)(l.zx,{variant:"solid",onClick:async()=>{if((0,v.parseDuration)(xn)<10)return void wn("info","Kindly enter correct Duration.");let e="00:00:00:00",a=0;Nn(!0);const s=(await(0,E.QW)(Dt)).data.map((e=>({TapeId:e.PromoMaster.VideoID,VideoID:e.PromoMaster.VideoID,PromoCode:e.PromoMaster.PromoCode,PromoCaption:e.PromoMaster.PromoCaption,PromoDuration:e.PromoMaster.PromoDuration})));let l=(0,v.shuffleArray)(s);Nn(!1),Ft();const o=[];t.forEach(((n,i)=>{o.push(n);let r=t[t.length-1].Id+1;if(l=(0,v.shuffleArray)(s),"S"===n.F_C_S_P){e="00:00:00:00";for(let t=0;t<l.length;t++){const t=l[a];if(console.log(a,"Totaltimeuse",e,t),e=(0,v.addTimeDurations)(e,t.PromoDuration),0==Mn(n.Start_Time,fn))return;if(1==Mn(n.Start_Time,Sn))return;(0,v.parseDuration)(e)<(0,v.parseDuration)(xn)&&(o.push({Id:r++,FPC_ID:n.FPC_ID,LocationCode:null,ChannelCode:null,FPC_Time:"",Start_Time:"00:00:00:00",Event_Name:t.PromoCaption,ContentCode:n.ContentCode,PromoTypeCode:1,SeasonNo:n.SeasonNo,Ep_No:n.Ep_No,Tape_ID:t.TapeId,BreakNumber:n.BreakNumber,Duration:t.PromoDuration,F_C_S_P:"PR",PromoCode:t.PromoCode,EventDefaultFrontColor:"#333333",EventDefaultBackColor:"#4DD4DF",VideoID:t.VideoID}),a+1>=l.length?a=0:a+=1)}}})),Nn(!1),Ft(),n(o)},children:"Ok"})]})]}),(0,N.jsxs)(l.Vq,{isOpen:kt,onClose:()=>wt(!1),children:[(0,N.jsx)("h5",{className:"mb-4",children:"Confirm You Want to Delete"}),(0,N.jsxs)("div",{className:"text-right mt-6",children:[(0,N.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:()=>wt(!1),children:"Cancel"}),(0,N.jsx)(l.zx,{variant:"solid",onClick:()=>(()=>{let e=[...t].filter((e=>"PR"!==e.F_C_S_P));wt(!1),n(e)})(),children:"Okay"})]})]})]})},Y={pressed:{boxShadow:"0px 0px 5px rgb(198, 198, 198)",transition:"background-color 0.1s ease-in-out",scale:1},pressed2:{boxShadow:"0px 0px 5px rgb(13, 12, 12)",transition:"background-color 0.1s ease-in-out",scale:1}};var J=n(24933),X=n(92959);const U=[{header:"FPC ID",name:"FPC_ID",code:"FPC_ID",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"Event Name",name:"Event_Name",code:"Event_Name",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"FPC_Time",name:"FPC_Time",code:"FPC_Time",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"Tel_Time",name:"Tel_Time",code:"Tel_Time",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"SeasonNo",name:"SeasonNo",code:"SeasonNo",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"EpisodeNo",name:"EpisodeNo",code:"EpisodeNo",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"Duration",name:"Duration",code:"Duration",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0}],$=[{header:"FPC_ID",name:"FPC_ID",code:"FPC_ID",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"FPC_Time",name:"FPC_Time",code:"FPC_Time",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"Event_Name",name:"Event_Name",code:"Event_Name",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0},{header:"Duration",name:"Duration",code:"Duration",width:"auto",ScreenType:"Promo",Sequence:1,isvisible:!0}],ee=()=>{const e=(0,o.useSelector)((e=>e.locale.selectedChannel)),t=(0,o.useSelector)((e=>e.auth.scheduling.DatainPromo)),n=(0,o.useSelector)((e=>e.auth.scheduling.timestore)),c=(0,o.useSelector)((e=>e.auth.scheduling.datestore)),d=(0,o.useDispatch)(),[u,m]=(0,a.useState)(0),[x,p]=(0,a.useState)(null),[g,C]=(0,a.useState)([]),[f,j]=(0,a.useState)([]),[S,y]=(0,a.useState)([]),[b,_]=(0,a.useState)([]),[P,D]=(0,a.useState)([]),[T,k]=(0,a.useState)([]),[w,F]=(0,a.useState)([]),[E,I]=(0,a.useState)({}),[M,R]=(0,a.useState)(null),[A,Z]=(0,a.useState)(!1),[B,q]=(0,a.useState)(""),[L,H]=(0,a.useState)([]),[O,V]=(0,a.useState)((0,r.Tk)(new Date)),[G,W]=(0,a.useState)("");(0,a.useEffect)((()=>{const e=document.getElementsByClassName("Gbox2")[0],t=document.getElementsByClassName("Gbox2")[0].children[1];return d((0,z.rh)([O,"Promo Scheduling"])),e&&(e.style.display="block",t.style.display="none"),()=>{e&&(e.style.display="none",t.style.display="none")}}),[]),(0,a.useEffect)((()=>{(0,h.Dh)(),R(null);let t={};t.LocationCode=e.LocationCode,t.ChannelCode=e.ChannelCode,t.Screen="promo";let n=O;R(null),(0,i.c0)(t,n).then((e=>{R((0,r.Jl)(e.data,"promoScheduling"))})).catch((e=>{e.response.status&&R(null)}))}),[O,e,x]);const K=(n,a)=>{Z(!1),null!=e?(0,i.nY)(e,(0,r.Tk)(n.start)).then((e=>e.data)).then((e=>{if(0==e.length)return void l.Am.push((0,N.jsx)(l.P_,{title:"Error",type:"danger",children:"Daily FPC Not Ready"}));let s=(0,h.a1)(e,!0,!1);a?t.length>0&&C(t):C(s),p(n.start);const o=e.reduce(((e,t)=>{const n=t.FPC_Time?t.Id:"";return""!==n&&(e[n]=t.FPC_Time),e}),{});I(o);let i=Object.keys(e[0]).map((e=>{let t={};return t.name=e,t.code=e,t.width=100,t.header=e,t}));y(i),(async e=>{try{const e=await(0,X.Q)("Promo");if(204==e.status){const e=U.map(((e,t)=>({header:e.header,name:e.name,code:e.code,width:"auto",ScreenType:e.ScreenType,Sequence:e.Sequence,isvisible:!0})));_(e)}const t=e.data.map(((e,t)=>({header:e.Header,name:e.ColumnName,code:e.ColumnName,width:"auto",ScreenType:e.ScreenName,Sequence:e.SequenceNo,isvisible:!0})));200==e.status&&(console.log(t),_(t))}catch(t){}})(),(async e=>{try{const e=await(0,X.Q)("PromoLeft");if(204==e.status){const e=$.map(((e,t)=>({header:e.header,name:e.name,code:e.code,width:"auto",ScreenType:e.ScreenType,Sequence:e.Sequence,isvisible:!0})));D(e)}const t=e.data.map(((e,t)=>({header:e.Header,name:e.ColumnName,code:e.ColumnName,width:"auto",ScreenType:e.ScreenName,Sequence:e.SequenceNo,isvisible:!0})));200==e.status&&D(t)}catch(t){}})()})):l.Am.push((0,N.jsx)(l.P_,{title:"Error",type:"danger",children:"Kindly Select Channel"}))},Y=e=>{Z(!1)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(l.Zb,{children:[(0,N.jsxs)(l.Vq,{isOpen:A,onClose:Y,onRequestClose:Y,children:[(0,N.jsx)("h5",{className:"mb-4",children:"Unsaved work has been detected. Do you want to load it now?"}),(0,N.jsxs)("div",{style:{marginTop:"10px",display:"flex"},children:[(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("h1",{style:{color:"rgb(20 184 166)"},children:(0,r.QK)(c)[0].day}),(0,N.jsxs)("h6",{style:{color:"rgb(20 184 166)",fontSize:"13px"},children:[(0,r.QK)(c)[0].month,(0,N.jsx)("br",{}),(0,N.jsx)("h6",{style:{color:"rgb(20 184 166)",fontSize:"12px",marginTop:"-10px"},children:(0,r.QK)(c)[0].year})]})]}),(0,N.jsx)("span",{style:{fontSize:"15px",color:"white",marginTop:"10px",marginLeft:"10px"},onClick:()=>{let e=[...g].filter((e=>"PR"!=e.F_C_S_P));C(e)},children:e.label})]}),(0,N.jsx)("p",{children:(0,N.jsx)("p",{children:n})}),(0,N.jsxs)("div",{className:"text-right mt-6",children:[(0,N.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:()=>K(B,!1),children:"No"}),(0,N.jsx)(l.zx,{variant:"solid",onClick:()=>K(B,!0),children:"Yes"})]})]}),null!=x?(0,N.jsx)(Q,{table1Data:g,setTable1Data:C,cities:S,setcities:y,Columnright:b,setColumnright:_,table2Data:T,setTable2Data:k,table3Data:w,setTable3Data:F,fpcTimes:E,value:x,value2:e,setValue:p,breaknumbers:L,setbreaknumbers:H,Columnleft:P,setColumnleft:D,onCellSelect:K,evendata:B,setheadername:W}):(0,N.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,N.jsx)("div",{className:"col-span-1"}),(0,N.jsx)("div",{className:"col-span-3",children:(0,N.jsx)(s.W2,{style:{height:550},children:(0,N.jsx)(s.wr,{events:M,select:t=>{if((0,v.isChannelSelected)(e)){M.some((e=>e.start===t.startStr))?(e=>{(0,r.qP)((0,r.QK)((0,r.Tk)(e.start)),(0,r.QK)(c))?(q(e),Z(!0)):K(e,!1)})(t):(0,v.openNotification)("info","Daily FPC not available for selected date")}else d((0,z.ar)(!0))},datesSet:e=>{V((0,r.Tk)(e.view.currentStart))},selectable:!0})})})]})]}),(0,N.jsx)(J.Z,{})]})}},52249:()=>{}}]);
//# sourceMappingURL=5100.830d61d7.chunk.js.map