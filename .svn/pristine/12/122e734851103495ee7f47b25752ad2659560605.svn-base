(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4295,5682],{81411:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(1413),l=s(45987),n=s(2803),i=(s(72791),s(80184));const r=["children","labelClass"];const o=function(e){let{children:t,labelClass:s}=e,o=(0,l.Z)(e,r);return(0,i.jsx)(n.xJ,(0,a.Z)((0,a.Z)({labelClass:"mb-1 !text-gray-300 ".concat(s||"")},o),{},{children:t}))}},45682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(2803),l=(s(72791),s(80184));const n=function(e){let{showLoader:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,l.jsx)(a.$j,{size:"3.25rem"})}):(0,l.jsx)(l.Fragment,{})})}},6884:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s(1413),l=s(45987),n=s(2803),i=s(72791),r=s(80184);const o=["styles","size","placeholder"],c=i.memo(i.forwardRef(((e,t)=>{const{styles:s,size:i,placeholder:c}=e,d=(0,l.Z)(e,o);return(0,r.jsx)(n.Ph,(0,a.Z)((0,a.Z)({size:"sm"},d),{},{styles:(0,a.Z)({valueContainer:e=>(0,a.Z)((0,a.Z)({},e),{},{padding:"2px 5px"}),input:e=>(0,a.Z)((0,a.Z)({},e),{},{color:"white"}),control:e=>(0,a.Z)((0,a.Z)({},e),{},{minHeight:"30px"})},s),ref:t,placeholder:c||"Select"}))})))},55397:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a=s(72791),l=s(2803),n=s(36996),i=s(48080),r=s(40980),o=s(81694),c=s.n(o),d=s(80184);const{Tr:u,Th:m,Td:p,THead:h,TBody:g,Sorter:C}=l.iA,x=e=>{let{data:t,columns:s,trClassNames:o}=e;const[x,N]=(0,a.useState)([]),y=(0,n.b7)({data:t,columns:s,state:{sorting:x},onSortingChange:N,getCoreRowModel:(0,i.sC)(),getSortedRowModel:(0,i.tj)()});return(0,d.jsx)(r.ZP,{children:e=>{let{height:t,width:s}=e;return(0,d.jsx)("div",{style:{height:t,width:s},className:"overflow-auto",children:(0,d.jsxs)(l.iA,{children:[(0,d.jsx)(h,{className:"sticky top-0",children:y.getHeaderGroups().map((e=>(0,d.jsx)(u,{children:e.headers.map(((e,t)=>{var s,a,l;return(0,d.jsx)(m,{colSpan:e.colSpan,className:"overflow-hidden text-ellipsis whitespace-nowrap border-r border-r-gray-600 !normal-case w-max px-2 ".concat(0===t&&"border-l border-l-gray-600"),style:{width:null===(s=e.column.columnDef.headStyle)||void 0===s?void 0:s.width},children:e.isPlaceholder?null:(0,d.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none table-head-cell ":"",onClick:e.column.getToggleSortingHandler(),style:{fontSize:null===(a=e.column.columnDef.headStyle)||void 0===a?void 0:a.fontSize,justifyContent:null===(l=e.column.columnDef.headStyle)||void 0===l?void 0:l.align},children:[(0,n.ie)(e.column.columnDef.header,e.getContext()),(0,d.jsx)(C,{sort:e.column.getIsSorted()})]})},e.id)}))},e.id)))}),(0,d.jsx)(g,{children:y.getRowModel().rows.slice(0,10).map((e=>(0,d.jsx)(u,{className:"function"===typeof o?o(e.original):"",children:e.getVisibleCells().map(((e,t)=>{var s,a,l,i;return(0,d.jsx)(p,{className:c()("overflow-hidden text-ellipsis whitespace-nowrap border-r border-r-gray-700 text-gray-200 border-b border-b-gray-700 w-max px-2",0===t&&"border-l border-l-gray-700"),style:{width:null===(s=e.column.columnDef.cellStyle)||void 0===s?void 0:s.width,textAlign:null===(a=e.column.columnDef.cellStyle)||void 0===a?void 0:a.align},children:(0,d.jsx)("div",{className:"table-body-cell",style:{fontWeight:null===(l=e.column.columnDef.cellStyle)||void 0===l?void 0:l.fontWeight,fontSize:null===(i=e.column.columnDef.cellStyle)||void 0===i?void 0:i.fontSize},children:(0,n.ie)(e.column.columnDef.cell,e.getContext())})},e.id)}))},e.id)))})]})})}})}},6278:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q});var a=s(2803),l=s(72791),n=s(92506),i=s(1413),r=s(34786),o=s(11308),c=s(54261);const d=async e=>{try{const t=await(0,o.bT)(e);return 200===t.status?t.data.map((e=>(0,i.Z)((0,i.Z)({},e),{},{value:e.StateCode,label:e.StateName,tinNo:e.StateTinNo}))):[]}catch(t){return console.error(t),[]}},u=async e=>{try{const t=await(0,o.C2)(e);return 200===t.status?t.data.map((e=>(0,i.Z)((0,i.Z)({},e),{},{value:e.PlaceCode,label:e.PlaceName}))):[]}catch(t){return console.error(t),[]}},m=async(e,t)=>{let s=[];try{const a=await(0,o.jE)(e,t),l=await a.json();200===a.status&&(s=l.map((e=>({id:(0,c.Z)(),fullAddress:e.AddressLine1,country:{value:e.Country.CountryCode,label:e.Country.CountryName},state:{value:e.State.StateCode,label:e.State.StateName,tinNo:e.State.StateTinNo},city:{value:e.Place.PlaceCode,label:e.Place.PlaceName},postalCode:e.PinCode,isGstRegistered:e.IsGST_registered,gstNumber:"0"===e.GSTN_id?"":e.GSTN_id}))))}catch(a){console.error(a)}finally{return s}},p=async e=>{let t=[];try{const s=await(0,o.T4)(e);200===s.status&&(t=s.data.map((e=>({value:e.Employee.EmployeeCode,label:"".concat(e.Employee.Emp_FirstName," ").concat(e.Employee.Emp_LastName)}))))}catch(s){console.error(s)}finally{return t}};var h=s(80184);const g=function(e){let{step:t,setStep:s,className:l}=e;const{values:i,errors:r,submitForm:o,validateForm:c}=(0,n.u6)(),d=async()=>{if(t<2)s((e=>e+1));else{const e=await c();0===Object.keys(e).length?o():console.warn("Form has errors:",e)}},u=0===t?!((e,t)=>e.clientName&&!t.clientName&&e.clientShortName&&!t.clientShortName&&!t.clientDetailsErpCode&&!t.pan&&!t.tan&&!t.barcCode&&e.creditRateLimit&&e.mobile&&!t.mobile&&!t.phone&&!t.fax&&e.contactPerson&&!t.contactPerson&&e.email&&!t.email)(i,r):1===t?0===i.multipleAddresses.length:2===t?0===i.mappedExecutives.length:3===t,m=0===t?((e,t)=>{let s="";return s=e.clientName?t.clientName?"Client Name Invalid":e.clientShortName?t.clientShortName?"Client Short Name Invalid":t.clientDetailsErpCode?"ERP Code Invalid":t.pan?"PAN Number Invalid":t.tan?"TAN Number Invalid":t.barcCode||t.barcCode?"BARC Code Invalid":e.creditRateLimit?e.mobile?t.mobile?"Mobile Number Invalid":t.phone?"Phone Number Invalid":t.fax||t.fax?"FAX Number Invalid":e.contactPerson?t.contactPerson?"Contact Person Invalid":e.email?!!t.email&&"Email Address Invalid":"Email Address Required":"Contact Person Required":"Mobile Number Required":"Credit Rate Limit Required":"Client Short Name Required":"Client Name Required",s})(i,r):1===t?0===i.multipleAddresses.length&&"Please add atleast one address":2===t&&(0===i.mappedExecutives.length&&"Please assign atleast one executive");return(0,h.jsxs)("div",{className:"flex justify-end gap-3 ".concat(l),children:[(0,h.jsx)(a.zx,{type:"button",disabled:0===t,onClick:()=>s((e=>e-1)),children:"Previous"}),m?(0,h.jsx)(a.u,{title:m,children:(0,h.jsx)(a.zx,{type:"button",variant:"solid",disabled:u,onClick:d,children:t<2?"Next":"Submit"})}):(0,h.jsx)(a.zx,{type:"button",variant:"solid",disabled:u,onClick:d,children:t<2?"Next":"Submit"})]})};var C=s(81320),x=s(45682),N=s(60364),y=s(57689),b=s(81724);const v=/^[A-Za-z0-9_\-,(). ]*$/,j=/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,f=/\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}/,A=/^\+?[0-9]*$/,S=/^\+?[0-9\- ]*$/,I=/^[0-9]*$/,Z={clientName:"",clientShortName:"",clientDetailsErpCode:"",pan:"",tan:"",barcCode:"",creditRateLimit:null,clientFlags:[],status:!0,remarks:"",mobile:"",phone:"",fax:"",contactPerson:"",email:"",multipleAddresses:[],mappedExecutives:[]},R=b.Ry().shape({clientName:b.Z_().min(3,"Too short").matches(v,"Only '-_()' are allowed as special characters").required("Required"),clientShortName:b.Z_().min(3,"Too short").matches(v,"Only '-_()' are allowed as special characters").required("Required"),clientDetailsErpCode:b.Z_().min(3,"Too short").matches(v,"Only '-_()' are allowed as special characters"),pan:b.Z_().matches(j,"Invalid PAN Number"),tan:b.Z_().matches(j,"Invalid TAN Number"),barcCode:b.Z_().min(3,"Too short").matches(v,"Only '-_()' are allowed as special characters"),mobile:b.Z_().matches(A,"Invalid Mobile Number").required("Required"),phone:b.Z_().matches(A,"Invalid Phone Number"),fax:b.Z_().matches(S,"Invalid FAX Number"),contactPerson:b.Z_().min(3,"Too short").matches(/^[A-Za-z ]*$/,"Invalid Name").required("Required"),email:b.Z_().matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Invalid Email Address").required("Required"),mappedExecutives:b.IX().min(1,"Please assign atleast one executive")});var P=s(81411),w=s(6884);const E={fullAddress:!1,country:!1,state:!1,city:!1,postalCode:!1,gstNumber:!1};const O=function(e){let{countryOptions:t,stateOptions:s,cityOptions:r,setStateOptions:o,setCityOptions:m,fullAddress:p,setFullAddress:g,country:C,setCountry:x,state:N,setState:y,city:b,setCity:v,postalCode:j,setPostalCode:A,isGstRegistered:S,setIsGstRegistered:Z,gstNumber:R,setGstNumber:O,editAddressId:F,resetForm:L}=e;const[T,G]=(0,l.useState)(E);(0,l.useEffect)((()=>L),[]),(0,l.useEffect)((()=>{(async()=>{try{null!==C&&void 0!==C&&C.CountryCode&&o(await d(C.CountryCode))}catch(e){console.error(e)}})()}),[C]),(0,l.useEffect)((()=>{(async()=>{try{null!==N&&void 0!==N&&N.StateCode&&m(await u(N.StateCode))}catch(e){console.error(e)}})()}),[N]);const{values:M,setFieldValue:k}=(0,n.u6)(),D=()=>{const e=z("fullAddress"),t=z("country"),s=z("state"),a=z("city"),l=z("postalCode"),n=z("gstNumber");return!e&&!t&&!s&&!a&&!l&&(!S||!n)},z=e=>{let t=!1;return"fullAddress"===e?t=p?p.length<3&&"Too Short":"Required":"country"===e?t=!C&&"Required":"state"===e?t=!N&&"Required":"city"===e?t=!b&&"Required":"postalCode"===e?t=j?j.length<3&&"Too Short":"Required":"gstNumber"===e&&(t=S&&!R?"Required":!(!S||f.test(R)&&R.startsWith(N.tinNo))&&"Invalid GST Number"),G((s=>(0,i.Z)((0,i.Z)({},s),{},{[e]:t}))),t};return(0,h.jsxs)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:[(0,h.jsxs)(P.Z,{label:"Address",className:"col-span-12",asterisk:!0,children:[(0,h.jsx)(n.gN,{type:"text",placeholder:"Full Address",textArea:!0,component:a.II,className:"min-h-0",rows:2,value:p,onChange:e=>g(e.target.value),onBlur:()=>z("fullAddress")}),T.fullAddress&&(0,h.jsx)("span",{className:"text-red-500",children:T.fullAddress})]}),(0,h.jsxs)(P.Z,{label:"Country",className:"col-span-6",asterisk:!0,children:[(0,h.jsx)(n.gN,{placeholder:"Select",component:w.Z,options:t,value:C,onChange:e=>{x(e),y(null),v(null)},onBlur:()=>z("country")}),T.country&&(0,h.jsx)("span",{className:"text-red-500",children:T.country})]}),(0,h.jsxs)(P.Z,{label:"State",className:"col-span-6",asterisk:!0,children:[(0,h.jsx)(n.gN,{placeholder:"Select",component:w.Z,options:s,value:N,onChange:e=>{y(e),v(null)},onBlur:()=>z("state")}),T.state&&(0,h.jsx)("span",{className:"text-red-500",children:T.state})]}),(0,h.jsxs)(P.Z,{label:"City",className:"col-span-6",asterisk:!0,children:[(0,h.jsx)(n.gN,{placeholder:"Select",component:w.Z,options:r,value:b,onChange:v,onBlur:()=>z("city")}),T.city&&(0,h.jsx)("span",{className:"text-red-500",children:T.city})]}),(0,h.jsxs)(P.Z,{label:"Postal Code",className:"col-span-6",asterisk:!0,children:[(0,h.jsx)(n.gN,{placeholder:"Postal Code",component:a.II,maxLength:10,value:j,onChange:e=>""===e.target.value?A(""):I.test(e.target.value)&&A(Number(e.target.value)),onBlur:()=>z("postalCode")}),T.postalCode&&(0,h.jsx)("span",{className:"text-red-500",children:T.postalCode})]}),(0,h.jsxs)("div",{className:"col-span-6",children:[(0,h.jsx)(a.XZ,{className:"text-gray-300",checked:S,onChange:e=>{e||O(""),Z(e),G((e=>(0,i.Z)((0,i.Z)({},e),{},{gstNumber:!1})))},children:"GST Registered"}),(0,h.jsx)(n.gN,{placeholder:"GST Number",component:a.II,disabled:!S,value:R,onChange:e=>O(e.target.value.toUpperCase()),onBlur:()=>z("gstNumber")}),T.gstNumber&&(0,h.jsx)("span",{className:"text-red-500",children:T.gstNumber})]}),(0,h.jsx)("div",{className:"col-span-12 flex justify-end",children:(0,h.jsx)(a.zx,{type:"button",size:"sm",onClick:()=>{if(D()){const e={id:F||(0,c.Z)(),fullAddress:p,country:C,state:N,city:b,postalCode:j,isGstRegistered:S,gstNumber:R},t=M.multipleAddresses.findIndex((e=>e.id===F));let s=[...M.multipleAddresses];F?s[t]=e:s=[...s,e],k("multipleAddresses",s),L()}},children:F?"Save":"Add"})})]})};var F=s(55397),L=s(16856);const T=[{accessorKey:"fullAddress",header:"Address"},{accessorKey:"country",header:"Country",cell:e=>e.row.original.country.label},{accessorKey:"state",header:"State",cell:e=>e.row.original.state.label},{accessorKey:"city",header:"City",cell:e=>e.row.original.city.label},{accessorKey:"postalCode",header:"Postal Code"},{accessorKey:"gstNumber",header:"GST Number"}];const G=function(e){let{countryOptions:t,stateOptions:s,cityOptions:i,setStateOptions:r,setCityOptions:o,fullAddress:c,setFullAddress:m,country:p,setCountry:g,state:C,setState:x,city:N,setCity:y,postalCode:b,setPostalCode:v,isGstRegistered:j,setIsGstRegistered:f,gstNumber:A,setGstNumber:S}=e;const[I,Z]=(0,l.useState)(null),{values:R,setFieldValue:P}=(0,n.u6)();let w=[{accessorKey:"actions",header:"Actions",cell:e=>{const t=e.row.original.id===I;return(0,h.jsxs)("div",{className:"flex gap-1 items-center ".concat(t?"justify-end":"justify-center"),children:[!t&&(0,h.jsx)(a.u,{title:"Edit",children:(0,h.jsx)(a.zx,{type:"button",size:"xs",icon:(0,h.jsx)(L.zmo,{}),onClick:()=>E(e.row.original)})}),(0,h.jsx)(a.u,{title:"Delete",children:(0,h.jsx)(a.zx,{type:"button",size:"xs",icon:(0,h.jsx)(L.ZkW,{}),onClick:()=>{P("multipleAddresses",[...R.multipleAddresses].filter((t=>t.id!==e.row.original.id))),G()}})})]})}},...T];const E=async e=>{m(e.fullAddress),g(e.country),x(e.state),r(await d(e.country.value)),y(e.city),o(await u(e.state.value)),v(e.postalCode),f(e.isGstRegistered),S(e.gstNumber),Z(e.id)},G=()=>{m(""),g(null),x(null),r([]),y(null),o([]),v(""),f(!1),S(""),Z(null)};return(0,h.jsxs)("div",{className:"grid grid-cols-3 h-full",children:[(0,h.jsx)("div",{className:"pr-3 border-r border-r-gray-700",children:(0,h.jsx)(O,{countryOptions:t,stateOptions:s,cityOptions:i,setStateOptions:r,setCityOptions:o,fullAddress:c,setFullAddress:m,country:p,setCountry:g,state:C,setState:x,city:N,setCity:y,postalCode:b,setPostalCode:v,isGstRegistered:j,setIsGstRegistered:f,gstNumber:A,setGstNumber:S,editAddressId:I,resetForm:G})}),(0,h.jsxs)("div",{className:"col-span-2 px-3 h-full flex flex-col",children:[(0,h.jsx)("h6",{className:"mb-3",children:"MULTIPLE ADDRESSES"}),0===R.multipleAddresses.length?(0,h.jsx)("p",{className:"text-red-600",children:"Please add atleast one address"}):(0,h.jsx)("div",{className:"grow h-0",children:(0,h.jsx)(F.Z,{data:R.multipleAddresses,columns:w,trClassNames:e=>e.id===I?"bg-gray-600":""})})]})]})};const M=function(e){let{executiveOptions:t}=e;const{values:s,errors:l,touched:i}=(0,n.u6)();return(0,h.jsx)("div",{className:"h-full",children:(0,h.jsx)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:(0,h.jsx)(P.Z,{label:"Assign Executives",className:"col-span-12",asterisk:!0,invalid:l.mappedExecutives&&i.mappedExecutives,errorMessage:l.mappedExecutives,children:(0,h.jsx)(n.gN,{name:"mappedExecutives",children:e=>{let{field:a,form:l}=e;return(0,h.jsx)(w.Z,{isMulti:!0,field:a,form:l,options:t,value:s.mappedExecutives,onChange:e=>{l.setFieldValue(a.name,e)},onBlur:()=>{l.setFieldTouched(a.name,!0)}})}})})})})};const k=function(e){let{creditRateLimitOptions:t}=e;const{values:s,touched:l,errors:i,setFieldValue:r}=(0,n.u6)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h6",{className:"mb-3",children:"BASIC DETAILS"}),(0,h.jsxs)(a.Yb,{size:"sm",className:"grid grid-cols-12 gap-x-3 gap-y-5",children:[(0,h.jsx)(P.Z,{label:"Client Name",className:"col-span-8",asterisk:!0,invalid:i.clientName&&l.clientName,errorMessage:i.clientName,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"Client Name",component:a.II,name:"clientName",maxLength:50})}),(0,h.jsx)(P.Z,{label:"Short Name",className:"col-span-4",asterisk:!0,invalid:i.clientShortName&&l.clientShortName,errorMessage:i.clientShortName,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"Short Name",component:a.II,name:"clientShortName",maxLength:4})}),(0,h.jsx)(P.Z,{label:"ERP Code",className:"col-span-4",invalid:i.clientDetailsErpCode&&l.clientDetailsErpCode,errorMessage:i.clientDetailsErpCode,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"ERP Code",component:a.II,name:"clientDetailsErpCode",maxLength:50})}),(0,h.jsx)(P.Z,{label:"PAN",className:"col-span-4",invalid:i.pan&&l.pan,errorMessage:i.pan,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"PAN",component:a.II,name:"pan",maxLength:10,onChange:e=>r("pan",e.target.value.toUpperCase())})}),(0,h.jsx)(P.Z,{label:"TAN",className:"col-span-4",invalid:i.tan&&l.tan,errorMessage:i.tan,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"TAN",component:a.II,name:"tan",maxLength:10,onChange:e=>r("tan",e.target.value.toUpperCase())})}),(0,h.jsx)(P.Z,{label:"BARC Code",className:"col-span-4",invalid:i.barcCode&&l.barcCode,errorMessage:i.barcCode,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"BARC Code",component:a.II,name:"barcCode",maxLength:50})}),(0,h.jsx)(P.Z,{label:"Credit Rate Limit",className:"col-span-5",asterisk:!0,children:(0,h.jsx)(n.gN,{placeholder:"Select",component:w.Z,name:"creditRateLimit",options:t,value:s.creditRateLimit,onChange:e=>r("creditRateLimit",e)})}),(0,h.jsx)("div",{}),(0,h.jsx)(P.Z,{label:"Status",className:"col-span-2",children:(0,h.jsx)(n.gN,{component:a.T5,name:"status"})}),(0,h.jsx)(P.Z,{label:"Client Flags",className:"col-span-12",children:(0,h.jsx)(n.gN,{name:"clientFlags",children:()=>(0,h.jsxs)(a.XZ.Group,{value:s.clientFlags,onChange:e=>r("clientFlags",e),children:[(0,h.jsx)(a.XZ,{value:1,children:"IBF"}),(0,h.jsx)(a.XZ,{value:2,children:"AAAI"}),(0,h.jsx)(a.XZ,{value:3,children:"On Hold"}),(0,h.jsx)(a.XZ,{value:4,children:"RCM"})]})})}),(0,h.jsx)(P.Z,{label:"Remarks",className:"col-span-12",children:(0,h.jsx)(n.gN,{placeholder:"Select",component:a.II,name:"remarks"})})]})]})};const D=function(){const{touched:e,errors:t,setFieldValue:s}=(0,n.u6)();return(0,h.jsxs)("div",{children:[(0,h.jsx)("h6",{className:"mb-2",children:"CONTACT DETAILS"}),(0,h.jsx)(a.Yb,{size:"sm",className:"flex flex-col gap-5",children:(0,h.jsxs)("div",{className:"grid grid-cols-12 gap-x-3 gap-y-5",children:[(0,h.jsx)(P.Z,{label:"Mobile",className:"col-span-4",asterisk:!0,invalid:t.mobile&&e.mobile,errorMessage:t.mobile,children:(0,h.jsx)(n.gN,{type:"tel",placeholder:"Mobile",component:a.II,name:"mobile",maxLength:16,onChange:e=>(A.test(e.target.value)||""===e.target.value)&&s("mobile",e.target.value)})}),(0,h.jsx)(P.Z,{label:"Phone",className:"col-span-4",invalid:t.phone&&e.phone,errorMessage:t.phone,children:(0,h.jsx)(n.gN,{type:"tel",placeholder:"Phone",component:a.II,name:"phone",maxLength:16,onChange:e=>(A.test(e.target.value)||""===e.target.value)&&s("phone",e.target.value)})}),(0,h.jsx)(P.Z,{label:"FAX",className:"col-span-4",invalid:t.fax&&e.fax,errorMessage:t.fax,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"FAX",component:a.II,name:"fax",maxLength:16,onChange:e=>(S.test(e.target.value)||""===e.target.value)&&s("fax",e.target.value)})}),(0,h.jsx)(P.Z,{label:"Contact Person",className:"col-span-4",asterisk:!0,invalid:t.contactPerson&&e.contactPerson,errorMessage:t.contactPerson,children:(0,h.jsx)(n.gN,{type:"text",placeholder:"Contact Person",component:a.II,name:"contactPerson",maxLength:50})}),(0,h.jsx)(P.Z,{label:"Email",className:"col-span-4",asterisk:!0,invalid:t.email&&e.email,errorMessage:t.email,children:(0,h.jsx)(n.gN,{type:"email",placeholder:"Email",component:a.II,name:"email"})})]})})]})};const z=function(e){let{creditRateLimitOptions:t}=e;return(0,h.jsxs)("div",{className:"grid grid-cols-2 h-full",children:[(0,h.jsx)("div",{className:"border-r border-r-gray-700 pr-3",children:(0,h.jsx)(k,{creditRateLimitOptions:t})}),(0,h.jsx)("div",{className:"px-3",children:(0,h.jsx)(D,{})})]})};const _=function(e){let{step:t,creditRateLimitOptions:s,countryOptions:a,stateOptions:l,cityOptions:n,executiveOptions:i,setStateOptions:r,setCityOptions:o,fullAddress:c,setFullAddress:d,country:u,setCountry:m,state:p,setState:g,city:C,setCity:x,postalCode:N,setPostalCode:y,isGstRegistered:b,setIsGstRegistered:v,gstNumber:j,setGstNumber:f}=e;return(0,h.jsxs)(h.Fragment,{children:[0===t&&(0,h.jsx)(z,{creditRateLimitOptions:s}),1===t&&(0,h.jsx)(G,{countryOptions:a,stateOptions:l,cityOptions:n,setStateOptions:r,setCityOptions:o,fullAddress:c,setFullAddress:d,country:u,setCountry:m,state:p,setState:g,city:C,setCity:x,postalCode:N,setPostalCode:y,isGstRegistered:b,setIsGstRegistered:v,gstNumber:j,setGstNumber:f}),2===t&&(0,h.jsx)(M,{executiveOptions:i})]})};const q=function(){const e=(0,N.useSelector)((e=>e.auth.session.token)),[t,s]=(0,l.useState)(0),[c,d]=(0,l.useState)(Z),[u,b]=(0,l.useState)(null),[v,j]=(0,l.useState)([]),[f,A]=(0,l.useState)([]),[S,I]=(0,l.useState)([]),[P,w]=(0,l.useState)([]),[E,O]=(0,l.useState)([]),[F,L]=(0,l.useState)(""),[T,G]=(0,l.useState)(null),[M,k]=(0,l.useState)(null),[D,z]=(0,l.useState)(null),[q,B]=(0,l.useState)(""),[X,W]=(0,l.useState)(!1),[H,$]=(0,l.useState)(""),[K,V]=(0,l.useState)(!1),Y=(0,y.s0)(),U=(0,y.TH)();return(0,l.useEffect)((()=>((async()=>{try{V(!0),document.querySelector(".page-container").classList.add("!py-3"),j(await(async()=>{try{const e=await(0,r.TY)();return 200===e.status?e.data.map((e=>(0,i.Z)((0,i.Z)({},e),{},{value:e.CreditRateCode,label:e.CreditRateName}))):[]}catch(e){return console.error(e),[]}})()),A(await(async()=>{try{const e=await(0,o.oo)();return 200===e.status?e.data.map((e=>(0,i.Z)((0,i.Z)({},e),{},{value:e.CountryCode,label:e.CountryName}))):[]}catch(e){return console.error(e),[]}})()),O(await(async()=>{try{const e=await(0,o.ec)();return 200===e.status?e.data.map((e=>(0,i.Z)((0,i.Z)({},e),{},{value:e.EmployeeCode,label:e.Emp_FirstName}))):[]}catch(e){return console.error(e),[]}})())}catch(e){console.error(e),(0,C.openNotification)("danger","Something went wrong while loading page")}finally{V(!1)}})(),()=>document.querySelector(".page-container").classList.remove("!py-2"))),[]),(0,l.useEffect)((()=>{U.state&&0!==v.length&&0!==f.length?(b(U.state.clientDetails),(async(e,t,s,a)=>{try{let l=[];"1"===e.IBF&&l.push(1),"1"===e.IsAAAI&&l.push(2),"1"===e.OnHold&&l.push(3),"1"===e.IsGovernment&&l.push(4),s({clientName:e.ClientName,clientShortName:e.ClientShortName,clientDetailsErpCode:e.ERPCODE,pan:e.ClientPANNumber,tan:e.ClientTANNumber,barcCode:e.BarcCode,creditRateLimit:t.filter((t=>"".concat(t.value)===e.CreditRateCode))[0],clientFlags:l,status:"1"===e.IsActive,remarks:e.Remarks,mobile:e.Mobile,phone:e.Phone,fax:e.Fax,contactPerson:e.ContactPerson,email:e.Email,multipleAddresses:await m(Number(e.ClientCode),a),mappedExecutives:await p(Number(e.ClientCode))})}catch(l){console.error(l)}})(U.state.clientDetails,v,d,e)):d(Z)}),[U.state,v,f]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"h-full flex flex-col gap-2",children:[(0,h.jsxs)("h4",{children:[u?"Edit":"Add"," Client"]}),(0,h.jsx)(n.J9,{initialValues:c,enableReinitialize:!0,validationSchema:R,onSubmit:async t=>{const s="Something went wrong while ".concat(u?"saving changes":"adding client");try{let a;if(V(!0),u){let a=!1;const l=await(0,o.nj)(u.ClientCode,(e=>{const t=e.multipleAddresses[0];return{ClientName:e.clientName,ClientShortName:e.clientShortName,ERPCODE:e.clientDetailsErpCode,MainAddress1:t.fullAddress,MainAddress2:"",CountryCode:t.country.value,StateCode:t.state.value,PlaceCode:t.city.value,MainPinCode:t.postalCode,ContactPerson:e.contactPerson,Mobile:e.mobile,Phone:e.phone,Fax:e.fax,Email:e.email,Website:"",OtherDetails:"",CreditRateCode:e.creditRateLimit.value,IsAAAI:e.clientFlags.includes(2)?1:0,IBF:e.clientFlags.includes(1)?1:0,TnC:"",ClientPANNumber:e.pan,ClientTANNumber:e.tan,Remarks:e.remarks,ClientLoginID:"",ClientLoginPWD:"",IsWebActive:0,cBillRegistrationNo:"",MPIN:"",TPIN:"",IsMobileActive:0,OnHold:e.clientFlags.includes(3)?1:0,IsBillingAddress:0,IsSubClient:0,IsGovernment:e.clientFlags.includes(4)?1:0,BarcCode:e.barcCode,IsActive:e.status?1:0}})(t),e);if("200"!==(await l.json()).status_code&&(a=!0),!a){const s=t.mappedExecutives.map((e=>({ClientCode:Number(u.ClientCode),EmployeeCode:e.value,IsActive:1})));200!==(await(0,o.Lz)(s,e)).status&&(a=!0)}if(!a){const s=t.multipleAddresses.map((e=>({ClientCode:Number(u.ClientCode),AddressLine1:e.fullAddress,AddressLine2:"",CountryCode:e.country.value,StateCode:e.state.value,PlaceCode:e.city.value,PinCode:e.postalCode,GSTN_id:e.isGstRegistered?e.gstNumber:"0",IsGST_registered:e.isGstRegistered?1:0,IsActive:1}))),l=await(0,o.en)(s,e);"200"!==(await l.json()).code&&(a=!0)}a?(0,C.openNotification)("danger",s):((0,C.openNotification)("success","Client updated successfully"),Y("/ClientMaster"))}else{const l=(e=>{const t=e.multipleAddresses.map((e=>({AddressLine1:e.fullAddress,AddressLine2:"",CountryCode:e.country.value,StateCode:e.state.value,PlaceCode:e.city.value,PinCode:e.postalCode,GSTN_id:e.isGstRegistered?e.gstNumber:"0",IsGST_registered:e.isGstRegistered?1:0,IsActive:1}))),s=e.mappedExecutives.map((e=>({EmployeeCode:e.value,IsActive:1})));return{Client:{ClientName:e.clientName,ClientShortName:e.clientShortName,ERPCODE:e.clientDetailsErpCode,MainAddress1:t[0].AddressLine1,MainAddress2:t[0].AddressLine2,CountryCode:t[0].CountryCode,StateCode:t[0].StateCode,PlaceCode:t[0].PlaceCode,MainPinCode:t[0].PinCode,ContactPerson:e.contactPerson,Mobile:e.mobile,Phone:e.phone,Fax:e.fax,Email:e.email,Website:"",OtherDetails:"",CreditRateCode:e.creditRateLimit.value,IsAAAI:e.clientFlags.includes(2)?1:0,IBF:e.clientFlags.includes(1)?1:0,TnC:"",ClientPANNumber:e.pan,ClientTANNumber:e.tan,Remarks:e.remarks,ClientLoginID:"",ClientLoginPWD:"",IsWebActive:0,cBillRegistrationNo:"",MPIN:"",TPIN:"",IsMobileActive:0,OnHold:e.clientFlags.includes(3)?1:0,IsBillingAddress:0,IsSubClient:0,IsGovernment:e.clientFlags.includes(4)?1:0,BarcCode:e.barcCode,IsActive:e.status},clientcity:t,clientempmap:s,subclientmaster:[]}})(t);a=await(0,o.J8)(l,e);"200"===(await a.json()).status_code?((0,C.openNotification)("success","Client added successfully"),Y("/ClientMaster")):(0,C.openNotification)("danger",s)}}catch(a){console.error(a),(0,C.openNotification)("danger",s)}finally{V(!1)}},children:()=>(0,h.jsxs)(n.l0,{className:"grow flex flex-col",children:[(0,h.jsxs)(a.Zb,{bordered:!1,className:"grow",bodyClass:"p-3 pb-4 h-full flex flex-col",children:[(0,h.jsxs)(a.Rg,{current:t,className:"border-b border-b-gray-700 pb-4",children:[(0,h.jsx)(a.Rg.Item,{title:"Client Details"}),(0,h.jsx)(a.Rg.Item,{title:"Multiple Addresses"}),(0,h.jsx)(a.Rg.Item,{title:"Map Executive"})]}),(0,h.jsx)("div",{className:"grow h-0 overflow-auto pt-3",children:(0,h.jsx)(_,{step:t,creditRateLimitOptions:v,countryOptions:f,stateOptions:S,cityOptions:P,setStateOptions:I,setCityOptions:w,executiveOptions:E,fullAddress:F,setFullAddress:L,country:T,setCountry:G,state:M,setState:k,city:D,setCity:z,postalCode:q,setPostalCode:B,isGstRegistered:X,setIsGstRegistered:W,gstNumber:H,setGstNumber:$})})]}),(0,h.jsx)(g,{step:t,setStep:s,className:"mt-3"})]})})]}),(0,h.jsx)(x.default,{showLoader:K})]})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=4295.15d09e8f.chunk.js.map