(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[9526,5682],{28179:(e,t,a)=>{"use strict";a.d(t,{$H:()=>r,$o:()=>T,Bo:()=>N,D_:()=>A,Eg:()=>v,JN:()=>j,M0:()=>h,ND:()=>s,OY:()=>i,SR:()=>f,Sd:()=>y,U2:()=>w,U3:()=>b,XV:()=>u,fU:()=>S,fy:()=>x,fz:()=>Z,g7:()=>L,h:()=>p,iH:()=>l,ih:()=>k,jS:()=>D,kP:()=>d,ko:()=>m,m1:()=>C,mg:()=>P,pc:()=>O,qm:()=>g});var o=a(54048),n=a(46152);a(60630);const c=a(74569);async function r(e){return n.Z.fetchData({url:"/commercialtypemaster/",method:"get",data:e})}async function s(e,t,a){return n.Z.fetchData({url:"/spotcancellation/?CancelRemarkCode=".concat(t,"&IsNTC=").concat(a),method:"put",data:e})}const i=(e,t)=>new Promise(((a,n)=>{let r=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),s={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:r};c.request(s).then((e=>{a(e)})).catch((e=>{n(e)}))})),l=(e,t)=>new Promise(((a,n)=>{let r=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/".concat(e.CommercialTypeCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:r};c.request(s).then((e=>{a(e)})).catch((e=>{n(e)}))}));async function d(e){return n.Z.fetchData({url:"/commercialmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&IsNTC=").concat(e.IsNTC,"&fromdate=").concat(e.FromDate,"&todate=").concat(e.ToDate),method:"get"})}async function h(e,t){return n.Z.fetchData({url:"/bookingmaster/?IsNTC=".concat(e.IsNTC,"&LocationCode=").concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function u(e,t,a,o,c,r,s,i,l,d,h){return n.Z.fetchData({url:"/spotschedule/USP_SA_RO_SpotSchedule/?From_DT=".concat(e,"&To_DT=").concat(t,"&DealNumber=").concat(a,"&BookingNumber=").concat(o,"&ChannelCode=").concat(r,"&LocationCode=").concat(s,"&ScheduleDate=").concat(c,"&IsMakeGoodRO=").concat(i?1:0,"&BookingRefNumber=").concat(l,"&IsNTC=").concat(d,"&BrandCode=").concat(h),method:"get"})}async function m(e,t,a,o,c,r){return n.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(o,"&ChannelCode=").concat(c,"&ClientCode=").concat(t.value,"&BrandCode=").concat(e.value,"&DurInSec=").concat(a.DurInSec,"&IsNTC=").concat(r),method:"get"})}async function p(e,t,a,o,c){return n.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(a,"&ChannelCode=").concat(o,"&ClientCode=").concat(t,"&BrandCode=").concat(e,"&IsNTC=").concat(c),method:"get"})}const f=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};console.log(r.url),c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),C=(e,t,a)=>new Promise(((n,r)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(s).then((e=>{n(e)})).catch((e=>{r(e)}))}));async function y(e){return n.Z.fetchData({url:"/positionmaster/drop/",method:"get",data:e})}async function g(e){return n.Z.fetchData({url:"/spotpositiontypemaster/drop/",method:"get",data:e})}async function x(e){return n.Z.fetchData({url:"/cancelremarkmaster/",method:"get",data:e})}const j=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})}),v=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster/".concat(e.CancelRemarkCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})});async function b(e){return n.Z.fetchData({url:"/yearmaster/",method:"get",data:e})}const S=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})}),N=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster/".concat(e.Yearcode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})});async function D(e){return n.Z.fetchData({url:"/taxmaster/",method:"get",data:e})}async function T(e){return n.Z.fetchData({url:"/taxmaster/",method:"post",data:e})}async function w(e,t){return n.Z.fetchData({url:"/taxmaster/".concat(t),method:"put",data:e})}const Z=(e,t,a)=>{try{return n.Z.fetchData({method:"get",url:"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&traficmonth=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},A=(e,t,a,o)=>{try{return n.Z.fetchData({method:"get",url:"/trafficdayclose/asperfromto/?LocationCode=".concat(a.LocationCode,"&ChannelCode=").concat(a.ChannelCode,"&fromdate=").concat(e,"&todate=").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}})}catch(c){throw new Error(c)}},P=async(e,t,a)=>{try{return new Promise(((n,r)=>{let s={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};c.request(s).then((e=>{n(e)})).catch((e=>{r(e)}))}))}catch(n){throw n}},k=(e,t,a)=>{try{return n.Z.fetchData({method:"get",url:"/bookingmaster/getbookingbyclient/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&ClientCode=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},L=(e,t)=>{try{return n.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivity/?BookingNumber=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},O=(e,t,a)=>{try{return console.log(e),n.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivitybydate?BookingNumber=".concat(t,"&ChangeType=").concat(e.type,"&ChangeOn=").concat(e.dateTime,"&ChangeBy=").concat(e.executerId),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}}},89151:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var o=a(45987),n=a(1413),c=a(2803),r=(a(72791),a(58617)),s=a(88406),i=a(80184);const l=["children"];const d=function(e){let{location:t,channel:a,channelList:d,onChange:h}=e;const{Control:u}=s.c;return console.log("channelList",d),(0,i.jsx)(c.Ph,{options:d,components:{Option:e=>{let{innerProps:t,label:a,data:o,isSelected:c}=e;return(0,i.jsxs)("div",(0,n.Z)((0,n.Z)({className:"flex items-center justify-between p-2 ".concat(c?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("img",{src:o.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),(0,i.jsx)("span",{className:"ml-2 rtl:mr-2",children:a})]}),c&&(0,i.jsx)(r.dZ6,{className:"text-emerald-500 text-xl"})]}))},Control:e=>{let{children:t}=e,a=(0,o.Z)(e,l);const c=a.getValue()[0];return(0,i.jsxs)(u,(0,n.Z)((0,n.Z)({},a),{},{children:["\xa0\xa0",c&&(0,i.jsx)("img",{src:c.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),t]}))}},value:d.filter((e=>e.ChannelCode===a&&e.LocationCode==t)),onChange:h,placeholder:"Select",className:"caret-white",defaultMenuIsOpen:!0,blurInputOnSelect:!0,autoFocus:!0,styles:{menuList:e=>(0,n.Z)((0,n.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),control:e=>(0,n.Z)((0,n.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),input:e=>(0,n.Z)((0,n.Z)({},e),{},{color:"white"})}})}},45682:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var o=a(2803),n=(a(72791),a(80184));const c=function(e){let{showLoader:t}=e;return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,n.jsx)(o.$j,{size:"3.25rem"})}):(0,n.jsx)(n.Fragment,{})})}},24933:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var o=a(2803),n=a(72791),c=a(60364),r=a(11308),s=a(36064),i=a(88406),l=a(81320),d=a(89151),h=a(80184);const{Control:u}=i.c;const m=function(){const e=(0,c.useSelector)((e=>e.locale.isSelectChannelDialogOpen)),t=(0,c.useSelector)((e=>e.locale.selectedChannel)),a=(0,c.useSelector)((e=>e.locale.channelList)),i=(0,c.useSelector)((e=>e.auth.session.LoginId)),u=(0,c.useDispatch)();(0,n.useEffect)((()=>{(async()=>{try{if((0,l.isChannelSelected)(t)?u((0,s.ar)(!1)):u((0,s.ar)(!0)),!a){const e=await p();u((0,s.Uy)(e))}}catch(e){console.error(e)}})()}),[]),(0,n.useEffect)((()=>{try{(0,l.isChannelSelected)(t)&&u((0,s.ar)(!1))}catch(e){console.error(e)}}),[t]);const m=()=>{try{u((0,s.ar)(!1))}catch(e){console.error(e)}},p=async()=>{try{const e=await(0,r.bu)(i);return e.data.map((e=>({value:e.ChannelCode,label:e.LocationName+" "+e.ChannelName,ChannelCode:e.ChannelCode,LocationCode:e.LocationCode,ChannelName:e.ChannelName,ColorClass:"bg-rose-500",LocationName:e.LocationName,imgPath:e.Channel_Image})))}catch(e){throw e}};return(0,h.jsx)(h.Fragment,{children:Array.isArray(a)&&(0,h.jsxs)(o.Vq,{isOpen:e,onClose:m,onRequestClose:m,children:[(0,h.jsx)("h5",{className:"mb-6",children:"Select Channel"}),(0,h.jsx)("p",{className:"text-white mb-1",children:"Channel"}),(0,h.jsx)(d.Z,{channel:t,channelList:a,onChange:e=>{u((0,s.z8)(e))}}),(0,h.jsx)("div",{className:"text-right mt-6",children:(0,h.jsx)(o.zx,{variant:"solid",onClick:m,children:"Close"})})]})})}},97176:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var o=a(81721),n=a(2803),c=a(54748),r=a(72791),s=a(60364),i=a(28179),l=a(81320),d=a(41213),h=a(3479),u=a(45682),m=a(24933),p=a(80184);const f=function(){const e=(0,s.useSelector)((e=>e.locale.selectedChannel)),t=(0,s.useSelector)((e=>e.auth.session.token)),[a,f]=(0,r.useState)(new Date),[C,y]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1);(0,r.useEffect)((()=>{try{(async()=>{if((0,l.isChannelSelected)(e)){x(!0);const o=await(0,i.fz)((0,c.Tk)(a),e,t);if(200===o.status){const e=o.data;j(e)}else 204===o.status?(0,l.openNotification)("info","No Traffic Day data found for current month"):(0,l.openNotification)("danger","Unable to get Traffic Day Close. Server responded with status code: ".concat(o.status));x(!1)}})()}catch(o){console.error(o)}}),[e,a,t]);const j=e=>{try{let t=[];e.forEach((e=>{t.push({title:"Event for ".concat(e.date),start:e.date,end:e.date,isActive:e.IsActive})})),y(t)}catch(t){console.error(t)}};return(0,p.jsxs)(p.Fragment,{children:[(0,l.isChannelSelected)(e)?(0,p.jsxs)(n.Zb,{children:[(0,p.jsx)("h4",{style:{fontSize:"1.25rem",textAlign:"center",fontWeight:"600",lineHeight:"2.75rem",color:"white",marginTop:"-15px"},children:"Traffic Day"}),(0,p.jsx)(o.W2,{style:{height:550},children:(0,p.jsx)(o.wr,{datesSet:e=>{f(e.view.currentStart)},events:C,eventColor:"transparent",eventContent:a=>{let{event:o}=a;try{return(0,p.jsx)("div",{className:"flex justify-center items-center",children:(0,p.jsx)(n.T5,{defaultChecked:o.extendedProps.isActive,onClick:()=>{(async a=>{try{const o={TrafficDate:(0,c.Tk)(a.start),IsActive:0===a.extendedProps.isActive?1:0},n=await(0,i.mg)(o,e,t);200===n.status?(a.setExtendedProp("isActive",o.IsActive),(0,l.openNotification)("success","Traffic day ".concat(o.IsActive?"opened":"closed"," for ").concat((0,l.formatDateToDDMMMYYYY)(o.TrafficDate)))):(0,l.openNotification)("danger","Something went wrong. Server returned with status code ".concat(n.status))}catch(o){console.error(o)}})(o)},checkedContent:(0,p.jsx)("div",{className:"text-lg",children:(0,p.jsx)(h.RPL,{})}),unCheckedContent:(0,p.jsx)("div",{className:"text-lg",children:(0,p.jsx)(d.rQj,{})})})})}catch(r){console.error(r)}}})})]}):(0,p.jsx)(n.Zb,{className:"h-full",bodyClass:"h-full flex justify-center items-center",bordered:!1,children:"Please select a channel to view Traffic Day data"}),(0,p.jsx)(m.Z,{}),(0,p.jsx)(u.default,{showLoader:g})]})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{},38416:(e,t,a)=>{var o=a(64062);e.exports=function(e,t,a){return(t=o(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},42122:(e,t,a)=>{var o=a(38416);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}e.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},95036:(e,t,a)=>{var o=a(18698).default;e.exports=function(e,t){if("object"!=o(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64062:(e,t,a)=>{var o=a(18698).default,n=a(95036);e.exports=function(e){var t=n(e,"string");return"symbol"==o(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=9526.740f80c2.chunk.js.map