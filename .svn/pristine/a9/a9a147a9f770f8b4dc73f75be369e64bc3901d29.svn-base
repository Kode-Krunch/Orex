"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[6510],{25579:(e,t,a)=>{a.d(t,{Ei:()=>g,I6:()=>b,Qj:()=>i,U$:()=>d,Uy:()=>C,Z_:()=>n,_K:()=>f,b6:()=>s,d:()=>c,db:()=>y,fh:()=>m,gg:()=>p,hu:()=>r,iD:()=>u,rd:()=>h,w_:()=>v});a(54048);var o=a(46152),l=a(54748);a(74569);async function r(e){return o.Z.fetchData({url:"/dealmaster/".concat(e),method:"get"})}async function n(e){return o.Z.fetchData({url:"/dealattachment/".concat(e),method:"get"})}async function s(e,t,a){return o.Z.fetchData({url:"/dealmaster/dealforapproval/?DealNumber=".concat(e,"&IsApproved=").concat(t,"&RejectRemark=").concat(a),method:"get"})}async function c(e,t){return o.Z.fetchData({url:"/dealmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&StartDate=").concat((0,l.Tk)(t[0]),"&EndDate=").concat((0,l.Tk)(t[1])),method:"get"})}async function i(e){return o.Z.fetchData({url:"/sponsortypemaster/drop/",method:"get",data:e})}async function u(e){return o.Z.fetchData({url:"/spottypemaster/drop/",method:"get",data:e})}async function d(e){return o.Z.fetchData({url:"/dealdetail/".concat(e),method:"get"})}async function h(e){return o.Z.fetchData({url:"/dealmaster/USP_Sch_DealConsumptionCheck/?DealNumber=".concat(e),method:"get"})}async function m(e,t,a,l,r,n){return o.Z.fetchData({url:"/dealmaster/bindstartnendtime/?LocationCode=".concat(r,"&ChannelCode=").concat(n,"&DealPeriodToDate=").concat(e,"&DealPeriodFromDate=").concat(t,"&ContentCode=").concat(a,"&OriginalRepeatCode=").concat(l),method:"get"})}async function f(e,t,a){return o.Z.fetchData({url:"/bookingdetails/bookingchange/?flag=".concat(e,"&IsNtc=").concat(a),method:"put",data:t})}async function p(e,t){var a={params:t};return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:a,method:"post"})}async function g(e){return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:{params:{}},method:"post"})}async function b(e,t,a){var l={params:{Bookingcode:t,IsNTC:a}};return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:l,method:"post"})}async function y(e){var t={params:{CheckMonth:e}};return o.Z.fetchData({url:"/callstoreprocedure/USP_DealDashboardDoughnut",data:t,method:"post"})}async function C(e,t){var a={params:{BookingNumber:t,deallineitemno:0}};return o.Z.fetchData({url:"/callstoreprocedure/"+e,data:a,method:"post"})}async function v(e){return o.Z.fetchData({url:"currencyexchangerate/?basecurrency=".concat(e),method:"post"})}},36510:(e,t,a)=>{a.d(t,{Z:()=>p});var o=a(72791),l=a(2803),r=(a(33155),a(25146),a(59054)),n=a(60364),s=a(4500),c=a(25579),i=a(80184);const{Tr:u,Th:d,Td:h,THead:m,TBody:f}=l.iA,p=e=>{let{data:t,BookingStatus:a,setData:d,dataCopy:p,setDataCopy:g,visiablecolumns:b,myid:y,showSpotdata:C}=e;const v=(0,n.useDispatch)(),[x,w]=(0,o.useState)([]),[N,D]=(0,o.useState)(!1),S=(t.length,[{value:"starts_with",label:"Starts With"},{value:"contains",label:"Contains"},{value:"not_contains",label:"Not Contains"},{value:"ends_with",label:"Ends With"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"}]),[j,Z]=(0,o.useState)([{columnName:"",filterValue:"",filterOption:"contains"}]);return(0,o.useEffect)((()=>{D(t[x])}),[x]),(0,i.jsx)("div",{style:{overflow:"auto",whiteSpace:"nowrap",height:"400px"},children:(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2 table-container",id:"div1",children:(0,i.jsxs)(l.iA,{className:"resizable-table",children:[(0,i.jsx)(m,{className:"theade",children:(0,i.jsx)(u,{className:"tre",children:b.map(((e,a)=>(0,i.jsx)(r.Z,{columnName:e.header,data:t,setTable2Data:d,table2DataCopy:p,filterOptions:S,columnFilters:j,setColumnFilters:Z,IsSortingAllow:!1,selectedCities:b,ColIndex:a,ColumnInfo:e,DisplayFilter:!0},a)))})}),(0,i.jsx)(f,{children:(a.value?t.filter((e=>e.BookingStatus===a.value&&(!y||e.DealLineItemNo===y))):t.filter((e=>!y||e.DealLineItemNo===y))).map(((e,t)=>(0,i.jsx)(u,{onDoubleClick:()=>(async(e,t)=>{try{const t=await(0,c.hu)(e.DealNumber);v((0,s.XZ)(t.data))}catch(a){console.error("Error fetching deal master:",a)}try{const t=await(0,c.U$)(e.DealNumber);v((0,s.mi)(t.data))}catch(a){console.error("Error fetching deal detail:",a)}})(e),onClick:()=>(e=>{w([e])})(t),className:x.includes(t)?"selectedrow":"",children:b.map((t=>(0,i.jsx)(h,{className:"border_class",children:e[t.code]},t.code)))},t)))})]})})})}},25146:(e,t,a)=>{a.d(t,{J:()=>s});var o=a(1413),l=(a(72791),a(25415)),r=a(64802),n=a(81320);const s=(e,t,a,s,c,i,u,d,h)=>{if(0===i.length)return void(0,n.openNotification)("info","No data to export");const m=i.map((e=>(0,o.Z)({},e))),f={};d.forEach((e=>{e.accessorKey&&(console.log(e.accessorKey),console.log(f[e.accessorKey]),f[e.accessorKey]=e.header)}));const p=m.map((e=>{const t={};return Object.keys(e).forEach((a=>{f[a]?t[f[a]]=e[a]:t[a]=e[a]})),t})),g=Object.keys(f).length>0?Object.keys(f).map((e=>f[e])):[],b=(g.map((e=>({header:e,key:e}))),new l.Workbook),y=b.addWorksheet(u);for(let o=0;o<s;o++)y.addRow([]);const C=[];for(let o=0;o<a;o++)C.push("");if(C.push(...g),y.addRow(C),e){y.getRow(s+1).font={bold:!0,size:10}}if(c){const e=y.getRow(s+1);e.font={bold:!0,size:12},e.eachCell((e=>{e.border={top:{style:"medium"},left:{style:"medium"},bottom:{style:"medium"},right:{style:"medium"}},h||(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"009dff"}})}))}if(p.forEach((e=>{const t=[];for(let l=0;l<a;l++)t.push("");g.forEach((a=>{t.push(e[a]||"")}));const o=y.addRow(t);o.font={size:10},o.eachCell(((t,a)=>{t.value instanceof Date&&(t.value=new Date(Date.UTC(t.value.getFullYear(),t.value.getMonth(),t.value.getDate()))),h&&e.EventDefaultBackColor&&(t.fill={type:"pattern",pattern:"solid",fgColor:{argb:e.EventDefaultBackColor.substring(1)}}),h&&e.EventDefaultFrontColor&&(t.font={color:{argb:e.EventDefaultFrontColor.substring(1)}}),c&&(t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}})}))})),y.columns.forEach((e=>{let t=10;e.eachCell((e=>{const a=(e.value||"").toString().length;t=Math.max(t,a)})),e.width=Math.min(30,t+2)})),y.views=[{state:"frozen",xSplit:a,ySplit:s+1,topLeftCell:"A".concat(s+2)}],t){const e=i.length+s+100,t=d.length>0?d.length+100:100;for(let a=1;a<=e;a++){const e=y.getRow(a);for(let a=1;a<=t;a++){const t=e.getCell(a);t.value=t.value||"",t.border={top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}}}}}}b.xlsx.writeBuffer().then((e=>{(0,r.saveAs)(new Blob([e]),"".concat(u,".xlsx"))}))}},4346:(e,t,a)=>{a.d(t,{Z:()=>m});var o=a(1413),l=a(2803),r=a(72791),n=a(40071),s=a(40003),c=a(7064),i=a(80184);const u="rgb(107 114 128)",d=[{value:"0",label:c.b.filterOptions.STARTS_WITH},{value:"1",label:c.b.filterOptions.CONTAINS},{value:"2",label:c.b.filterOptions.NOT_CONTAINS},{value:"3",label:c.b.filterOptions.ENDS_WITH},{value:"4",label:c.b.filterOptions.EQUALS},{value:"5",label:c.b.filterOptions.NOT_EQUALS}],h={control:e=>(0,o.Z)((0,o.Z)({},e),{},{borderColor:u,"&:hover":{cursor:"pointer"}}),dropdownIndicator:e=>(0,o.Z)((0,o.Z)({},e),{},{color:u})};const m=function(e){let{columnKey:t,isLastColumn:a}=e;const{selectedFilters:c,setSelectedFilters:m}=(0,r.useContext)(s.Z),[f,p]=(0,r.useState)({selectorValue:d[0],searchInputValue:""});(0,r.useEffect)((()=>{try{0===c.length&&p({selectorValue:d[0],searchInputValue:""})}catch(e){console.error(e)}}),[c]);const g=()=>{try{p({selectorValue:d[0],searchInputValue:""})}catch(e){throw e}};return(0,i.jsxs)(l.Lt,{renderTitle:(0,i.jsx)(l.u,{title:"Filter",children:(0,i.jsx)(l.zx,{shape:"circle",variant:"plain",size:"xs",icon:(0,i.jsx)(n.Q65,{color:(()=>{try{return c.filter((e=>e.columnKey===t)).length>0}catch(e){console.error(e)}})()?"rgb(20 184 166)":""})})}),menuClass:"w-80 font-normal p-3 capitalize text-xs",placement:a?"bottom-end":"bottom-center",children:[(0,i.jsx)("p",{className:"text-[0.92rem] font-normal  border-b border-b-gray-600 pb-2",children:"Filter"}),(0,i.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-x-2 gap-y-3 items-center",children:[(0,i.jsx)(l.Ph,{placeholder:"Select",size:"sm",styles:h,options:d,value:f.selectorValue,onChange:e=>{p((0,o.Z)((0,o.Z)({},f),{},{selectorValue:e}))}}),(0,i.jsx)(l.II,{size:"sm",style:{borderColor:u},placeholder:"Search",className:"h-full hover:cursor-pointer",value:f.searchInputValue,onChange:e=>{p((0,o.Z)((0,o.Z)({},f),{},{searchInputValue:e.target.value}))}}),(0,i.jsxs)(l.Lt.Item,{variant:"custom",className:"mt-2 col-span-2 flex justify-between",children:[(0,i.jsx)(l.zx,{className:"w-max font-normal",style:{borderColor:u,fontSize:"0.8rem",lineHeight:"1rem"},size:"sm",onClick:()=>{try{m((e=>{let a=[...e];return a=a.filter((e=>e.columnKey!==t)),a})),g()}catch(e){console.error(e)}},children:"Clear"}),(0,i.jsx)(l.zx,{className:"w-max font-normal",size:"sm",variant:"twoTone",disabled:!f.searchInputValue,onClick:()=>{try{m((e=>{let a=[...e];return a=a.filter((e=>!(e.columnKey===t&&e.filter===f.selectorValue.label))),a.push({columnKey:t,filter:f.selectorValue.label,searchValue:f.searchInputValue}),a}))}catch(e){console.error(e)}},style:{fontSize:"0.8rem",lineHeight:"1rem"},children:"Apply"})]})]})]})}},40003:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a(72791).createContext()},7064:(e,t,a)=>{a.d(t,{b:()=>o});const o={filterOptions:{STARTS_WITH:"Starts With",CONTAINS:"Contains",NOT_CONTAINS:"Not Contains",ENDS_WITH:"Ends With",EQUALS:"Equals",NOT_EQUALS:"Not Equals"}}},59054:(e,t,a)=>{a.d(t,{Z:()=>u});var o=a(1413),l=a(72791),r=a(2803),n=a(90375),s=(a(88081),a(53761)),c=(a(4346),a(80184));const{Th:i}=r.iA,u=e=>{let{columnName:t,table2Data:a,setTable2Data:u,table2DataCopy:d,filterOptions:h,columnFilters:m,setColumnFilters:f,IsSortingAllow:p,selectedCities:g,dispatch:b,ColIndex:y,ColumnInfo:C,DisplayFilter:v}=e;const x=l.useRef(null),[w,N]=(0,l.useState)(""),[D,S]=(0,l.useState)("contains");console.log("filterValue",w);const[j,Z]=(0,l.useState)("down");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i,{className:"rpg",style:{width:C.width,textTransform:"capitalize"},children:(0,c.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{style:{display:"none"},children:C.name}),C.header]}),v?(0,c.jsx)("i",{onClick:e=>x.current.toggle(e),className:""!==w?"pi pi-filter-fill mr-1 mt-1 ":"pi pi-filter mr-1 mt-1  ",style:{fontSize:"smaller"}}):null,p&&(0,c.jsx)("span",{onClick:()=>{Z((e=>"down"===e?"up":"down"))},className:"pi pi-sort-".concat(j," mr-1  mt-1"),style:{cursor:"pointer",fontSize:"smaller"}}),(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsxs)("span",{className:"hide resizer",children:["\xa0\xa0",(0,c.jsx)("span",{className:"hide resizer",onMouseDown:e=>((e,t)=>{let a=e.pageX;const o=g[t].width,l=e=>{const l=o+(e.pageX-a);if(l>50){const e=[...g];e[t].width=l,b((0,s.Ij)(e))}},r=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",r)})(e,y),children:"||"})]})})]})},C.header),(0,c.jsx)(n.T,{ref:x,className:"custom-overlay",style:{width:"350px",backgroundColor:"rgb(31 41 55/var(--tw-bg-opacity))",color:"white"},children:(0,c.jsxs)("div",{className:"grid grid-cols-12 md:grid-cols-12 gap-1",children:[(0,c.jsxs)("div",{className:"col-span-6",children:[(0,c.jsx)("label",{children:"Condition"}),(0,c.jsx)(r.Ph,{placeholder:"Please Select",options:h,defaultValue:h[1],onChange:e=>{console.log("value.value",e.value),S(e.value),f((a=>{const l=a.findIndex((e=>e.columnName===t)),r=-1!==l?a.map(((a,r)=>r===l?(0,o.Z)((0,o.Z)({},a),{},{filterValue:e.value,filterOption:D,columnName:t}):a)):[...a,{columnName:t,filterValue:e.value,filterOption:D,columnName:t}];return u((e=>(console.log("prevTable2Data",e),d.filter((e=>(console.log("row",r),r.every((t=>{console.log("filter",t);const{columnName:a,filterValue:o,filterOption:l}=t;console.log(a);const r=(e[a]||"").toString().toLowerCase();switch(l){case"starts_with":return r.startsWith(o.toLowerCase());case"contains":return r.includes(o.toLowerCase());case"not_contains":return!r.includes(o.toLowerCase());case"ends_with":return r.endsWith(o.toLowerCase());case"equals":return r===o.toLowerCase();case"not_equals":return r!==o.toLowerCase();default:return!0}})))))))),r}))}})]}),(0,c.jsxs)("div",{className:"col-span-6",children:[(0,c.jsx)("label",{children:"Search"}),(0,c.jsx)(r.II,{placeholder:"Search "+t,id:t,value:w,onChange:e=>{N(e.target.value),f((a=>{const l=a.findIndex((e=>e.columnName===t)),r=-1!==l?a.map(((a,r)=>r===l?(0,o.Z)((0,o.Z)({},a),{},{filterValue:e.target.value,filterOption:D,columnName:t}):a)):[...a,{columnName:t,filterValue:e.target.value,filterOption:D,columnName:t}];return u((e=>(console.log("prevTable2Data",e),d.filter((e=>(console.log("row",e),r.every((t=>{const{columnName:a,filterValue:o,filterOption:l}=t,r=(e[a]||"").toString().toLowerCase();switch(l){case"starts_with":return r.startsWith(o.toLowerCase());case"contains":return r.includes(o.toLowerCase());case"not_contains":return!r.includes(o.toLowerCase());case"ends_with":return r.endsWith(o.toLowerCase());case"equals":return r===o.toLowerCase();case"not_equals":return r!==o.toLowerCase();default:return!0}})))))))),r}))}})]})]})})]})}},33155:()=>{},88081:()=>{}}]);
//# sourceMappingURL=6510.37dc3811.chunk.js.map