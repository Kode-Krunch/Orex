import { Button, Dialog } from 'components/ui';
import React, { useContext } from 'react';
import { operationTypesEnum } from 'views/Scheduling/Scheduler/enum';
// import SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';
import SchedulerContext from 'views/Scheduling/SchedulerOld/context/SchedulerContext';

function GenerateLogDialog({ isOpen, setIsOpen }) {
  /* CONTEXT */
  const { setShowLoader, executeOperation } = useContext(SchedulerContext);

  /* EVENT HANDLERS */
  const handleGenerate = async () => {
    try {
      setShowLoader(true);
      await executeOperation({
        operation: operationTypesEnum.INITIALIZE_SCHEDULER,
        isGenerateLog: true,
      });
      handleClose();
      setShowLoader(false);
    } catch (error) {
      throw error;
    }
  };

  const handleClose = () => setIsOpen(false);

  return (
    <Dialog isOpen={isOpen} onClose={handleClose} onRequestClose={handleClose}>
      <h5 className="mb-4">Generate Log</h5>
      <p>Are you sure you want to generate log?</p>
      <div className="text-right mt-6">
        <Button variant="solid" onClick={handleGenerate}>
          Generate
        </Button>
      </div>
    </Dialog>
  );
}

export default GenerateLogDialog;
