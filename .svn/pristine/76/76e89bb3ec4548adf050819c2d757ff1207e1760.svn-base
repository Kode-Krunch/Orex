import { updateOffsetStartTimeOfNTCs } from './utils';

const executeNtcReplace = (
  schTableData,
  schTableSelectedRows,
  secTableSelectedRow,
  isAutoCalcNtcOffsetTime,
) => {
  let newSchTableData;
  if (isAutoCalcNtcOffsetTime) {
    newSchTableData = getTableDataWithAutoNTCOffsetTimeAutoCalc(
      schTableData,
      schTableSelectedRows,
      secTableSelectedRow,
    );
  } else {
    newSchTableData = replaceNtcRows(
      schTableData,
      schTableSelectedRows,
      secTableSelectedRow,
    );
  }
  return newSchTableData;
};

const getTableDataWithAutoNTCOffsetTimeAutoCalc = (
  schTableData,
  schTableSelRows,
  secTableSelRow,
) => {
  let newSchTableData = replaceNtcRows(
    schTableData,
    schTableSelRows,
    secTableSelRow,
  );
  newSchTableData = updateOffsetStartTimeOfNTCs(newSchTableData);
  return newSchTableData;
};

const replaceNtcRows = (schTableData, schTableSelRows, secTableSelRow) => {
  let newSchTableData = [...schTableData];
  schTableSelRows.forEach((selRow) => {
    newSchTableData[selRow.rowIndex] = {
      ...selRow,
      Event_Name: secTableSelRow.Event_Name,
      Duration: secTableSelRow.Duration,
      VideoID: secTableSelRow.HouseID,
      Tape_ID: secTableSelRow.Tape_ID,
      NtcTypeName: secTableSelRow.NtcTypeName,
    };
  });
  return newSchTableData;
};

export { executeNtcReplace };
