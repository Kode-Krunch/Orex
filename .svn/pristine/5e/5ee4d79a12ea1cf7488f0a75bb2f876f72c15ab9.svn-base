import { Tooltip } from 'components/ui';
import Td from 'components/ui/Table/Td';
import {
  HiChatAlt,
  HiOutlineDesktopComputer,
  HiOutlinePencil,
  HiOutlineTable,
} from 'react-icons/hi';
import { MdOutlineContentCopy, MdStar } from 'react-icons/md';
import { useDispatch, useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import { apiGetcontentcontractmasterId } from 'services/ProgrammingService';
import { apiGetSongmasterbyId } from 'services/SchedulingService';
import {
  setContent,
  setContentSeg,
  setQueryParams,
} from 'store/base/commonSlice';
import { CLIENT } from './clientListEnum';
import { TbBuildingEstate } from 'react-icons/tb';

const ButtonShow = ({ row, openDialog }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const Channel = useSelector((state) => state.locale.selectedChannel);
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip
          title={
            Channel.label == CLIENT.USA_Forbes
              ? 'Template Edit'
              : 'Content Edit'
          }
        >
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => {
              openDialog(
                CLIENT.USA_Forbes == Channel.label
                  ? 'Template Master'
                  : 'Content Master',
                row.original,
              );
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
        <Tooltip title="Synopsis">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => openDialog('Synopsis', row.original)}
          >
            <HiChatAlt />
          </span>
        </Tooltip>

        {row.original.ContentClassification?.ClassificationCode != 2 && (
          <Tooltip title="EpisodeRestrictions">
            <span
              className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
              onClick={() => openDialog('EpisodeRestrictions', row.original)}
            >
              <HiOutlineDesktopComputer />
            </span>
          </Tooltip>
        )}
        <Tooltip title="Channel & Season Mapping">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => openDialog('SeasonMapping', row.original)}
          >
            <HiOutlineTable />
          </span>
        </Tooltip>
        {/* <Tooltip title="StarCast Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => openDialog('StarCastEdit', row.original)}
          >
            <TbBuildingEstate />
          </span>
        </Tooltip> */}
        <Tooltip title="Ratings">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => openDialog('Rating', row.original)}
          >
            <MdStar />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowSeg = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="Segment Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => {
              const transformedObject = {
                tx: {
                  value: row.original.TXVersionMaster.TXVersionCode,
                  label: row.original.TXVersionMaster.TXVersionName,
                },
              };

              console.log(transformedObject);
              const updatedArray = {
                ...row.original,
                ...transformedObject,
              };
              console.log(updatedArray);
              dispatch(setContent(updatedArray));
              dispatch(setContentSeg(''));
              navigate('/addcontentseg');
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowseeting = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const Channel = useSelector((state) => state.locale.selectedChannel);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip
          title={
            CLIENT.USA_Forbes == Channel.label
              ? 'Template Master'
              : 'Content Master'
          }
        >
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => {
              dispatch(setContent(row.original));
              navigate('/ChannelSettingEdit');
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowPatternMaster = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="Pattern Master Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => {
              dispatch(setContent(row.original));
              navigate('/patternEdit');
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};
const ButtonShowPromoMaster = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  const Channel = useSelector((state) => state.locale.selectedChannel);
  const IsChannelwise = Channel.label === CLIENT.USA_Forbes;
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip
          title={IsChannelwise ? 'Content Master Edit' : 'Promo Master Edit'}
        >
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => {
              dispatch(setContent(row.original));
              navigate(
                IsChannelwise ? '/ContentMasterEdit' : '/PromoMasterEdit',
              );
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};
const ButtonShowSongMaster = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="Song Master Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={async () => {
              const Songmaster = await apiGetSongmasterbyId(
                row.original.SongCode,
              );
              dispatch(setContent(Songmaster.data));
              navigate('/SongMasterEdit');
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};
const ButtonShowNTCMaster = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="NTC Master Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={() => {
              dispatch(setContent(row.original));
              navigate('/NTCMasterEdit');
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowContentContract = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="Content Contract Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={async () => {
              try {
                const data = await apiGetcontentcontractmasterId(
                  row.original.ContractCode,
                );
                dispatch(setContent(data.data));
                navigate('/ContentContractEdit');
              } catch (error) {}
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowCommercialMaster = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  const Path = useSelector((state) => state.base.common.Path);
  return (
    <Td className="text-xs   font-medium ">
      <center>
        <Tooltip title="Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={async () => {
              dispatch(setContent(row));
              dispatch(setQueryParams(null));
              navigate(
                Path == '/NTCCommercialMaster'
                  ? '/NTCCommercialMasterEdit'
                  : '/CommercialMasterEdit',
              );
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowCopyCommercial = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  const Path = useSelector((state) => state.base.common.Path);
  return (
    <Td className="text-xs   font-medium ">
      <center>
        <Tooltip title="Copy Commercial">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={async () => {
              dispatch(setContent(row));
              dispatch(setQueryParams({ copy: true }));
              navigate(
                Path == '/NTCCommercialMaster'
                  ? '/NTCCommercialMasterEdit'
                  : '/CommercialMasterEdit',
              );
            }}
          >
            <MdOutlineContentCopy />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowAgencyPaymentMaster = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="AgencyPayment Master Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={async () => {
              dispatch(setContent(row.original));
              navigate('/AgencyPaymentMasterEdit');
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

const ButtonShowDealMasterAdd = ({ row }) => {
  const { themeColor, primaryColorLevel } = useSelector((state) => state.theme);
  const mode = useSelector((state) => state.theme.mode);
  const dispatch = useDispatch();
  const navigate = useNavigate();
  return (
    <Td
      className={
        mode == 'dark'
          ? 'text-xs font-medium actions td'
          : 'text-xs font-medium actions tdLight'
      }
    >
      <center>
        <Tooltip title="Deal Edit">
          <span
            className={`cursor-pointer pl-3 text-base hover:text-${themeColor}-${primaryColorLevel}`}
            onClick={async () => {
              try {
                dispatch(setContent(row.original));
                navigate('/DealMasterAdd');
              } catch (error) {}
            }}
          >
            <HiOutlinePencil />
          </span>
        </Tooltip>
      </center>
    </Td>
  );
};

export {
  ButtonShow,
  ButtonShowSeg,
  ButtonShowseeting,
  ButtonShowPatternMaster,
  ButtonShowPromoMaster,
  ButtonShowSongMaster,
  ButtonShowNTCMaster,
  ButtonShowContentContract,
  ButtonShowCommercialMaster,
  ButtonShowCopyCommercial,
  ButtonShowDealMasterAdd,
  ButtonShowAgencyPaymentMaster,
};
