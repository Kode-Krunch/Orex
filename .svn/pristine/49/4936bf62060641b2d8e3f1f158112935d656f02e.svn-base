"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[1339],{21547:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var n=s(1413),i=s(45987),a=s(72791),o=s(2803),r=s(34786),l=s(11308),c=s(58617),d=s(92506),u=s(81724),m=s(60364),C=s(18923),p=s(81320),x=s(80184);u.Ry().shape({ClientGroupName:u.Z_().min(1,"Too Short!").max(50,"Too Long!").required("ClientGroup Name Required"),ClientCode:u.Z_().min(1,"Too Short!").max(50,"Too Long!").required("ClientCode Name Required"),IsActive:u.Z_().required("IsActives Required"),rememberMe:u.Xg()});var h={};const v=(0,a.forwardRef)(((e,t)=>{const[s,n]=(0,a.useState)([]),{onDrawerClose:i,editData:l,setMessage:c,setlog:u,ClientList:v}=e,f=(0,m.useSelector)((e=>e.auth.session.token));var N;l&&l.details&&(N=[...new Set(l.details.map((e=>e.ClientCode)))]);const j=e=>{const t=e.map((e=>({ClientCode:e.code})));h=t};return(0,x.jsx)("div",{children:(0,x.jsx)(d.J9,{innerRef:t,initialValues:{ClientGroupCode:l.ClientGroupCode||"",ClientGroupName:l.ClientGroupName||"",IsActive:1===l.IsActive||"",ShareDifference:0},onSubmit:(e,t)=>{let{resetForm:s,setSubmitting:n}=t;e.Detail=h,setTimeout((()=>{l.ClientGroupCode?new Promise(((t,s)=>{n(!1),(async(e,t)=>{console.log(e);const s={ClientGroup:{ClientGroupName:e.ClientGroupName,IsActive:e.IsActive?1:0},Details:h.map((e=>({ClientCode:e.ClientCode})))};console.log(s);try{const n=await(0,r.eQ)(s,e.ClientGroupCode,t);if(204===n.status)return void(0,p.openNotification)("danger","Data Already Exists.");if(200==n.status)return void(0,p.openNotification)("success","Data Inserted Successfully.")}catch(n){if(500===n.response.status)return void(0,p.openNotification)("warning","Server Error.")}})(e,f).then((e=>{i(0,0),t(e)})).catch((e=>{s(e)}))})):new Promise(((t,s)=>{(async(e,t)=>{const s={ClientGroup:{ClientGroupName:e.ClientGroupName,IsActive:e.IsActive?1:0},Details:h.map((e=>({ClientCode:e.ClientCode})))};try{const e=await(0,r.o1)(s,t);if(204===e.status)return void(0,p.openNotification)("danger","Data Already Exists.");if(200==e.status)return void(0,p.openNotification)("success","Data Inserted Successfully.")}catch(n){if(500===n.response.status)return void(0,p.openNotification)("warning","Server Error.")}})(e,f).then((e=>{i(0,0),t(e)})).catch((e=>{s(e)}))})),s()}),400)},children:e=>{let{values:t,touched:s,errors:n}=e;return(0,x.jsx)(d.l0,{children:(0,x.jsxs)(o.Yb,{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(d.gN,{size:"sm",type:"ClientGroupCode",autoComplete:"off",name:"ClientGroupCode",placeholder:"ClientGroup Name",component:o.II,hidden:!0}),(0,x.jsx)(o.lm,{asterisk:!0,label:"ClientGroup Name",invalid:n.ClientGroupCode&&s.ClientGroupCode,errorMessage:n.ClientGroupName,children:(0,x.jsx)(d.gN,{size:"sm",type:"text",maxlength:"20",autoComplete:"off",name:"ClientGroupName",placeholder:"ClientGroup Name",component:o.II})})]}),(0,x.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3",children:(0,x.jsx)(o.lm,{label:"IsActive",invalid:n.IsActive&&s.IsActive,errorMessage:n.IsActive,children:(0,x.jsx)("div",{children:(0,x.jsx)(d.gN,{name:"IsActive",component:o.T5})})})}),(0,x.jsx)("div",{className:"mt-3",children:(0,x.jsx)(C.x,{data:v,checkedList:N||[],hdr:"client's",onSelectionChange:j})})]})})}})})}));var f=s(44630),N=s(83659),j=s(96361),g=s(88449),G=s(14509);const w=["value","onChange","debounce"],I=(e,t,s,n)=>(0,x.jsxs)("span",{className:"flex items-center",children:[(0,x.jsx)("span",{className:"mr-1 mt-4  font-semibold",children:(0,x.jsx)(t,{value:null!==s&&void 0!==s?s:"",className:" solid",placeholder:"Search all columns...",size:"sm",onChange:e=>{/^[0-9a-zA-Z\s]*$/.test(e)&&n(e)}})}),(0,x.jsx)("span",{className:"mr-1 font-semibold",children:(0,x.jsx)(o.zx,{block:!0,variant:"solid",size:"sm",icon:(0,x.jsx)(c.yEd,{}),onClick:()=>e(),children:"Create ClientGroup"})})]}),S=()=>{const[e,t]=(0,a.useState)(!1),[s,d]=(0,a.useState)([""]),[u,m]=(0,a.useState)(""),[C,p]=(0,a.useState)([""]),[h,S]=(0,f.Z)(),[b,y]=(0,a.useState)(""),A=(0,a.useRef)(),Z=(0,a.useMemo)((()=>[{header:"Group Name",accessorKey:"ClientGroupName"}]),[]),[D,z]=(0,a.useState)(!1),[E,k]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async e=>{const t=await(0,r.t7)(void 0);console.log("resp",t.data),p(t.data)})(),(async e=>{const t=(await(0,l.gn)(void 0)).data.filter((e=>1===e.IsActive)).map((e=>{let t={};return t.name=e.ClientName,t.code=e.ClientCode,t}));z(t)})()}),[]);const M=()=>{t(!0)},T=async(e,s)=>{t(!1);const n=await(0,r.t7)(s);n.data.map((e=>({ClientGroupName:e.ClientGroupName,IsActive:e.IsActive})));p(n.data),d([""])};return(0,x.jsxs)(x.Fragment,{children:[h&&(0,x.jsx)(o.bZ,{className:"mb-4",type:b,showIcon:!0,children:h}),(0,x.jsx)(o.Zb,{header:(0,x.jsx)(j.Z,{Component:"Client Group Master"}),headerExtra:I(M,(function(e){let{value:t,onChange:s,debounce:o=1500}=e,r=(0,i.Z)(e,w);const[l,c]=(0,a.useState)(t);return(0,a.useEffect)((()=>{c(t)}),[t]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{s(l)}),o);return()=>clearTimeout(e)}),[l]),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)("div",{className:"flex items-center mb-4",children:(0,x.jsx)(G.Z,(0,n.Z)((0,n.Z)({},r),{},{value:l,onChange:e=>{/^[0-9a-zA-Z\s]*$/.test(e.target.value)&&c(e.target.value)}}))})})}),u,m),className:"flex flex-col h-[87vh]",bodyClass:"grow",children:(0,x.jsx)(N.Z,{data:C,columns:Z,globalFilter:u,setGlobalFilter:m,seteditData:d,openDrawer:M,ExportName:"ClientGroupMaster"})}),(0,x.jsx)(o.dy,{title:s.ClientGroupName?(0,x.jsxs)("p",{className:"text-xl font-medium   flex ",children:[(0,x.jsx)("center",{children:(0,x.jsx)(o.zx,{size:"xs",variant:"twoTone",icon:(0,x.jsx)(c._vs,{})})}),"\xa0\xa0 ClientGroup Master"]}):(0,x.jsxs)("p",{className:"text-xl font-medium   flex ",children:[(0,x.jsx)("center",{children:(0,x.jsx)(o.zx,{size:"xs",variant:"twoTone",icon:(0,x.jsx)(c.yEd,{})})}),"\xa0\xa0ClientGroup Master"]}),isOpen:e,onClose:T,onRequestClose:T,width:window.screen.width>400?window.screen.width/3:window.screen.width/1.5,footer:(0,x.jsx)(g.Z,{onCancel:T,onSaveClick:()=>{var e;null===(e=A.current)||void 0===e||e.submitForm()}}),children:(0,x.jsx)(v,{ref:A,onDrawerClose:T,editData:s,setMessage:S,setlog:y,ClientList:D,selectedclients:E,setselectedclients:k})})]})}}}]);
//# sourceMappingURL=1339.55f69993.chunk.js.map