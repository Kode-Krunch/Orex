import axios from 'axios';
import appConfig from 'configs/app.config';

async function apiPostCreateStripePaymentIntent({
  amount,
  currency = 'inr',
  description = '',
  name,
  email,
  addressLine1,
  postalCode,
  city,
  state,
  country,
}) {
  let clientSecret = '';
  try {
    const response = await axios.post(
      `${appConfig.stripeHost}/create-payment-intent`,
      {
        amount,
        currency,
        description,
        name,
        email,
        address_line1: addressLine1,
        postal_code: postalCode,
        city,
        state,
        country,
      },
    );
    if (response.status === 200) {
      clientSecret = response.data.client_secret;
    } else {
      console.error(response);
    }
  } catch (error) {
    console.error(error);
  } finally {
    return clientSecret;
  }
}

export { apiPostCreateStripePaymentIntent };
