import classNames from 'classnames';
import React, { useContext } from 'react';
import DraggableTableContext from './context/DraggableTableContext';
import { TABLE_ROW_HEIGHT } from 'views/Scheduling/Scheduler/constants';
import { featuresEnum } from 'views/Scheduling/Scheduler/enum';
import FilterDropdown from './FilterDropDown';
import SchedulerContext from 'views/Scheduling/SchedulerOld/context/SchedulerContext';
// import SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';

function Header({ index }) {
  /* CONTEXT */
  const { columns } = useContext(DraggableTableContext);
  const { activeFeatures } = useContext(SchedulerContext);

  return (
    <div
      style={{
        display: 'flex',
        top: index * TABLE_ROW_HEIGHT,
        left: 0,
        width: '100%',
        height: TABLE_ROW_HEIGHT,
      }}
      className="sticky z-[2]"
    >
      {columns.map((column, index) => (
        <div
          style={{
            width: `${column.style.width}%`,
            textAlign: activeFeatures[featuresEnum.FILTER]
              ? 'start'
              : column.accessorKey !== 'Event_Name' && 'center',
          }}
          key={column.accessorKey}
          className={classNames(
            'h-full flex-none bg-gray-700 border-gray-400 border-y flex items-center py-1 pl-2.5 pr-1.5',
            index === 0 ? 'border-x' : 'border-r',
          )}
        >
          <div
            key={column.accessorKey}
            className={
              'w-full text-white font-semibold text-[12px] overflow-hidden whitespace-nowrap text-ellipsis'
            }
          >
            {column.header}
          </div>
          {activeFeatures[featuresEnum.FILTER] && (
            <FilterDropdown
              columnKey={column.accessorKey}
              isLastColumn={index === columns.length - 1}
            />
          )}
        </div>
      ))}
    </div>
  );
}

export default Header;
