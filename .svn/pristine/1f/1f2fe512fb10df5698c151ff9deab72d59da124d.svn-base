"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[9604,5682],{44630:(e,s,r)=>{r.d(s,{Z:()=>t});var a=r(72791);const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;const[s,r]=(0,a.useState)("");return(0,a.useEffect)((()=>{if(s){let s=setTimeout((()=>r("")),e);return()=>{clearTimeout(s)}}}),[s]),[s,r]}},45682:(e,s,r)=>{r.r(s),r.d(s,{default:()=>n});var a=r(2803),t=(r(72791),r(80184));const n=function(e){let{showLoader:s}=e;return(0,t.jsx)(t.Fragment,{children:s?(0,t.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,t.jsx)(a.$j,{size:"3.25rem"})}):(0,t.jsx)(t.Fragment,{})})}},29604:(e,s,r)=>{r.r(s),r.d(s,{default:()=>b});var a=r(72791),t=r(2803),n=r(81721),o=r(44630),l=r(92506),i=r(81724),c=r(97286),d=r(60364),u=r(87118),m=r(9494),h=r(81320),g=r(45682),p=r(80184);const x=e=>{const{disableSubmit:s=!1,className:r}=e,x=(0,d.useSelector)((e=>e.auth.session.MessageAttempt)),b=(0,d.useDispatch)(),[f,j]=(0,o.Z)(),{signIn:w}=(0,c.Z)();(0,a.useEffect)((()=>{b((0,u.IY)([]))}),[b]);const[v,N]=(0,a.useState)(!1),[y,P]=(0,a.useState)(60),[O,S]=(0,a.useState)(!1),T=()=>{P(60)};return(0,a.useEffect)((()=>{const e=setInterval((()=>{P((s=>s>1?s-1:(clearInterval(e),S(!1),0)))}),1e3);return()=>clearInterval(e)}),[y]),(0,p.jsxs)("div",{className:r,children:[(0,p.jsx)(g.default,{}),f&&(0,p.jsx)(t.bZ,{className:"mb-4",type:"danger",showIcon:!0,children:f}),x&&(0,p.jsx)(t.bZ,{type:"danger",showIcon:!0,children:x}),(0,p.jsx)(l.J9,{initialValues:{userName:"",password:"",OTP:"",rememberMe:!0},validationSchema:i.Ry().shape({userName:i.Z_().required("Please enter your user name"),password:i.Z_().when("OptForm",{is:!1,then:i.Z_().required("Please enter your password")}),OTP:i.Z_().when("OptForm",{is:!0,then:i.Z_().required("Please enter your OTP")}),rememberMe:i.Xg()}),onSubmit:(e,r)=>{let{setSubmitting:a}=r;s?a(!1):(async(e,s)=>{const{userName:r,password:a,OTP:t,OrganizationShortcode:n}=e;s(!0);try{const e=await w({userName:r,password:a,OTP:t,OrganizationShortcode:n});"failed"===e.status&&j(e.data.detail)}catch(o){console.error("Error during sign in:",o)}s(!1)})(e,a)},children:e=>{let{values:s,touched:r,errors:a,isSubmitting:o}=e;return(0,p.jsx)(l.l0,{children:(0,p.jsx)(t.Yb,{children:(0,p.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,p.jsx)(t.xJ,{label:"Username :",invalid:a.userName&&r.userName,errorMessage:a.userName,children:(0,p.jsx)(l.gN,{size:"sm",type:"text",autoComplete:"off",name:"userName",placeholder:"User Name",component:t.II,style:{background:"white",color:"black"}})}),v?(0,p.jsx)(t.xJ,{label:"OTP :",invalid:a.OTP&&r.OTP,errorMessage:a.OTP,className:"mt-2",children:(0,p.jsx)(l.gN,{size:"sm",autoComplete:"off",name:"OTP",placeholder:"Enter OTP",component:t.II,style:{background:"white",color:"black"}})}):(0,p.jsx)(t.xJ,{label:"Password :",invalid:a.password&&r.password,errorMessage:a.password,className:"mt-2",children:(0,p.jsx)(l.gN,{size:"sm",autoComplete:"off",name:"password",placeholder:"Password",component:n.WU,style:{background:"white",color:"black"}})}),(0,p.jsx)("div",{className:"flex justify-between",children:v&&!O?(0,p.jsx)("p",{style:{color:"#00E4CB",cursor:"pointer"},onClick:()=>(async e=>{try{const s=await(0,m.apiGetOTP)(e);if(204===s.status)return void(0,h.openNotification)("warning","Kindly Enter Valid Username");s.data&&(S(!0),T())}catch(r){var s;500===(null===(s=r.response)||void 0===s?void 0:s.status)&&(0,h.openNotification)("danger","Server Error.")}})(s.userName),children:"Get OTP"}):null}),O&&(0,p.jsxs)("p",{children:["OTP sent to the registered email address. \xa0\xa0"," ",y," sec"]}),(0,p.jsx)("div",{className:"flex justify-between mb-6",children:(0,p.jsx)(n.vm,{to:"/forgot-password",style:{color:"#00E4CB"},children:"Forgot Password"})}),(0,p.jsx)(t.zx,{block:!0,loading:o,style:{backgroundColor:"#00E4CB"},type:"submit",children:o?"Signing in...":"Sign In"})]})})})}})]})},b=()=>((0,a.useEffect)((()=>{const e=()=>{localStorage.clear(),sessionStorage.clear()};return window.addEventListener("unload",e),()=>window.removeEventListener("unload",e)}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsx)("h3",{className:"mb-1",children:"Welcome back!"}),(0,p.jsx)("p",{children:"Please enter your credentials to sign in!"})]}),(0,p.jsx)(x,{disableSubmit:!1})]}))}}]);
//# sourceMappingURL=9604.ab498b50.chunk.js.map