{"version":3,"file":"static/js/513.c9079f7d.chunk.js","mappings":"mOAuJA,QA5IA,SAA2B,GAAoC,IAApC,aAAEA,EAAY,gBAAEC,GAAiB,EAE1D,MAAMC,GAAUC,EAAAA,EAAAA,cAAaC,GAAUA,EAAMC,OAAOC,mBAG9C,cAAEC,EAAa,iBAAEC,IACrBC,EAAAA,EAAAA,YAAWC,EAAAA,IAGNC,EAAiBC,IAAsBC,EAAAA,EAAAA,UAAS,KAChDC,EAAsBC,IAA2BF,EAAAA,EAAAA,UAAS,OAC1DG,EAAMC,IAAWJ,EAAAA,EAAAA,UAAS,CAAEK,MAAO,KAAMC,IAAK,OAG/CC,GAAmBC,EAAAA,EAAAA,QAAO,OAGhCC,EAAAA,EAAAA,YAAU,KACR,WACE,IACMtB,GAA2C,IAA3BW,EAAgBY,SAClChB,GAAc,GACdK,QAAyBY,EAAAA,EAAAA,IAAmBtB,IAC5CK,GAAc,GASlB,CAPE,MAAOkB,IACPC,EAAAA,EAAAA,kBACE,SACA,+DAEFnB,GAAc,GACdoB,QAAQF,MAAMA,EAChB,CACD,EAfD,EAeI,GACH,CAACzB,KAEJsB,EAAAA,EAAAA,YAAU,KACR,IACE,GAAiC,OAA7BF,EAAiBQ,QAAkB,OACvC,MAAMC,EAAoB,IACzBT,EAAiBQ,QAAQE,eACxBV,EAAiBQ,QAAQG,aAC3BX,EAAiBQ,QAAQI,iBACvB,SACAH,GACA,EAIJ,CAFE,MAAOJ,GACPE,QAAQF,MAAMA,EAChB,IACC,CAACL,EAAiBQ,UAGrB,MAAMK,EAAoB,KACxB,IACElB,EAAwB,MACxBE,EAAQ,CAAEC,MAAO,KAAMC,IAAK,OAC5BlB,GAAgB,EAGlB,CAFE,MAAOwB,GACPE,QAAQF,MAAMA,EAChB,GAqBF,OACE,UAAC,KAAM,CACLS,OAAQlC,EACRmC,QAASF,EACTG,eAAgBH,EAAkB,WAElC,eAAII,UAAU,OAAM,2BACpB,iBAAKA,UAAU,sBAAqB,WAClC,4BACE,eAAGA,UAAU,kBAAiB,uBACnB,iBAAMA,UAAU,eAAc,mBAEzC,SAAC,KAAM,CACLC,YAAY,SACZC,QAAS5B,EACT6B,KAAK,KACLC,SAAWC,GAAW3B,EAAwB2B,GAC9CC,MAAO7B,QAGX,iBAAKuB,UAAU,yBAAwB,WACrC,4BACE,eAAGA,UAAU,kBAAiB,yBACjB,iBAAMA,UAAU,eAAc,mBAE3C,SAAC,KAAS,CACRG,KAAK,KACLC,SAAWG,GAAS3B,GAAQ,kBAAKD,GAAI,IAAEE,MAAO0B,KAC9CC,UAAW/B,QAGf,4BACE,eAAGuB,UAAU,kBAAiB,uBACnB,iBAAMA,UAAU,eAAc,mBAEzC,SAAC,KAAS,CACRG,KAAK,KACLC,SAAWG,GAAS3B,GAAQ,kBAAKD,GAAI,IAAEG,IAAKyB,KAC5CC,UAAW/B,IAAyBE,EAAKE,kBAMjD,gBAAKmB,UAAU,kBAAiB,UAC9B,SAAC,KAAM,CACLS,QAAQ,QACRD,UACG/B,IAAyBE,EAAKE,QAAUF,EAAKG,IAEhD4B,QApEcC,UACpB,IACEzC,GAAc,SACRC,EAAiB,CACrByC,UAAWC,EAAAA,mBAAAA,mBACXlC,KAAMA,EACNF,qBAAsBA,IAExBmB,IACA1B,GAAc,IACdmB,EAAAA,EAAAA,kBAAiB,UAAW,oCAK9B,CAJE,MAAOD,GACPE,QAAQwB,IAAI1B,IACZC,EAAAA,EAAAA,kBAAiB,SAAU,wCAC3BnB,GAAc,EAChB,GAqD6B,yBAOjC,C","sources":["views/Scheduling/Scheduler/components/SchedulingArea/components/Toolbar/components/AutoShuffleDialog/AutoShuffleDialog.js"],"sourcesContent":["import { Button, Dialog, Select, TimeInput } from 'components/ui';\r\nimport React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n  openNotification,\r\n} from 'views/Controls/GLOBALFUNACTION';\r\nimport { getTemplateOptions } from './utils';\r\nimport SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';\r\nimport { operationTypesEnum } from 'views/Scheduling/Scheduler/enum';\r\n\r\n\r\nfunction AutoShuffleDialog({ isDialogOpen, setIsDialogOpen }) {\r\n  /* REDUX */\r\n  const channel = useSelector((state) => state.locale.selectedChannel);\r\n\r\n  /* CONTEXT */\r\n  const { setShowLoader, executeOperation } =\r\n    useContext(SchedulerContext);\r\n\r\n  /* STATES */\r\n  const [templateOptions, setTemplateOptions] = useState([]);\r\n  const [promoShuffleTemplate, setPromoShuffleTemplate] = useState(null);\r\n  const [time, setTime] = useState({ start: null, end: null });\r\n\r\n  /* HOOKS */\r\n  const durationInputRef = useRef(null);\r\n\r\n  /* USE EFFECTS */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        if (isDialogOpen && templateOptions.length === 0) {\r\n          setShowLoader(true);\r\n          setTemplateOptions(await getTemplateOptions(channel));\r\n          setShowLoader(false);\r\n        }\r\n      } catch (error) {\r\n        openNotification(\r\n          'danger',\r\n          'Something went wrong while retrieving Auto Shuffle Template',\r\n        );\r\n        setShowLoader(false);\r\n        console.error(error);\r\n      }\r\n    })();\r\n  }, [isDialogOpen]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (durationInputRef.current === null) return;\r\n      const selectionFunction = () =>\r\n      (durationInputRef.current.selectionStart =\r\n        durationInputRef.current.selectionEnd);\r\n      durationInputRef.current.addEventListener(\r\n        'select',\r\n        selectionFunction,\r\n        false,\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [durationInputRef.current]);\r\n\r\n  /* EVENT HANDLERS */\r\n  const handleDialogClose = () => {\r\n    try {\r\n      setPromoShuffleTemplate(null);\r\n      setTime({ start: null, end: null });\r\n      setIsDialogOpen(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handleShuffle = async () => {\r\n    try {\r\n      setShowLoader(true);\r\n      await executeOperation({\r\n        operation: operationTypesEnum.PROMO_AUTO_SHUFFLE,\r\n        time: time,\r\n        promoShuffleTemplate: promoShuffleTemplate\r\n      });\r\n      handleDialogClose();\r\n      setShowLoader(false);\r\n      openNotification('success', 'Auto shuffled events successfully');\r\n    } catch (error) {\r\n      console.log(error);\r\n      openNotification('danger', 'Something went wrong while shuffling');\r\n      setShowLoader(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      isOpen={isDialogOpen}\r\n      onClose={handleDialogClose}\r\n      onRequestClose={handleDialogClose}\r\n    >\r\n      <h5 className=\"mb-4\">Auto Shuffle</h5>\r\n      <div className=\"flex flex-col gap-6\">\r\n        <div>\r\n          <p className=\"mb-1 text-white\">\r\n            Template <span className=\"text-red-500\">*</span>\r\n          </p>\r\n          <Select\r\n            placeholder=\"Select\"\r\n            options={templateOptions}\r\n            size=\"sm\"\r\n            onChange={(option) => setPromoShuffleTemplate(option)}\r\n            value={promoShuffleTemplate}\r\n          ></Select>\r\n        </div>\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <p className=\"mb-1 text-white\">\r\n              Start Time <span className=\"text-red-500\">*</span>\r\n            </p>\r\n            <TimeInput\r\n              size=\"sm\"\r\n              onChange={(date) => setTime({ ...time, start: date })}\r\n              disabled={!promoShuffleTemplate}\r\n            />\r\n          </div>\r\n          <div>\r\n            <p className=\"mb-1 text-white\">\r\n              End Time <span className=\"text-red-500\">*</span>\r\n            </p>\r\n            <TimeInput\r\n              size=\"sm\"\r\n              onChange={(date) => setTime({ ...time, end: date })}\r\n              disabled={!promoShuffleTemplate || !time.start}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      <div className=\"text-right mt-6\">\r\n        <Button\r\n          variant=\"solid\"\r\n          disabled={\r\n            !promoShuffleTemplate || !time.start || !time.end\r\n          }\r\n          onClick={handleShuffle}\r\n        >\r\n          Shuffle\r\n        </Button>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default AutoShuffleDialog;\r\n"],"names":["isDialogOpen","setIsDialogOpen","channel","useSelector","state","locale","selectedChannel","setShowLoader","executeOperation","useContext","SchedulerContext","templateOptions","setTemplateOptions","useState","promoShuffleTemplate","setPromoShuffleTemplate","time","setTime","start","end","durationInputRef","useRef","useEffect","length","getTemplateOptions","error","openNotification","console","current","selectionFunction","selectionStart","selectionEnd","addEventListener","handleDialogClose","isOpen","onClose","onRequestClose","className","placeholder","options","size","onChange","option","value","date","disabled","variant","onClick","async","operation","operationTypesEnum","log"],"sourceRoot":""}