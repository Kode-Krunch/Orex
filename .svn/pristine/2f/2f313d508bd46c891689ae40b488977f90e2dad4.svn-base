"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[319],{44662:(e,t,a)=>{a.d(t,{AK:()=>l,Fq:()=>h,NJ:()=>c,SX:()=>r,Yj:()=>N,al:()=>i,b8:()=>m,iq:()=>u,qf:()=>d,y7:()=>p});var o=a(54048),s=a(46152);const n=a(74569);async function c(e){return s.Z.fetchData({url:"/ntcmaster/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}const r=(e,t)=>new Promise(((a,s)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/ntcmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};n.request(c).then((e=>{a(e)})).catch((e=>{s(e)}))})),i=(e,t,a)=>new Promise(((s,c)=>{let r={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/ntcmaster/"+t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};n.request(r).then((e=>{s(e)})).catch((e=>{c(e)}))}));async function u(e){return s.Z.fetchData({url:"/ntctypemaster/drop/",method:"get",data:e})}async function l(e){return s.Z.fetchData({url:"/ntctypemaster/",method:"get",data:e})}const p=(e,t)=>fetch(o.Z.apiPrefix+"/ntctypemaster/".concat(e.NTCTypeCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({NTCTypeName:e.NTCTypeName,NtcTypeShortName:e.NtcTypeShortName,NTCGroupCode:e.NTCGroupCode,DefaultGAP:e.DefaultGAP,IsActive:e.IsActive})}),d=(e,t)=>fetch(o.Z.apiPrefix+"/ntctypemaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({NTCTypeName:e.NTCTypeName,NtcTypeShortName:e.NtcTypeShortName,NTCGroupCode:e.NTCGroupCode,DefaultGAP:e.DefaultGAP,IsActive:e.IsActive})}),h=(e,t)=>fetch(o.Z.apiPrefix+"/ntcgroupmaster/".concat(e.NTCGroupCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({NTCGroupName:e.NTCGroupName,IsActive:e.IsActive})}),N=(e,t)=>fetch(o.Z.apiPrefix+"/ntcgroupmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({NTCGroupName:e.NTCGroupName,IsActive:e.IsActive})});async function m(e){return s.Z.fetchData({url:"/ntcgroupmaster/",method:"get",data:e})}},51532:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var o=a(1413),s=a(2803),n=a(72791),c=a(44662),r=a(96361),i=a(46657),u=a(60364),l=a(4621),p=a(32640),d=a(67388),h=a(80184);const N=()=>{const e=(0,u.useSelector)((e=>e.auth.session.token)),t=(0,u.useSelector)((e=>e.auth.session.Username)),a=(0,n.useRef)(0);function N(e,t){s.Am.push((0,h.jsx)(s.P_,{closable:!0,type:t,duration:1e3,title:t.charAt(0).toUpperCase()+t.slice(1),children:e}))}const[m,C]=(0,n.useState)(""),[y,f]=(0,n.useState)(!1),[T,g]=(0,n.useState)(!1),[A,x]=(0,n.useState)(""),[S,G]=(0,n.useState)(),j=(0,n.useRef)(null),[v,b]=(0,n.useState)();(0,n.useEffect)((()=>{a.current=a.current+1,1==a.current&&(async e=>{const t=[...(await(0,c.b8)()).data].reverse().map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{serialNumber:t+1})));b(t)})()}),[]);const I=t=>{console.log("toggleSwitch",t);const a=[...v];let o=a[t];console.log("row1",o),o.IsActive=1==o.IsActive?0:1,console.log("row2",o),(0,c.Fq)(o,e).then((e=>204==e.status?(console.log(e),N("Data Already Exists.","warning"),null):(200==e.status&&N("Data Updated Succesfully","success"),e.json()))).then((e=>{e.serialNumber=o.serialNumber,e.IsActive=o.IsActive,e.NTCGroupName=o.NTCGroupName,a[t]=e,b(a),N("Status Updated Succesfully","success")})).catch((e=>{console.log(e)}))},w=[{field:"serialNumber",header:"Sr.",width:"0.5%"},{field:"NTCGroupName",header:"NTCGroup",width:"20%"}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.F,{ref:j}),(0,h.jsx)(l.Q,{group:"declarative",visible:T,onHide:()=>g(!1),message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{I(S)}}),(0,h.jsx)(s.Zb,{header:(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("div",{children:(0,h.jsx)("span",{className:"flex items-center",children:(0,h.jsx)(r.Z,{ModuleText:"NTC",Component:"NTC Type"})})}),(0,h.jsx)("div",{className:"flex flex-col items-center",style:{marginLeft:"-20%"}}),(0,h.jsx)("div",{})]}),headerExtra:(0,p.W)(A,x,f,y,(()=>{if(m){const t={NTCGroupName:m,IsActive:1};(0,c.Yj)(t,e).then((e=>{204==e.status&&N("Data Already Exists.","warning"),200==e.status&&(t.serialNumber=v.length+1,b((e=>[...e,t])),N("Data Added Succesfully","success")),C(""),f(!1)})).catch((e=>{console.log(e)}))}else N("Kindly Enter NTC Type ","danger")}),m,C,"NTC Group",v,w),bodyClass:"text-center",children:(0,h.jsx)(p.Z,{data:v||[],onRowEditComplete:a=>{let o=[...v],{newData:s,index:n}=a;o[n].NTCGroupName=s.NTCGroupName,o[n].IsActive=s.IsActive,s.NTCGroupName&&(0,c.Fq)(s,e).then((e=>204==e.status?(console.log(e),N("Data Already Exists.","warning"),null):(200==e.status&&N("Data Updated Succesfully","success"),e.json()))).then((e=>{o[n]=e,o[n].serialNumber=s.serialNumber,o[n].NTCGroupName=s.NTCGroupName,o[n].IsActive=s.IsActive,b(o),N("Data Updated Succesfully","success");const a=(0,d.apisendnotification)({NotificationId:(Math.random()+1).toString(36).substring(7),user_ids:[10],message:s.NTCGroupName,image:null,type:"0",location:"New NTC Group Updated",locationLabel:t,Status:"1",isGroup:1,Ispriority:1,readed:0});console.log(a)})).catch((e=>{console.log(e)}))},globalFilter:A,dataKey:"NTCGroupCode",columns:w,setyup:G,scrollHeight:"70vh",setVisible:g})})]})}}}]);
//# sourceMappingURL=319.0fd1a2bf.chunk.js.map