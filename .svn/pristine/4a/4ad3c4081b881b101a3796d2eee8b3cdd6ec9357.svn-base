{"version":3,"file":"static/js/7510.26c7a9e9.chunk.js","mappings":"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","sources":["views/Scheduling/Scheduler/components/SchedulingArea/components/Toolbar/components/SaveAsSlotDIalog.js"],"sourcesContent":["import { Button, DatePicker, Dialog, Input, TimeInput } from 'components/ui';\r\nimport { convertDateToYMD } from 'components/validators';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { MdOutlineArrowRightAlt, MdOutlineDeleteForever, MdOutlineDeleteOutline } from 'react-icons/md';\r\nimport { PiArrowFatLinesRight } from 'react-icons/pi';\r\nimport { useSelector } from 'react-redux';\r\nimport { apiCallstoreprocedure } from 'services/CommonService';\r\nimport { getUniqueObjects, openNotification } from 'views/Controls/GLOBALFUNACTION';\r\nimport SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';\r\nimport { format } from 'date-fns';\r\n\r\nconst convertIntoDateobject = (timeString) => {\r\n    const [hours, minutes] = timeString.split(\":\").map(Number);\r\n\r\n    // Create a new Date object with the current date\r\n    const dateObject = new Date();\r\n    dateObject.setHours(hours);\r\n    dateObject.setMinutes(minutes);\r\n    dateObject.setSeconds(0); // Optionally, set seconds to 0\r\n    dateObject.setMilliseconds(0); // Optionally, set milliseconds to 0\r\n    return dateObject\r\n\r\n}\r\nfunction SaveAsSlotDIalog({ save_Slotvisible, setSave_Slotvisible }) {\r\n\r\n    const channel = useSelector((state) => state.locale.selectedChannel);\r\n\r\n    /* CONTEXT */\r\n    const { schedulingTableData, date } = useContext(SchedulerContext);\r\n\r\n    /* STATES */\r\n    const [fpcTimes, setFpcTimes] = useState([]);\r\n    const [newTimes, setNewTimes] = useState([]);\r\n    const [selectedDate, setselectedDate] = useState(null);\r\n\r\n\r\n    /* USE EFFECTS */\r\n    useEffect(() => {\r\n        if (Array.isArray(schedulingTableData)) {\r\n            let uniqueFpcTimeRows = getUniqueObjects(schedulingTableData, 'FPC_Time');\r\n            const fpcTimesONLY = uniqueFpcTimeRows\r\n                .filter(item => item.FPC_Time !== '')\r\n                .map(item => ({ FPC_Time: item.FPC_Time }));\r\n\r\n            setFpcTimes(fpcTimesONLY);\r\n            setNewTimes(fpcTimesONLY);\r\n        }\r\n    }, [schedulingTableData]);\r\n\r\n    /* EVENT HANDLERS */\r\n    const handleCopyFPCTimes = () => {\r\n        if (fpcTimes.length > 0) {\r\n            setNewTimes(fpcTimes.map(time => ({ ...time, newTime: convertIntoDateobject(time?.FPC_Time) })));\r\n        }\r\n    };\r\n    const handleInputChange = (index, value) => {\r\n        setNewTimes(prevTimes => {\r\n            return prevTimes.map((time, i) => {\r\n                if (i === index) {\r\n                    return { ...time, newTime: value };\r\n                }\r\n                return time;\r\n            });\r\n        });\r\n    };\r\n    const handleFPCTimeMove = (index) => {\r\n        setNewTimes(prevTimes => {\r\n            return prevTimes.map((time, i) => {\r\n                if (i === index) {\r\n                    const newTime = convertIntoDateobject(time?.FPC_Time) || \"00:00\";\r\n                    return { ...time, newTime };\r\n                }\r\n                return time;\r\n            });\r\n        });\r\n    };\r\n    const handleRemoveFPCTimeAll = () => {\r\n        setNewTimes(prevTimes => {\r\n            return prevTimes.map(time => {\r\n                return { ...time, newTime: null };\r\n            });\r\n        });\r\n    }\r\n    const storeFPCSlotTime = async (FromTelecastTime, ToTelecastTime) => {\r\n        try {\r\n            const SaveAsSlot = await apiCallstoreprocedure('USP_Sch_SongSchedulingSaveAs', {\r\n                LocationCode: channel.LocationCode,\r\n                ChannelCode: channel.ChannelCode,\r\n                FromTelecastDate: convertDateToYMD(date),\r\n                ToTelecastDate: convertDateToYMD(selectedDate),\r\n                FromTelecastTime: FromTelecastTime,\r\n                ToTelecastTime: format(ToTelecastTime, 'HH:mm')\r\n            });\r\n            console.log(SaveAsSlot);\r\n        } catch (error) {\r\n            console.error('Error fetching storage details:', error);\r\n        }\r\n    };\r\n    const processAllNewTimes = async (data) => {\r\n        const itemsWithNewTime = data.filter(item => item.newTime);\r\n        if (itemsWithNewTime.length === 0) {\r\n            openNotification('warning', 'No newTime entries to process.')\r\n            return;\r\n        }\r\n        await Promise.all(itemsWithNewTime.map(item => storeFPCSlotTime(item.FPC_Time, item.newTime)));\r\n        openNotification('success', 'Save As Slot Wise Done Successfully')\r\n    };\r\n\r\n    return (\r\n        <Dialog isOpen={save_Slotvisible} width={500} onClose={() => {\r\n            setSave_Slotvisible(false);\r\n            setselectedDate(null);\r\n            handleRemoveFPCTimeAll()\r\n        }}>\r\n            <h6 className=\"pb-1 border-b border-b-gray-600 mb-3 text-white\">\r\n                Save As Slot Wise\r\n            </h6>\r\n            <div className='flex justify-between items-center mb-4 gap-2'>\r\n                <div>\r\n                    <p>From Date</p>\r\n                    <DatePicker size='xs' value={date} disabled />\r\n                </div>\r\n                <div>\r\n                    <p>To Date</p>\r\n                    <DatePicker size='xs' value={selectedDate} placeholder=\"Select Date\" onChange={setselectedDate} />\r\n                </div>\r\n            </div>\r\n            <div className=\"pb-2 mb-2 pr-1 border-b border-b-gray-600 h-96 flex flex-col\">\r\n                <div className=\"grid grid-cols-12 gap-1 items-center mb-3 border-dashed border-b border-b-gray-600 pb-2\">\r\n                    <div className=\"font-semibold text-gray-200 text-md flex justify-center items-center col-span-5\">FPC TIME</div>\r\n                    <div className='flex justify-center items-center col-span-1'>\r\n                        <Button variant=\"solid\" size='xs' icon={<PiArrowFatLinesRight />} title=\"MOVE ALL TIME\" onClick={handleCopyFPCTimes} />\r\n                    </div>\r\n                    <div className=\"font-semibold text-gray-200 text-md flex justify-center items-center col-span-5\">NEW TIME </div>\r\n                    <div className=\"font-semibold text-gray-200 text-xs flex justify-start items-center col-span-1\">\r\n                        <Button variant=\"twoTone\" size='xs' icon={<MdOutlineDeleteForever />} title=\"REMOVE ALL TIME\" onClick={handleRemoveFPCTimeAll} /></div>\r\n                </div>\r\n                <div className=\"grow overflow-auto no-scrollbar \">\r\n                    {newTimes.length > 0 ? (\r\n                        newTimes.map((time, index) => (\r\n                            <div key={index} className=\"grid grid-cols-12 gap-1 items-center mb-3\">\r\n                                <div className='flex justify-center items-center col-span-5'>\r\n                                    <Input value={time.FPC_Time} size=\"xs\" disabled style={{ width: 110 }} />\r\n                                </div>\r\n                                <div className='flex justify-center items-center col-span-1'>\r\n                                    <Button variant=\"twoTone\" size='xs' icon={<MdOutlineArrowRightAlt />} title=\"MOVE TIME\" onClick={() => handleFPCTimeMove(index)} />\r\n                                </div>\r\n                                <div className='flex justify-center items-center col-span-6'>\r\n                                    <TimeInput\r\n\r\n                                        size=\"xs\"\r\n                                        value={time.newTime}\r\n                                        onChange={(e) => handleInputChange(index, e)}\r\n                                        style={{ width: 110, marginLeft: 40 }}\r\n                                    />\r\n                                </div>\r\n\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"text-gray-400 text-xs text-center mt-5\">No data available. Click the button above.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div className=\"flex justify-end itmes-center w-full\">\r\n                <Button\r\n                    size=\"sm\"\r\n                    className=\"w-max font-normal\"\r\n                    variant=\"twoTone\"\r\n                    style={{\r\n                        fontSize: '0.8rem',\r\n                        lineHeight: '1rem',\r\n                    }}\r\n                    onClick={() => { if (selectedDate) { processAllNewTimes(newTimes) } else { openNotification('warning', \"Please Select Date \") } }}\r\n                >\r\n                    Apply\r\n                </Button>\r\n            </div>\r\n        </Dialog>\r\n    );\r\n}\r\n\r\nexport default SaveAsSlotDIalog;\r\n"],"names":["convertIntoDateobject","timeString","hours","minutes","split","map","Number","dateObject","Date","setHours","setMinutes","setSeconds","setMilliseconds","save_Slotvisible","setSave_Slotvisible","channel","useSelector","state","locale","selectedChannel","schedulingTableData","date","useContext","SchedulerContext","fpcTimes","setFpcTimes","useState","newTimes","setNewTimes","selectedDate","setselectedDate","useEffect","Array","isArray","fpcTimesONLY","getUniqueObjects","filter","item","FPC_Time","handleRemoveFPCTimeAll","prevTimes","time","newTime","processAllNewTimes","async","itemsWithNewTime","data","length","Promise","all","FromTelecastTime","ToTelecastTime","SaveAsSlot","apiCallstoreprocedure","LocationCode","ChannelCode","FromTelecastDate","convertDateToYMD","ToTelecastDate","format","console","log","error","storeFPCSlotTime","openNotification","isOpen","width","onClose","className","size","value","disabled","placeholder","onChange","variant","icon","title","onClick","index","style","i","handleFPCTimeMove","e","handleInputChange","marginLeft","fontSize","lineHeight"],"sourceRoot":""}