"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[5403],{35403:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(1413),s=n(72791),a=n(84373),l=n(2803),o=n(91615),c=n(21260),i=n(29851),u=n(81320);const d=(e,t,n)=>{t.current&&!t.current.contains(e.target)&&n((e=>(0,r.Z)((0,r.Z)({},e),{},{isManageColumnsDropdownVisible:!1})))};var m=n(60364),p=n(84870),h=n(41578),f=n(73516),x=n(81694),g=n.n(x),T=n(17051),b=n(8458),E=n(9281),N=n(80184);const v=function(){const e=(0,m.useSelector)((e=>e.auth.session.token)),{setSecondaryTableType:t,setOgSecTableData:n,secondaryTableData:x,setSecondaryTableData:v,secondaryTableManagedColumns:w,setSecondaryTableManagedColumns:y,setActiveFeatures:C,secTableToolbarState:S,setSecTableToolbarState:j,secondaryTableOffset:R,secondaryTableSelectedRows:_,setSecondaryTableSelectedRows:D,secondaryTableRef:I,dropBucket:O,resetSecondaryTableStates:A}=(0,s.useContext)(o.Z),[F,P]=(0,s.useState)(""),[k,z]=(0,s.useState)(!1),B=(0,s.useRef)(null),[L]=(0,E.Nr)(F,500);(0,s.useEffect)((()=>((async()=>{try{t(c.secondaryTableTypesEnum.DROPPED_SPOTS)}catch(e){(0,u.openNotification)("danger","Something went wrong while fetching Dropped Spots"),z(!1),console.error(e)}})(),A)),[]),(0,s.useEffect)((()=>{try{Array.isArray(O)&&M(O)}catch(e){console.error(e)}}),[L,O]),(0,s.useEffect)((()=>{(async()=>{try{if(0===w.originalColumns.length){const{visibleColumns:t,removedColumns:n}=await(0,i.tn)(b.T9.SECONDARY_TABLE_NAMES.INSERT_DROPPED_SPOTS,x,e);y({originalColumns:(0,i.UW)(x),visibleColumns:t,removedColumns:n})}}catch(t){(0,u.openNotification)("danger","Something went wrong while setting columns for Dropped Spots"),console.error(t)}})()}),[x]),(0,s.useEffect)((()=>(document.addEventListener("mousedown",(e=>d(e,B,j))),()=>{document.removeEventListener("mousedown",(e=>d(e,B,j)))})),[B,j]);const M=async e=>{try{if(!L){const t=Z(e);return n(t),void v(t)}let t=!1;const s=[];return e.forEach(((e,n)=>{if(0===n)s.push(e);else{const n=e.Event_Name.toLowerCase().includes(L.toLowerCase());n&&(t=!0),s.push((0,r.Z)((0,r.Z)({},e),{},{isFiltered:n}))}})),n(s),v(s),t}catch(t){(0,u.openNotification)("danger","Something went wrong while searching"),console.error(t)}},Z=e=>e.map(((e,t)=>0===t?e:(0,r.Z)((0,r.Z)({},e),{},{isFiltered:!0}))),q=x.filter((e=>e.isFiltered));return(0,N.jsxs)("div",{className:"h-full w-full flex flex-col overflow-auto no-scrollbar bg-gray-800 p-3 pt-2 rounded-lg",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)("h5",{children:"Dropped Spots"}),q.length>0&&(0,N.jsx)("h6",{className:"p-1 rounded-full  text-sm font-black bg-emerald-600 text-white mr-2 w-8 text-center",children:q.length})]}),(0,N.jsxs)("div",{className:"flex gap-1.5",children:[q.length>0&&(0,N.jsxs)(l.u,{title:"Manage Columns",wrapperClass:"relative",children:[(0,N.jsx)(l.zx,{size:"xs",icon:(0,N.jsx)(h.Rqg,{}),className:g()(w.removedColumns.length>0?"!bg-teal-700 hover:!bg-teal-700":"hover:!bg-teal-800","transition-all"),onClick:()=>j((0,r.Z)((0,r.Z)({},S),{},{isManageColumnsDropdownVisible:!0}))}),S.isManageColumnsDropdownVisible&&(0,N.jsx)(f.default,{tableType:c.tableTypesEnum.SECONDARY,dropdownRef:B,position:"right-1/2"})]}),(0,N.jsx)(l.u,{title:"Close",children:(0,N.jsx)(l.zx,{size:"xs",icon:(0,N.jsx)(a.QAE,{}),onClick:()=>(0,i.FG)(C,c.featuresEnum.INSERT)})})]})]}),(0,N.jsx)(l.BZ,{className:"mb-3 flex",children:(0,N.jsx)(l.II,{placeholder:"Search Drop Box",size:"sm",className:"h-[38px]",onChange:e=>P(e.target.value),value:F,autoFocus:!0})}),(0,N.jsx)("div",{className:"h-[92%] flex flex-col gap-3",children:q.length>0?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"grow",children:(0,N.jsx)(p.default,{tableName:b.T9.SECONDARY_TABLE_NAMES.INSERT_DROPPED_SPOTS,tableType:c.tableTypesEnum.SECONDARY,tableData:x,columns:w.visibleColumns,droppableId:c.droppableIdsEnum.SECONDARY,selectedRows:_,setSelectedRows:D,scrolledOffset:R,tableRef:I})}),(0,N.jsx)(T.Z,{insertType:c.rowDataTypesEnum.COMMERCIAL})]}):(0,N.jsx)(l.Zb,{className:"h-full",bodyClass:"h-full flex justify-center items-center",children:k?(0,N.jsx)(l.$j,{size:"45px"}):"No dropped spots to show"})})]})}},17051:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(72791),s=n(2803),a=n(30203),l=n(19129),o=n(10050),c=n(3479),i=n(63524),u=n(91615),d=n(21260),m=n(45682),p=n(81320),h=n(16856),f=n(29184),x=n(80184);const g=function(e){let{isDialogOpen:t,setIsDialogOpen:n}=e;const{executeOperation:a}=(0,r.useContext)(u.Z),[l,o]=(0,r.useState)("sequentialInsert"),c=()=>n(!1);return(0,x.jsx)(s.Vq,{isOpen:t,onClose:c,onRequestClose:c,width:"40%",contentClassName:"mt-8",children:(0,x.jsxs)("div",{className:"flex flex-col h-full",children:[(0,x.jsx)("h4",{className:"border-b border-b-gray-700 pb-2 mb-3",children:"Repeat Insert"}),(0,x.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto flex flex-col gap-6 pr-2 text-white",children:[(0,x.jsx)(f.Z,{}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm mb-1",children:"Insert Type"}),(0,x.jsxs)(s.Y8.Group,{value:l,onChange:o,children:[(0,x.jsx)(s.Y8,{value:"sequentialInsert",className:"text-gray-300",children:"Sequential Insert"}),(0,x.jsx)(s.Y8,{value:"randomizeInsert",className:"text-gray-300",children:"Randomize Insert"})]})]})]}),(0,x.jsx)("div",{className:"text-right mt-6",children:(0,x.jsx)(s.zx,{variant:"solid",onClick:async()=>{try{const e=await a({operation:d.operationTypesEnum.REPEAT_INSERT_ROW,repeatInsertType:l});c(),e&&(0,p.openNotification)("success","Events inserted successfully")}catch(e){(0,p.openNotification)("danger","Something went wrong while inserting events"),console.error(e)}},children:"Insert"})})]})})},T=(0,r.lazy)((()=>n.e(880).then(n.bind(n,99129)))),b=(0,r.lazy)((()=>n.e(327).then(n.bind(n,20327))));const E=function(e){var t;let{insertType:n}=e;const{schedulingTableSelectedRows:f,secondaryTableSelectedRows:E,setSecondaryTableSelectedRows:N,secondaryTableData:v,executeOperation:w,isAutoCalcNtcOffsetTime:y,isNtcGroupingEnabled:C}=(0,r.useContext)(u.Z),[S,j]=(0,r.useState)(!1),[R,_]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),O=E.length===v.length-1;return(0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(m.default,{showLoader:!0}),children:(0,x.jsxs)("div",{className:"bg-gray-700 bg-opacity-50 flex gap-0.5 p-0.5 rounded-lg border border-gray-600",children:[(0,x.jsx)(s.u,{title:O?"Un-select all":"Select All",children:(0,x.jsx)(s.zx,{className:"hover:!bg-teal-700 transition-all !h-8 !w-8 ".concat(O&&"!bg-teal-700"),variant:"plain",size:"sm",icon:(0,x.jsx)(h.WHv,{className:"text-[1.2rem]"}),onClick:()=>{try{E.length===v.length-1?N([]):N([...v].splice(1))}catch(e){(0,p.openNotification)("danger","Something went wrong while selecting all events"),console.error(e)}}})}),(0,x.jsx)(s.u,{title:"Insert",children:(0,x.jsx)(s.zx,{className:(0,o.f6)(),variant:"plain",size:"sm",icon:(0,x.jsx)(a.zHT,{className:"text-base"}),disabled:(0,o.JT)(f,E,d.secTableBottomToolbarFeaturesEnum.INSERT,y,C),onClick:()=>{try{w({operation:d.operationTypesEnum.INSERT_ROW})}catch(e){console.error(e),(0,p.openNotification)("danger","Something went wrong while inserting events")}}})}),n!==d.rowDataTypesEnum.COMMERCIAL&&(0,x.jsxs)(x.Fragment,{children:[y&&n===d.rowDataTypesEnum.NTC&&!(null!==(t=v[0])&&void 0!==t&&t.BookingDetailID)&&(0,x.jsxs)(s.u,{title:"Repeat Insert",children:[(0,x.jsx)("div",{onClick:()=>{(0,o.JT)(f,E,d.secTableBottomToolbarFeaturesEnum.REPEAT_INSERT,y,C)?(0,p.openNotification)("danger","Please select a valid NTC parent event"):j(!0)},children:(0,x.jsx)(s.zx,{className:(0,o.f6)(),variant:"plain",size:"sm",icon:(0,x.jsx)(h.LkC,{className:"text-[1.4rem]"}),disabled:(0,o.JT)(f,E,d.secTableBottomToolbarFeaturesEnum.REPEAT_INSERT,y,C)})}),S&&(0,x.jsx)(g,{isDialogOpen:S,setIsDialogOpen:j})]}),(0,x.jsxs)(s.u,{title:"Bulk Insert",wrapperClass:"relative",children:[(0,x.jsx)(s.zx,{className:(0,o.f6)(),variant:"plain",size:"sm",icon:(0,x.jsx)(l.gy$,{className:"text-lg"}),disabled:(0,o.JT)(f,E,d.secTableBottomToolbarFeaturesEnum.BULK_INSERT,y,C),onClick:()=>I(!0)}),D&&(0,x.jsx)(b,{isDialogOpen:D,setIsDialogOpen:I,insertType:n})]}),(0,x.jsx)(s.u,{title:"Replace",children:(0,x.jsx)(s.zx,{className:(0,o.f6)(),variant:"plain",size:"sm",icon:(0,x.jsx)(c.ux5,{className:"text-[1.12rem]"}),disabled:(0,o.JT)(f,E,d.secTableBottomToolbarFeaturesEnum.REPLACE,y,C),onClick:()=>{try{w({operation:d.operationTypesEnum.REPLACE_ROW}),(0,p.openNotification)("success","Events replaced successfully")}catch(e){console.error(e),(0,p.openNotification)("danger","Something went wrong while replacing events")}}})}),(0,x.jsxs)(s.u,{title:"Replace All",children:[(0,x.jsx)(s.zx,{className:(0,o.f6)(),variant:"plain",size:"sm",icon:(0,x.jsx)(i.p2I,{className:"text-xl"}),disabled:(0,o.JT)(f,E,d.secTableBottomToolbarFeaturesEnum.REPLACE_ALL,y,C),onClick:()=>_(!0)}),R&&(0,x.jsx)(T,{isDialogOpen:R,setIsDialogOpen:_})]})]})]})})}},29184:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2803),s=n(72791),a=n(91615),l=n(80184);const o=function(){const{secondaryTableSelectedRows:e}=(0,s.useContext)(a.Z);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm mb-1",children:["Events (",e.length,")"]}),(0,l.jsx)("div",{className:"max-h-24 overflow-y-scroll",children:(0,l.jsx)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-2 p-2 bg-gray-700 bg-opacity-70 rounded",children:e.map((e=>(0,l.jsx)(r.u,{title:e.Event_Name,wrapperClass:"w-full",placement:"top-start",children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5 w-full",children:[(0,l.jsx)("span",{className:"bg-gray-500 rounded-full w-[0.4rem] h-[0.4rem]"}),(0,l.jsx)("span",{className:"text-sm text-gray-200 w-full text-ellipsis overflow-hidden whitespace-nowrap",children:e.Event_Name})]},e.rowId)},e.rowId)))})})]})}},10050:(e,t,n)=>{n.d(t,{JT:()=>o,f6:()=>a,x2:()=>c});var r=n(21260);const s=n(81694),a=e=>{try{return s(e?"!bg-teal-700 hover:!bg-teal-700":"hover:!bg-teal-800","transition-all !h-8 !w-8")}catch(t){console.error(t)}},l=(e,t,n,s)=>{try{if(1===t.length&&e.length>0){const a=t[0];let l;return l=a.F_C_S_P===r.rowDataTypesEnum.NTC&&(n||s)?e.every((e=>e.F_C_S_P===a.F_C_S_P&&e.NTCGroupCode===a.NTCGroupCode)):e.every((e=>e.F_C_S_P===a.F_C_S_P)),!l}return!0}catch(a){throw a}},o=(e,t,n,s,a)=>{try{switch(n){case r.secTableBottomToolbarFeaturesEnum.INSERT:return i(e,t);case r.secTableBottomToolbarFeaturesEnum.REPEAT_INSERT:return u(e,t);case r.secTableBottomToolbarFeaturesEnum.BULK_INSERT:return 0===t.length;case r.secTableBottomToolbarFeaturesEnum.REPLACE:case r.secTableBottomToolbarFeaturesEnum.REPLACE_ALL:return l(e,t,s,a);default:return!1}}catch(o){console.error(o)}},c=e=>{try{let t=[],n=0;e.forEach((e=>{Number(e.BreakNumber)>n&&(n=Number(e.BreakNumber))}));for(let e=1;e<=n;e++)t.push({value:e,label:"Break ".concat(e)});return t}catch(t){console.error(t)}},i=(e,t)=>1!==e.length||0===t.length||t.length>0&&t[0].F_C_S_P===r.rowDataTypesEnum.NTC&&1===e.length&&(e[0].F_C_S_P===r.rowDataTypesEnum.COMMERCIAL||e[0].F_C_S_P===r.rowDataTypesEnum.CONTENT_TERMINATION),u=(e,t)=>1!==e.length||0===t.length||t.length>0&&t[0].F_C_S_P===r.rowDataTypesEnum.NTC&&1===e.length&&(e[0].F_C_S_P===r.rowDataTypesEnum.COMMERCIAL||e[0].F_C_S_P===r.rowDataTypesEnum.CONTENT_TERMINATION||e[0].F_C_S_P===r.rowDataTypesEnum.NTC)},9281:(e,t,n)=>{n.d(t,{Nr:()=>l});var r=n(72791);function s(e,t,n){var s=this,a=(0,r.useRef)(null),l=(0,r.useRef)(0),o=(0,r.useRef)(null),c=(0,r.useRef)([]),i=(0,r.useRef)(),u=(0,r.useRef)(),d=(0,r.useRef)(e),m=(0,r.useRef)(!0);d.current=e;var p="undefined"!=typeof window,h=!t&&0!==t&&p;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var f=!!(n=n||{}).leading,x=!("trailing"in n)||!!n.trailing,g="maxWait"in n,T="debounceOnServer"in n&&!!n.debounceOnServer,b=g?Math.max(+n.maxWait||0,t):null;(0,r.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var E=(0,r.useMemo)((function(){var e=function(e){var t=c.current,n=i.current;return c.current=i.current=null,l.current=e,u.current=d.current.apply(n,t)},n=function(e,t){h&&cancelAnimationFrame(o.current),o.current=h?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!m.current)return!1;var n=e-a.current;return!a.current||n>=t||n<0||g&&e-l.current>=b},E=function(t){return o.current=null,x&&c.current?e(t):(c.current=i.current=null,u.current)},N=function e(){var s=Date.now();if(r(s))return E(s);if(m.current){var o=t-(s-a.current),c=g?Math.min(o,b-(s-l.current)):o;n(e,c)}},v=function(){if(p||T){var d=Date.now(),h=r(d);if(c.current=[].slice.call(arguments),i.current=s,a.current=d,h){if(!o.current&&m.current)return l.current=a.current,n(N,t),f?e(a.current):u.current;if(g)return n(N,t),e(a.current)}return o.current||n(N,t),u.current}};return v.cancel=function(){o.current&&(h?cancelAnimationFrame(o.current):clearTimeout(o.current)),l.current=0,c.current=a.current=i.current=o.current=null},v.isPending=function(){return!!o.current},v.flush=function(){return o.current?E(Date.now()):u.current},v}),[f,g,t,b,x,h,p,T]);return E}function a(e,t){return e===t}function l(e,t,n){var l=n&&n.equalityFn||a,o=(0,r.useRef)(e),c=(0,r.useState)({})[1],i=s((0,r.useCallback)((function(e){o.current=e,c({})}),[c]),t,n),u=(0,r.useRef)(e);return l(u.current,e)||(i(e),u.current=e),[o.current,i]}}}]);
//# sourceMappingURL=5403.cdf6ad1d.chunk.js.map