"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[9891],{19891:(e,l,n)=>{n.r(l),n.d(l,{default:()=>x});var s=n(1413),t=n(2803),a=n(72791),o=n(84373),i=n(29851),r=n(21260),c=n(91615),u=n(81320),d=n(79065),m=n(34067),N=n(41578),_=n(81694),f=n.n(_),g=n(73516),T=n(8458),C=n(60364),h=n(98707),E=n(45682),O=n(80184);const x=function(){const e=(0,C.useSelector)((e=>e.auth.session.token)),{schedulingTableData:l,schedulingTableSelectedRows:n,setLeftClickedSchTableRow:_,setActiveFeatures:x,isScheduleAllowedToEdit:A,secondaryAreaZindexRef:S,secondaryTableManagedColumns:b,setSecondaryTableManagedColumns:p,secTableToolbarState:v,setSecTableToolbarState:w,page:I,setSecondaryTableName:R}=(0,a.useContext)(c.Z),[j,y]=(0,a.useState)([]),[D,M]=(0,a.useState)(null),[F,L]=(0,a.useState)(!0),k=(0,a.useRef)(null);(0,a.useEffect)((()=>{try{let e=null;if(1===n.length?(M(n[0]),_(n[0]),e=n[0]):e=D,e){let n=[];n=e.F_C_S_P!==r.rowDataTypesEnum.NTC?l.filter((l=>l.F_C_S_P===e.F_C_S_P&&l.Event_Name===e.Event_Name)):"BookingDetailID"in e?l.filter((l=>l.F_C_S_P===r.rowDataTypesEnum.NTC&&l.Event_Name===e.Event_Name&&"BookingDetailID"in l)):l.filter((l=>l.F_C_S_P===r.rowDataTypesEnum.NTC&&l.Event_Name===e.Event_Name&&!("BookingDetailID"in l))),y(n)}}catch(e){(0,u.openNotification)("danger","Something went wrong while loading rotation info")}}),[l,n]),(0,a.useEffect)((()=>{(async()=>{try{j.length>0&&0===b.originalColumns.length&&(L(!0),await B(j))}catch(e){(0,u.openNotification)("danger","Something went wrong while setting columns"),console.error(e)}finally{L(!1)}})()}),[j,b]),(0,a.useEffect)((()=>(document.addEventListener("mousedown",(e=>(0,h.ep)(e,k,w))),()=>{document.removeEventListener("mousedown",(e=>(0,h.ep)(e,k,w)))})),[k]);const B=async l=>{const n=I===r.pagesEnum.PROMO?T.T9.SECONDARY_TABLE_NAMES.PROMO_ROTATION_INFO:I===r.pagesEnum.SONG?T.T9.SECONDARY_TABLE_NAMES.SONG_ROTATION_INFO:I===r.pagesEnum.COMMERCIAL?T.T9.SECONDARY_TABLE_NAMES.COMMERCIAL_ROTATION_INFO:I===r.pagesEnum.NTC?T.T9.SECONDARY_TABLE_NAMES.NTC_ROTATION_INFO:T.T9.SECONDARY_TABLE_NAMES.FINAL_LOG_ROTATION_INFO;R(n);const s=["actions","customCellColor","cellWarning"],{visibleColumns:t,removedColumns:a}=await(0,i.tn)(n,l,e,void 0,s);p({originalColumns:(0,i.UW)(l,void 0,s),visibleColumns:t,removedColumns:a})};return(0,O.jsxs)("div",{className:"h-full w-full flex flex-col bg-gray-800 p-3 pt-2 rounded-lg absolute top-0 left-0 overflow-scroll no-scrollbar",style:{zIndex:S.current[r.featuresEnum.ROTATION_INFO_WITH_MANAGE_COLUMNS]},children:[(0,O.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,O.jsxs)("div",{className:"flex items-center gap-3",children:[(0,O.jsx)("h5",{children:"Rotation Info"}),j.length>0&&(0,O.jsx)("h6",{className:"rounded-md px-1.5 py-0.5 bg-gray-600 flex items-center justify-center",children:j.length})]}),(0,O.jsxs)("div",{className:"flex gap-1.5",children:[j.length>0&&(0,O.jsxs)(t.u,{title:"Manage Columns",wrapperClass:"relative",children:[(0,O.jsx)(t.zx,{size:"xs",icon:(0,O.jsx)(N.Rqg,{}),className:f()(b.removedColumns.length>0?"!bg-teal-700 hover:!bg-teal-700":"hover:!bg-teal-800","transition-all"),onClick:()=>w((0,s.Z)((0,s.Z)({},v),{},{isManageColumnsDropdownVisible:!0}))}),v.isManageColumnsDropdownVisible&&(0,O.jsx)(g.default,{tableType:r.tableTypesEnum.SECONDARY,dropdownRef:k,position:"right-1/2"})]}),(0,O.jsx)(t.u,{title:"Close",children:(0,O.jsx)(t.zx,{size:"xs",icon:(0,O.jsx)(o.QAE,{}),onClick:()=>{(0,i.FG)(x,r.featuresEnum.ROTATION_INFO_WITH_MANAGE_COLUMNS)}})})]})]}),(0,O.jsx)("div",{className:"h-[92%] flex flex-col gap-3",children:j.length>0?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:"grow overflow-scroll",children:(0,O.jsx)(d.Z,{columns:b.visibleColumns,tableData:j})}),A&&(0,O.jsx)(m.Z,{rotationInfoTableData:j})]}):(0,O.jsx)(t.Zb,{className:"h-full w-full",bodyClass:"h-full w-full flex justify-center items-center p-2",children:"Please select an event"})}),(0,O.jsx)(E.default,{showLoader:F})]})}}}]);
//# sourceMappingURL=9891.b796e388.chunk.js.map