"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[8491],{67207:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(2803),n=(s(72791),s(80184));const l=function(e){let{isDialogOpen:t,title:s,description:l,descClassName:o,submitButtonTitle:r,submitButtonColor:i,handleDialogSubmit:c,handleDialogClose:d,overlayClassName:u,secondaryDescription:h}=e;return(0,n.jsxs)(a.Vq,{isOpen:t,onClose:d,onRequestClose:d,overlayClassName:u,children:[(0,n.jsx)("h5",{className:"mb-4",children:s}),(0,n.jsx)("p",{className:o,children:l}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,n.jsx)("p",{children:h}),(0,n.jsx)(a.zx,{variant:"solid",color:i,onMouseDown:c,children:r})]})]})}},7270:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(2803),n=s(87537),l=s(72791),o=s(84373),r=s(81320),i=s(67207),c=s(85214),d=s(1413),u=s(45987),h=s(91009),m=s(80184);const g=["color","trackHeight","thumbDiameter"];const x=function(e){let{color:t,trackHeight:s="5px",thumbDiameter:a="15px"}=e,n=(0,u.Z)(e,g);return(0,m.jsx)(h.ZP,(0,d.Z)({sx:{color:t,"& .MuiSlider-thumb":{backgroundColor:t,height:a,width:a},"& .MuiSlider-rail":{backgroundColor:"#CCCCCC",height:s},"& .MuiSlider-track":{backgroundColor:t,height:s},"& .MuiSlider-thumb:hover, & .MuiSlider-thumb.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px ".concat((0,r.getHexColorWithOpacity)(t,.2))}}},n))};const p=function(e){let{renderTitle:t,searchDateRange:s,setSearchDateRange:d,searchDuration:u,setSearchDuration:h,handleApply:g}=e;const[p,b]=(0,l.useState)(s),[N,y]=(0,l.useState)(u),[T,w]=(0,l.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.Lt,{renderTitle:t||(0,m.jsx)(m.Fragment,{}),placement:"bottom-end",menuClass:"p-3 min-w-[256px] flex flex-col gap-5 border-2 border-gray-600",toggleClassName:"hover:cursor-pointer",onOpen:()=>{b(s),y(u)},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1 text-white",children:"Date Range"}),(0,m.jsx)(n.Z,{placeholder:"Select",size:"sm",className:"!rounded-md",onChange:e=>b(e),value:p})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("p",{className:"text-white",children:"Duration (Min)"}),null!==N[0]&&null!==N[1]&&(0,m.jsxs)("p",{className:"text-white flex items-center gap-2",children:["".concat(N[0]," - ").concat(N[1]),(0,m.jsx)(a.zx,{size:"xs",icon:(0,m.jsx)(o.QAE,{className:"text-gray-300"}),className:"!h-6 !w-6",variant:"solid",shape:"circle",color:"gray-600",onClick:()=>y([null,null]),title:"Reset Duration"})]})]}),(0,m.jsx)("div",{className:"px-2",children:(0,m.jsx)(x,{value:N,color:c.TW_COLORS.teal[500],size:"small",onChange:e=>y(e.target.value)})})]}),(0,m.jsxs)("div",{className:"flex justify-between itmes-center w-full",children:[(0,m.jsx)(a.zx,{className:"w-max font-normal !border !border-gray-500",size:"sm",style:{fontSize:"0.8rem",lineHeight:"1rem"},onClick:()=>w(!0),children:"Reset"}),(0,m.jsx)(a.Lt.Item,{onClick:async()=>{try{d(p),h(N),await g(p,N)}catch(e){(0,r.openNotification)("danger","Something went wrong while applying filters"),console.error(e)}},className:"p-0 w-max",children:(0,m.jsx)(a.zx,{size:"sm",className:"w-max font-normal",variant:"twoTone",style:{fontSize:"0.8rem",lineHeight:"1rem"},children:"Apply"})})]})]}),T&&(0,m.jsx)(i.Z,{isDialogOpen:T,title:"Reset Filters",description:"Do you wish to reset all the filters?",submitButtonTitle:"Reset",handleDialogSubmit:async()=>{try{const e=[null,null],t=[null,null];d(e),h(t),w(!1),await g(e,t)}catch(e){(0,r.openNotification)("danger","Something went wrong while resetting filters"),console.error(e)}},handleDialogClose:()=>w(!1)})]})}},41824:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(54748),n=s(72791),l=s(80184);function o(e){let{dateRange:t,duration:s}=e;const n=null!==t[0]&&null!==t[1],o=null!==s[0]&&null!==s[1];return(0,l.jsx)(l.Fragment,{children:(n||o)&&(0,l.jsxs)("div",{className:"flex gap-2 text-sm text-gray-200",children:[n&&(0,l.jsx)("p",{className:"py-1 px-3 bg-gray-700 rounded-md",children:"".concat((0,a.SG)(t[0])," ~ ").concat((0,a.SG)(t[1]))}),o&&(0,l.jsx)("p",{className:"py-1 px-3 bg-gray-700 rounded-md",children:"".concat(s[0]," - ").concat(s[1]," Mins")})]})})}const r=(0,n.memo)(o)},18491:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var a=s(1413),n=s(72791),l=s(84373),o=s(2803),r=s(91615),i=s(21260),c=s(29851),d=s(81320),u=(s(87350),s(11308)),h=s(9494);const m=(e,t,s)=>{t.current&&!t.current.contains(e.target)&&s((e=>(0,a.Z)((0,a.Z)({},e),{},{isManageColumnsDropdownVisible:!1})))};var g=s(60364),x=s(54748),p=s(84870),b=s(41578),N=s(73516),y=s(81694),T=s.n(y),w=s(17051),f=s(8458),C=s(7270),S=s(40071),j=s(41824),v=s(80184);const E=function(){const e=(0,g.useSelector)((e=>e.locale.selectedChannel)),t=(0,g.useSelector)((e=>e.auth.session.token)),{date:s,setSecondaryTableType:y,setOgSecTableData:E,secondaryTableData:D,setSecondaryTableData:R,secondaryTableManagedColumns:_,setSecondaryTableManagedColumns:I,setActiveFeatures:O,secTableToolbarState:A,setSecTableToolbarState:k,secondaryTableOffset:z,secondaryTableSelectedRows:F,setSecondaryTableSelectedRows:L,secondaryTableRef:Z,songTypeOptions:B,setSongTypeOptions:M,resetSecondaryTableStates:P}=(0,n.useContext)(r.Z),[G,Y]=(0,n.useState)({value:0,label:"All"}),[q,H]=(0,n.useState)(""),[J,W]=(0,n.useState)([null,null]),[U,V]=(0,n.useState)([null,null]),[Q,K]=(0,n.useState)(!1),$=(0,n.useRef)(null);(0,n.useEffect)((()=>((async()=>{try{y(i.secondaryTableTypesEnum.SONG),0===B.length&&(K(!0),M(await(async()=>{try{let e=[{value:1,label:"All"},{value:-2,label:"Not Used Last 2 Days"},{value:-1,label:"Frequntly used in 7 Days"}];const t=await(0,u.bD)();return 200===t.status?t.data.forEach((t=>e.push({value:t.SongCategoryCode,label:t.SongCategoryName}))):204===t.status?(0,d.openNotification)("info","No song types found"):(0,d.openNotification)("danger","Something went wrong while fetching song types. Server responded with status code ".concat(t.status)),e}catch(e){throw e}})()),K(!1))}catch(e){(0,d.openNotification)("danger","Something went wrong while fetching song types"),console.error(e)}})(),P)),[]),(0,n.useEffect)((()=>{(async()=>{try{if(0===D.length)return;const{visibleColumns:e,removedColumns:s}=await(0,c.tn)(f.T9.SECONDARY_TABLE_NAMES.INSERT_SONGS,D,t);I({originalColumns:(0,c.UW)(D),visibleColumns:e,removedColumns:s})}catch(e){(0,d.openNotification)("danger","Something went wrong while setting columns for Songs"),console.error(e)}})()}),[D]),(0,n.useEffect)((()=>(document.addEventListener("mousedown",(e=>m(e,$,k))),()=>{document.removeEventListener("mousedown",(e=>m(e,$,k)))})),[$]);const X=async(e,t)=>{try{K(!0);const s=await(async e=>{try{let t=[];const s=await(0,h.apiCallstoreprocedure)("USP_Sch_Get_All_Song",e);return 200===s.status?0===s.data.length?(0,d.openNotification)("info","No songs found"):t=[(0,c.Lp)(s.data[0]),...s.data].map(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{rowId:(0,c.XQ)(i.tableTypesEnum.SECONDARY,e),rowIndex:t}))):204===s.status?(0,d.openNotification)("info","No songs found"):(0,d.openNotification)("danger","Something went wrong while fetching songs. Server responded with status code ".concat(s.status)),t}catch(t){throw t}})(ee(e,t));E(s),R(s),K(!1)}catch(s){(0,d.openNotification)("danger","Something went wrong while searching"),K(!1),console.error(s)}},ee=(t,a)=>{try{const n=t[0]?(0,x.Tk)(t[0]):(0,x.Tk)(new Date((new Date).setFullYear((new Date).getFullYear()-3))),l=t[1]?(0,x.Tk)(t[1]):(0,x.Tk)(new Date((new Date).setDate((new Date).getDate()+1))),o=a[0]?a[0]:0,r=a[1]?a[1]:999;return{LocationCode:e.LocationCode,ChannelCode:e.ChannelCode,TelecastDate:(0,x.Tk)(s),SongTypeCode:G.value,OrderBy:2,SongName:q||"%%",AddedFrom:n,AddedTo:l,DurationFrom:o,DurationTo:r}}catch(n){throw n}};return(0,v.jsxs)("div",{className:"h-full w-full flex flex-col overflow-auto no-scrollbar bg-gray-800 p-3 pt-2 rounded-lg",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)("h5",{children:"Song"}),D.length>0&&(0,v.jsx)("h6",{className:"rounded-md px-1.5 py-0.5 bg-gray-600 flex items-center justify-center",children:D.length-1})]}),(0,v.jsxs)("div",{className:"flex gap-1.5",children:[D.length>0&&(0,v.jsxs)(o.u,{title:"Manage Columns",wrapperClass:"relative",children:[(0,v.jsx)(o.zx,{size:"xs",icon:(0,v.jsx)(b.Rqg,{}),className:T()(_.removedColumns.length>0?"!bg-teal-700 hover:!bg-teal-700":"hover:!bg-teal-800","transition-all"),onClick:()=>k((0,a.Z)((0,a.Z)({},A),{},{isManageColumnsDropdownVisible:!0}))}),A.isManageColumnsDropdownVisible&&(0,v.jsx)(N.default,{tableType:i.tableTypesEnum.SECONDARY,dropdownRef:$,position:"right-1/2"})]}),(0,v.jsx)(o.u,{title:"Close",children:(0,v.jsx)(o.zx,{size:"xs",icon:(0,v.jsx)(l.QAE,{}),onClick:()=>(0,c.FG)(O,i.featuresEnum.INSERT)})})]})]}),(0,v.jsxs)(o.BZ,{className:"mb-2 flex",children:[(0,v.jsx)(o.Ph,{placeholder:"Type",className:"w-[60%] h-[38px]",options:B,value:G,onChange:e=>Y(e),styles:{valueContainer:e=>(0,a.Z)((0,a.Z)({},e),{},{paddingRight:0})}}),(0,v.jsx)(o.II,{placeholder:"Search Song",size:"sm",className:"h-[38px]",onChange:e=>H(e.target.value),value:q,autoFocus:!0,onKeyDown:e=>{try{"enter"!==e.key.toLowerCase()&&"tab"!==e.key.toLowerCase()||X(J,U)}catch(t){console.error(t)}}}),(0,v.jsx)(C.Z,{renderTitle:(0,v.jsx)(o.zx,{icon:(0,v.jsx)(S.Q65,{}),className:"h-[40px] px-2",size:"sm",shape:"none",title:"Advanced Filters"}),searchDateRange:J,setSearchDateRange:W,searchDuration:U,setSearchDuration:V,handleApply:X}),(0,v.jsx)(o.zx,{icon:(0,v.jsx)(l.y5k,{}),className:"h-[40px] px-2 !rounded-l-none !border-l-2 !border-l-gray-600",size:"sm",onClick:()=>X(J,U),title:"Search"})]}),(0,v.jsx)("div",{className:"grow flex flex-col gap-2",children:D.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(j.Z,{dateRange:J,duration:U}),(0,v.jsx)("div",{className:"grow",children:(0,v.jsx)(p.default,{tableName:f.T9.SECONDARY_TABLE_NAMES.INSERT_SONGS,tableType:i.tableTypesEnum.SECONDARY,tableData:D,columns:_.visibleColumns,droppableId:i.droppableIdsEnum.SECONDARY,selectedRows:F,setSelectedRows:L,scrolledOffset:z,tableRef:Z})}),(0,v.jsx)(w.Z,{insertType:i.rowDataTypesEnum.SONG})]}):(0,v.jsx)(o.Zb,{className:"h-full",bodyClass:"h-full flex justify-center items-center",children:Q?(0,v.jsx)(o.$j,{size:"45px"}):"No songs to show"})})]})}},17051:(e,t,s)=>{s.d(t,{Z:()=>T});var a=s(72791),n=s(2803),l=s(30203),o=s(19129),r=s(10050),i=s(3479),c=s(63524),d=s(91615),u=s(21260),h=s(45682),m=s(81320),g=s(16856),x=s(29184),p=s(80184);const b=function(e){let{isDialogOpen:t,setIsDialogOpen:s}=e;const{executeOperation:l}=(0,a.useContext)(d.Z),[o,r]=(0,a.useState)("sequentialInsert"),i=()=>s(!1);return(0,p.jsx)(n.Vq,{isOpen:t,onClose:i,onRequestClose:i,width:"40%",contentClassName:"mt-8",children:(0,p.jsxs)("div",{className:"flex flex-col h-full",children:[(0,p.jsx)("h4",{className:"border-b border-b-gray-700 pb-2 mb-3",children:"Repeat Insert"}),(0,p.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto flex flex-col gap-6 pr-2 text-white",children:[(0,p.jsx)(x.Z,{}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm mb-1",children:"Insert Type"}),(0,p.jsxs)(n.Y8.Group,{value:o,onChange:r,children:[(0,p.jsx)(n.Y8,{value:"sequentialInsert",className:"text-gray-300",children:"Sequential Insert"}),(0,p.jsx)(n.Y8,{value:"randomizeInsert",className:"text-gray-300",children:"Randomize Insert"})]})]})]}),(0,p.jsx)("div",{className:"text-right mt-6",children:(0,p.jsx)(n.zx,{variant:"solid",onClick:async()=>{try{const e=await l({operation:u.operationTypesEnum.REPEAT_INSERT_ROW,repeatInsertType:o});i(),e&&(0,m.openNotification)("success","Events inserted successfully")}catch(e){(0,m.openNotification)("danger","Something went wrong while inserting events"),console.error(e)}},children:"Insert"})})]})})},N=(0,a.lazy)((()=>s.e(880).then(s.bind(s,99129)))),y=(0,a.lazy)((()=>s.e(327).then(s.bind(s,20327))));const T=function(e){var t;let{insertType:s}=e;const{schedulingTableSelectedRows:x,secondaryTableSelectedRows:T,setSecondaryTableSelectedRows:w,secondaryTableData:f,executeOperation:C,isAutoCalcNtcOffsetTime:S,isNtcGroupingEnabled:j}=(0,a.useContext)(d.Z),[v,E]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[_,I]=(0,a.useState)(!1),O=T.length===f.length-1;return(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)(h.default,{showLoader:!0}),children:(0,p.jsxs)("div",{className:"bg-gray-700 bg-opacity-50 flex gap-0.5 p-0.5 rounded-lg border border-gray-600",children:[(0,p.jsx)(n.u,{title:O?"Un-select all":"Select All",children:(0,p.jsx)(n.zx,{className:"hover:!bg-teal-700 transition-all !h-8 !w-8 ".concat(O&&"!bg-teal-700"),variant:"plain",size:"sm",icon:(0,p.jsx)(g.WHv,{className:"text-[1.2rem]"}),onClick:()=>{try{T.length===f.length-1?w([]):w([...f].splice(1))}catch(e){(0,m.openNotification)("danger","Something went wrong while selecting all events"),console.error(e)}}})}),(0,p.jsx)(n.u,{title:"Insert",children:(0,p.jsx)(n.zx,{className:(0,r.f6)(),variant:"plain",size:"sm",icon:(0,p.jsx)(l.zHT,{className:"text-base"}),disabled:(0,r.JT)(x,T,u.secTableBottomToolbarFeaturesEnum.INSERT,S,j),onClick:()=>{try{C({operation:u.operationTypesEnum.INSERT_ROW})}catch(e){console.error(e),(0,m.openNotification)("danger","Something went wrong while inserting events")}}})}),s!==u.rowDataTypesEnum.COMMERCIAL&&(0,p.jsxs)(p.Fragment,{children:[S&&s===u.rowDataTypesEnum.NTC&&!(null!==(t=f[0])&&void 0!==t&&t.BookingDetailID)&&(0,p.jsxs)(n.u,{title:"Repeat Insert",children:[(0,p.jsx)("div",{onClick:()=>{(0,r.JT)(x,T,u.secTableBottomToolbarFeaturesEnum.REPEAT_INSERT,S,j)?(0,m.openNotification)("danger","Please select a valid NTC parent event"):E(!0)},children:(0,p.jsx)(n.zx,{className:(0,r.f6)(),variant:"plain",size:"sm",icon:(0,p.jsx)(g.LkC,{className:"text-[1.4rem]"}),disabled:(0,r.JT)(x,T,u.secTableBottomToolbarFeaturesEnum.REPEAT_INSERT,S,j)})}),v&&(0,p.jsx)(b,{isDialogOpen:v,setIsDialogOpen:E})]}),(0,p.jsxs)(n.u,{title:"Bulk Insert",wrapperClass:"relative",children:[(0,p.jsx)(n.zx,{className:(0,r.f6)(),variant:"plain",size:"sm",icon:(0,p.jsx)(o.gy$,{className:"text-lg"}),disabled:(0,r.JT)(x,T,u.secTableBottomToolbarFeaturesEnum.BULK_INSERT,S,j),onClick:()=>I(!0)}),_&&(0,p.jsx)(y,{isDialogOpen:_,setIsDialogOpen:I,insertType:s})]}),(0,p.jsx)(n.u,{title:"Replace",children:(0,p.jsx)(n.zx,{className:(0,r.f6)(),variant:"plain",size:"sm",icon:(0,p.jsx)(i.ux5,{className:"text-[1.12rem]"}),disabled:(0,r.JT)(x,T,u.secTableBottomToolbarFeaturesEnum.REPLACE,S,j),onClick:()=>{try{C({operation:u.operationTypesEnum.REPLACE_ROW}),(0,m.openNotification)("success","Events replaced successfully")}catch(e){console.error(e),(0,m.openNotification)("danger","Something went wrong while replacing events")}}})}),(0,p.jsxs)(n.u,{title:"Replace All",children:[(0,p.jsx)(n.zx,{className:(0,r.f6)(),variant:"plain",size:"sm",icon:(0,p.jsx)(c.p2I,{className:"text-xl"}),disabled:(0,r.JT)(x,T,u.secTableBottomToolbarFeaturesEnum.REPLACE_ALL,S,j),onClick:()=>R(!0)}),D&&(0,p.jsx)(N,{isDialogOpen:D,setIsDialogOpen:R})]})]})]})})}},29184:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(2803),n=s(72791),l=s(91615),o=s(80184);const r=function(){const{secondaryTableSelectedRows:e}=(0,n.useContext)(l.Z);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-sm mb-1",children:["Events (",e.length,")"]}),(0,o.jsx)("div",{className:"max-h-24 overflow-y-scroll",children:(0,o.jsx)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-2 p-2 bg-gray-700 bg-opacity-70 rounded",children:e.map((e=>(0,o.jsx)(a.u,{title:e.Event_Name,wrapperClass:"w-full",placement:"top-start",children:(0,o.jsxs)("div",{className:"flex items-center gap-1.5 w-full",children:[(0,o.jsx)("span",{className:"bg-gray-500 rounded-full w-[0.4rem] h-[0.4rem]"}),(0,o.jsx)("span",{className:"text-sm text-gray-200 w-full text-ellipsis overflow-hidden whitespace-nowrap",children:e.Event_Name})]},e.rowId)},e.rowId)))})})]})}},10050:(e,t,s)=>{s.d(t,{JT:()=>r,f6:()=>l,x2:()=>i});var a=s(21260);const n=s(81694),l=e=>{try{return n(e?"!bg-teal-700 hover:!bg-teal-700":"hover:!bg-teal-800","transition-all !h-8 !w-8")}catch(t){console.error(t)}},o=(e,t,s,n)=>{try{if(1===t.length&&e.length>0){const l=t[0];let o;return o=l.F_C_S_P===a.rowDataTypesEnum.NTC&&(s||n)?e.every((e=>e.F_C_S_P===l.F_C_S_P&&e.NTCGroupCode===l.NTCGroupCode)):e.every((e=>e.F_C_S_P===l.F_C_S_P)),!o}return!0}catch(l){throw l}},r=(e,t,s,n,l)=>{try{switch(s){case a.secTableBottomToolbarFeaturesEnum.INSERT:return c(e,t);case a.secTableBottomToolbarFeaturesEnum.REPEAT_INSERT:return d(e,t);case a.secTableBottomToolbarFeaturesEnum.BULK_INSERT:return 0===t.length;case a.secTableBottomToolbarFeaturesEnum.REPLACE:case a.secTableBottomToolbarFeaturesEnum.REPLACE_ALL:return o(e,t,n,l);default:return!1}}catch(r){console.error(r)}},i=e=>{try{let t=[],s=0;e.forEach((e=>{Number(e.BreakNumber)>s&&(s=Number(e.BreakNumber))}));for(let e=1;e<=s;e++)t.push({value:e,label:"Break ".concat(e)});return t}catch(t){console.error(t)}},c=(e,t)=>1!==e.length||0===t.length||t.length>0&&t[0].F_C_S_P===a.rowDataTypesEnum.NTC&&1===e.length&&(e[0].F_C_S_P===a.rowDataTypesEnum.COMMERCIAL||e[0].F_C_S_P===a.rowDataTypesEnum.CONTENT_TERMINATION),d=(e,t)=>1!==e.length||0===t.length||t.length>0&&t[0].F_C_S_P===a.rowDataTypesEnum.NTC&&1===e.length&&(e[0].F_C_S_P===a.rowDataTypesEnum.COMMERCIAL||e[0].F_C_S_P===a.rowDataTypesEnum.CONTENT_TERMINATION||e[0].F_C_S_P===a.rowDataTypesEnum.NTC)}}]);
//# sourceMappingURL=8491.6b044628.chunk.js.map