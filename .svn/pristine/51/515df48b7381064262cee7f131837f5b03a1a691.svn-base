(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[7728],{25579:(e,t,a)=>{"use strict";a.d(t,{Ei:()=>f,I6:()=>x,Qj:()=>i,U$:()=>m,Uy:()=>g,Z_:()=>r,_K:()=>p,b6:()=>s,d:()=>l,db:()=>y,fh:()=>h,gg:()=>C,hu:()=>c,iD:()=>d,rd:()=>u,w_:()=>S});a(54048);var n=a(46152),o=a(54748);a(74569);async function c(e){return n.Z.fetchData({url:"/dealmaster/".concat(e),method:"get"})}async function r(e){return n.Z.fetchData({url:"/dealattachment/".concat(e),method:"get"})}async function s(e,t,a){return n.Z.fetchData({url:"/dealmaster/dealforapproval/?DealNumber=".concat(e,"&IsApproved=").concat(t,"&RejectRemark=").concat(a),method:"get"})}async function l(e,t){return n.Z.fetchData({url:"/dealmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&StartDate=").concat((0,o.Tk)(t[0]),"&EndDate=").concat((0,o.Tk)(t[1])),method:"get"})}async function i(e){return n.Z.fetchData({url:"/sponsortypemaster/drop/",method:"get",data:e})}async function d(e){return n.Z.fetchData({url:"/spottypemaster/drop/",method:"get",data:e})}async function m(e){return n.Z.fetchData({url:"/dealdetail/".concat(e),method:"get"})}async function u(e){return n.Z.fetchData({url:"/dealmaster/USP_Sch_DealConsumptionCheck/?DealNumber=".concat(e),method:"get"})}async function h(e,t,a,o,c,r){return n.Z.fetchData({url:"/dealmaster/bindstartnendtime/?LocationCode=".concat(c,"&ChannelCode=").concat(r,"&DealPeriodToDate=").concat(e,"&DealPeriodFromDate=").concat(t,"&ContentCode=").concat(a,"&OriginalRepeatCode=").concat(o),method:"get"})}async function p(e,t,a){return n.Z.fetchData({url:"/bookingdetails/bookingchange/?flag=".concat(e,"&IsNtc=").concat(a),method:"put",data:t})}async function C(e,t){var a={params:t};return n.Z.fetchData({url:"/callstoreprocedure/"+e,data:a,method:"post"})}async function f(e){return n.Z.fetchData({url:"/callstoreprocedure/"+e,data:{params:{}},method:"post"})}async function x(e,t,a){var o={params:{Bookingcode:t,IsNTC:a}};return n.Z.fetchData({url:"/callstoreprocedure/"+e,data:o,method:"post"})}async function y(e){var t={params:{CheckMonth:e}};return n.Z.fetchData({url:"/callstoreprocedure/USP_DealDashboardDoughnut",data:t,method:"post"})}async function g(e,t){var a={params:{BookingNumber:t,deallineitemno:0}};return n.Z.fetchData({url:"/callstoreprocedure/"+e,data:a,method:"post"})}async function S(e){return n.Z.fetchData({url:"currencyexchangerate/?basecurrency=".concat(e),method:"post"})}},28179:(e,t,a)=>{"use strict";a.d(t,{$H:()=>r,$o:()=>T,Bo:()=>D,D_:()=>w,Eg:()=>v,JN:()=>S,M0:()=>m,ND:()=>s,OY:()=>l,SR:()=>C,Sd:()=>x,U2:()=>_,U3:()=>N,XV:()=>u,fU:()=>j,fy:()=>g,fz:()=>I,g7:()=>Z,h:()=>p,iH:()=>i,ih:()=>P,jS:()=>b,kP:()=>d,ko:()=>h,m1:()=>f,mg:()=>B,pc:()=>k,qm:()=>y});var n=a(54048),o=a(46152);a(60630);const c=a(74569);async function r(e){return o.Z.fetchData({url:"/commercialtypemaster/",method:"get",data:e})}async function s(e,t,a){return o.Z.fetchData({url:"/spotcancellation/?CancelRemarkCode=".concat(t,"&IsNTC=").concat(a),method:"put",data:e})}const l=(e,t)=>new Promise(((a,o)=>{let r=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialtypemaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:r};c.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),i=(e,t)=>new Promise(((a,o)=>{let r=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),s={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialtypemaster/".concat(e.CommercialTypeCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:r};c.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))}));async function d(e){return o.Z.fetchData({url:"/commercialmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&IsNTC=").concat(e.IsNTC,"&fromdate=").concat(e.FromDate,"&todate=").concat(e.ToDate),method:"get"})}async function m(e,t){return o.Z.fetchData({url:"/bookingmaster/?IsNTC=".concat(e.IsNTC,"&LocationCode=").concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function u(e,t,a,n,c,r,s,l,i,d,m){return o.Z.fetchData({url:"/spotschedule/USP_SA_RO_SpotSchedule/?From_DT=".concat(e,"&To_DT=").concat(t,"&DealNumber=").concat(a,"&BookingNumber=").concat(n,"&ChannelCode=").concat(r,"&LocationCode=").concat(s,"&ScheduleDate=").concat(c,"&IsMakeGoodRO=").concat(l?1:0,"&BookingRefNumber=").concat(i,"&IsNTC=").concat(d,"&BrandCode=").concat(m),method:"get"})}async function h(e,t,a,n,c,r){return o.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(n,"&ChannelCode=").concat(c,"&ClientCode=").concat(t.value,"&BrandCode=").concat(e.value,"&DurInSec=").concat(a.DurInSec,"&IsNTC=").concat(r),method:"get"})}async function p(e,t,a,n,c){return o.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(a,"&ChannelCode=").concat(n,"&ClientCode=").concat(t,"&BrandCode=").concat(e,"&IsNTC=").concat(c),method:"get"})}const C=(e,t)=>new Promise(((a,o)=>{let r={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};console.log(r.url),c.request(r).then((e=>{a(e)})).catch((e=>{o(e)}))})),f=(e,t,a)=>new Promise(((o,r)=>{let s={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(s).then((e=>{o(e)})).catch((e=>{r(e)}))}));async function x(e){return o.Z.fetchData({url:"/positionmaster/drop/",method:"get",data:e})}async function y(e){return o.Z.fetchData({url:"/spotpositiontypemaster/drop/",method:"get",data:e})}async function g(e){return o.Z.fetchData({url:"/cancelremarkmaster/",method:"get",data:e})}const S=(e,t)=>fetch(n.Z.apiPrefix+"/cancelremarkmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})}),v=(e,t)=>fetch(n.Z.apiPrefix+"/cancelremarkmaster/".concat(e.CancelRemarkCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})});async function N(e){return o.Z.fetchData({url:"/yearmaster/",method:"get",data:e})}const j=(e,t)=>fetch(n.Z.apiPrefix+"/yearmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})}),D=(e,t)=>fetch(n.Z.apiPrefix+"/yearmaster/".concat(e.Yearcode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})});async function b(e){return o.Z.fetchData({url:"/taxmaster/",method:"get",data:e})}async function T(e){return o.Z.fetchData({url:"/taxmaster/",method:"post",data:e})}async function _(e,t){return o.Z.fetchData({url:"/taxmaster/".concat(t),method:"put",data:e})}const I=(e,t,a)=>{try{return o.Z.fetchData({method:"get",url:"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&traficmonth=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(n){throw new Error(n)}},w=(e,t,a,n)=>{try{return o.Z.fetchData({method:"get",url:"/trafficdayclose/asperfromto/?LocationCode=".concat(a.LocationCode,"&ChannelCode=").concat(a.ChannelCode,"&fromdate=").concat(e,"&todate=").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})}catch(c){throw new Error(c)}},B=async(e,t,a)=>{try{return new Promise(((o,r)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};c.request(s).then((e=>{o(e)})).catch((e=>{r(e)}))}))}catch(o){throw o}},P=(e,t,a)=>{try{return o.Z.fetchData({method:"get",url:"/bookingmaster/getbookingbyclient/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&ClientCode=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(n){throw new Error(n)}},Z=(e,t)=>{try{return o.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivity/?BookingNumber=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},k=(e,t,a)=>{try{return console.log(e),o.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivitybydate?BookingNumber=".concat(t,"&ChangeType=").concat(e.type,"&ChangeOn=").concat(e.dateTime,"&ChangeBy=").concat(e.executerId),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(n){throw new Error(n)}}},96361:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(79139),o=a(60364),c=a(11087),r=a(80184);const s=e=>{let{ModuleText:t="Admin",Component:a,links:s}=e;(0,o.useSelector)((e=>e.auth.session.currentRouteKey));const l=(0,o.useSelector)((e=>e.base.common.currentRouteTitle));console.log(l);const{title:i,Moduletitle:d}=(0,o.useSelector)((e=>e.auth.user));return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xl font-medium",children:l}),(0,r.jsxs)(n.Breadcrumbs,{style:{marginLeft:"-15px",width:"auto"},children:[(0,r.jsx)(c.rU,{to:"/home",className:"opacity-60 text-xs",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,r.jsx)(c.rU,{to:"/".concat("SALES ADMIN"===d?"SalesAdmin":d),className:"opacity-60 text-xs",children:(0,r.jsx)("span",{children:d})}),(0,r.jsx)(c.rU,{to:"#",className:"text-xs",children:(0,r.jsx)("span",{children:l})})]})]})}},33843:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(1413),o=a(72791),c=a(2803),r=a(81721),s=a(96361),l=a(34786),i=a(28179),d=a(58617),m=a(54748),u=a(60364),h=a(81320),p=a(80184);const C=e=>{let{displayBasicDetails:t,setdisplayBasicDetails:a,setSelectedAgency:n,selectedAgency:o,brandList:r,setSelectedBrand:s,selectedBrand:l,ClientList:i,selectedClient:C,handleClientChange:f,formState:x,handleInputChange2:y,agencyList:g,OpenAvailableSpots:S,commercialList:v,setSelectedCommercial:N,selectedCommercial:j,setDisplaySpots:D}=e;const b=(0,u.useSelector)((e=>e.locale.selectedChannel)),T=(0,p.jsx)(c.zx,{className:"text-emerald-500 text-sm",shape:"circle",variant:"plain",onClick:()=>{a(!0),D(!1)},icon:(0,p.jsx)(d._vs,{})}),_=(0,p.jsx)("div",{className:"flex justify-end",children:(0,p.jsx)(c.zx,{size:"sm",variant:"solid",onClick:()=>{const e=(e=>{const t=e.map((e=>{const[t,a]=Object.entries(e)[0];return null===a&&t}));return-1!==t.findIndex((e=>e))&&t.filter((e=>e))})([{Client:C},{Agency:o},{Brand:l},{Commercial:j}]);if(e){const t=e.join(", ");(0,h.openNotification)("warning","The following fields are compulsory and missing: ".concat(t))}else a(!1),S()},children:"Continue"})}),I=(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("div",{className:"grid grid-cols-12 gap-2 ",children:[(0,p.jsx)("div",{className:"col-span-12",children:(0,p.jsx)("h5",{children:null===b||void 0===b?void 0:b.label})}),(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsx)("span",{className:"FontSizeV",children:"Start Date"}),(0,p.jsx)("h6",{className:"FontSizeI",children:x.StartDate})]}),(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsx)("span",{className:"FontSizeV",children:"End Date"}),(0,p.jsx)("h6",{className:"FontSizeI",children:x.EndDate})]}),(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsx)("span",{className:"FontSizeV",children:"Client"}),(0,p.jsx)("h6",{className:"FontSizeI",children:null===C||void 0===C?void 0:C.label})]}),(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsx)("span",{className:"FontSizeV",children:"Agency"}),(0,p.jsx)("h6",{className:"FontSizeI",children:null===o||void 0===o?void 0:o.label})]}),(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsx)("span",{className:"FontSizeV",children:"Brand"}),(0,p.jsx)("h6",{className:"FontSizeI",children:null===l||void 0===l?void 0:l.label})]}),(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsx)("span",{className:"FontSizeV",children:"Commercial"}),(0,p.jsx)("h6",{className:"FontSizeI",style:{wordWrap:"break-word"},children:null===j||void 0===j?void 0:j.label})]})]})});return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"grid grid-flow-row auto-rows-max gap-4",children:(0,p.jsx)(c.Zb,{header:t?"Spot Details":I,bodyClass:t?"d-block":"d-none",footer:t?_:null,headerExtra:t?null:T,children:(0,p.jsx)("div",{className:"col-span-1",children:(0,p.jsx)(c.Yb,{children:(0,p.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,p.jsx)("div",{className:"col-span-4 ",children:(0,p.jsx)("div",{style:{width:"300px"},children:(0,p.jsx)("p",{className:"text-white font-extrabold",children:b.label})})}),(0,p.jsx)("div",{className:"col-span-2 ",children:(0,p.jsxs)(c.Zb,{children:[!x.StartDate&&!x.EndDate&&(0,p.jsx)("span",{className:"text-red-500 mb-2",children:"Please Select Start and End date for Client"}),(0,p.jsxs)("div",{className:"grid grid-cols-6 gap-2 mb-5 mt-2",children:[(0,p.jsx)("div",{className:"col-span-3 ",children:(0,p.jsx)(c.xJ,{label:"Start Date",children:(0,p.jsx)(c.Mt,{size:"sm",name:"StartDate",prefix:(0,p.jsx)(d.Gmo,{className:"text-xl"}),value:(0,m.Gu)(x.StartDate)?new Date(x.StartDate):"",onChange:e=>{y((0,m.Tk)(e),"StartDate")}})})}),(0,p.jsx)("div",{className:"col-span-3 ",children:(0,p.jsx)(c.xJ,{label:"End Date",children:(0,p.jsx)(c.Mt,{size:"sm",name:"EndDate",prefix:(0,p.jsx)(d.Gmo,{className:"text-xl"}),defaultValue:(0,m.Gu)(x.EndDate)?new Date(x.EndDate):"",onChange:e=>{y((0,m.Tk)(e),"EndDate")}})})}),(0,p.jsx)("div",{className:"col-span-6 ",children:(0,p.jsx)(c.xJ,{label:"Client",children:(0,p.jsx)(c.Ph,{options:i,onChange:f,value:i.filter((e=>e===C))})})}),(0,p.jsx)("div",{className:"col-span-6 ",children:(0,p.jsx)(c.xJ,{label:"Agency",children:(0,p.jsx)(c.Ph,{options:g,onChange:n,value:g.filter((e=>e===o))})})})]})]})}),(0,p.jsx)("div",{className:"col-span-2",children:(0,p.jsx)(c.Zb,{children:(0,p.jsxs)("div",{className:"grid grid-cols-6 gap-2 mb-5",children:[(0,p.jsx)("div",{className:"col-span-6 ",children:(0,p.jsx)(c.xJ,{label:"Brand",children:(0,p.jsx)(c.Ph,{options:r,onChange:s,value:r.filter((e=>e===l))})})}),(0,p.jsx)("div",{className:"col-span-6 ",children:(0,p.jsx)(c.xJ,{label:"Commercial",children:(0,p.jsx)(c.Ph,{options:v,onChange:e=>N(e),value:v.filter((e=>e===j))})})})]})})})]})})})})})})};var f=a(1063),x=a(99917);const y=e=>{let{data:t,columns:a,selectedItem:n,setselectedItem:o}=e;return(0,p.jsxs)(x.w,{scrollable:!0,scrollHeight:"400px",paginator:!0,rows:10,value:t,size:"small",tableStyle:{minWidth:"50rem"},selectionMode:"checkbox",selection:n,onSelectionChange:e=>{console.log(e.value),o(e.value)},dataKey:"Id",children:[(0,p.jsx)(f.s,{field:"srno",header:"SrNo"}),(0,p.jsx)(f.s,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),a.map((e=>(0,p.jsx)(f.s,{field:e.accessorKey,filter:!0,filterPlaceholder:"Search..",header:e.header})))]})};var g=a(25579),S=a(60488);const v=()=>{const[e,t]=(0,o.useState)(),[a,d]=(0,o.useState)([]),[m,f]=(0,o.useState)([]),[x,v]=(0,o.useState)([]),[N,j]=(0,o.useState)([]),[D,b]=(0,o.useState)([]),[T,_]=(0,o.useState)(null),[I,w]=(0,o.useState)(null),[B,P]=(0,o.useState)(null),[Z,k]=(0,o.useState)(null),[E,A]=(0,o.useState)(!1),[L,O]=(0,o.useState)(!0),[z,F]=(0,o.useState)([""]),[M,R]=(0,o.useState)(!1),[K,U]=(0,o.useState)([]),J=(0,u.useSelector)((e=>e.locale.selectedChannel)),[q,V]=(0,o.useState)({}),G=window.location.href.split("#")[1],$="spotreplacementntc"===(G?G.split("/")[1]:"")?1:0;(0,o.useEffect)((()=>{(0,S.SE)(),q.StartDate&&q.EndDate?(async e=>{const t=(await(0,l.ZH)(q.StartDate,q.EndDate)).data.map((e=>{let t={};return t.label=e.ClientName,t.value=e.ClientCode,t}));d(t)})():d([])}),[q.StartDate,q.EndDate]),(0,o.useEffect)((()=>{B&&I&&(async()=>{const e=await(0,i.h)(null===I||void 0===I?void 0:I.value,null===B||void 0===B?void 0:B.value,J.LocationCode,J.ChannelCode,$);if(console.log(e),204==e.status&&((0,h.openNotification)("warning","Commercial not found for Brand : ".concat(I.label)),j([]),f([])),200==e.status){const t=e.data.map((e=>{let t={};return t.label=e.CommercialCaption,t.value=e.CommercialCode,t.DurInSec=e.DurInSec,t}));console.log(t),j(t)}})()}),[B,I]),(0,o.useEffect)((()=>{B&&I&&T&&(async()=>{const e=await(0,i.ko)(I,B,T,J.LocationCode,J.ChannelCode,$);console.log(e.data),204==e.status&&((0,h.openNotification)("warning","Commercial not found for Brand : ".concat(I.label)),b([]));const t=e.data.map((e=>({label:e.CommercialCaption,value:e.CommercialCode,DurInSec:e.DurInSec})));console.log(t),b(t)})()}),[T]);const H=[{name:"Total Spots",value:z.length},{name:"Selected Spots",value:K?K.length:0},{name:"Remaining Spots",value:(null===z||void 0===z?void 0:z.length)-(null===K||void 0===K?void 0:K.length)}],W=(0,p.jsxs)("div",{className:"grid grid-cols-12 gap-3",children:[(0,p.jsx)("div",{className:"col-span-6 ",children:(0,p.jsxs)("div",{style:{width:"300px"},children:[0!==D.filter((e=>e.value!==(null===T||void 0===T?void 0:T.value))).length?(0,p.jsx)("p",{}):(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("p",{className:"text-red-500",children:["No Commercial found for Replacement"," "]})}),(0,p.jsxs)("p",{className:"lbale flex",children:["Replace Commercial \xa0 ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)(c.Ph,{options:D.filter((e=>e.value!==(null===T||void 0===T?void 0:T.value))),value:D.filter((t=>t==e)),onChange:t})]})}),(0,p.jsx)("div",{className:"col-span-6 grid grid-cols-12 gap-2",children:H.map((e=>(0,p.jsxs)("div",{className:"col-span-4 grid-rows-6 gap-2",children:[(0,p.jsxs)("div",{className:"row-span-2 p-2 bg-teal-400 text-white text-center mb-2 text-md rounded-t-lg",children:[" ",e.name," "]}),(0,p.jsx)("div",{className:"row-span-2 p-1  bg-teal-600 text-white text-center text-xl rounded-b-lg",children:e.value})]})))})]});return(0,p.jsxs)(c.Zb,{header:(0,p.jsx)(s.Z,{Component:"Caption Replacement"}),children:[(0,p.jsx)(C,{displayBasicDetails:L,setdisplayBasicDetails:O,ClientList:a,selectedClient:B,handleClientChange:e=>{P(e),(async(e,t)=>{const a=await(0,l.Bw)(e),n=await(0,l.R5)(e);204==a.status&&((0,h.openNotification)("warning","Brand not found for client : ".concat(t)),j([]),f([]));const o=""!=a.data?a.data.map((e=>({value:e.BrandMaster.BrandCode,label:e.BrandMaster.BrandName}))):[],c=""!=n.data?n.data.map((e=>({value:e.AgencyCode,label:e.AgencyName,IsCredit:e.IsCredit,IsAdvPmt:e.IsAdvPmt,IsPDC:e.IsPDC,CreditDays:e.CreditDays,BusinessTypeCode:e.BusinessType.BusinessTypeCode,BusinessTypeName:e.BusinessType.BusinessTypeName}))):[];v(o),f(c)})(e.value,e.label)},setSelectedAgency:k,selectedAgency:Z,agencyList:m,brandList:x,setSelectedBrand:w,selectedBrand:I,formState:q,setFormState:V,handleInputChange2:(e,t)=>{V((a=>(0,n.Z)((0,n.Z)({},a),{},{[t]:e})))},displayMoreOption:E,setDisplayMoreOption:A,displaySpots:M,OpenAvailableSpots:async e=>{R(!0);const t=await(0,l.Bi)(q,B,T,$,J.LocationCode,J.ChannelCode);if(200==t.status){if("ok"==t.data)return void F([]);const e=t.data.map(((e,t)=>(0,n.Z)({srno:t+1},e)));F(e)}else 204==t.status&&F([])},commercialList:N,setSelectedCommercial:_,selectedCommercial:T,setDisplaySpots:R}),M?(0,p.jsxs)(c.Zb,{className:"mt-4",header:W,children:[(0,p.jsx)(y,{data:z,columns:[{header:"Agency",accessorKey:"AgencyName"},{header:"Brand",accessorKey:"BrandName"},{header:"Commercial",accessorKey:"CommercialCaption"},{header:"Duration",accessorKey:"CommercialDuration"},{header:"Transmission Time",accessorKey:"TransmissionTime"},{header:"Content",accessorKey:"ContentName"},{header:"Schedule Date",accessorKey:"ScheduleDate"},{header:"Schedule Time",accessorKey:"ScheduleTime"},{header:"Spot Rate",accessorKey:"SpotRate"},{header:"Spot Amount",accessorKey:"SpotAmount"}],setselectedItem:U,selectedItem:K}),(0,p.jsx)(r.gi,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,p.jsxs)("div",{className:"md:flex items-center",children:[(0,p.jsx)(c.zx,{className:"mx-2",onClick:()=>R(!M),children:"Discard"}),(0,p.jsx)(c.zx,{className:"mx-2",variant:"solid",onClick:()=>{T.value>0?(async()=>{const t=K.map((t=>({Id:t.Id,CommercialCode:e.value,BookingStatus:""})));try{if(200===(await(0,g._K)("REPLACEMENT",t,0)).status)(0,h.openNotification)("success","Caption Replaced Successfully"),U([]),O(!0),R(!1),_(null),w(null),P(null),k(null)}catch(a){if(500===a.response.status)return void(0,h.openNotification)("danger","Server Error.")}})():(0,h.openNotification)("warning","Please Select Replace Commercial")},children:"Replace"})]})})]}):null]})}},60488:(e,t,a)=>{"use strict";a.d(t,{Dh:()=>p,SE:()=>h,SU:()=>y,a1:()=>d,aP:()=>i,f$:()=>C,rp:()=>u,yw:()=>f});var n=a(1413),o=(a(81320),a(72791)),c=a(56355),r=a(2803),s=a(80184);const l=e=>e.split(":").map((e=>e.padStart(2,"0"))).join(":").substring(0,11);function i(e){let t=0;const a=[];return e.forEach((e=>{"NTC"!==e.F_C_S_P&&t++;const o=(0,n.Z)((0,n.Z)({},e),{},{PrimaryID:t});a.push(o)})),a}function d(e,t,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"CM",c=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,i="00:00:00:00",d=c||"00:00:00:00";return e.map(((e,u)=>{if(r&&"NTC"===e.F_C_S_P&&"DTM"===e.NtcTypeName)return e;if("NTC"===e.F_C_S_P||"BR"===e.F_C_S_P)return e.OffsetStartTime?(0,n.Z)((0,n.Z)({},e),{},{Start_Time:e.OffsetStartTime,Tel_Time:e.OffsetStartTime}):(0,n.Z)((0,n.Z)({},e),{},{Start_Time:"00:00:00:00",Tel_Time:"00:00:00:00",OffsetStartTime:"00:00:00:00"});let h=d;if(t)return"CT"!==e.F_C_S_P?e.F_C_S_P===o&&a||"NTC"===e.F_C_S_P||"BR"===e.F_C_S_P?(d=l(d),(0,n.Z)((0,n.Z)({},e),{},{Start_Time:d,Tel_Time:d})):(h=m(d,i,s),i=e.Duration,h=l(h),d=l(h),(0,n.Z)((0,n.Z)({},e),{},{Start_Time:h,Tel_Time:h})):(d=e.FPC_Time+":00:00",i=e.Duration,h=l(h),d=l(d),(0,n.Z)((0,n.Z)({},e),{},{Start_Time:d,Tel_Time:d}));if(0===u)d=c||e.Start_Time,i=e.Duration;else{if(h=m(d,i,s),h=l(h),d=l(h),"NTC"===e.F_C_S_P&&a||"BR"===e.F_C_S_P)return(0,n.Z)((0,n.Z)({},e),{},{Start_Time:d,Tel_Time:d});i=e.Duration,h=l(h),d=l(h)}return(0,n.Z)((0,n.Z)({},e),{},{Start_Time:h,Tel_Time:h})}))}const m=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24;try{const n=60,o=60,c=24,[r,s,l,i]=e.split(":").map(Number),[d,m,u,h]=t.split(":").map(Number);let p=i+h,C=Math.floor(p/a);p%=a;let f=l+u+C,x=Math.floor(f/n);f%=n;let y=s+m+x,g=Math.floor(y/o);y%=o;let S=r+d+g;S%=c;return String(S).padStart(2,"0")+":"+String(y).padStart(2,"0")+":"+String(f).padStart(2,"0")+":"+String(p).padStart(2,"0")}catch(n){throw n}};function u(e){let t=0;return e.forEach((e=>{const[a,n,o,c]=e.CommercialDuration.split(":").map((e=>parseInt(e)));t+=3600*a+60*n+o+c/30})),t}function h(){document.getElementsByClassName("stacked-side-nav")[0].classList.add("hidden");document.getElementsByClassName("footer")[0].classList.add("hidden")}function p(){var e,t;const a=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=a&&(null===a||void 0===a||a.classList.add("hidden")),null===(e=document.getElementById("rightIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("leftIndicator"))||void 0===t||t.classList.add("hidden")}function C(){var e,t;const a=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=a&&(null===a||void 0===a||a.classList.remove("hidden")),null===(e=document.getElementById("leftIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("rightIndicator"))||void 0===t||t.classList.add("hidden")}const f=(e,t)=>e.map((e=>{let a=(0,n.Z)({},e);return"S"===a.F_C_S_P||a.F_C_S_P,"NTC"===a.F_C_S_P?(a.PrimaryID=t.PrimaryID,a.SeasonNo=t.SeasonNo,a.Ep_No=t.Ep_No,a.ContentCode=t.ContentCode,a.BreakNumber=t.BreakNumber,a.SeasonNo=t.SeasonNo,a.FPC_ID=t.FPC_ID):"CM"===a.F_C_S_P?(a.PrimaryID=t.PrimaryID,a.SeasonNo=t.SeasonNo,a.Ep_No=t.Ep_No,a.ContentCode=t.ContentCode,a.BreakNumber=t.BreakNumber,a.SeasonNo=t.SeasonNo,a.FPC_ID=t.FPC_ID,a.ScheduleTime=t.ScheduleTime):(a.SeasonNo=t.SeasonNo,a.Ep_No=t.Ep_No,a.ContentCode=t.ContentCode,a.BreakNumber=t.BreakNumber,a.SeasonNo=t.SeasonNo,a.FPC_ID=t.FPC_ID),a.SequenceNo=t.SequenceNo,a.Start_Time="00:00:00:00",a})),x=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))};const y=e=>{let{Progress:t,PromoSchdulingSave:a,openNotification:n}=e;const[l,i]=(0,o.useState)(0),[d,m]=(0,o.useState)(0),[u,h]=(0,o.useState)(0),[p,C]=(0,o.useState)(!1),f=(0,o.useRef)(!0),[y,g]=(0,o.useState)(!1),[S,v]=(0,o.useState)(""),N=e=>{let{percent:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{onClick:()=>{g(!0)},style:{cursor:"pointer"},children:(0,s.jsx)("p",{style:{marginTop:"5px",fontSize:"12px",color:"white"},children:x(d)})}),(0,s.jsx)("p",{style:{cursor:"pointer",color:"white",marginLeft:"10px"},onClick:()=>{C(!p)},children:p?(0,s.jsx)(c.Wh,{}):(0,s.jsx)(c.gmG,{})})]})};(0,o.useEffect)((()=>{j(10)}),[]),(0,o.useEffect)((()=>{let e;return p&&d>0?e=setInterval((()=>{m((e=>Math.max(e-1,0))),i((e=>{const t=100-d/(u||1)*100;return Math.min(t,100)}))}),1e3):0===d&&p&&(a(),n("info"),m(u)),()=>clearInterval(e)}),[p,d,u]),(0,o.useEffect)((()=>{f.current&&(f.current=!1)}),[d]);const j=e=>{const t=parseInt(e,10);if(!isNaN(t)&&t>0){const e=60*t;m(e),h(e),i(0),C(!0)}},D=e=>{console.log("onDialogClose",e),g(!1)};return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(r.Vq,{isOpen:y,width:300,height:200,onClose:D,onRequestClose:D,children:(0,s.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,s.jsx)("h5",{className:"mb-4",children:"Set Timer"}),(0,s.jsx)("div",{className:"flex align-center",children:(0,s.jsx)(r.II,{maxLength:"2",value:S,onChange:e=>{const t=e.target.value;(/^\d{0,2}$/.test(t)||""===t)&&v(t)}})}),(0,s.jsxs)("div",{className:"text-right mt-6",children:[(0,s.jsx)(r.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:()=>{j(S),D()},children:"Set"}),(0,s.jsx)(r.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:D,children:"Cancel"})]})]})}),(0,s.jsx)("div",{className:"flex",style:{width:"120px"},children:(0,s.jsx)(t,{variant:"circle",className:"mx-6",size:"sm",width:50,percent:l,customInfo:(0,s.jsx)(N,{percent:l})})})]})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{},38416:(e,t,a)=>{var n=a(64062);e.exports=function(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},42122:(e,t,a)=>{var n=a(38416);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}e.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},95036:(e,t,a)=>{var n=a(18698).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64062:(e,t,a)=>{var n=a(18698).default,o=a(95036);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=7728.aecb293a.chunk.js.map