"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4364,5682],{87350:(e,t,a)=>{a.d(t,{Bs:()=>A,C4:()=>E,CY:()=>X,D7:()=>G,DD:()=>w,EF:()=>ne,FN:()=>k,FZ:()=>v,Fb:()=>i,Gm:()=>g,Hg:()=>W,Kc:()=>x,Ko:()=>D,LI:()=>f,MC:()=>N,NP:()=>P,Nq:()=>m,OK:()=>M,QI:()=>U,SU:()=>Q,Tf:()=>L,Ux:()=>H,V9:()=>S,VG:()=>h,VT:()=>K,Ww:()=>b,XC:()=>q,Xc:()=>r,_V:()=>Z,ae:()=>Y,c0:()=>F,c1:()=>C,c_:()=>ee,cn:()=>O,db:()=>j,f7:()=>z,fL:()=>u,fi:()=>p,gK:()=>V,hE:()=>d,hG:()=>J,je:()=>l,n5:()=>I,nR:()=>te,nY:()=>T,nr:()=>R,pp:()=>ae,qg:()=>oe,sb:()=>B,sd:()=>y,t2:()=>$,w4:()=>_,xl:()=>s});var o=a(54048),n=a(46152);const c=a(74569);async function r(e,t){const a=t?"&search=".concat(t):"",o="/promomaster/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode).concat(a);return n.Z.fetchData({url:o,method:"get",data:e})}async function s(e,t){let a="/promomaster/filter/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode);return t.PromoTypeCode&&(a+="&PromoTypeCode=".concat(t.PromoTypeCode)),t.Caption&&(a+="&Caption=".concat(t.Caption)),t.Duration[0]&&(a+="&Duration1=".concat(t.Duration[0])),t.Duration[1]&&(a+="&Duration2=".concat(t.Duration[1])),t.VideoID&&(a+="&VideoID=".concat(t.VideoID)),n.Z.fetchData({url:a,method:"get",data:t})}async function i(e){return n.Z.fetchData({url:"/smartshufflesetting/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function d(e,t){return n.Z.fetchData({url:"/smartshufflesetting/".concat(t),method:"put",data:e})}async function l(e){return n.Z.fetchData({url:"/smartshufflesetting/",method:"post",data:e})}async function h(e){return n.Z.fetchData({url:"/songgenre/",method:"get",data:e})}async function u(e){return n.Z.fetchData({url:"/songcategory/",method:"get",data:e})}async function m(e){return n.Z.fetchData({url:"/songmaster/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function p(e){return n.Z.fetchData({url:"/songmaster/".concat(e),method:"get"})}const C=(e,t)=>fetch(o.Z.apiPrefix+"/songgenre/".concat(e.SongGenreCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongGenreName:e.SongGenreName,IsActive:e.IsActive})}),g=(e,t)=>fetch(o.Z.apiPrefix+"/moviealbummaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({MovieAlbumName:e.MovieAlbumName,IsActive:e.IsActive})}),f=(e,t)=>fetch(o.Z.apiPrefix+"/moviealbummaster/".concat(e.MovieAlbumCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({MovieAlbumName:e.MovieAlbumName,IsActive:e.IsActive})}),y=(e,t)=>(console.log(e),fetch(o.Z.apiPrefix+"/songcategory/".concat(e.SongCategoryCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongCategoryName:e.SongCategoryName,IsActive:e.IsActive})})),x=(e,t)=>fetch(o.Z.apiPrefix+"/songgenre",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongGenreName:e.SongGenreName,IsActive:e.IsActive})}),D=(e,t)=>fetch(o.Z.apiPrefix+"/songcategory",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongCategoryName:e.SongCategoryName,IsActive:e.IsActive})}),S=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/promomaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),L=(e,t,a)=>new Promise(((n,r)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/promomaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(s).then((e=>{n(e)})).catch((e=>{r(e)}))}));async function b(e){return n.Z.fetchData({url:"/promotypemaster/drop/",method:"get",data:e})}async function Z(e){return n.Z.fetchData({url:"/songgenre/drop/",method:"get",data:e})}async function v(e){return n.Z.fetchData({url:"/tapetypemaster/drop/",method:"get",data:e})}async function j(e){return n.Z.fetchData({url:"/songtempo/drop/",method:"get",data:e})}async function T(e,t,a){const o="promoscheduling/USP_Sch_PromoScheduling_GetDetails/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return n.Z.fetchData({url:o,method:"get"})}async function N(e,t,a){const o="ntcscheduling/USP_Sch_NTCScheduling_GetDetails/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return n.Z.fetchData({url:o,method:"get"})}async function P(e,t,a){const o="songscheduling/USP_Sch_SongScheduling_GetDetails/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return n.Z.fetchData({url:o,method:"get"})}async function A(e,t,a){const o="transmissionlog/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return n.Z.fetchData({url:o,method:"get"})}async function B(e,t){const a="transmissionlog/Scheduling_FinalLog_ProgramChange?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t);return n.Z.fetchData({url:a,method:"get"})}async function _(e,t){const a="/transmissionlog/USP_Sch_Finalog_ExportCsv/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=S");return n.Z.fetchData({url:a,method:"get"})}async function w(e){const t="restore/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(e.TelecastDate,"&FormName=").concat(e.FormName);return n.Z.fetchData({url:t,method:"get"})}async function R(e,t,a){const o="songscheduling/GetSongschedulDetails/?SongCode=".concat(e,"&TelecastDate=").concat(t,"&InHour=").concat(a);return n.Z.fetchData({url:o,method:"get"})}async function k(e){const t="restore/audit_data/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(e.TelecastDate,"&FormName=").concat(e.FormName,"&D_date=").concat(e.D_date);return n.Z.fetchData({url:t,method:"post"})}async function O(e){const t="commercialscheduling/restoreauditcommercialscheduling/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&ScheduleDate=").concat(e.ScheduleDate,"&D_date=").concat(e.D_date);return n.Z.fetchData({url:t,method:"post"})}async function z(e,t){const a="commercialscheduling/getauditpromoscheduling/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&ScheduleDate=").concat(t);return n.Z.fetchData({url:a,method:"get"})}async function F(e,t){const a="globle/GetDailyFPCStatus?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&Screen=").concat(e.Screen,"&TelecastDate=").concat(t);return n.Z.fetchData({url:a,method:"get"})}async function M(e,t,a,o){const c="promoscheduling/USP_Sch_Get_All_Promo/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&PromoTypeCode=").concat(a,"&PromoName=").concat(o);return n.Z.fetchData({url:c,method:"get"})}async function I(e,t,a,o){const c="ntcmaster/USP_Sch_Get_All_NTC/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&NTCTypeCode=").concat(a,"&NTCName=").concat(o);return n.Z.fetchData({url:c,method:"get"})}async function G(e,t,a,o){const c="songscheduling/USP_Sch_Get_All_Song/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&SongType=").concat(a,"&OrderBy=2&SearchText=").concat(o);return n.Z.fetchData({url:c,method:"get"})}async function U(e){return n.Z.fetchData({url:"/musicagencymst/drop/",method:"get",data:e})}async function q(e){return n.Z.fetchData({url:"/moviealbummaster/drop/",method:"get",data:e})}async function W(e){return n.Z.fetchData({url:"/transmissionlog/addaudit/",method:"post",data:e})}async function J(e){return n.Z.fetchData({url:"/transmissionlog/insertdata/",method:"post",data:e})}async function E(e){return n.Z.fetchData({url:"/transmissionlog/updatedata/",method:"put",data:e})}async function V(e,t){return n.Z.fetchData({url:"/transmissionlog/deletedata/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t),method:"delete"})}const Y=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/promoscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),H=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/songscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),K=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/ntcscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),Q=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/transmissionlog/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),X=(e,t)=>(console.log("url"),new Promise(((a,n)=>{let r={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))}))),$=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/songmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),ee=(e,t,a)=>new Promise(((n,r)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/songmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(s).then((e=>{n(e)})).catch((e=>{r(e)}))})),te=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/columnsetting/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),ae=(e,t,a)=>new Promise(((n,r)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/bookingdetails/bookingstatuschange/?BookingStatus=".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};c.request(s).then((e=>{n(e)})).catch((e=>{r(e)}))}));async function oe(e){return n.Z.fetchData({url:"teammapping/",method:"post",data:e})}async function ne(e){return n.Z.fetchData({url:"geneventcontent/Contentadd/",method:"post",data:e})}},4364:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var o=a(1413),n=a(72791),c=a(94604),r=a(25808),s=a(13496),i=a(85214),d=a(20724),l=a(60364),h=a(9494),u=a(45682),m=a(2803),p=a(30203),C=a(45987),g=a(98672),f=a(46504),y=a(57689),x=a(54748),D=a(91143),S=a(81320),L=a(87350),b=a(80184);const Z=["name","multipleSelection","value","onChange"],v=e=>{const t=(0,l.useSelector)((e=>e.locale.selectedChannel)),{name:a,multipleSelection:c,value:r,onChange:s}=e,i=(0,C.Z)(e,Z),[d,h]=(0,n.useState)(new Date),m=(0,y.s0)(),[p,v]=(0,n.useState)(null),[j,T]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{try{T(!0);let e={};e.LocationCode=t.LocationCode,e.ChannelCode=t.ChannelCode,e.Screen="ASRUN";let a,o=(0,x.Tk)(d);v(null),a=await(0,L.c0)(e,o),a&&(200===a.status?v((0,x.jY)(a.data)):404==a.status?((0,S.openNotification)("warning","Data Not Found"),v(null)):500==a.status&&((0,S.openNotification)("danger","Server Error."),v(null))),T(!1)}catch(e){(0,S.openNotification)("danger","Something went wrong while fetching FPC Status"),T(!1),console.error(e)}})()}),[d,t]),(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(u.default,{showLoader:j}),(0,b.jsx)(g.Z,(0,o.Z)({dayClassName:(e,t)=>{let{selected:a}=t;const o=null===p||void 0===p?void 0:p.find((t=>new Date(t.start).getDate()===e.getDate()&&new Date(t.start).getMonth()===e.getMonth()));const n=new Date;return c=n,r=new Date(null===o||void 0===o?void 0:o.start),c.getFullYear()===r.getFullYear()&&c.getMonth()===r.getMonth()&&c.getDate()===r.getDate()?"text-red-600 bg-orange-400 border-none":o&&!a?"text-red-600 bg-green-400":a?"text-red bg-red-400":"text-gray-700 dark:text-gray-200 ";var c,r},renderDay:e=>{const t=e.getDate();return 0!==t?(0,b.jsx)("span",{children:t}):(0,b.jsxs)("span",{className:"relative flex justify-center items-center w-full h-full",children:[t,(0,b.jsx)(D.Z,{className:"absolute bottom-1",innerClass:"h-1 w-1"})]})},onChange:e=>{if("FPC"==a){const a=encodeURIComponent(JSON.stringify({objChannel:t}));m("/addfpcNew?dt="+(0,x.Tk)(e)+"&chl="+a)}if("Daily"==a){const a=encodeURIComponent(JSON.stringify({objChannel:t}));m("/DailyFPCApp?dt="+(0,x.Tk)(e)+"&chl="+a)}if("ASRUN"==a&&m("/AsrunMatching"),!c)return s(e);const o=r.some((t=>(0,f.Fo)(t,e)));return s(o?r.filter((t=>!(0,f.Fo)(t,e))):[...r,e])},onMonthChange:e=>h(e),value:r},i))]})},{TabNav:j,TabList:T,TabContent:N}=m.mQ,P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],A={chart:{stacked:!0,toolbar:{show:!1}},dataLabels:{enabled:!1},plotOptions:{bar:{columnWidth:"40%",horizontal:!1,borderRadius:4,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}},xaxis:{axisTicks:{show:!1}},legend:{markers:{strokeWidth:0}}},B={chart:{toolbar:{show:!1}},dataLabels:{enabled:!1},plotOptions:{bar:{columnWidth:"40%",horizontal:!1,borderRadius:4,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}},xaxis:{axisTicks:{show:!1}},legend:{markers:{strokeWidth:0}}};const _=function(){const e=(0,l.useSelector)((e=>e.locale.selectedChannel)),t=(0,n.useRef)(null),a=(0,n.useRef)(null),[C,g]=(0,n.useState)([]),[f,y]=(0,n.useState)([]),[x,D]=(0,n.useState)(!1);(0,n.useEffect)((()=>{D(!0);const t={par_LocationCode:e.LocationCode,par_ChannelCode:e.ChannelCode};(0,h.apiCallstoreprocedure)("usp_Billing_GetMonthlyBookedRevenue",t).then((e=>{200===e.status&&(g(e.data),console.log(e.data)),D(!1)})).catch((()=>{g([]),D(!1)}))}),[e]),(0,n.useEffect)((()=>{D(!0);const t={par_LocationCode:e.LocationCode,par_ChannelCode:e.ChannelCode};(0,h.apiCallstoreprocedure)("GetMonthlyBookedvsBilledRevenue",t).then((e=>{200===e.status&&(console.log("data",e.data),y(e.data)),D(!1)})).catch((()=>{y([]),D(!1)}))}),[e]),(0,n.useEffect)((()=>{t.current&&t.current.chart.windowResizeHandler(),a.current&&a.current.chart.windowResizeHandler()}),[C,f]);const{categories:S,series:L}={categories:(Z=C).map((e=>"".concat(e.RevenueMonth,"-").concat(e.RevenueYear))),series:[{name:"Booked",data:Z.map((e=>e.BookedRevenue)),color:i.TW_COLORS.emerald[500]},{name:"Dropped",data:Z.map((e=>e.DroppedRevenue)),color:i.TW_COLORS.blue[500]},{name:"Cancelled",data:Z.map((e=>e.CancelledRevenue)),color:i.TW_COLORS.rose[500]}]};var Z;const{categories:_,series:w}=(e=>(console.log(e),{categories:e.map((e=>{const t=parseInt(e.RevenueMonth,10)-1;return"".concat(P[t],"-").concat(e.RevenueYear)})),series:[{name:"Booked",data:e.map((e=>e.BookedRevenue)),color:i.TW_COLORS.emerald[500]},{name:"Billed",data:e.map((e=>e.BilledRevenue)),color:i.TW_COLORS.blue[500]}]}))(f),R={options:(0,o.Z)((0,o.Z)({},A),{},{xaxis:(0,o.Z)((0,o.Z)({},A.xaxis),{},{categories:S})}),series:L},k={options:(0,o.Z)((0,o.Z)({},B),{},{xaxis:(0,o.Z)((0,o.Z)({},B.xaxis),{},{categories:_})}),series:w};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{Name:"Billing Dashboard",Page:"Billing",Links:"Billing"}),(0,b.jsx)("div",{className:"grid grid-cols-".concat(c.mL.length," gap-4"),children:(0,b.jsx)(r.Z,{shortcuts:c.mL})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"col-span-1 web-card pb-1 pt-3.5 mb-0 dark:!bg-[#1f2639] !bg-[#fff] border-none",children:[(0,b.jsxs)("h4",{className:"px-3.5",children:["Monthly Revenue ",(0,b.jsx)("span",{style:{fontSize:"11px"},children:"[Lakhs]"})]}),(0,b.jsx)(s.Z,{ref:t,options:R.options,series:R.series,type:"bar",width:"100%",height:300})]}),(0,b.jsxs)("div",{className:"col-span-1 web-card pb-1 pt-3.5 mb-0 dark:!bg-[#1f2639] !bg-[#fff] border-none",children:[(0,b.jsxs)("h4",{className:"px-3.5",children:["Booked vs Billed ",(0,b.jsx)("span",{style:{fontSize:"11px"},children:"[Lakhs]"})]}),(0,b.jsx)(u.default,{showLoader:x}),(0,b.jsx)(s.Z,{ref:a,options:k.options,series:k.series,type:"bar",width:"100%",height:300})]}),(0,b.jsx)("div",{className:"col-span-1 px-5 dark:!bg-[#1f2639] !bg-[#fff]",style:{padding:"10px",borderRadius:"5px"},children:(0,b.jsxs)(m.mQ,{defaultValue:"tab1",children:[(0,b.jsx)(T,{children:(0,b.jsx)(j,{value:"tab1",icon:(0,b.jsx)(p.cNx,{}),children:"Asrun"})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)(N,{value:"tab1",children:(0,b.jsx)("div",{className:"",children:(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(v,{multipleSelection:!0,value:"",name:"ASRUN"})})})})})]})})]})]})}},45682:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var o=a(2803),n=(a(72791),a(80184));const c=function(e){let{showLoader:t}=e;return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,n.jsx)(o.$j,{size:"3.25rem"})}):(0,n.jsx)(n.Fragment,{})})}}}]);
//# sourceMappingURL=4364.ba18e6b0.chunk.js.map