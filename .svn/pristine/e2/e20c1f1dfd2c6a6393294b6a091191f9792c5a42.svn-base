"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4279,5682],{19223:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(2803),r=(a(72791),a(56355)),l=a(81320),n=a(80184);const o=function(e){let{title:t,total:a,data:o,setCurrentDate:c,currentDate:i}=e;const d=[{color:"blue-500"},{color:"yellow-500"},{color:"green-500"},{color:"red-500"}];return(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("h4",{className:"mb-4",children:t}),(0,n.jsxs)("div",{className:"flex justify-between items-center col-span-3 mb-2",children:[(0,n.jsx)("div",{className:"p-2 rounded hover:bg-sky-700  cursor-pointer",onClick:()=>{const e=new Date(i);e.setDate(e.getDate()-1),e.setMonth(e.getMonth()),c(e)},children:(0,n.jsx)(r.bUI,{})}),(0,n.jsxs)("div",{className:"flex mb-0 mt-0",children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"600"},className:"dark:!text-amber-400 !text-amber-400 ",children:i.toLocaleDateString("en-US",{weekday:"long"})}),(0,n.jsxs)("p",{style:{fontSize:16,fontWeight:"600",marginLeft:5},className:"dark:!text-gray-400 !text-gray-600",children:[","," ",i.toLocaleDateString("en-US",{day:"numeric"})," ",i.toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),(0,n.jsx)("div",{className:"p-2 rounded hover:bg-sky-700  cursor-pointer",onClick:()=>{const e=new Date(i);e.setDate(e.getDate()+1),e.setMonth(e.getMonth()),c(e)},children:(0,n.jsx)(r.Dli,{})})]}),(0,n.jsx)("div",{className:"grow overflow-hidden hover:overflow-y-scroll mt-2",children:o.map(((e,t)=>{var r;return(0,n.jsxs)("div",{className:0!==t?"mt-5":"",children:[(0,n.jsxs)("div",{className:"flex items-center mb-2",children:[(0,n.jsx)("h6",{className:"text-sm",children:(0,n.jsx)(l.CurrencyFormatter,{amountString:e.RevenueAmount})}),(0,n.jsxs)("p",{className:"ml-2 font-regular",style:{fontSize:13,color:"#9B9B9B"},children:["(",e.FieldType,")"]})]}),(0,n.jsx)(s.Ex,{percent:e.RevenueAmount*a.value/100,color:null===(r=d[t])||void 0===r?void 0:r.color,customInfo:(0,n.jsx)(n.Fragment,{})})]})}))}),(0,n.jsxs)("div",{className:"flex items-baseline mb-1 mt-2",children:[(0,n.jsx)("h6",{style:{color:"rgba(255, 255, 255, 0.8)"},className:"font-semibold text-xl",children:(0,n.jsx)(l.CurrencyFormatter,{amountString:a.value})}),(0,n.jsxs)("p",{className:"ml-2 font-regular text-sm",style:{color:"rgba(255, 255, 255, 0.8)"},children:["(",a.label,")"]})]})]})}},45682:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var s=a(2803),r=(a(72791),a(80184));const l=function(e){let{showLoader:t}=e;return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,r.jsx)(s.$j,{size:"3.25rem"})}):(0,r.jsx)(r.Fragment,{})})}},64279:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(72791),r=a(60364),l=a(19129),n=a(56355),o=a(13496),c=a(25808),i=a(19223),d=a(20724),h=a(9494),m=a(94604),u=a(85214),x=a(43235),p=a(45682),f=a(80184);const g=e=>{const t=new Date(e),a=new Date(t);return a.setDate(t.getDate()+(6-t.getDay())),{start:(0,x.WU)(t,"yyyy-MM-dd"),end:(0,x.WU)(a,"yyyy-MM-dd")}},v=()=>{var e;const t=(0,r.useSelector)((e=>e.locale.selectedChannel)),[a,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(g(new Date)),[y,w]=(0,s.useState)(new Date),[C,N]=(0,s.useState)({options:{},series:[]}),[D,k]=(0,s.useState)({options:{},series:[]}),[S,R]=(0,s.useState)({title:"",total:{},data:[]}),L=(0,s.useCallback)((async()=>{v(!0);try{const{data:e}=await(0,h.apiCallstoreprocedure)("GetTodayRevenueSummary",{LocationCode:t.LocationCode,ChannelCode:t.ChannelCode,par_NTCFlag:0,ScheduleDate:y}),a=e.find((e=>"Total Revenue"===e.FieldType));R({title:"Revenue Summary",total:{label:"Total Revenue",value:(null===a||void 0===a?void 0:a.RevenueAmount)||"N/A"},data:e.filter((e=>"Total Revenue"!==e.FieldType))})}catch(e){console.error("Error fetching revenue data:",e)}finally{v(!1)}}),[t,y]);(0,s.useEffect)((()=>{L()}),[L]),(0,s.useEffect)((()=>{(async()=>{v(!0);try{const{data:e}=await(0,h.apiCallstoreprocedure)("GetMonthlyBookedRevenue",{LocationCode:t.LocationCode,ChannelCode:t.ChannelCode,par_NTCFlag:0});e.length&&N({options:{tooltip:{y:{formatter:e=>"".concat(e," Lakhs")}},chart:{toolbar:{show:!1}},xaxis:{categories:e.map((e=>((e,t)=>{var a;return(null===(a=u.Month.find((t=>t.id===e)))||void 0===a?void 0:a.name)+"-"+t||null})(e.RevenueMonth,e.RevenueYear)))},stroke:{curve:"smooth"},dataLabels:{enabled:!1},legend:{show:!0}},series:[{name:"Bookings",data:e.map((e=>e.BookedRevenue))}]});const{data:a}=await(0,h.apiCallstoreprocedure)("GetBookvsAvailableInvStatus",{LocationCode:t.LocationCode,ChannelCode:t.ChannelCode,par_NTCFlag:0,par_FromTelecastDate:b.start,par_ToTelecastDate:b.end});k({options:{xaxis:{categories:a.map((e=>(0,x.WU)(new Date(e.ScheduleDate),"dd-MMM")))},chart:{stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"40%",horizontal:!1,borderRadius:4,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}},dataLabels:{enabled:!1,style:{color:u.TW_COLORS.gray[300],fontWeight:400,fontSize:8}},legend:{markers:{strokeWidth:0}}},series:[{name:"Booked",data:a.map((e=>e.ConsumedInventory)),color:"#b69f15"},{name:"Available",data:a.map((e=>e.BalanceInventory)),color:"#4675bb"}]})}catch(e){console.error("Error fetching chart data:",e)}finally{v(!1)}})()}),[t,b]);const M=(0,s.useRef)(null),T=(0,s.useRef)(null);return(0,s.useEffect)((()=>{M.current&&T.current&&(M.current.chart.windowResizeHandler(),T.current.chart.windowResizeHandler())}),[C,D]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.default,{showLoader:a}),(0,f.jsxs)("div",{children:[(0,f.jsx)(d.Z,{Name:"Sales Dashboard",Page:"Sales",Links:"SalesAdmin"}),(0,f.jsx)("div",{className:"grid grid-cols-".concat(m.lJ.length," gap-4"),children:(0,f.jsx)(c.Z,{shortcuts:m.lJ})}),(0,f.jsxs)("div",{className:"grid grid-cols-9 gap-4",children:[(0,f.jsxs)("div",{className:"col-span-3 web-card pb-1 pt-3.5 mb-0 px-2 h-[420px] flex flex-col dark:!bg-[#1f2639] !bg-[#fff] ",children:[(0,f.jsxs)("h4",{className:"pb-3 flex items-center px-2",style:{borderBottom:"1px solid #595959"},children:[(0,f.jsx)(l.MvL,{className:"mr-2",size:23})," Bookings"," ",(0,f.jsxs)("span",{style:{fontSize:"11px"},className:"ml-2",children:[" ","[Lakhs]"]})]}),(0,f.jsxs)("p",{className:"mt-3 pl-4 dark:!text-gray-400 !text-black ",children:[null===(e=C.series[0])||void 0===e?void 0:e.data.length," months"]}),(0,f.jsx)("div",{className:"grow",children:(0,f.jsx)(o.Z,{ref:M,options:C.options,series:C.series,type:"line",width:"100%",height:"100%"})})]}),(0,f.jsx)("div",{className:"col-span-3 web-card p-3.5  h-[420px] overflow-y-scroll flex flex-col dark:!bg-[#1f2639] !bg-[#fff] ",children:(0,f.jsx)("div",{className:"grow",children:(0,f.jsx)(i.Z,{title:S.title,total:S.total,data:S.data,setCurrentDate:w,currentDate:y})})}),(0,f.jsxs)("div",{className:"col-span-3 web-card pt-3.5 pb-1 mb-0 h-[420px] flex flex-col dark:!bg-[#1f2639] !bg-[#fff]",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center col-span-3 ",children:[(0,f.jsx)("div",{className:"p-2 rounded hover:bg-sky-700  cursor-pointer",onClick:()=>j(g(new Date(b.start).setDate(new Date(b.start).getDate()-7))),children:(0,f.jsx)(n.bUI,{})}),(0,f.jsxs)("h4",{className:"px-2",children:["Inventory ",(0,f.jsx)("span",{style:{fontSize:"11px"},children:"[Minutes]"})," "]}),(0,f.jsx)("div",{className:"p-2 rounded hover:bg-sky-700  cursor-pointer",onClick:()=>j(g(new Date(b.start).setDate(new Date(b.start).getDate()+7))),children:(0,f.jsx)(n.Dli,{})})]}),(0,f.jsx)("div",{className:"grow",children:(0,f.jsx)(o.Z,{ref:T,options:D.options,series:D.series,type:"bar",width:"100%",height:"100%"})})]})]})]})]})}}}]);
//# sourceMappingURL=4279.0a75fc32.chunk.js.map