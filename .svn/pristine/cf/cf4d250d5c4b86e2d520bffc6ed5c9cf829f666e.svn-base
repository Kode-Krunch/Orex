{"version":3,"file":"static/js/7602.a49d6529.chunk.js","mappings":"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","sources":["views/Master/DesignationMaster/Designationmaster.js"],"sourcesContent":["import { Card, Notification, toast as toa } from 'components/ui';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  apiGetDesignationMaster,\r\n  Postdesignation,\r\n  Putdesignation,\r\n} from 'services/MasterService';\r\nimport HeaderExtra from 'views/Controls/HeaderExtra';\r\nimport { Toast } from 'primereact/toast';\r\nimport { useSelector } from 'react-redux';\r\nimport { ConfirmDialog } from 'primereact/confirmdialog';\r\nimport DisplaytablewithEdit, {\r\n  headerExtra,\r\n} from 'views/Controls/DisplaytablewithEdit';\r\n\r\nconst DesignationMaster = () => {\r\n  const token = useSelector((state) => state.auth.session.token);\r\n\r\n  const count = useRef(0);\r\n\r\n  function closeAfter2000ms(mes, ty) {\r\n    toa.push(\r\n      <Notification\r\n        closable\r\n        type={ty}\r\n        duration={1000}\r\n        title={ty.charAt(0).toUpperCase() + ty.slice(1)}\r\n      >\r\n        {mes}\r\n      </Notification>,\r\n    );\r\n  }\r\n  const [DesignationName, setDesignationName] = useState('');\r\n  const [ShortName, setShortName] = useState('');\r\n  const [addnew, setaddnew] = useState(false);\r\n  const [globalFilter, setGlobalFilter] = useState('');\r\n\r\n  const [visible, setVisible] = useState(false);\r\n  const [yup, setyup] = useState();\r\n  const toast = useRef(null);\r\n\r\n  const accept = () => {\r\n    toggleSwitch(yup);\r\n  };\r\n  const [Designation, setDesignation] = useState();\r\n\r\n  useEffect(() => {\r\n    count.current = count.current + 1;\r\n\r\n    if (count.current == 1) {\r\n      (async (values) => {\r\n        const respDesignation = await apiGetDesignationMaster();\r\n        const reversedDesignationWithNumbers = [...respDesignation.data]\r\n          .reverse()\r\n          .map((category, index) => ({\r\n            ...category,\r\n            serialNumber: index + 1,\r\n          }));\r\n\r\n        setDesignation(reversedDesignationWithNumbers);\r\n        // console.log('SongDesignation',newData)\r\n      })();\r\n    }\r\n  }, []);\r\n\r\n  const onRowEditComplete = (e) => {\r\n    let _Designation = [...Designation];\r\n    let { newData, index } = e;\r\n    console.log(newData);\r\n    _Designation[index].DesignationName = newData.DesignationName;\r\n    _Designation[index].ShortName = newData.ShortName;\r\n    _Designation[index].IsActive = newData.IsActive;\r\n    if (!newData.DesignationName) {\r\n      return;\r\n    }\r\n\r\n    console.log('_Designation', _Designation);\r\n\r\n    Putdesignation(newData, token)\r\n      .then((response) => {\r\n        if (response.status == 204) {\r\n          console.log(response);\r\n          closeAfter2000ms('Data Already Exists.', 'warning');\r\n          return null;\r\n        }\r\n\r\n        if (response.status == 200) {\r\n          closeAfter2000ms('Data Updated Successfull', 'success');\r\n          return null;\r\n        }\r\n\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        // handle successful response\r\n        console.log(data);\r\n        console.log(newData.serialNumber);\r\n        _Designation[index] = data;\r\n        _Designation[index].serialNumber = newData.serialNumber;\r\n        _Designation[index].DesignationName = newData.DesignationName;\r\n        _Designation[index].ShortName = newData.ShortName;\r\n        _Designation[index].IsActive = newData.IsActive;\r\n        setDesignation(_Designation);\r\n        closeAfter2000ms('Data Updated Succesfully', 'success');\r\n      })\r\n      .catch((error) => {\r\n        // handle error\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const addNewRecord = () => {\r\n    if (DesignationName) {\r\n      const newRecord = {\r\n        DesignationName: DesignationName,\r\n        ShortName: DesignationName.substring(0, 2),\r\n        IsActive: 1,\r\n      };\r\n\r\n      Postdesignation(newRecord, token)\r\n        .then((response) => {\r\n          if (response.status == 204) {\r\n            closeAfter2000ms('Data Already Exists.', 'warning');\r\n          }\r\n          if (response.status == 200) {\r\n            newRecord.serialNumber = Designation.length + 1;\r\n            setDesignation((prevDesignation) => [\r\n              ...prevDesignation,\r\n              newRecord,\r\n            ]);\r\n            // show('Data Added Successfully')\r\n            closeAfter2000ms('Data Added Succesfully', 'success');\r\n          }\r\n          setDesignationName('');\r\n          setShortName('');\r\n          setaddnew(false);\r\n        })\r\n        .catch((error) => {\r\n          // handle error\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      closeAfter2000ms('Kindly Enter Designation Name', 'danger');\r\n    }\r\n  };\r\n\r\n  const toggleSwitch = (index) => {\r\n    console.log('Designation', Designation);\r\n    const updatedDesignation = [...Designation];\r\n    let row = updatedDesignation[index];\r\n    row.IsActive = row.IsActive == 1 ? 0 : 1;\r\n    Putdesignation(row, token)\r\n      .then((response) => {\r\n        if (response.status == 204) {\r\n          console.log(response);\r\n          closeAfter2000ms('Data Already Exists.', 'warning');\r\n          return null;\r\n        }\r\n\r\n        if (response.status == 200) {\r\n          closeAfter2000ms('Data Updated Successfull', 'success');\r\n          return null;\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        // handle successful response\r\n        data.serialNumber = row.serialNumber;\r\n        data.IsActive = row.IsActive;\r\n        data.DesignationName = row.DesignationName;\r\n        data.ShortName = row.ShortName;\r\n\r\n        updatedDesignation[index] = data;\r\n        setDesignation(updatedDesignation);\r\n        closeAfter2000ms('Data Updated Succesfully', 'success');\r\n      })\r\n      .catch((error) => {\r\n        // handle error\r\n        console.log(error);\r\n      });\r\n  };\r\n  const columns = [\r\n    { field: 'serialNumber', header: 'Sr.', width: '0.5%' },\r\n    { field: 'DesignationName', header: 'DesignationName', width: '20%' },\r\n    { field: 'ShortName', header: 'ShortName', width: '20%' },\r\n  ];\r\n  return (\r\n    <>\r\n      <Toast ref={toast} />\r\n      <ConfirmDialog\r\n        group=\"declarative\"\r\n        visible={visible}\r\n        onHide={() => setVisible(false)}\r\n        message=\"Are you sure you want to proceed?\"\r\n        header=\"Confirmation\"\r\n        icon=\"pi pi-exclamation-triangle\"\r\n        accept={accept}\r\n      />\r\n      <Card\r\n        header={\r\n          <div className=\"flex justify-between\">\r\n            <div>\r\n              <span className=\"flex items-center\">\r\n                <HeaderExtra\r\n                  ModuleText=\"Programming\"\r\n                  Component={'Designation'}\r\n                />\r\n              </span>\r\n            </div>\r\n            <div\r\n              className=\"flex flex-col items-center\"\r\n              style={{ marginLeft: '-20%' }}\r\n            ></div>\r\n\r\n            <div></div>\r\n          </div>\r\n        }\r\n        headerExtra={headerExtra(\r\n          globalFilter,\r\n          setGlobalFilter,\r\n          setaddnew,\r\n          addnew,\r\n          addNewRecord,\r\n          DesignationName,\r\n          setDesignationName,\r\n          ShortName,\r\n          setShortName,\r\n          'Designation',\r\n          Designation,\r\n          columns,\r\n        )}\r\n        bodyClass=\"text-center\"\r\n      >\r\n        <DisplaytablewithEdit\r\n          data={Designation}\r\n          onRowEditComplete={onRowEditComplete}\r\n          globalFilter={globalFilter}\r\n          dataKey=\"DesignationCode\"\r\n          columns={columns}\r\n          setyup={setyup}\r\n          scrollHeight=\"70vh\"\r\n          setVisible={setVisible}\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DesignationMaster;\r\n"],"names":["token","useSelector","state","auth","session","count","useRef","closeAfter2000ms","mes","ty","toa","closable","type","duration","title","charAt","toUpperCase","slice","DesignationName","setDesignationName","useState","ShortName","setShortName","addnew","setaddnew","globalFilter","setGlobalFilter","visible","setVisible","yup","setyup","toast","Designation","setDesignation","useEffect","current","async","reversedDesignationWithNumbers","apiGetDesignationMaster","data","reverse","map","category","index","serialNumber","toggleSwitch","console","log","updatedDesignation","row","IsActive","Putdesignation","then","response","status","json","catch","error","columns","field","header","width","ref","group","onHide","message","icon","accept","className","ModuleText","Component","style","marginLeft","headerExtra","newRecord","substring","Postdesignation","length","prevDesignation","bodyClass","onRowEditComplete","e","_Designation","newData","dataKey","scrollHeight"],"sourceRoot":""}