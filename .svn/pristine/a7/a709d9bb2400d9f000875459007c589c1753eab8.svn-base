"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[3710],{84407:(e,s,t)=>{t.r(s),t.d(s,{default:()=>G});var n=t(1413),o=t(45987),a=t(72791),c=t(2803),r=t(34786),i=t(58617),l=t(92506),d=t(81724),u=t(60364),m=t(18923),g=t(81320),p=t(80184);d.Ry().shape({AgencyGroupName:d.Z_().min(1,"Too Short!").max(50,"Too Long!").required("AgencyGroup Name Required"),AgencyCode:d.Z_().min(1,"Too Short!").max(50,"Too Long!").required("AgencyCode Name Required"),IsActive:d.Z_().required("IsActives Required"),rememberMe:d.Xg()});var y={};const A=(0,a.forwardRef)(((e,s)=>{const{onDrawerClose:t,editData:n,setMessage:o,setlog:a,AgencyList:i}=e,d=(0,u.useSelector)((e=>e.auth.session.token));var A;n&&n.details&&(A=[...new Set(n.details.map((e=>e.AgencyCode)))]),console.log(y);const x=e=>{console.log(e);const s=e.map((e=>({AgencyCode:e.code})));y=s,console.log("SelectedAgency:",y)};return(0,p.jsx)("div",{children:(0,p.jsx)(l.J9,{innerRef:s,initialValues:{AgencyGroupCode:n.AgencyGroupCode||"",AgencyGroupName:n.AgencyGroupName||"",IsActive:1===n.IsActive||"",ShareDifference:0},onSubmit:(e,s)=>{let{resetForm:o,setSubmitting:a}=s;e.Detail=y,setTimeout((()=>{n.AgencyGroupCode?new Promise(((s,n)=>{a(!1),(async(e,s)=>{console.log(e);const t={AgencyGroup:{AgencyGroupName:e.AgencyGroupName,IsActive:e.IsActive?1:0},Details:y.map((e=>({AgencyCode:e.AgencyCode})))};console.log(y);try{const n=await(0,r.N)(t,e.AgencyGroupCode,s);if(204===n.status)return void(0,g.openNotification)("danger","Data Already Exists.");if(200==n.status)return void(0,g.openNotification)("success","Data Inserted Successfully.")}catch(n){if(500===n.response.status)return void(0,g.openNotification)("warning","Server Error.")}})(e,d).then((e=>{t(0,0),s(e)})).catch((e=>{n(e)}))})):new Promise(((s,n)=>{(async(e,s)=>{const t={AgencyGroup:{AgencyGroupName:e.AgencyGroupName,IsActive:e.IsActive?1:0},Details:y.map((e=>({AgencyCode:e.AgencyCode})))};try{const e=await(0,r.O3)(t,s);if(204===e.status)return void(0,g.openNotification)("danger","Data Already Exists.");if(200==e.status)return void(0,g.openNotification)("success","Data Inserted Successfully.")}catch(n){if(500===n.response.status)return void(0,g.openNotification)("warning","Server Error.")}})(e,d).then((e=>{t(0,0),s(e)})).catch((e=>{n(e)}))})),o()}),400)},children:e=>{let{values:s,touched:t,errors:n}=e;return(0,p.jsx)(l.l0,{children:(0,p.jsxs)(c.Yb,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(l.gN,{size:"sm",type:"AgencyGroupCode",autoComplete:"off",name:"AgencyGroupCode",placeholder:"AgencyGroup Name",component:c.II,hidden:!0}),(0,p.jsx)(c.lm,{asterisk:!0,label:"AgencyGroup Name",invalid:n.AgencyGroupCode&&t.AgencyGroupCode,errorMessage:n.AgencyGroupName,children:(0,p.jsx)(l.gN,{size:"sm",type:"text",maxlength:"20",autoComplete:"off",name:"AgencyGroupName",placeholder:"AgencyGroup Name",component:c.II})})]}),(0,p.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3",children:(0,p.jsx)(c.lm,{label:"IsActive",invalid:n.IsActive&&t.IsActive,errorMessage:n.IsActive,children:(0,p.jsx)("div",{children:(0,p.jsx)(l.gN,{name:"IsActive",component:c.T5})})})}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)(m.x,{data:i,checkedList:A||[],hdr:"Agency's",onSelectionChange:x})})]})})}})})}));var x=t(44630),h=t(83659),v=t(96361),f=t(88449),N=t(14509);const j=["value","onChange","debounce"],C=(e,s,t,n)=>(0,p.jsxs)("span",{className:"flex items-center",children:[(0,p.jsx)("span",{className:"mr-1 mt-4  font-semibold",children:(0,p.jsx)(s,{value:null!==t&&void 0!==t?t:"",className:" solid",placeholder:"Search all columns...",size:"sm",onChange:e=>{/^[0-9a-zA-Z\s]*$/.test(e)&&n(e)}})}),(0,p.jsx)("span",{className:"mr-1 font-semibold",children:(0,p.jsx)(c.zx,{block:!0,variant:"solid",size:"sm",icon:(0,p.jsx)(i.yEd,{}),onClick:()=>e(),children:"Create AgencyGroup"})})]}),G=()=>{const[e,s]=(0,a.useState)(!1),[t,l]=(0,a.useState)([""]),[d,u]=(0,a.useState)(""),[m,g]=(0,a.useState)([""]),[y,G]=(0,x.Z)(),[w,I]=(0,a.useState)(""),S=(0,a.useRef)(),b=(0,a.useMemo)((()=>[{header:"Group Name",accessorKey:"AgencyGroupName"}]),[]),[Z,D]=(0,a.useState)(!1),[T,z]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async e=>{const s=await(0,r.Tm)(void 0);console.log("resp",s.data),g(s.data)})(),(async e=>{const s=(await(0,r.ww)(void 0)).data.filter((e=>1===e.IsActive)).map((e=>{let s={};return s.name=e.AgencyName,s.code=e.AgencyCode,s}));D(s)})()}),[]);const E=()=>{s(!0)},k=async(e,t)=>{s(!1);const n=await(0,r.Tm)(t);n.data.map((e=>({AgencyGroupName:e.AgencyGroupName,IsActive:e.IsActive})));g(n.data),l([""])};return console.log(t),(0,p.jsxs)(p.Fragment,{children:[y&&(0,p.jsx)(c.bZ,{className:"mb-4",type:w,showIcon:!0,children:y}),(0,p.jsx)(c.Zb,{header:(0,p.jsx)(v.Z,{Component:"Agency Group Master"}),headerExtra:C(E,(function(e){let{value:s,onChange:t,debounce:c=1500}=e,r=(0,o.Z)(e,j);const[i,l]=(0,a.useState)(s);return(0,a.useEffect)((()=>{l(s)}),[s]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{t(i)}),c);return()=>clearTimeout(e)}),[i]),(0,p.jsx)("div",{className:"flex justify-end",children:(0,p.jsx)("div",{className:"flex items-center mb-4",children:(0,p.jsx)(N.Z,(0,n.Z)((0,n.Z)({},r),{},{value:i,onChange:e=>{/^[0-9a-zA-Z\s]*$/.test(e.target.value)&&l(e.target.value)}}))})})}),d,u),className:"flex flex-col h-[87vh]",bodyClass:"grow",children:(0,p.jsx)(h.Z,{data:m,columns:b,globalFilter:d,setGlobalFilter:u,seteditData:l,openDrawer:E,ExportName:"AgencyGroupMaster"})}),(0,p.jsx)(c.dy,{title:t.AgencyGroupName?(0,p.jsxs)("p",{className:"text-xl font-medium   flex ",children:[(0,p.jsx)("center",{children:(0,p.jsx)(c.zx,{size:"xs",variant:"twoTone",icon:(0,p.jsx)(i._vs,{})})}),"\xa0\xa0 AgencyGroup Master"]}):(0,p.jsxs)("p",{className:"text-xl font-medium   flex ",children:[(0,p.jsx)("center",{children:(0,p.jsx)(c.zx,{size:"xs",variant:"twoTone",icon:(0,p.jsx)(i.yEd,{})})}),"\xa0\xa0AgencyGroup Master"]}),isOpen:e,onClose:k,onRequestClose:k,width:window.screen.width>400?window.screen.width/3:window.screen.width/1.5,footer:(0,p.jsx)(f.Z,{onCancel:k,onSaveClick:()=>{var e;null===(e=S.current)||void 0===e||e.submitForm()}}),children:(0,p.jsx)(A,{ref:S,onDrawerClose:k,editData:t,setMessage:G,setlog:I,AgencyList:Z,selectedagencys:T,setselectedagencys:z})})]})}}}]);
//# sourceMappingURL=3710.7e9d3420.chunk.js.map