{"version":3,"file":"static/js/5733.30cd7855.chunk.js","mappings":"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","sources":["views/Scheduling/Scheduler/components/SchedulingArea/components/AutoScrollTable/AutoScrollTable.js","views/Scheduling/Scheduler/components/SchedulingArea/components/ChangeProgram/utils.js","views/Scheduling/Scheduler/components/SchedulingArea/components/ChangeProgram/ChangeProgram.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { TABLE_ROW_HEIGHT } from 'views/Scheduling/Scheduler/constants';\r\nimport { getHexColorWithOpacity } from 'views/Controls/GLOBALFUNACTION';\r\nimport SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';\r\n\r\nfunction AutoScrollTable({ tableData, columns, scrollFunction }) {\r\n  /* CONTEXT */\r\n  const { schedulingTableRef } = useContext(SchedulerContext);\r\n\r\n  /* STATES */\r\n  const [hoveredRow, setHoveredRow] = useState(null);\r\n\r\n  return (\r\n    <>\r\n      {/* Table Header */}\r\n      <div className=\"flex bg-gray-700 font-semibold text-white text-[12px] sticky top-0\">\r\n        {columns.map((column, index) => (\r\n          <div\r\n            style={{\r\n              width: column.style.width,\r\n              height: `${TABLE_ROW_HEIGHT}px`,\r\n            }}\r\n            key={column.accessorKey}\r\n            className={`flex items-center justify-${\r\n              column.style.align\r\n            } border-gray-400 border-y border-r ${index === 0 && 'border-l'}`}\r\n          >\r\n            {column.header}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Table Body */}\r\n      <div>\r\n        {tableData.map((row) => (\r\n          <div\r\n            key={row.rowId}\r\n            className=\"hover:cursor-pointer flex\"\r\n            onMouseEnter={() => setHoveredRow(row)}\r\n            onMouseLeave={() => setHoveredRow(null)}\r\n            onClick={\r\n              typeof scrollFunction === 'function'\r\n                ? () => scrollFunction(row)\r\n                : () =>\r\n                    schedulingTableRef.current?.scrollToItem(\r\n                      row.rowIndex,\r\n                      'center',\r\n                    )\r\n            }\r\n          >\r\n            {columns.map((column, index) => (\r\n              <div\r\n                key={index}\r\n                style={{\r\n                  height: `${TABLE_ROW_HEIGHT}px`,\r\n                  width: column.style.width,\r\n                  backgroundColor:\r\n                    hoveredRow && hoveredRow.rowId === row.rowId\r\n                      ? getHexColorWithOpacity(row.EventDefaultBackColor, 0.8)\r\n                      : row.EventDefaultBackColor,\r\n                  color: row.EventDefaultFrontColor,\r\n                  borderColor: 'rgb(107, 114, 128)',\r\n                }}\r\n                className={`flex items-center justify-${\r\n                  column.style.align\r\n                } text-[12px] py-1 px-2.5 border-b border-r ${\r\n                  index === 0 && 'border-l'\r\n                }`}\r\n              >\r\n                <div className=\"text-ellipsis overflow-hidden whitespace-nowrap\">\r\n                  {row[column.accessorKey]}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AutoScrollTable;\r\n","import { convertDateToYMD } from 'components/validators';\r\nimport { apiGettransmissionlog2 } from 'services/SchedulingService';\r\nimport { openNotification } from 'views/Controls/GLOBALFUNACTION';\r\nimport {\r\n  rowDataTypesEnum,\r\n  tableTypesEnum,\r\n} from 'views/Scheduling/Scheduler/enum';\r\nimport { getRowId } from '../../utils/utils';\r\n\r\nconst generateProgramsWithSegmentFromSchedule = (\r\n  schedulingTableData,\r\n  schedule,\r\n) => {\r\n  try {\r\n    let programs = [];\r\n    const programsFromSchedulingTable = schedulingTableData.filter(\r\n      (row) => row.F_C_S_P === rowDataTypesEnum.CONTENT_TERMINATION,\r\n    );\r\n    const programsFromSchedule = schedule.filter(\r\n      (row) => row.F_C_S_P === rowDataTypesEnum.CONTENT_TERMINATION,\r\n    );\r\n    programsFromSchedule.forEach((row, index) => {\r\n      if (\r\n        (programsFromSchedulingTable[index] &&\r\n          row.FPC_Time !== programsFromSchedulingTable[index].FPC_Time) ||\r\n        (programsFromSchedulingTable[index] &&\r\n          row.Event_Name !== programsFromSchedulingTable[index].Event_Name)\r\n      )\r\n        programs.push({\r\n          ...row,\r\n          EventDefaultBackColor: '#b91b1c',\r\n          EventDefaultFrontColor: 'white',\r\n          rowId: getRowId(tableTypesEnum.SECONDARY, row),\r\n        });\r\n      else\r\n        programs.push({\r\n          ...row,\r\n          rowId: getRowId(tableTypesEnum.SECONDARY, row),\r\n        });\r\n      programs.push(\r\n        ...schedule\r\n          .filter(\r\n            (scheduleRow) =>\r\n              scheduleRow.F_C_S_P === rowDataTypesEnum.SEGMENT &&\r\n              scheduleRow.FPC_ID === row.FPC_ID,\r\n          )\r\n          .map((row) => ({\r\n            ...row,\r\n            rowId: getRowId(tableTypesEnum.SECONDARY, row),\r\n          })),\r\n      );\r\n    });\r\n    return programs;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst getProgramsWithSegment = async (channel, date, schedulingTableData) => {\r\n  try {\r\n    let programs = [];\r\n    const response = await apiGettransmissionlog2(\r\n      {\r\n        LocationCode: channel.LocationCode,\r\n        ChannelCode: channel.ChannelCode,\r\n      },\r\n      convertDateToYMD(date),\r\n    );\r\n    if (response.status === 200 && response.data.length > 0) {\r\n      programs = generateProgramsWithSegmentFromSchedule(\r\n        schedulingTableData,\r\n        response.data,\r\n      );\r\n      programs = programs.map((row, index) => ({ ...row, rowIndex: index }));\r\n    } else if (response.status === 204)\r\n      openNotification('info', 'No programs found');\r\n    else\r\n      openNotification(\r\n        'danger',\r\n        'Something went wrong while fetching programs',\r\n      );\r\n    return programs;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport { getProgramsWithSegment };\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';\r\nimport { Button, Card, Spinner, Tooltip } from 'components/ui';\r\nimport { IoMdClose } from 'react-icons/io';\r\nimport { handleFeatureClose } from '../../utils/utils';\r\nimport {\r\n  featuresEnum,\r\n  rowDataTypesEnum,\r\n} from 'views/Scheduling/Scheduler/enum';\r\nimport { getProgramsWithSegment } from './utils';\r\nimport { useSelector } from 'react-redux';\r\nimport { openNotification } from 'views/Controls/GLOBALFUNACTION';\r\nimport AutoScrollTable from '../AutoScrollTable/AutoScrollTable';\r\nimport { CHANGE_PROGRAM_COLUMNS } from 'views/Scheduling/Scheduler/constants';\r\n\r\nfunction ChangeProgram() {\r\n  /* REDUX */\r\n  const channel = useSelector((state) => state.locale.selectedChannel);\r\n\r\n  /* CONTEXT */\r\n  const {\r\n    date,\r\n    schedulingTableData,\r\n    setSecondaryTableData,\r\n    setActiveFeatures,\r\n    schedulingTableRef,\r\n    resetSecondaryTableStates,\r\n  } = useContext(SchedulerContext);\r\n\r\n  /* STATES */\r\n  const [programsTableData, setProgramsTableData] = useState([]);\r\n  const [showLoader, setShowLoader] = useState(false);\r\n\r\n  /* USE EFFECTS */\r\n  useEffect(() => resetSecondaryTableStates, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setShowLoader(true);\r\n        const programsWithSegment = await getProgramsWithSegment(\r\n          channel,\r\n          date,\r\n          schedulingTableData,\r\n        );\r\n        setSecondaryTableData(programsWithSegment);\r\n        setProgramsTableData(\r\n          programsWithSegment.filter(\r\n            (row) => row.F_C_S_P === rowDataTypesEnum.CONTENT_TERMINATION,\r\n          ),\r\n        );\r\n        setShowLoader(false);\r\n      } catch (error) {\r\n        setShowLoader(false);\r\n        openNotification(\r\n          'danger',\r\n          'Something went wrong while fetching programs',\r\n        );\r\n        console.error(error);\r\n      }\r\n    })();\r\n  }, [schedulingTableData]);\r\n\r\n  /* EVENT HANDLERS */\r\n  const handleRowClick = (row) => {\r\n    try {\r\n      let matchedFPCTimeRowIndex = schedulingTableData.findIndex(\r\n        (schTableRow) => schTableRow.FPC_Time === row.FPC_Time,\r\n      );\r\n      if (matchedFPCTimeRowIndex !== -1) {\r\n        schedulingTableRef.current?.scrollToItem(\r\n          schedulingTableData.findIndex(\r\n            (schTableRow) => schTableRow.FPC_Time === row.FPC_Time,\r\n          ),\r\n          'center',\r\n        );\r\n      } else openNotification('danger', 'Program not present in schedule');\r\n    } catch (error) {\r\n      openNotification('danger', 'Something went wrong while auto scrolling');\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex flex-col overflow-auto no-scrollbar bg-gray-800 p-3 pt-2 rounded-lg\">\r\n      <div className=\"flex justify-between items-center mb-2\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <h5>Programs</h5>\r\n          {programsTableData.length > 0 && (\r\n            <h6 className=\"rounded-md px-1.5 py-0.5 bg-gray-600 flex items-center justify-center\">\r\n              {programsTableData.length}\r\n            </h6>\r\n          )}\r\n        </div>\r\n        <div className=\"flex gap-1.5\">\r\n          <Tooltip title=\"Close\">\r\n            <Button\r\n              size=\"xs\"\r\n              icon={<IoMdClose />}\r\n              onClick={() =>\r\n                handleFeatureClose(\r\n                  setActiveFeatures,\r\n                  featuresEnum.CHANGE_PROGRAM,\r\n                )\r\n              }\r\n            />\r\n          </Tooltip>\r\n        </div>\r\n      </div>\r\n      <div className=\"h-[92%] flex flex-col gap-3\">\r\n        {programsTableData.length > 0 ? (\r\n          <div className=\"grow\">\r\n            <AutoScrollTable\r\n              tableData={programsTableData}\r\n              columns={CHANGE_PROGRAM_COLUMNS}\r\n              scrollFunction={(row) => handleRowClick(row)}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <Card\r\n            className=\"h-full\"\r\n            bodyClass=\"h-full flex justify-center items-center\"\r\n          >\r\n            {showLoader ? <Spinner size=\"45px\" /> : 'No programs to show'}\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChangeProgram;\r\n"],"names":["tableData","columns","scrollFunction","schedulingTableRef","useContext","SchedulerContext","hoveredRow","setHoveredRow","useState","className","map","column","index","style","width","height","TABLE_ROW_HEIGHT","align","header","accessorKey","row","onMouseEnter","onMouseLeave","onClick","current","scrollToItem","rowIndex","backgroundColor","rowId","getHexColorWithOpacity","EventDefaultBackColor","color","EventDefaultFrontColor","borderColor","getProgramsWithSegment","async","channel","date","schedulingTableData","programs","response","apiGettransmissionlog2","LocationCode","ChannelCode","convertDateToYMD","status","data","length","schedule","programsFromSchedulingTable","filter","F_C_S_P","rowDataTypesEnum","forEach","FPC_Time","Event_Name","push","getRowId","tableTypesEnum","scheduleRow","FPC_ID","error","generateProgramsWithSegmentFromSchedule","openNotification","useSelector","state","locale","selectedChannel","setSecondaryTableData","setActiveFeatures","resetSecondaryTableStates","programsTableData","setProgramsTableData","showLoader","setShowLoader","useEffect","programsWithSegment","console","title","size","icon","handleFeatureClose","featuresEnum","AutoScrollTable","CHANGE_PROGRAM_COLUMNS","findIndex","schTableRow","handleRowClick","bodyClass"],"sourceRoot":""}