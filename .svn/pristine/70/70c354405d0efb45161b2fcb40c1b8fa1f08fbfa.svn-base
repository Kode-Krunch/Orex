{"version":3,"file":"static/js/9496.78e75c6e.chunk.js","mappings":"8RA6HA,QAxGA,WAEE,MAAMA,GAAUC,EAAAA,EAAAA,cAAaC,GAAUA,EAAMC,OAAOC,mBAG9C,KACJC,EAAI,mBACJC,EAAkB,sBAClBC,EAAqB,kBACrBC,EAAiB,0BACjBC,EAAyB,2BACzBC,EAA0B,8BAC1BC,EAA6B,qBAC7BC,EAAoB,kBACpBC,EAAiB,sBACjBC,IACEC,EAAAA,EAAAA,YAAWC,EAAAA,IAGRC,EAAYC,IAAiBC,EAAAA,EAAAA,WAAS,GAGvCC,EAAWd,EAAmBe,QACjCC,GAAQA,EAAIC,UAAYC,EAAAA,iBAAAA,sBAwB3B,OApBAC,EAAAA,EAAAA,YAAU,KACR,WACE,IACEP,GAAc,GACdJ,EAAsBY,EAAAA,wBAAAA,UACtB,MAAMC,OC5CiBC,OAAO5B,EAASK,KAC7C,IACE,IAAIe,EAAW,GACf,MAAMS,QAAiBC,EAAAA,EAAAA,IACrB,CACEC,aAAc/B,EAAQ+B,aACtBC,YAAahC,EAAQgC,cAEvBC,EAAAA,EAAAA,IAAiB5B,IAwBnB,OAtBwB,MAApBwB,EAASK,QAAkBL,EAASM,KAAKC,OAAS,EACpDhB,EAAW,EAACiB,EAAAA,EAAAA,IAAYR,EAASM,KAAK,OAAQN,EAASM,MAAMG,KAC3D,CAAChB,EAAKiB,KACJ,IAAIC,GAAM,kBACLlB,GAAG,IACNmB,OAAOC,EAAAA,EAAAA,IAASC,EAAAA,eAAAA,UAA0BrB,GAC1CsB,SAAUL,IAMZ,OAJIC,EAAOjB,UAAYC,EAAAA,iBAAAA,sBACrBgB,EAAOK,YAAa,EACpBL,EAAOM,UAAW,GAEbN,CAAM,IAGU,MAApBX,EAASK,QAChBa,EAAAA,EAAAA,kBAAiB,OAAQ,sBAEzBA,EAAAA,EAAAA,kBACE,SACA,gDAEG3B,CAGT,CAFE,MAAO4B,GACP,MAAMA,CACR,GDSwCC,CAAuBjD,EAASK,GAClEE,EAAsBoB,GACtBT,GAAc,EAQhB,CAPE,MAAO8B,GACP9B,GAAc,IACd6B,EAAAA,EAAAA,kBACE,SACA,gDAEFG,QAAQF,MAAMA,EAChB,CACD,EAfD,GAgBOvC,IACN,KAGD,iBAAK0C,UAAU,yFAAwF,WACrG,iBAAKA,UAAU,yCAAwC,WACrD,iBAAKA,UAAU,0BAAyB,WACtC,qCACC/B,EAASgB,OAAS,IACjB,eAAIe,UAAU,wEAAuE,SAClF/B,EAASgB,aAIhB,gBAAKe,UAAU,eAAc,UAC3B,SAAC,IAAO,CAACC,MAAM,QAAO,UACpB,SAAC,KAAM,CACLC,KAAK,KACLC,MAAM,SAAC,MAAS,IAChBC,QAAS,KACPC,EAAAA,EAAAA,IACEhD,EACAiD,EAAAA,aAAAA,0BAOZ,gBAAKN,UAAU,8BAA6B,SACzC/B,EAASgB,OAAS,GACjB,+BACE,gBAAKe,UAAU,OAAM,UACnB,SAACO,EAAA,QAAc,CACbC,UAAWC,EAAAA,GAAAA,sBAAAA,gBACXC,UAAWlB,EAAAA,eAAAA,UACXmB,UAAWxD,EACXyD,QAASC,EAAAA,GACTC,YAAaC,EAAAA,iBAAAA,UACbC,aAAczD,EACd0D,gBAAiBzD,EACjB0D,eAAgBzD,EAChB0D,SAAUzD,EACV0D,eAAe,SAKrB,SAAC,KAAI,CACHpB,UAAU,SACVqB,UAAU,0CAAyC,SAElDvD,GAAa,SAAC,KAAO,CAACoC,KAAK,SAAY,4BAMpD,C","sources":["views/Scheduling/Scheduler/components/SchedulingArea/components/InsertProgram/InsertProgram.js","views/Scheduling/Scheduler/components/SchedulingArea/components/InsertProgram/utils.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport SchedulerContext from 'views/Scheduling/Scheduler/context/SchedulerContext';\r\nimport { Button, Card, Spinner, Tooltip } from 'components/ui';\r\nimport { IoMdClose } from 'react-icons/io';\r\nimport { handleFeatureClose } from '../../utils/utils';\r\nimport {\r\n  droppableIdsEnum,\r\n  featuresEnum,\r\n  rowDataTypesEnum,\r\n  secondaryTableTypesEnum,\r\n  tableTypesEnum,\r\n} from 'views/Scheduling/Scheduler/enum';\r\nimport { getProgramsWithSegment } from './utils';\r\nimport { useSelector } from 'react-redux';\r\nimport { openNotification } from 'views/Controls/GLOBALFUNACTION';\r\nimport {\r\n  INSERT_PROGRAM_COLUMNS,\r\n  TABLE_NAMES,\r\n} from 'views/Scheduling/Scheduler/constants';\r\nimport DraggableTable from '../DraggableTable/DraggableTable';\r\n\r\nfunction InsertProgram() {\r\n  /* REDUX */\r\n  const channel = useSelector((state) => state.locale.selectedChannel);\r\n\r\n  /* CONTEXT */\r\n  const {\r\n    date,\r\n    secondaryTableData,\r\n    setSecondaryTableData,\r\n    setActiveFeatures,\r\n    resetSecondaryTableStates,\r\n    secondaryTableSelectedRows,\r\n    setSecondaryTableSelectedRows,\r\n    secondaryTableOffset,\r\n    secondaryTableRef,\r\n    setSecondaryTableType,\r\n  } = useContext(SchedulerContext);\r\n\r\n  /* STATES */\r\n  const [showLoader, setShowLoader] = useState(false);\r\n\r\n  /* CONSTANTS */\r\n  const programs = secondaryTableData.filter(\r\n    (row) => row.F_C_S_P === rowDataTypesEnum.CONTENT_TERMINATION,\r\n  );\r\n\r\n  /* USE EFFECTS */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setShowLoader(true);\r\n        setSecondaryTableType(secondaryTableTypesEnum.PROGRAMS);\r\n        const programsWithSegment = await getProgramsWithSegment(channel, date);\r\n        setSecondaryTableData(programsWithSegment);\r\n        setShowLoader(false);\r\n      } catch (error) {\r\n        setShowLoader(false);\r\n        openNotification(\r\n          'danger',\r\n          'Something went wrong while fetching programs',\r\n        );\r\n        console.error(error);\r\n      }\r\n    })();\r\n    return resetSecondaryTableStates;\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex flex-col overflow-auto no-scrollbar bg-gray-800 p-3 pt-2 rounded-lg\">\r\n      <div className=\"flex justify-between items-center mb-2\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <h5>Programs</h5>\r\n          {programs.length > 0 && (\r\n            <h6 className=\"rounded-md px-1.5 py-0.5 bg-gray-600 flex items-center justify-center\">\r\n              {programs.length}\r\n            </h6>\r\n          )}\r\n        </div>\r\n        <div className=\"flex gap-1.5\">\r\n          <Tooltip title=\"Close\">\r\n            <Button\r\n              size=\"xs\"\r\n              icon={<IoMdClose />}\r\n              onClick={() =>\r\n                handleFeatureClose(\r\n                  setActiveFeatures,\r\n                  featuresEnum.MANAGE_SEGMENT,\r\n                )\r\n              }\r\n            />\r\n          </Tooltip>\r\n        </div>\r\n      </div>\r\n      <div className=\"h-[92%] flex flex-col gap-3\">\r\n        {programs.length > 0 ? (\r\n          <>\r\n            <div className=\"grow\">\r\n              <DraggableTable\r\n                tableName={TABLE_NAMES.SECONDARY_TABLE_NAMES.INSERT_PROGRAMS}\r\n                tableType={tableTypesEnum.SECONDARY}\r\n                tableData={secondaryTableData}\r\n                columns={INSERT_PROGRAM_COLUMNS}\r\n                droppableId={droppableIdsEnum.SECONDARY}\r\n                selectedRows={secondaryTableSelectedRows}\r\n                setSelectedRows={setSecondaryTableSelectedRows}\r\n                scrolledOffset={secondaryTableOffset}\r\n                tableRef={secondaryTableRef}\r\n                isSortEnabled={false}\r\n              />\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <Card\r\n            className=\"h-full\"\r\n            bodyClass=\"h-full flex justify-center items-center\"\r\n          >\r\n            {showLoader ? <Spinner size=\"45px\" /> : 'No programs to show'}\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InsertProgram;\r\n","import { convertDateToYMD } from 'components/validators';\r\nimport { apiGettransmissionlog2 } from 'services/SchedulingService';\r\nimport { openNotification } from 'views/Controls/GLOBALFUNACTION';\r\nimport {\r\n  rowDataTypesEnum,\r\n  tableTypesEnum,\r\n} from 'views/Scheduling/Scheduler/enum';\r\nimport { getDummyRow, getRowId } from '../../utils/utils';\r\n\r\nconst getProgramsWithSegment = async (channel, date) => {\r\n  try {\r\n    let programs = [];\r\n    const response = await apiGettransmissionlog2(\r\n      {\r\n        LocationCode: channel.LocationCode,\r\n        ChannelCode: channel.ChannelCode,\r\n      },\r\n      convertDateToYMD(date),\r\n    );\r\n    if (response.status === 200 && response.data.length > 0)\r\n      programs = [getDummyRow(response.data[0]), ...response.data].map(\r\n        (row, index) => {\r\n          let newRow = {\r\n            ...row,\r\n            rowId: getRowId(tableTypesEnum.SECONDARY, row),\r\n            rowIndex: index,\r\n          };\r\n          if (newRow.F_C_S_P !== rowDataTypesEnum.CONTENT_TERMINATION) {\r\n            newRow.isFiltered = false;\r\n            newRow.isHidden = true;\r\n          }\r\n          return newRow;\r\n        },\r\n      );\r\n    else if (response.status === 204)\r\n      openNotification('info', 'No programs found');\r\n    else\r\n      openNotification(\r\n        'danger',\r\n        'Something went wrong while fetching programs',\r\n      );\r\n    return programs;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport { getProgramsWithSegment };\r\n"],"names":["channel","useSelector","state","locale","selectedChannel","date","secondaryTableData","setSecondaryTableData","setActiveFeatures","resetSecondaryTableStates","secondaryTableSelectedRows","setSecondaryTableSelectedRows","secondaryTableOffset","secondaryTableRef","setSecondaryTableType","useContext","SchedulerContext","showLoader","setShowLoader","useState","programs","filter","row","F_C_S_P","rowDataTypesEnum","useEffect","secondaryTableTypesEnum","programsWithSegment","async","response","apiGettransmissionlog2","LocationCode","ChannelCode","convertDateToYMD","status","data","length","getDummyRow","map","index","newRow","rowId","getRowId","tableTypesEnum","rowIndex","isFiltered","isHidden","openNotification","error","getProgramsWithSegment","console","className","title","size","icon","onClick","handleFeatureClose","featuresEnum","DraggableTable","tableName","TABLE_NAMES","tableType","tableData","columns","INSERT_PROGRAM_COLUMNS","droppableId","droppableIdsEnum","selectedRows","setSelectedRows","scrolledOffset","tableRef","isSortEnabled","bodyClass"],"sourceRoot":""}