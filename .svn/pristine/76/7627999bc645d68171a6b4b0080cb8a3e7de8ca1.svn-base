(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[1845,5682],{42264:(e,t,a)=>{"use strict";a.d(t,{Kc:()=>c,Ms:()=>s,Rd:()=>C,U2:()=>p,Vg:()=>i,Vm:()=>u,Yd:()=>l,ZI:()=>f,bn:()=>m,mz:()=>h,pf:()=>d,xS:()=>g,yv:()=>y});var o=a(54048),n=a(46152);const r=a(74569),c=(e,t,a,n,c)=>{try{return new Promise(((i,s)=>{let l={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/asrun/?TelecastDate=".concat(t,"&LocationCode=").concat(a,"&ChannelCode=").concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},data:e};r.request(l).then((e=>{i(e)})).catch((e=>{s(e)}))}))}catch(i){throw new Error(i)}},i=(e,t)=>{let{filter:a,id:n,loginCode:c,fromDate:i,uptoDate:s,channelCode:l,locationCode:d}=e;try{return new Promise(((e,h)=>{let u={method:"get",url:o.Z.apiPrefix+"/invoice/getinvoice/?Filter=".concat(a,"&ID=").concat(n,"&LoginCode=").concat(c,"&FromDate=").concat(i,"&UptoDate=").concat(s,"&ChannelCode=").concat(l,"&LocationCode=").concat(d),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};r.request(u).then((t=>{e(t)})).catch((e=>{h(e)}))}))}catch(h){throw new Error(h)}},s=(e,t)=>{try{return n.Z.fetchData({method:"get",url:"/invoiceseries/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},l=(e,t)=>{let{filter:a,id:n,loginCode:c,fromDate:i,uptoDate:s,channelCode:l,locationCode:d,SpotTypeCode:h}=e;try{return new Promise(((e,u)=>{let p={method:"get",url:o.Z.apiPrefix+"/invoice/gettelecastreport/?Filter=".concat(a,"&ID=").concat(n,"&LoginCode=").concat(c,"&FromDate=").concat(i,"&UptoDate=").concat(s,"&ChannelCode=").concat(l,"&LocationCode=").concat(d,"&SpotType=").concat(h),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};r.request(p).then((t=>{e(t)})).catch((e=>{u(e)}))}))}catch(u){throw new Error(u)}},d=async(e,t)=>{try{return new Promise(((a,n)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseries/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(c).then((e=>{a(e)})).catch((e=>{n(e)}))}))}catch(a){throw a}},h=(e,t,a)=>{try{return new Promise(((n,c)=>{let i={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseries/".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};r.request(i).then((e=>{n(e)})).catch((e=>{c(e)}))}))}catch(n){throw new Error(n)}},u=(e,t)=>{let{filter:a,id:n,loginCode:c,fromDate:i,uptoDate:s,channelCode:l,locationCode:d}=e;try{return new Promise(((e,h)=>{let u={method:"get",url:o.Z.apiPrefix+"/invoice/getinvoiceNTC/?Filter=".concat(a,"&ID=").concat(n,"&LoginCode=").concat(c,"&FromDate=").concat(i,"&UptoDate=").concat(s,"&ChannelCode=").concat(l,"&LocationCode=").concat(d),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};r.request(u).then((t=>{e(t)})).catch((e=>{h(e)}))}))}catch(h){throw new Error(h)}},p=(e,t)=>{try{return n.Z.fetchData({method:"get",url:"/invoiceseriesntc/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},m=async(e,t)=>{try{return new Promise(((a,n)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseriesntc/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(c).then((e=>{a(e)})).catch((e=>{n(e)}))}))}catch(a){throw a}},f=(e,t,a)=>{try{return new Promise(((n,c)=>{let i={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseriesntc/".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};r.request(i).then((e=>{n(e)})).catch((e=>{c(e)}))}))}catch(n){throw new Error(n)}},y=e=>{try{return n.Z.fetchData({method:"get",url:"/yeartaxdetail/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}catch(t){throw t}},C=(e,t,a)=>{try{return new Promise(((n,c)=>{let i={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/yeartaxdetail/?YearCode=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:t};r.request(i).then((e=>{n(e)})).catch((e=>{c(e)}))}))}catch(n){throw n}},g=(e,t,a,n)=>{try{return new Promise(((c,i)=>{let s={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/asrun/asrunmatch/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&IsNTC=").concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};r.request(s).then((e=>{c(e)})).catch((e=>{i(e)}))}))}catch(c){throw c}}},28179:(e,t,a)=>{"use strict";a.d(t,{$H:()=>c,$o:()=>D,Bo:()=>j,D_:()=>A,Eg:()=>w,JN:()=>v,M0:()=>h,ND:()=>i,OY:()=>s,SR:()=>f,Sd:()=>C,U2:()=>L,U3:()=>N,XV:()=>u,fU:()=>b,fy:()=>x,fz:()=>T,g7:()=>I,h:()=>m,iH:()=>l,ih:()=>B,jS:()=>S,kP:()=>d,ko:()=>p,m1:()=>y,mg:()=>Z,pc:()=>P,qm:()=>g});var o=a(54048),n=a(46152);a(60630);const r=a(74569);async function c(e){return n.Z.fetchData({url:"/commercialtypemaster/",method:"get",data:e})}async function i(e,t,a){return n.Z.fetchData({url:"/spotcancellation/?CancelRemarkCode=".concat(t,"&IsNTC=").concat(a),method:"put",data:e})}const s=(e,t)=>new Promise(((a,n)=>{let c=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),i={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:c};r.request(i).then((e=>{a(e)})).catch((e=>{n(e)}))})),l=(e,t)=>new Promise(((a,n)=>{let c=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),i={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/".concat(e.CommercialTypeCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:c};r.request(i).then((e=>{a(e)})).catch((e=>{n(e)}))}));async function d(e){return n.Z.fetchData({url:"/commercialmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&IsNTC=").concat(e.IsNTC,"&fromdate=").concat(e.FromDate,"&todate=").concat(e.ToDate),method:"get"})}async function h(e,t){return n.Z.fetchData({url:"/bookingmaster/?IsNTC=".concat(e.IsNTC,"&LocationCode=").concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function u(e,t,a,o,r,c,i,s,l,d,h){return n.Z.fetchData({url:"/spotschedule/USP_SA_RO_SpotSchedule/?From_DT=".concat(e,"&To_DT=").concat(t,"&DealNumber=").concat(a,"&BookingNumber=").concat(o,"&ChannelCode=").concat(c,"&LocationCode=").concat(i,"&ScheduleDate=").concat(r,"&IsMakeGoodRO=").concat(s?1:0,"&BookingRefNumber=").concat(l,"&IsNTC=").concat(d,"&BrandCode=").concat(h),method:"get"})}async function p(e,t,a,o,r,c){return n.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(o,"&ChannelCode=").concat(r,"&ClientCode=").concat(t.value,"&BrandCode=").concat(e.value,"&DurInSec=").concat(a.DurInSec,"&IsNTC=").concat(c),method:"get"})}async function m(e,t,a,o,r){return n.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(a,"&ChannelCode=").concat(o,"&ClientCode=").concat(t,"&BrandCode=").concat(e,"&IsNTC=").concat(r),method:"get"})}const f=(e,t)=>new Promise(((a,n)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};console.log(c.url),r.request(c).then((e=>{a(e)})).catch((e=>{n(e)}))})),y=(e,t,a)=>new Promise(((n,c)=>{let i={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(i).then((e=>{n(e)})).catch((e=>{c(e)}))}));async function C(e){return n.Z.fetchData({url:"/positionmaster/drop/",method:"get",data:e})}async function g(e){return n.Z.fetchData({url:"/spotpositiontypemaster/drop/",method:"get",data:e})}async function x(e){return n.Z.fetchData({url:"/cancelremarkmaster/",method:"get",data:e})}const v=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})}),w=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster/".concat(e.CancelRemarkCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})});async function N(e){return n.Z.fetchData({url:"/yearmaster/",method:"get",data:e})}const b=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})}),j=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster/".concat(e.Yearcode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})});async function S(e){return n.Z.fetchData({url:"/taxmaster/",method:"get",data:e})}async function D(e){return n.Z.fetchData({url:"/taxmaster/",method:"post",data:e})}async function L(e,t){return n.Z.fetchData({url:"/taxmaster/".concat(t),method:"put",data:e})}const T=(e,t,a)=>{try{return n.Z.fetchData({method:"get",url:"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&traficmonth=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},A=(e,t,a,o)=>{try{return n.Z.fetchData({method:"get",url:"/trafficdayclose/asperfromto/?LocationCode=".concat(a.LocationCode,"&ChannelCode=").concat(a.ChannelCode,"&fromdate=").concat(e,"&todate=").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}})}catch(r){throw new Error(r)}},Z=async(e,t,a)=>{try{return new Promise(((n,c)=>{let i={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};r.request(i).then((e=>{n(e)})).catch((e=>{c(e)}))}))}catch(n){throw n}},B=(e,t,a)=>{try{return n.Z.fetchData({method:"get",url:"/bookingmaster/getbookingbyclient/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&ClientCode=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},I=(e,t)=>{try{return n.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivity/?BookingNumber=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},P=(e,t,a)=>{try{return console.log(e),n.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivitybydate?BookingNumber=".concat(t,"&ChangeType=").concat(e.type,"&ChangeOn=").concat(e.dateTime,"&ChangeBy=").concat(e.executerId),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}}},32839:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L,headerExtra:()=>D});var o=a(1413),n=a(2803),r=a(72791),c=a(58617),i=a(60364),s=a(96361),l=a(28179),d=a(81320),h=a(42264),u=a(81724),p=a(92506),m=a(27353),f=a(80184);const y=u.Ry().shape({channel:u.Z_().required("Channel Required"),financialYear:u.Z_().required("Financial Year Required"),lastNo:u.Z_().required("Last No Required").max(5,"Max Number is 99999").matches(/^[0-9]*$/,"Only Numbers Allowed")});const C=function(e){let{showDialog:t,setShowDialog:a,invoiceSeries:o,setInvoiceSeries:c,financialYears:i,financialYearOptions:s,channel:l,token:u,validateMaxNoLength:C,currentRouteTitle:g,setShowLoader:x}=e;const[v,w]=(0,r.useState)([]);(0,r.useEffect)((()=>{try{if(t&&Array.isArray(s)){const e=b();0===e.length&&(0,d.openNotification)("info","Billing series for all financial years are already added."),w(e)}}catch(e){console.error(e)}}),[t,s]);const N=e=>{a(!1)},b=()=>{try{let e=[];const t=o.map((e=>e.YearMaster.Description));return s.forEach((a=>{t.includes(a.label)||e.push(a)})),e}catch(e){console.error(e)}},j=e=>{try{const t=i.filter((t=>e===t.Yearcode))[0];return"".concat(t.StartDate.slice(0,10)," - ").concat(t.EndDate.slice(0,10))}catch(t){console.error(t)}};return(0,f.jsxs)(n.Vq,{isOpen:t,onClose:N,onRequestClose:N,children:[(0,f.jsx)("h5",{className:"mb-6",children:"New Billing Series"}),(0,f.jsx)(p.J9,{initialValues:{channel:l.label,financialYear:"",lastNo:""},validationSchema:y,onSubmit:async e=>{try{x(!0);const t={LocationCode:l.LocationCode,ChannelCode:l.ChannelCode,YearCode:e.financialYear,LastNo:e.lastNo,IsActive:i.filter((t=>t.Yearcode===e.financialYear))[0].IsActive};let a=null;g===m.Xy?a=await(0,h.pf)(t,u):g===m.ug&&(a=await(0,h.bn)(t,u)),a?200===a.status?(a.data&&c([a.data,...o]),(0,d.openNotification)("success","Billing series added successfully."),N()):204===a.status?(0,d.openNotification)("info","Billing series already present for selected Financial Year and Last No."):(0,d.openNotification)("error","Something went wrong. Server returned with status code: ".concat(a.status,".")):(0,d.openNotification)("danger","Something went wrong"),x(!1)}catch(t){"response"in t&&"status"in t.response&&404===t.response.status&&"data"in t.response&&"detail"in t.response.data&&"Data is Already Exists"===t.response.data.detail?(0,d.openNotification)("danger","Billing series already present for selected financial year."):"response"in t&&"status"in t.response?(0,d.openNotification)("danger","Something went wrong. Server returned with status code: ".concat(t.response.status)):(0,d.openNotification)("danger","Something went wrong."),x(!1),console.error(t)}},children:e=>{let{touched:t,errors:a,values:o}=e;return(0,f.jsx)(p.l0,{children:(0,f.jsxs)(n.Yb,{className:"flex flex-col gap-4",children:[(0,f.jsx)(n.xJ,{label:"Channel",invalid:a.channel&&t.channel,errorMessage:a.channel,asterisk:!0,children:(0,f.jsx)(p.gN,{type:"test",autoComplete:"off",name:"channel",placeholder:"Channel",size:"sm",disabled:!0,value:o.channel,component:n.II})}),(0,f.jsx)(n.xJ,{asterisk:!0,label:"Financial Year",invalid:a.financialYear&&t.financialYear,errorMessage:a.financialYear,children:(0,f.jsx)(p.gN,{name:"financialYear",children:e=>{let{field:t,form:a}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Ph,{placeholder:"Select",size:"sm",options:v,field:t,form:a,value:v.filter((e=>e.value===o.financialYear)),onChange:e=>a.setFieldValue(t.name,null===e||void 0===e?void 0:e.value)}),(0,f.jsx)("p",{className:"mt-2",children:o.financialYear&&j(o.financialYear)})]})}})}),(0,f.jsx)(n.xJ,{label:"Last No.",invalid:a.lastNo&&t.lastNo,errorMessage:a.lastNo,asterisk:!0,children:(0,f.jsx)(p.gN,{name:"lastNo",children:e=>{let{field:t,form:a}=e;return(0,f.jsx)(n.II,{type:"text",autoComplete:"off",placeholder:"Last No",size:"sm",value:o.lastNo,onChange:e=>{C(e.target.value,5)&&a.setFieldValue("lastNo",e.target.value)}})}})}),(0,f.jsxs)("div",{className:"text-right mt-6",children:[(0,f.jsx)(n.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:N,children:"Discard"}),(0,f.jsx)(n.zx,{variant:"solid",type:"submit",disabled:!o.channel||!o.financialYear||!o.lastNo,children:"Submit"})]})]})})}})]})};var g=a(1063),x=a(99917),v=a(63014),w=a(29025);const N=function(e){let{filters:t,globalFilterFields:a,invoiceSeries:o,setInvoiceSeries:n,financialYearOptions:c,channel:s,token:l,validateMaxNoLength:u,isEditModeOn:p,setIsEditModeOn:y,currentRouteTitle:C,setShowLoader:N}=e;const[b,j]=(0,r.useState)(null);(0,r.useEffect)((()=>{try{p?D():L()}catch(e){console.error(e)}}),[p]);const S=e=>{try{let t=[];const a=o.map((e=>e.YearMaster.Description));return c.forEach(((o,n)=>{0===n&&t.push(e),a.includes(o.label)||t.push(o.label)})),t}catch(t){console.log(t)}},D=()=>{try{Array.from(document.getElementsByName("row-edit")).forEach((e=>{e.disabled=!0,e.style.color="rgb(100 116 139)",e.classList.add("hover:cursor-not-allowed")}))}catch(e){console.error(e)}},L=()=>{try{Array.from(document.getElementsByName("row-edit")).forEach((e=>{e.disabled=!1,e.style.color="inherit"}))}catch(e){console.error(e)}},T=(0,i.useSelector)((e=>e.theme.mode));return(0,f.jsxs)(x.w,{value:o,editMode:"row",dataKey:"Id",size:"small",onRowEditComplete:async e=>{try{N(!0);let t=[...o],{newData:a,index:r}=e;t[r]=a;const i={LocationCode:s.LocationCode,ChannelCode:s.ChannelCode,YearCode:c.filter((e=>e.label===a.YearMaster.Description))[0].value,LastNo:a.LastNo,IsActive:a.IsActive};if(i.LastNo)if(i.YearCode){let e=null;C===m.Xy?e=await(0,h.mz)(i,a.Id,l):C===m.ug&&(e=await(0,h.ZI)(i,a.Id,l)),e?200===e.status?(n(t),j(null),(0,d.openNotification)("success","Billing series updated successfully.")):(0,d.openNotification)("danger","Unable to update Billing series. Server returned with status code: ".concat(e.status)):(0,d.openNotification)("danger","Something went wrong")}else(0,d.openNotification)("danger","Billing series not updated due to invalid Financial Year.");else(0,d.openNotification)("danger","Billing series not updated due to invalid Last No.");y(!1),N(!1)}catch(t){"response"in t&&"data"in t.response&&"detail"in t.response.data&&"Data is Already Exists"===t.response.data.detail?(0,d.openNotification)("danger","Billing series for selected year already exist."):(0,d.openNotification)("danger","Something went wrong."),N(!1),console.error(t)}},tableStyle:{minWidth:"50rem"},onRowEditInit:e=>{try{y(!0),j(e.data.YearMaster.Description)}catch(t){console.error(t)}},onRowEditCancel:e=>{try{n((t=>{let a=Object.assign([],t);return a.forEach((t=>{t.Id===e.data.Id&&(t.YearMaster.Description=b)})),a})),y(!1)}catch(t){console.log(t)}},filters:t,globalFilterFields:a,children:[(0,f.jsx)(g.s,{field:"Channel.ChannelName",header:"Channel",style:{width:"20%"},bodyStyle:"dark"==T?{}:{border:"1px solid #e5e7eb",color:"black"}}),(0,f.jsx)(g.s,{field:"YearMaster.Description",header:"Financial Year",editor:e=>(e=>{try{return(0,f.jsx)(v.L,{value:e.value,options:S(e.value),onChange:t=>e.editorCallback(t.value),placeholder:"Select",className:"w-full custom-dropdown"})}catch(t){console.error(t)}})(e),style:{width:"20%"},bodyStyle:"dark"==T?{}:{border:"1px solid #e5e7eb",color:"black"}}),(0,f.jsx)(g.s,{field:"LastNo",header:"Last No.",editor:e=>(e=>{try{return(0,f.jsx)(w.o,{type:"text",value:e.value,onChange:t=>{if(u(t.target.value,5))return e.editorCallback(t.target.value)},className:"text-white px-1"})}catch(t){console.error(t)}})(e),style:{width:"20%"},bodyStyle:"dark"==T?{}:{border:"1px solid #e5e7eb",color:"black"}}),(0,f.jsx)(g.s,{header:"Action",rowEditor:!0,headerStyle:{width:"10%",minWidth:"8rem"},bodyStyle:"dark"==T?{}:{border:"1px solid #e5e7eb",color:"black",textAlign:"start"}})]})};var b=a(87890),j=a(24933),S=a(45682);const D=(e,t,a,r,i,s,l)=>(0,f.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,f.jsx)(n.II,{type:"text",size:"sm",value:r,onChange:e=>{try{if(/^[0-9a-zA-Z\s]*$/.test(e.target.value)){const n=e.target.value;let r=(0,o.Z)({},t);r.global.value=n,a(r),i(n)}}catch(n){console.error(n)}},className:"p-inputtext-sm",placeholder:"Search",disabled:s}),(0,f.jsx)(n.zx,{block:!0,variant:"solid",size:"sm",icon:(0,f.jsx)(c.yEd,{}),onClick:()=>e(!0),disabled:s||!(0,d.isChannelSelected)(l),children:"New Billing Series"})]});const L=function(){const e=(0,i.useSelector)((e=>e.locale.selectedChannel)),t=(0,i.useSelector)((e=>e.auth.session.token)),a=(0,i.useSelector)((e=>e.base.common.currentRouteTitle)),[o,c]=(0,r.useState)({global:{value:null,matchMode:b.a6.CONTAINS}}),[u,p]=(0,r.useState)(""),[y,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(null),[w,L]=(0,r.useState)(null),[T,A]=(0,r.useState)(null),[Z,B]=(0,r.useState)(!1),[I,P]=(0,r.useState)(!0);(0,r.useEffect)((()=>{try{!(0,d.isChannelSelected)(e)||a!==m.Xy&&a!==m.ug||(P(!0),k(),E(),g(!1),p(""),P(!1))}catch(t){console.error(t),g(!1),p(""),P(!1)}}),[e,a]);const k=async()=>{try{const e=await(0,l.U3)();if(200===e.status){if(e.data.length>0){const t=e.data,a=t.map((e=>({value:e.Yearcode,label:e.Description})));v(t),L(a)}}else(0,d.openNotification)("danger","Unable to get financial years. Server returned with status code: ".concat(e.status))}catch(e){console.error(e)}},E=async()=>{try{let o=null;a===m.Xy?o=await(0,h.Ms)(e,t):a===m.ug&&(o=await(0,h.U2)(e,t)),o?200===o.status?A(o.data):204===o.status?A([]):(0,d.openNotification)("danger","Unable to get billing series. Server returned with status code: ".concat(o.status)):(0,d.openNotification)("danger","Something went wrong")}catch(o){console.error(o)}},O=(e,t)=>{try{if("0"!==e||""===e){const a="^\\d{0,".concat(t,"}$");if(new RegExp(a).test(e))return!0}return!1}catch(a){console.error(a)}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Zb,{header:(0,f.jsx)("div",{className:"flex justify-between",children:(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:"flex items-center",children:(0,f.jsx)(s.Z,{})})})}),headerExtra:D(g,o,c,u,p,Z,e),className:"h-full flex flex-col",bodyClass:"text-center grow",children:(0,d.isChannelSelected)(e)?(0,f.jsx)(f.Fragment,{children:Array.isArray(T)&&T.length>0?(0,f.jsx)(N,{filters:o,globalFilterFields:["Channel.ChannelName","YearMaster.Description","LastNo"],invoiceSeries:T,setInvoiceSeries:A,financialYearOptions:w,channel:e,token:t,validateMaxNoLength:O,isEditModeOn:Z,setIsEditModeOn:B,currentRouteTitle:a,setShowLoader:P}):(0,f.jsx)("div",{className:"h-full flex justify-center items-center",children:"No invoice series to show"})}):(0,f.jsx)("div",{className:"h-full flex justify-center items-center",children:"Please select a channel to view invoice series"})}),(0,f.jsx)(C,{showDialog:y,setShowDialog:g,invoiceSeries:T,setInvoiceSeries:A,financialYears:x,financialYearOptions:w,channel:e,token:t,validateMaxNoLength:O,currentRouteTitle:a,setShowLoader:P}),(0,f.jsx)(S.default,{showLoader:I}),(0,f.jsx)(j.Z,{})]})}},89151:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var o=a(45987),n=a(1413),r=a(2803),c=(a(72791),a(58617)),i=a(88406),s=a(80184);const l=["children"];const d=function(e){let{location:t,channel:a,channelList:d,onChange:h}=e;const{Control:u}=i.c;return console.log("channelList",d),(0,s.jsx)(r.Ph,{options:d,components:{Option:e=>{let{innerProps:t,label:a,data:o,isSelected:r}=e;return(0,s.jsxs)("div",(0,n.Z)((0,n.Z)({className:"flex items-center justify-between p-2 ".concat(r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("img",{src:o.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),(0,s.jsx)("span",{className:"ml-2 rtl:mr-2",children:a})]}),r&&(0,s.jsx)(c.dZ6,{className:"text-emerald-500 text-xl"})]}))},Control:e=>{let{children:t}=e,a=(0,o.Z)(e,l);const r=a.getValue()[0];return(0,s.jsxs)(u,(0,n.Z)((0,n.Z)({},a),{},{children:["\xa0\xa0",r&&(0,s.jsx)("img",{src:r.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),t]}))}},value:d.filter((e=>e.ChannelCode===a&&e.LocationCode==t)),onChange:h,placeholder:"Select",className:"caret-white",defaultMenuIsOpen:!0,blurInputOnSelect:!0,autoFocus:!0,styles:{menuList:e=>(0,n.Z)((0,n.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),control:e=>(0,n.Z)((0,n.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),input:e=>(0,n.Z)((0,n.Z)({},e),{},{color:"white"})}})}},96361:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var o=a(79139),n=a(60364),r=a(11087),c=a(80184);const i=e=>{let{ModuleText:t="Admin",Component:a,links:i}=e;(0,n.useSelector)((e=>e.auth.session.currentRouteKey));const s=(0,n.useSelector)((e=>e.base.common.currentRouteTitle));console.log(s);const{title:l,Moduletitle:d}=(0,n.useSelector)((e=>e.auth.user));return(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-xl font-medium",children:s}),(0,c.jsxs)(o.Breadcrumbs,{style:{marginLeft:"-15px",width:"auto"},children:[(0,c.jsx)(r.rU,{to:"/home",className:"opacity-60 text-xs",children:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,c.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,c.jsx)(r.rU,{to:"/".concat("SALES ADMIN"===d?"SalesAdmin":d),className:"opacity-60 text-xs",children:(0,c.jsx)("span",{children:d})}),(0,c.jsx)(r.rU,{to:"#",className:"text-xs",children:(0,c.jsx)("span",{children:s})})]})]})}},45682:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(2803),n=(a(72791),a(80184));const r=function(e){let{showLoader:t}=e;return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,n.jsx)(o.$j,{size:"3.25rem"})}):(0,n.jsx)(n.Fragment,{})})}},24933:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var o=a(2803),n=a(72791),r=a(60364),c=a(11308),i=a(36064),s=a(88406),l=a(81320),d=a(89151),h=a(80184);const{Control:u}=s.c;const p=function(){const e=(0,r.useSelector)((e=>e.locale.isSelectChannelDialogOpen)),t=(0,r.useSelector)((e=>e.locale.selectedChannel)),a=(0,r.useSelector)((e=>e.locale.channelList)),s=(0,r.useSelector)((e=>e.auth.session.LoginId)),u=(0,r.useDispatch)();(0,n.useEffect)((()=>{(async()=>{try{if((0,l.isChannelSelected)(t)?u((0,i.ar)(!1)):u((0,i.ar)(!0)),!a){const e=await m();u((0,i.Uy)(e))}}catch(e){console.error(e)}})()}),[]),(0,n.useEffect)((()=>{try{(0,l.isChannelSelected)(t)&&u((0,i.ar)(!1))}catch(e){console.error(e)}}),[t]);const p=()=>{try{u((0,i.ar)(!1))}catch(e){console.error(e)}},m=async()=>{try{const e=await(0,c.bu)(s);return e.data.map((e=>({value:e.ChannelCode,label:e.LocationName+" "+e.ChannelName,ChannelCode:e.ChannelCode,LocationCode:e.LocationCode,ChannelName:e.ChannelName,ColorClass:"bg-rose-500",LocationName:e.LocationName,imgPath:e.Channel_Image})))}catch(e){throw e}};return(0,h.jsx)(h.Fragment,{children:Array.isArray(a)&&(0,h.jsxs)(o.Vq,{isOpen:e,onClose:p,onRequestClose:p,children:[(0,h.jsx)("h5",{className:"mb-6",children:"Select Channel"}),(0,h.jsx)("p",{className:"text-white mb-1",children:"Channel"}),(0,h.jsx)(d.Z,{channel:t,channelList:a,onChange:e=>{u((0,i.z8)(e))}}),(0,h.jsx)("div",{className:"text-right mt-6",children:(0,h.jsx)(o.zx,{variant:"solid",onClick:p,children:"Close"})})]})})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{},38416:(e,t,a)=>{var o=a(64062);e.exports=function(e,t,a){return(t=o(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},42122:(e,t,a)=>{var o=a(38416);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}e.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},95036:(e,t,a)=>{var o=a(18698).default;e.exports=function(e,t){if("object"!=o(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64062:(e,t,a)=>{var o=a(18698).default,n=a(95036);e.exports=function(e){var t=n(e,"string");return"symbol"==o(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=1845.27ce6552.chunk.js.map