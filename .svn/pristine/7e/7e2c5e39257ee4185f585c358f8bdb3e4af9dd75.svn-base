"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[95,7065],{26235:(e,a,t)=>{t.d(a,{Z:()=>d});var s=t(1413),o=(t(72791),t(81694)),l=t.n(o),n=t(52639),r=t(57689),c=t(80184);const i=e=>{const{type:a,mode:t,gutter:o,className:i,imgClass:d,style:m,logoWidth:h}=e,u=(0,r.s0)();return(0,c.jsx)("div",{className:l()(" flex logo",i,o),style:(0,s.Z)((0,s.Z)({},m),{width:h}),onClick:()=>u("/home"),children:(0,c.jsx)("img",{style:{height:48,width:100,marginTop:"-10px"},src:"".concat("/img/logo/","logo-").concat(t,"-").concat(a,".png"),alt:"".concat(n.iC," logo")})})};i.defaultProps={mode:"light",type:"full",logoWidth:"auto"};const d=i},25579:(e,a,t)=>{t.d(a,{Ei:()=>f,I6:()=>y,Qj:()=>i,U$:()=>m,Uy:()=>j,Z_:()=>n,_K:()=>p,b6:()=>r,d:()=>c,db:()=>g,fh:()=>u,gg:()=>x,hu:()=>l,iD:()=>d,rd:()=>h,w_:()=>C});t(54048);var s=t(46152),o=t(54748);t(74569);async function l(e){return s.Z.fetchData({url:"/dealmaster/".concat(e),method:"get"})}async function n(e){return s.Z.fetchData({url:"/dealattachment/".concat(e),method:"get"})}async function r(e,a,t){return s.Z.fetchData({url:"/dealmaster/dealforapproval/?DealNumber=".concat(e,"&IsApproved=").concat(a,"&RejectRemark=").concat(t),method:"get"})}async function c(e,a){return s.Z.fetchData({url:"/dealmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&StartDate=").concat((0,o.Tk)(a[0]),"&EndDate=").concat((0,o.Tk)(a[1])),method:"get"})}async function i(e){return s.Z.fetchData({url:"/sponsortypemaster/drop/",method:"get",data:e})}async function d(e){return s.Z.fetchData({url:"/spottypemaster/drop/",method:"get",data:e})}async function m(e){return s.Z.fetchData({url:"/dealdetail/".concat(e),method:"get"})}async function h(e){return s.Z.fetchData({url:"/dealmaster/USP_Sch_DealConsumptionCheck/?DealNumber=".concat(e),method:"get"})}async function u(e,a,t,o,l,n){return s.Z.fetchData({url:"/dealmaster/bindstartnendtime/?LocationCode=".concat(l,"&ChannelCode=").concat(n,"&DealPeriodToDate=").concat(e,"&DealPeriodFromDate=").concat(a,"&ContentCode=").concat(t,"&OriginalRepeatCode=").concat(o),method:"get"})}async function p(e,a,t){return s.Z.fetchData({url:"/bookingdetails/bookingchange/?flag=".concat(e,"&IsNtc=").concat(t),method:"put",data:a})}async function x(e,a){var t={params:a};return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:t,method:"post"})}async function f(e){return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:{params:{}},method:"post"})}async function y(e,a,t){var o={params:{Bookingcode:a,IsNTC:t}};return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:o,method:"post"})}async function g(e){var a={params:{CheckMonth:e}};return s.Z.fetchData({url:"/callstoreprocedure/USP_DealDashboardDoughnut",data:a,method:"post"})}async function j(e,a){var t={params:{BookingNumber:a,deallineitemno:0}};return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:t,method:"post"})}async function C(e){return s.Z.fetchData({url:"currencyexchangerate/?basecurrency=".concat(e),method:"post"})}},96361:(e,a,t)=>{t.d(a,{Z:()=>r});var s=t(79139),o=t(60364),l=t(11087),n=t(80184);const r=e=>{let{ModuleText:a="Admin",Component:t,links:r}=e;(0,o.useSelector)((e=>e.auth.session.currentRouteKey));const c=(0,o.useSelector)((e=>e.base.common.currentRouteTitle));console.log(c);const{title:i,Moduletitle:d}=(0,o.useSelector)((e=>e.auth.user));return(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xl font-medium",children:c}),(0,n.jsxs)(s.Breadcrumbs,{style:{marginLeft:"-15px",width:"auto"},children:[(0,n.jsx)(l.rU,{to:"/home",className:"opacity-60 text-xs",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,n.jsx)(l.rU,{to:"/".concat("SALES ADMIN"===d?"SalesAdmin":d),className:"opacity-60 text-xs",children:(0,n.jsx)("span",{children:d})}),(0,n.jsx)(l.rU,{to:"#",className:"text-xs",children:(0,n.jsx)("span",{children:c})})]})]})}},2912:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(1413),o=t(2803),l=t(72791),n=t(60364),r=t(9494),c=t(81320),i=t(96361),d=t(93673),m=t(27065),h=t(40071),u=t(97261),p=t(80184);const x={groupBy:!1,manageColumns:!1},f=()=>{const e=(0,n.useSelector)((e=>e.locale.selectedChannel)),[a,t]=(0,l.useState)([]),[f,y]=(0,l.useState)(""),[g,j]=(0,l.useState)(!1),[C,N]=(0,l.useState)({}),[v,D]=(0,l.useState)([]),S=(0,l.useMemo)((()=>[{header:"Deal No",accessorKey:"DealCode"},{header:"Executive",accessorKey:"Emp_FirstName"},{header:"Client",accessorKey:"ClientName",cell:e=>{const a=e.row.original;return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"flex items-center  ",children:[(0,p.jsx)(o.qE,{size:25,className:"dark:".concat((0,u.H)()," ").concat((0,u.H)()),children:a.ClientName.slice(0,1)}),(0,p.jsx)("p",{className:"ml-2 capitalize",children:a.ClientName})]})})},options:{cell:{style:{paddingBlock:"0px"}}}},{header:"Agency",accessorKey:"AgencyName",options:{cell:{style:{paddingBlock:"0px"}}}},{header:"PayRoute",accessorKey:"PayRouteName",options:{cell:{style:{paddingBlock:"0px"}}}},{header:"Action",accessorKey:"Action",cell:e=>{const a=e.row.original;return(0,p.jsx)("div",{children:(0,p.jsx)(o.u,{title:"View Deal ",children:(0,p.jsx)(o.zx,{size:"xs",onClick:()=>{j(!0),N(a)},icon:(0,p.jsx)(h.gxi,{})})})})},options:{cell:{style:{paddingBlock:"0px"}}}}]),[]);return(0,l.useEffect)((()=>{0==g&&(async()=>{let a={};a.par_LocationCode=e.LocationCode,a.par_ChannelCode=e.ChannelCode;try{const e=await(0,r.apiCallstoreprocedure)("USP_DealsForApproval",a);if(204===e.status)return void t([]);if(200===e.status){t((()=>e.data.map((e=>(0,s.Z)({},e))))())}}catch(o){o.response&&404===o.response.status&&((0,c.openNotification)("warning","Deal Not found"),t([]))}})()}),[g,e]),(0,p.jsx)(o.Zb,{header:(0,p.jsx)(i.Z,{}),bodyClass:"grow",children:(0,p.jsxs)("div",{children:[!g&&(0,p.jsx)(d.Z,{tableData:a,originalColumns:S,managedColumns:v,setManagedColumns:D,exportFileName:"Deal Approvel",columnsToFormatInINR:[],toolbarOptions:x,externalGlobalFilter:f}),g&&(0,p.jsx)(m.default,{Deal:C,setIsOpenApproval:j})]})})}},27065:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var s=t(81721),o=t(26235),l=t(2803),n=t(72791),r=t(58617),c=t(60364),i=t(25579),d=t(23532),m=t(60647),h=(t(24564),t(36996)),u=t(48080),p=t(30948),x=t(80184);const{Tr:f,Th:y,Td:g,THead:j,TBody:C,TFoot:N}=l.iA,v=e=>{let{label:a,value:t,DealData:s}=e;return(0,x.jsxs)(f,{children:[(0,x.jsx)(g,{className:"!border-t-0",colSpan:"11"}),(0,x.jsx)(g,{className:"font-semibold !border-t-0",style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsx)("p",{style:{fontSize:14,fontWeight:900,color:"white"},children:a})}),(0,x.jsx)(g,{className:"!py-5 !border-t-0",style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsxs)("h6",{className:"flex",children:["Total Seconds"==a||"Total Spots"==a?null:(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",s.CurrencySymbol]}),"Total Seconds"==a||"Total Spots"==a?t:(0,x.jsx)(D,{amount:t})]})})]})},D=e=>{let{amount:a}=e;return(0,x.jsx)(p.Z,{displayType:"text",style:{fontSize:16,color:"white"},value:a,thousandSeparator:!0})},S=e=>{let{DealDataDetails:a=[],DealData:t={}}=e;const s=(0,n.useMemo)((()=>[{header:"Deal",accessorKey:"DealLineItemTypeName"},{header:"Content",accessorKey:"ContentName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.ContentName?a.ContentName:"NA"})}},{header:"TimeBand",accessorKey:"TimeBandName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.TimeBandName?a.TimeBandName:"NA"})}},{header:"Spot Type",accessorKey:"SpotTypeName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.SpotTypeName?a.SpotTypeName:"NA"})}},{header:"NTC Type",accessorKey:"NTCTypeName",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.NTCTypeName?a.NTCTypeName:"NA"})}},{header:"Weekdays",accessorKey:"WeekdaysName"},{header:"Start",accessorKey:"StartTime"},{header:"End",accessorKey:"EndTime"},{header:"Rate",accessorKey:"Rate",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("h6",{className:"flex",children:[(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",t.CurrencySymbol]}),(0,x.jsx)(D,{amount:a.Rate})]})})}},{header:"Spots",accessorKey:"TotalSpots",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.TotalSpots?a.TotalSpots:"0"})}},{header:"NTC Spots",accessorKey:"NTCTotalSpots",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.NTCTotalSpots?a.NTCTotalSpots:"0"})}},{header:"Seconds",accessorKey:"Seconds",cell:e=>{const a=e.row.original;return(0,x.jsx)(x.Fragment,{children:a.Seconds?a.Seconds:"0"})}},{header:"Amount",accessorKey:"Amount",cell:e=>{const a=e.row.original;return console.log(a),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("h6",{className:"flex",children:[(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",t.CurrencySymbol]}),(0,x.jsx)(D,{amount:a.Amount})]})})}}]),[]),o=(0,h.b7)({data:a,columns:s,getCoreRowModel:(0,u.sC)()});return(0,x.jsxs)(l.iA,{children:[(0,x.jsx)(j,{children:o.getHeaderGroups().map((e=>(0,x.jsx)(f,{children:e.headers.map((e=>(0,x.jsx)(y,{colSpan:e.colSpan,children:(0,h.ie)(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,x.jsx)(C,{children:o.getRowModel().rows.map((e=>(0,x.jsx)(f,{style:{height:"50px",borderBottom:"1px solid #fffafa40"},children:e.getVisibleCells().map((e=>(0,x.jsx)(g,{children:(0,h.ie)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))}),(0,x.jsxs)(N,{children:[(0,x.jsx)(v,{label:"Total Seconds",value:t.TotalSeconds,DealData:t}),(0,x.jsx)(v,{label:"Total Spots",value:t.NTCTotalSpots?t.NTCTotalSpots:0+t.TotalSpots?t.TotalSpots:0,DealData:t}),(0,x.jsxs)(f,{children:[(0,x.jsx)(g,{className:"!border-t-0",colSpan:"11"}),(0,x.jsx)(g,{style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsx)("p",{style:{fontSize:14,fontWeight:900,color:"white"},children:"Grand Amount"})}),(0,x.jsx)(g,{style:{borderBottom:"1px solid #fffafa40",height:"40px"},children:(0,x.jsxs)("h6",{className:"flex",children:[(0,x.jsxs)("h6",{className:"flex mr-1",children:[" ",t.CurrencySymbol]}),(0,x.jsx)(D,{amount:t.TotalAmount})]})})]})]})]})};var T=t(81320);const b=e=>{let{Deal:a,setIsOpenApproval:t}=e;const h=(0,c.useSelector)((e=>e.auth.session.Username)),[u,p]=(0,n.useState)([]),[f,y]=(0,n.useState)(""),[g,j]=(0,n.useState)(""),[C,N]=(0,n.useState)(""),[v,D]=(0,n.useState)(!1),b=e=>{D(!1),y(""),j(""),N("")};(0,n.useEffect)((()=>{(async e=>{const t=await(0,i.U$)(a.DealNumber);p(t.data)})()}),[]);const w=(0,c.useSelector)((e=>e.theme.mode)),{textTheme:k}=(0,d.Z)(),A={weekday:"long",year:"numeric",month:"long",day:"numeric"},Z=async(e,a,s)=>{if(""!==s)try{const o=await(0,i.b6)(e,a,s);if(204==o.status)return(0,T.openNotification)("warning","Deal Not Found"),void t(!1);if(200==o.status)return void(1==a?((0,T.openNotification)("success","Deal Approved Successfully"),t(!1)):((0,T.openNotification)("success","Deal Rejected Successfully"),t(!1)))}catch(o){if(500==o.response.status)return(0,T.openNotification)("danger","Server Error"),void t(!1)}finally{D(!1)}else(0,T.openNotification)("warning","Please Enter Valid Remark to Reject Deal.")};return(0,x.jsxs)(s.W2,{className:"h-full",children:[(0,x.jsxs)(l.Zb,{className:"h-full",bodyClass:"h-full",children:[(0,x.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-10",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(o.Z,{className:"mb-3",mode:w}),(0,x.jsx)("address",{className:"not-italic",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("h5",{className:"mb-3 capitalize ",children:[null===a||void 0===a?void 0:a.DealTypeName,", ",null===a||void 0===a?void 0:a.Emp_FirstName,"."]}),(0,x.jsxs)("span",{className:"IN",children:["Client & City : ",null===a||void 0===a?void 0:a.ClientName," & ",null===a||void 0===a?void 0:a.ClientPlaceName]}),(0,x.jsxs)("span",{className:"IN",children:["Agency & City : ",null===a||void 0===a?void 0:a.AgencyName," & ",null===a||void 0===a?void 0:a.AgencyPlaceName]}),(0,x.jsxs)("span",{className:"IN",children:["Pay Route : ",null===a||void 0===a?void 0:a.PayRouteName]})]})})]}),(0,x.jsxs)("div",{className:"my-4",children:[(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsxs)("h4",{children:["Deal #",null===a||void 0===a?void 0:a.DealCode]}),(0,x.jsxs)("span",{children:["Date:"," ",new Date(null===a||void 0===a?void 0:a.DealCreatedDate).toLocaleDateString("en-US",A)]})]}),(0,x.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,x.jsx)(r.Bge,{size:30,className:"".concat(k)}),(0,x.jsx)("div",{className:"ltr:ml-3 rtl:mr-3 ",children:(0,x.jsx)(l.u,{title:"Start Date / End Date",children:(0,x.jsxs)("div",{className:"mb-1 ",children:[new Date(null===a||void 0===a?void 0:a.DealPeriodFromDate).toLocaleDateString("en-US",A)," ",(0,x.jsx)("br",{})," ",new Date(null===a||void 0===a?void 0:a.DealPeriodToDate).toLocaleDateString("en-US",A)]})})})]})]})]}),(0,x.jsx)(S,{DealDataDetails:u,DealData:a}),(0,x.jsxs)("div",{className:"flex justify-between mt-5",children:[(0,x.jsx)(l.zx,{className:"mr-2",onClick:()=>t(!1),children:"Back"}),(0,x.jsxs)("div",{className:"flex justify-end ",children:[(0,x.jsx)(l.zx,{className:"mr-2",onClick:()=>{j(null===a||void 0===a?void 0:a.DealNumber),N(2),D(!0)},children:"Reject"}),(0,x.jsx)(l.zx,{variant:"solid",onClick:()=>{Z(null===a||void 0===a?void 0:a.DealNumber,1,"Approved BY"+h)},children:"Approve"})]})]})]}),(0,x.jsxs)(m.Z,{isOpen:v,onClose:b,onRequestClose:b,children:[(0,x.jsx)("h5",{className:"mb-4",children:"Deal Reject Remark"}),(0,x.jsx)(l.II,{placeholder:"Remark",onChange:e=>y(e.target.value),textArea:!0}),(0,x.jsxs)("div",{className:"text-right mt-6",children:[(0,x.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:b,children:"Cancel"}),(0,x.jsx)(l.zx,{variant:"solid",onClick:()=>Z(g,C,f),children:"Okay"})]})]})]})}},987:(e,a,t)=>{t.d(a,{v:()=>n});var s=t(72791),o=t(15036);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},l.apply(this,arguments)}var n=s.memo(s.forwardRef((function(e,a){var t=o.A.getPTI(e);return s.createElement("svg",l({ref:a,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.createElement("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"}))})));n.displayName="ChevronDownIcon"},88170:(e,a,t)=>{t.d(a,{X:()=>n});var s=t(72791),o=t(15036);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},l.apply(this,arguments)}var n=s.memo(s.forwardRef((function(e,a){var t=o.A.getPTI(e);return s.createElement("svg",l({ref:a,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.createElement("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"}))})));n.displayName="ChevronRightIcon"},24564:()=>{}}]);
//# sourceMappingURL=95.5ffe59a1.chunk.js.map