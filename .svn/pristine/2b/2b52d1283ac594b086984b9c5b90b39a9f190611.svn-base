(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[8304,5682],{42264:(e,t,a)=>{"use strict";a.d(t,{Kc:()=>c,Ms:()=>i,Rd:()=>y,U2:()=>m,Vg:()=>s,Vm:()=>u,Yd:()=>l,ZI:()=>x,bn:()=>p,mz:()=>h,pf:()=>d,xS:()=>C,yv:()=>f});var o=a(54048),r=a(46152);const n=a(74569),c=(e,t,a,r,c)=>{try{return new Promise(((s,i)=>{let l={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/asrun/?TelecastDate=".concat(t,"&LocationCode=").concat(a,"&ChannelCode=").concat(r),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},data:e};n.request(l).then((e=>{s(e)})).catch((e=>{i(e)}))}))}catch(s){throw new Error(s)}},s=(e,t)=>{let{filter:a,id:r,loginCode:c,fromDate:s,uptoDate:i,channelCode:l,locationCode:d}=e;try{return new Promise(((e,h)=>{let u={method:"get",url:o.Z.apiPrefix+"/invoice/getinvoice/?Filter=".concat(a,"&ID=").concat(r,"&LoginCode=").concat(c,"&FromDate=").concat(s,"&UptoDate=").concat(i,"&ChannelCode=").concat(l,"&LocationCode=").concat(d),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};n.request(u).then((t=>{e(t)})).catch((e=>{h(e)}))}))}catch(h){throw new Error(h)}},i=(e,t)=>{try{return r.Z.fetchData({method:"get",url:"/invoiceseries/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},l=(e,t)=>{let{filter:a,id:r,loginCode:c,fromDate:s,uptoDate:i,channelCode:l,locationCode:d,SpotTypeCode:h}=e;try{return new Promise(((e,u)=>{let m={method:"get",url:o.Z.apiPrefix+"/invoice/gettelecastreport/?Filter=".concat(a,"&ID=").concat(r,"&LoginCode=").concat(c,"&FromDate=").concat(s,"&UptoDate=").concat(i,"&ChannelCode=").concat(l,"&LocationCode=").concat(d,"&SpotType=").concat(h),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};n.request(m).then((t=>{e(t)})).catch((e=>{u(e)}))}))}catch(u){throw new Error(u)}},d=async(e,t)=>{try{return new Promise(((a,r)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseries/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};n.request(c).then((e=>{a(e)})).catch((e=>{r(e)}))}))}catch(a){throw a}},h=(e,t,a)=>{try{return new Promise(((r,c)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseries/".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};n.request(s).then((e=>{r(e)})).catch((e=>{c(e)}))}))}catch(r){throw new Error(r)}},u=(e,t)=>{let{filter:a,id:r,loginCode:c,fromDate:s,uptoDate:i,channelCode:l,locationCode:d}=e;try{return new Promise(((e,h)=>{let u={method:"get",url:o.Z.apiPrefix+"/invoice/getinvoiceNTC/?Filter=".concat(a,"&ID=").concat(r,"&LoginCode=").concat(c,"&FromDate=").concat(s,"&UptoDate=").concat(i,"&ChannelCode=").concat(l,"&LocationCode=").concat(d),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}};n.request(u).then((t=>{e(t)})).catch((e=>{h(e)}))}))}catch(h){throw new Error(h)}},m=(e,t)=>{try{return r.Z.fetchData({method:"get",url:"/invoiceseriesntc/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},p=async(e,t)=>{try{return new Promise(((a,r)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseriesntc/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};n.request(c).then((e=>{a(e)})).catch((e=>{r(e)}))}))}catch(a){throw a}},x=(e,t,a)=>{try{return new Promise(((r,c)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/invoiceseriesntc/".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};n.request(s).then((e=>{r(e)})).catch((e=>{c(e)}))}))}catch(r){throw new Error(r)}},f=e=>{try{return r.Z.fetchData({method:"get",url:"/yeartaxdetail/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}catch(t){throw t}},y=(e,t,a)=>{try{return new Promise(((r,c)=>{let s={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/yeartaxdetail/?YearCode=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:t};n.request(s).then((e=>{r(e)})).catch((e=>{c(e)}))}))}catch(r){throw r}},C=(e,t,a,r)=>{try{return new Promise(((c,s)=>{let i={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/asrun/asrunmatch/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&IsNTC=").concat(r),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};n.request(i).then((e=>{c(e)})).catch((e=>{s(e)}))}))}catch(c){throw c}}},28179:(e,t,a)=>{"use strict";a.d(t,{$H:()=>c,$o:()=>S,Bo:()=>b,D_:()=>k,Eg:()=>D,JN:()=>j,M0:()=>h,ND:()=>s,OY:()=>i,SR:()=>x,Sd:()=>y,U2:()=>N,U3:()=>v,XV:()=>u,fU:()=>T,fy:()=>g,fz:()=>A,g7:()=>z,h:()=>p,iH:()=>l,ih:()=>I,jS:()=>w,kP:()=>d,ko:()=>m,m1:()=>f,mg:()=>P,pc:()=>B,qm:()=>C});var o=a(54048),r=a(46152);a(60630);const n=a(74569);async function c(e){return r.Z.fetchData({url:"/commercialtypemaster/",method:"get",data:e})}async function s(e,t,a){return r.Z.fetchData({url:"/spotcancellation/?CancelRemarkCode=".concat(t,"&IsNTC=").concat(a),method:"put",data:e})}const i=(e,t)=>new Promise(((a,r)=>{let c=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),s={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:c};n.request(s).then((e=>{a(e)})).catch((e=>{r(e)}))})),l=(e,t)=>new Promise(((a,r)=>{let c=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/".concat(e.CommercialTypeCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:c};n.request(s).then((e=>{a(e)})).catch((e=>{r(e)}))}));async function d(e){return r.Z.fetchData({url:"/commercialmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&IsNTC=").concat(e.IsNTC,"&fromdate=").concat(e.FromDate,"&todate=").concat(e.ToDate),method:"get"})}async function h(e,t){return r.Z.fetchData({url:"/bookingmaster/?IsNTC=".concat(e.IsNTC,"&LocationCode=").concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function u(e,t,a,o,n,c,s,i,l,d,h){return r.Z.fetchData({url:"/spotschedule/USP_SA_RO_SpotSchedule/?From_DT=".concat(e,"&To_DT=").concat(t,"&DealNumber=").concat(a,"&BookingNumber=").concat(o,"&ChannelCode=").concat(c,"&LocationCode=").concat(s,"&ScheduleDate=").concat(n,"&IsMakeGoodRO=").concat(i?1:0,"&BookingRefNumber=").concat(l,"&IsNTC=").concat(d,"&BrandCode=").concat(h),method:"get"})}async function m(e,t,a,o,n,c){return r.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(o,"&ChannelCode=").concat(n,"&ClientCode=").concat(t.value,"&BrandCode=").concat(e.value,"&DurInSec=").concat(a.DurInSec,"&IsNTC=").concat(c),method:"get"})}async function p(e,t,a,o,n){return r.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(a,"&ChannelCode=").concat(o,"&ClientCode=").concat(t,"&BrandCode=").concat(e,"&IsNTC=").concat(n),method:"get"})}const x=(e,t)=>new Promise(((a,r)=>{let c={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};console.log(c.url),n.request(c).then((e=>{a(e)})).catch((e=>{r(e)}))})),f=(e,t,a)=>new Promise(((r,c)=>{let s={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};n.request(s).then((e=>{r(e)})).catch((e=>{c(e)}))}));async function y(e){return r.Z.fetchData({url:"/positionmaster/drop/",method:"get",data:e})}async function C(e){return r.Z.fetchData({url:"/spotpositiontypemaster/drop/",method:"get",data:e})}async function g(e){return r.Z.fetchData({url:"/cancelremarkmaster/",method:"get",data:e})}const j=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})}),D=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster/".concat(e.CancelRemarkCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})});async function v(e){return r.Z.fetchData({url:"/yearmaster/",method:"get",data:e})}const T=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})}),b=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster/".concat(e.Yearcode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})});async function w(e){return r.Z.fetchData({url:"/taxmaster/",method:"get",data:e})}async function S(e){return r.Z.fetchData({url:"/taxmaster/",method:"post",data:e})}async function N(e,t){return r.Z.fetchData({url:"/taxmaster/".concat(t),method:"put",data:e})}const A=(e,t,a)=>{try{return r.Z.fetchData({method:"get",url:"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&traficmonth=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},k=(e,t,a,o)=>{try{return r.Z.fetchData({method:"get",url:"/trafficdayclose/asperfromto/?LocationCode=".concat(a.LocationCode,"&ChannelCode=").concat(a.ChannelCode,"&fromdate=").concat(e,"&todate=").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}})}catch(n){throw new Error(n)}},P=async(e,t,a)=>{try{return new Promise(((r,c)=>{let s={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};n.request(s).then((e=>{r(e)})).catch((e=>{c(e)}))}))}catch(r){throw r}},I=(e,t,a)=>{try{return r.Z.fetchData({method:"get",url:"/bookingmaster/getbookingbyclient/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&ClientCode=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},z=(e,t)=>{try{return r.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivity/?BookingNumber=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},B=(e,t,a)=>{try{return console.log(e),r.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivitybydate?BookingNumber=".concat(t,"&ChangeType=").concat(e.type,"&ChangeOn=").concat(e.dateTime,"&ChangeBy=").concat(e.executerId),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}}},44630:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var o=a(72791);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;const[t,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{if(t){let t=setTimeout((()=>a("")),e);return()=>{clearTimeout(t)}}}),[t]),[t,a]}},25190:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var o=a(72791),r=a(2803),n=a(25763),c=a(40071),s=a(81320),i=a(80184);const l=e=>{let{label:t,value:a,badgeColor:o}=e;return(0,i.jsxs)("li",{className:"flex items-center justify-between",children:[(0,i.jsxs)("span",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"mr-2 rounded-full ".concat(o," w-2 h-2")}),t]}),(0,i.jsxs)("span",{className:"font-semibold",children:[a,"%"]})]})};const d=function(e){let{yearTaxDetail:t,setIsAddTaxesDialogOpen:a,setClickedYearTaxDetail:o,setAddTaxesDialogType:d}=e;return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)(r.Zb,{className:"dark:hover:bg-gray-700 hover:bg-gray-300 hover:cursor-pointer",style:{minHeight:"10rem"},bodyClass:"p-3 h-full flex flex-col",bordered:!1,onClick:()=>{try{a(!0),o(t),t.Yeartaxdetails.length>0?d("edit"):d("add")}catch(e){(0,s.openNotification)("danger","Something went wrong"),console.error(e)}},children:t.Yeartaxdetails.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-1 border-b border-dashed border-dash-2 border-b-gray-600",children:[(0,i.jsx)("h6",{children:t.Description}),(0,i.jsx)(r.u,{title:"Edit",children:(0,i.jsx)(r.zx,{shape:"circle",variant:"plain",className:"-mt-1 -mr-2 opacity-80",icon:(0,i.jsx)(n.LBv,{size:19,className:"opacity-80"})})})]}),(0,i.jsx)("ul",{className:"flex flex-col gap-3",children:(0,s.sortArray)(t.Yeartaxdetails,"TaxName").map((e=>(0,i.jsx)(l,{label:e.TaxName,value:e.TaxPercentage,badgeColor:"bg-teal-700"},e.Taxcode)))})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-1 border-b border-dashed border-dash-2 border-b-gray-600",children:[(0,i.jsx)("h6",{children:t.Description}),(0,i.jsx)(r.u,{title:"Add",children:(0,i.jsx)(r.zx,{shape:"circle",variant:"plain",className:"-mt-1 -mr-2",icon:(0,i.jsx)(c.b0B,{size:25,className:"opacity-80"})})})]}),(0,i.jsx)("div",{className:"flex justify-center items-center grow",children:"Add Taxes"})]})})})};var h=a(42264),u=a(60364),m=a(45682),p=a(54748),x=a(92506),f=a(28179),y=a(81724);const C=y.Ry().shape({selectedTaxes:y.IX().min(1,"Atleast 1 tax required")});const g=function(e){let{isAddTaxesDialogOpen:t,setIsAddTaxesDialogOpen:a,clickedYearTaxDetail:n,setClickedYearTaxDetail:c,setYearTaxDetailsFromAPI:l,setShowLoader:d,addTaxesDialogType:u,setAddTaxesDialogType:m,token:y}=e;const[g,j]=(0,o.useState)([]),[D,v]=(0,o.useState)(null);(0,o.useEffect)((()=>{(async()=>{try{d(!0);const e=await(0,f.jS)();if(200===e.status){let t=[];e.data.forEach((e=>{1===e.IsActive&&t.push({value:e.TaxCode,label:e.TaxName})})),j(t)}else 204===e.status?j([]):(0,s.openNotification)("danger","Unable to fetch taxes. Server responded with status code ".concat(e.status));d(!1)}catch(e){(0,s.openNotification)("Something went wrong while fetching taxes"),console.error(e),d(!1)}})()}),[]),(0,o.useEffect)((()=>{try{if(null!==n){let e={selectedTaxes:[]};n.Yeartaxdetails.forEach((t=>{e.selectedTaxes.push({value:t.TaxCode,label:t.TaxName}),e[t.TaxName]=t.TaxPercentage})),v(e)}else v(null)}catch(e){console.error(e)}}),[n]);const T=()=>{try{a(!1),c(null),m(null)}catch(e){console.error(e)}},b=(e,t)=>{try{let a=null;const o=Object.keys(t),r=e.map((e=>e.label));return o.forEach((e=>{r.includes(e)||(a=e)})),a}catch(a){throw a}},w=e=>{try{let t=!0;return Object.keys(e).forEach((a=>{"selectedTaxes"!==a?"number"==typeof e[a]||(t=!1):0===e[a].length&&(t=!1)})),t}catch(t){console.error(t)}},S=e=>{try{e.setFormikState((e=>{let t=JSON.parse(JSON.stringify(e));return Object.keys(t.values).forEach((e=>{"selectedTaxes"===e?t.values[e]=[]:delete t.values[e]})),t}))}catch(t){throw t}};return(0,i.jsx)(i.Fragment,{children:D&&(0,i.jsxs)(r.Vq,{isOpen:t,onClose:T,onRequestClose:T,contentClassName:"flex flex-col",children:[(0,i.jsx)("h5",{className:"mb-4",children:"Add Taxes"}),(0,i.jsx)("div",{children:(0,i.jsx)(x.J9,{initialValues:D,validationSchema:C,onSubmit:async e=>{try{d(!0);const t=e.selectedTaxes.map((t=>({TaxCode:t.value,TaxPercentage:e[t.label]})));await(0,h.Rd)(n.Yearcode,t,y),await l(),d(!1),(0,s.openNotification)("success","Year tax details ".concat("add"===u?"added":"updated"," successfully")),T()}catch(t){(0,s.openNotification)("danger","Something went wrong"),console.error(t),d(!1)}},children:e=>{let{values:t,touched:a,errors:o}=e;return(0,i.jsxs)(x.l0,{children:[(0,i.jsxs)(r.Yb,{className:"flex flex-col gap-3 h-[60vh] overflow-auto px-2",children:[(0,i.jsx)(r.lm,{asterisk:!0,label:"Taxes",invalid:Boolean(o.selectedTaxes&&a.selectedTaxes),errorMessage:o.selectedTaxes,children:(0,i.jsx)(x.gN,{name:"selectedTaxes",children:e=>{let{field:a,form:o}=e;return(0,i.jsx)(r.Ph,{isMulti:!0,field:a,form:o,placeholder:"Select",options:g,onChange:e=>{((e,t,a,o)=>{try{0===e.length?S(a):e.at(-1).label in t?b(e,t)?(a.setFieldValue(o.name,e),a.setFormikState((a=>{let r=JSON.parse(JSON.stringify(a));return delete r.values[b(e,t)],r.values[o.name]=e,r}))):a.setFieldValue(o.name,e):(a.setFieldValue(e.at(-1).label,""),a.setFieldValue(o.name,e))}catch(r){console.error(r)}})(e,t,o,a)},value:t.selectedTaxes,defaultMenuIsOpen:!0,className:"caret-white mt-1",autoFocus:!0,size:"sm"})}})}),t.selectedTaxes.map((e=>(0,i.jsx)(r.lm,{asterisk:!0,label:e.label.trim(),invalid:o.tax&&a.tax,errorMessage:o.tax,children:(0,i.jsx)(x.gN,{name:e.label,children:a=>{let{field:o,form:n}=a;return(0,i.jsx)(r.II,{placeholder:e.label.trim(),type:"number",suffix:"%",className:"mt-1",size:"sm",value:t[e.label],onChange:e=>((e,t,a)=>{try{let o=0;Object.keys(a.values).forEach((e=>{"selectedTaxes"!==e&&e!==t.name&&(o+=a.values[e])})),""===e.target.value?a.setFieldValue(t.name,e.target.value):(0,p.n1)(e.target.value)&&parseInt(e.target.value)>0&&parseInt(e.target.value)<=100-o&&a.setFieldValue(t.name,parseInt(e.target.value))}catch(o){console.error(o)}})(e,o,n)})}})})))]}),(0,i.jsxs)("div",{className:"text-right mt-6",children:[(0,i.jsx)(r.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:T,type:"button",children:"Cancel"}),(0,i.jsx)(r.zx,{variant:"solid",disabled:!w(t),type:"submit",children:"Save"})]})]})}})})]})})};var j=a(58617),D=a(44630),v=a(3572);const T=function(){const e=(0,u.useSelector)((e=>e.auth.session.token)),[t,a]=(0,o.useState)(null),[n,c]=(0,o.useState)(null),[l,p]=(0,o.useState)(""),[x,f]=(0,o.useState)(!1),[y,C]=(0,o.useState)(!1),[T,b]=(0,o.useState)(!1),[w,S]=(0,o.useState)(null),[N,A]=(0,D.Z)();(0,o.useEffect)((()=>{(async()=>{try{f(!0),await k(),f(!1)}catch(e){(0,s.openNotification)("danger","Something went wrong. Unable to fetch year tax details."),console.error(e),f(!1)}})()}),[]);const k=async()=>{try{const t=await(0,h.yv)(e);200===t.status?a(t.data):204===t.status?a([]):(a(null),(0,s.openNotification)("danger","Unable to fetch year tax details. Server responded with status code ".concat(t.status,".")))}catch(t){throw t}};return(0,i.jsxs)(i.Fragment,{children:[N&&(0,i.jsx)(r.bZ,{className:"mb-4",type:l,showIcon:!0,children:N}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h3",{children:"Year Tax Details"}),(0,i.jsx)(r.zx,{variant:"solid",size:"sm",icon:(0,i.jsx)(j.yEd,{}),onClick:()=>b(!0),children:"Add Year Description"})]}),(0,i.jsx)("div",{className:"grid grid-cols-5 gap-4 mt-6",children:t&&t.length>0?(0,i.jsx)(i.Fragment,{children:(0,s.sortArray)(t,"Description","desc").map((t=>(0,i.jsx)(d,{yearTaxDetail:t,setIsAddTaxesDialogOpen:C,setClickedYearTaxDetail:c,setShowLoader:f,setAddTaxesDialogType:S,token:e},t.Yearcode)))}):(0,i.jsx)(r.Zb,{className:"h-full",bodyClass:"h-full flex justify-center items-center",children:"No Year-Tax details to show"})}),(0,i.jsx)(g,{isAddTaxesDialogOpen:y,setIsAddTaxesDialogOpen:C,clickedYearTaxDetail:n,setClickedYearTaxDetail:c,setYearTaxDetailsFromAPI:k,setShowLoader:f,addTaxesDialogType:w,setAddTaxesDialogType:S,token:e}),(0,i.jsx)(v.Z,{editData:[""],isOpen:T,onDrawerClose:()=>b(!1),setMessage:A,setlog:p,submitCallback:k}),(0,i.jsx)(m.default,{showLoader:x})]})}},88449:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var o=a(2803),r=a(78820),n=a(80184);const c=e=>{let{onSaveClick:t,onCancel:a,BtnSaveTxt:c="Save",BtnCancelTxt:s="Discard"}=e;return(0,n.jsxs)("div",{className:"text-left w-full flex",children:[(0,n.jsx)(o.zx,{size:"sm",className:"mr-2",onClick:a,children:s}),(0,n.jsx)(o.zx,{size:"sm",className:"mr-2",variant:"solid",onClick:t,icon:(0,n.jsx)(r.JMf,{}),children:c})]})}},45682:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var o=a(2803),r=(a(72791),a(80184));const n=function(e){let{showLoader:t}=e;return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,r.jsx)(o.$j,{size:"3.25rem"})}):(0,r.jsx)(r.Fragment,{})})}},3572:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var o=a(2803),r=a(72791),n=a(58617),c=a(88449),s=a(92506),i=a(81724),l=a(28179),d=a(60364),h=a(54748),u=a(81320),m=a(80184);const p=i.Ry().shape({Description:i.Z_().matches(/^[-0-9.]+$/,"Only numeric characters are allowed").min(1,"Too Short!").max(20,"Too Long!").required("Required"),StartDate:i.hT().required("Required"),EndDate:i.hT().required("Required"),IsActive:i.Z_().required("Required")}),x=(0,r.forwardRef)(((e,t)=>{const{onDrawerClose:a,editData:r,setMessage:c,setlog:i,submitCallback:x}=e,f=(0,d.useSelector)((e=>e.auth.session.token));return(0,m.jsx)("div",{children:(0,m.jsx)(s.J9,{innerRef:t,initialValues:{Yearcode:r.Yearcode||"",Description:r.Description||"",StartDate:r.StartDate||"",EndDate:r.EndDate||"",IsActive:1===r.IsActive||void 0===r.IsActive},validationSchema:p,onSubmit:(e,t)=>{let{resetForm:o,setSubmitting:n}=t;setTimeout((()=>{r.Yearcode?new Promise(((t,o)=>{n(!1),(async(e,t)=>{try{const a=await(0,l.Bo)(e,t);if("Updated"===a.data.msg)return i("success"),void c("Data Updated Successfully");if("Year Description Already Exists"===a.data.msg)return i("warning"),void c(a.data.msg)}catch(a){return{}}})(e,f).then((e=>{a(0,0),(0,u.openNotification)("success","Year description updated successfully"),t(e)})).catch((e=>{(0,u.openNotification)("danger","Something went wrong"),o(e)}))})):new Promise(((t,r)=>{(async(e,t)=>{try{const a=await(0,l.fU)(e,t);if("success"===a.data.msg)return i("success"),void c("Data Inserted Successfully.");if("Server Error."===a.data.msg)return i("error"),void c("Server Error.")}catch(a){return{}}})(e,f).then((async e=>{"function"===typeof x&&await x(),a(0,0),o(),(0,u.openNotification)("success","Year description added successfully"),t(e)})).catch((e=>{(0,u.openNotification)("danger","Something went wrong"),r(e)}))}))}),400)},children:e=>{let{values:t,touched:a,errors:r}=e;return(0,m.jsx)(s.l0,{children:(0,m.jsx)(o.Yb,{children:(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3",children:[(0,m.jsxs)("div",{className:"col-span-2 ",children:[(0,m.jsx)(s.gN,{size:"sm",type:"Yearcode",autoComplete:"off",name:"Yearcode",placeholder:"Yearcode",component:o.II,hidden:!0}),(0,m.jsx)(o.lm,{asterisk:!0,label:"Year Description",invalid:r.Description&&a.Description,errorMessage:r.Description,children:(0,m.jsx)(s.gN,{size:"sm",autoComplete:"on",name:"Description",placeholder:"Description",className:"mt-1",component:o.II})})]}),(0,m.jsx)(o.lm,{label:"Start Date",asterisk:!0,invalid:r.StartDate&&a.StartDate,errorMessage:r.StartDate,children:(0,m.jsx)(s.gN,{name:"StartDate",placeholder:"Start Date",size:"sm",children:e=>{let{field:a,form:r}=e;return(0,m.jsx)(o.Mt,{field:a,name:"StartDate",size:"sm",className:"mt-1",form:r,prefix:(0,m.jsx)(n.Gmo,{className:"text-xl"}),placeholder:"Select",defaultValue:(0,h.Gu)(t.StartDate)?new Date(t.StartDate):"",onChange:e=>{r.setFieldValue(a.name,(0,h.Tk)(e))}})}})}),(0,m.jsx)(o.lm,{label:"End Date",asterisk:!0,invalid:r.EndDate&&a.EndDate,errorMessage:r.EndDate,children:(0,m.jsx)(s.gN,{name:"EndDate",placeholder:"",size:"sm",children:e=>{let{field:a,form:r}=e;return(0,m.jsx)(o.Mt,{disabled:!t.StartDate,field:a,name:"EndDate",size:"sm",className:"mt-1",form:r,prefix:(0,m.jsx)(n.Gmo,{className:"text-xl"}),placeholder:"Select",defaultValue:(0,h.Gu)(t.EndDate)?new Date(t.EndDate):"",minDate:new Date(new Date(t.StartDate).setDate(new Date(t.StartDate).getDate()+1)),onChange:e=>{r.setFieldValue(a.name,(0,h.Tk)(e))}})}})}),(0,m.jsx)(o.lm,{label:"Status",invalid:r.IsActive&&a.IsActive,errorMessage:r.IsActive,children:(0,m.jsx)("div",{children:(0,m.jsx)(s.gN,{size:"sm",name:"IsActive",component:o.T5})})})]})})})}})})}));const f=function(e){let{editData:t,setMessage:a,isOpen:s,setlog:i,onDrawerClose:l,submitCallback:d}=e;const h=(0,r.useRef)();return(0,m.jsx)(o.dy,{title:t.Description?(0,m.jsxs)("p",{className:"text-xl font-medium   flex ",children:[(0,m.jsx)("center",{children:(0,m.jsx)(o.zx,{size:"xs",variant:"twoTone",icon:(0,m.jsx)(n._vs,{})})}),"\xa0\xa0 Year Master"]}):(0,m.jsxs)("p",{className:"text-xl font-medium   flex ",children:[(0,m.jsx)("center",{children:(0,m.jsx)(o.zx,{size:"xs",variant:"twoTone",icon:(0,m.jsx)(n.yEd,{})})}),"\xa0\xa0Year Master"]}),isOpen:s,onClose:l,onRequestClose:l,width:window.screen.width>400?window.screen.width/3:window.screen.width/1.5,footer:(0,m.jsx)(c.Z,{onCancel:l,onSaveClick:()=>{var e;null===(e=h.current)||void 0===e||e.submitForm()}}),children:(0,m.jsx)(x,{ref:h,onDrawerClose:l,editData:t,setMessage:a,setlog:i,submitCallback:d})})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{},38416:(e,t,a)=>{var o=a(64062);e.exports=function(e,t,a){return(t=o(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},42122:(e,t,a)=>{var o=a(38416);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}e.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},95036:(e,t,a)=>{var o=a(18698).default;e.exports=function(e,t){if("object"!=o(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64062:(e,t,a)=>{var o=a(18698).default,r=a(95036);e.exports=function(e){var t=r(e,"string");return"symbol"==o(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=8304.cfe5b437.chunk.js.map