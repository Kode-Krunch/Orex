import { apiGetCreditratemaster } from "services/CreditcontrolService"
import { apiGetBussinessTypemaster, apiGetCountryDrop, apiGetPlaceMasterbyId, apiGetStateDrop, apiGetStateMasterbyId } from "services/MasterService"

const isAgencyDetailsValid = (values, errors) => {
    return values.agencyName && !errors.agencyName && values.agencyShortName && !errors.agencyShortName && !errors.agencyDetailsErpCode && !errors.pan
        && !errors.tan && !errors.barcCode && values.creditRateLimit && values.businessType && values.mobile && !errors.mobile && !errors.phone && !errors.fax && values.contactPerson && !errors.contactPerson
        && values.email && !errors.email && (values.creditType === 1 ? (values.creditDays && !errors.creditDays) : values.creditType)
}

const agencyDetailsTooltip = (values, errors) => {
    let tooltipMessage = ''
    if (!values.agencyName) tooltipMessage = 'Agency Name Required'
    else if (errors.agencyName) tooltipMessage = 'Agency Name Invalid'
    else if (!values.agencyShortName) tooltipMessage = 'Agency Short Name Required'
    else if (errors.agencyShortName) tooltipMessage = 'Agency Short Name Invalid'
    else if (errors.agencyDetailsErpCode) tooltipMessage = 'ERP Code Invalid'
    else if (errors.pan) tooltipMessage = 'PAN Number Invalid'
    else if (errors.tan) tooltipMessage = 'TAN Number Invalid'
    else if (errors.barcCode) tooltipMessage = 'BARC Code Invalid'
    else if (errors.barcCode) tooltipMessage = 'BARC Code Invalid'
    else if (!values.creditRateLimit) tooltipMessage = 'Credit Rate Limit Required'
    else if (!values.businessType) tooltipMessage = 'Business Type Required'
    else if (!values.mobile) tooltipMessage = 'Mobile Number Required'
    else if (errors.mobile) tooltipMessage = 'Mobile Number Invalid'
    else if (errors.phone) tooltipMessage = 'Phone Number Invalid'
    else if (errors.fax) tooltipMessage = 'FAX Number Invalid'
    else if (errors.fax) tooltipMessage = 'FAX Number Invalid'
    else if (!values.contactPerson) tooltipMessage = 'Contact Person Required'
    else if (errors.contactPerson) tooltipMessage = 'Contact Person Invalid'
    else if (!values.email) tooltipMessage = 'Email Address Required'
    else if (errors.email) tooltipMessage = 'Email Address Invalid'
    else if (!values.creditType) tooltipMessage = 'Credit Type Required'
    else if (values.creditType === 1 && !values.creditDays) tooltipMessage = 'Credit Days Required'
    else if (values.creditType === 1 && values.creditDays && errors.creditDays) tooltipMessage = 'Credit Days Invalid'
    else tooltipMessage = false;
    return tooltipMessage
}

const getCreditRateLimitOptions = async () => {
    try {
        const response = await apiGetCreditratemaster();
        if (response.status === 200) return response.data.map((option) => ({
            ...option,
            value: option.CreditRateCode,
            label: option.CreditRateName,
        }));
        else return []
    } catch (error) {
        console.error(error);
        return []
    }
}

const getBusinessTypeOptions = async () => {
    try {
        const response = await apiGetBussinessTypemaster();
        if (response.status === 200) return response.data.map((option) => ({
            ...option,
            value: option.BusinessTypeCode,
            label: option.BusinessTypeName,
        }));
        else return []
    } catch (error) {
        console.error(error);
        return []
    }
}

const getCountryOptions = async () => {
    try {
        const response = await apiGetCountryDrop();
        if (response.status === 200) return response.data.map((option) => ({
            ...option,
            value: option.CountryCode,
            label: option.CountryName,
        }));
        else return []
    } catch (error) {
        console.error(error);
        return []
    }
}

const getStateOptions = async (countryCode) => {
    try {
        const response = await apiGetStateMasterbyId(countryCode);
        if (response.status === 200) return response.data.map((option) => ({
            ...option,
            value: option.StateCode,
            label: option.StateName,
        }));
        else return []
    } catch (error) {
        console.error(error);
        return []
    }
}

const getCityOptions = async (stateCode) => {
    try {
        const response = await apiGetPlaceMasterbyId(stateCode);
        if (response.status === 200) return response.data.map((option) => ({
            ...option,
            value: option.PlaceCode,
            label: option.PlaceName,
        }));
        else return []
    } catch (error) {
        console.error(error);
        return []
    }
}

export { isAgencyDetailsValid, agencyDetailsTooltip, getCreditRateLimitOptions, getBusinessTypeOptions, getCountryOptions, getStateOptions, getCityOptions }