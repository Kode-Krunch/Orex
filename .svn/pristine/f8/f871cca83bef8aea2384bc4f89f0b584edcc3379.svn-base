"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[7510],{57510:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var i=t(1413),l=t(2803),n=t(54748),a=t(72791),c=t(16856),r=t(63524),o=t(60364),d=t(9494),m=t(81320),x=t(91615),h=t(43235),u=t(80184);const f=e=>{const[s,t]=e.split(":").map(Number),i=new Date;return i.setHours(s),i.setMinutes(t),i.setSeconds(0),i.setMilliseconds(0),i};const j=function(e){let{save_Slotvisible:s,setSave_Slotvisible:t}=e;const j=(0,o.useSelector)((e=>e.locale.selectedChannel)),{schedulingTableData:p,date:b}=(0,a.useContext)(x.Z),[v,T]=(0,a.useState)([]),[g,C]=(0,a.useState)([]),[w,y]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(Array.isArray(p)){const e=(0,m.getUniqueObjects)(p,"FPC_Time").filter((e=>""!==e.FPC_Time)).map((e=>({FPC_Time:e.FPC_Time})));T(e),C(e)}}),[p]);const N=()=>{C((e=>e.map((e=>(0,i.Z)((0,i.Z)({},e),{},{newTime:null})))))},S=async e=>{const s=e.filter((e=>e.newTime));0!==s.length?(await Promise.all(s.map((e=>(async(e,s)=>{try{const t=await(0,d.apiCallstoreprocedure)("USP_Sch_SongSchedulingSaveAs",{LocationCode:j.LocationCode,ChannelCode:j.ChannelCode,FromTelecastDate:(0,n.Tk)(b),ToTelecastDate:(0,n.Tk)(w),FromTelecastTime:e,ToTelecastTime:(0,h.WU)(s,"HH:mm")});console.log(t)}catch(t){console.error("Error fetching storage details:",t)}})(e.FPC_Time,e.newTime)))),(0,m.openNotification)("success","Save As Slot Wise Done Successfully")):(0,m.openNotification)("warning","No newTime entries to process.")};return(0,u.jsxs)(l.Vq,{isOpen:s,width:500,onClose:()=>{t(!1),y(null),N()},children:[(0,u.jsx)("h6",{className:"pb-1 border-b border-b-gray-600 mb-3 text-white",children:"Save As Slot Wise"}),(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-2",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"From Date"}),(0,u.jsx)(l.Mt,{size:"xs",value:b,disabled:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"To Date"}),(0,u.jsx)(l.Mt,{size:"xs",value:w,placeholder:"Select Date",onChange:y})]})]}),(0,u.jsxs)("div",{className:"pb-2 mb-2 pr-1 border-b border-b-gray-600 h-96 flex flex-col",children:[(0,u.jsxs)("div",{className:"grid grid-cols-12 gap-1 items-center mb-3 border-dashed border-b border-b-gray-600 pb-2",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-200 text-md flex justify-center items-center col-span-5",children:"FPC TIME"}),(0,u.jsx)("div",{className:"flex justify-center items-center col-span-1",children:(0,u.jsx)(l.zx,{variant:"solid",size:"xs",icon:(0,u.jsx)(r.X3X,{}),title:"MOVE ALL TIME",onClick:()=>{v.length>0&&C(v.map((e=>(0,i.Z)((0,i.Z)({},e),{},{newTime:f(null===e||void 0===e?void 0:e.FPC_Time)}))))}})}),(0,u.jsx)("div",{className:"font-semibold text-gray-200 text-md flex justify-center items-center col-span-5",children:"NEW TIME "}),(0,u.jsx)("div",{className:"font-semibold text-gray-200 text-xs flex justify-start items-center col-span-1",children:(0,u.jsx)(l.zx,{variant:"twoTone",size:"xs",icon:(0,u.jsx)(c.I0,{}),title:"REMOVE ALL TIME",onClick:N})})]}),(0,u.jsx)("div",{className:"grow overflow-auto no-scrollbar ",children:g.length>0?g.map(((e,s)=>(0,u.jsxs)("div",{className:"grid grid-cols-12 gap-1 items-center mb-3",children:[(0,u.jsx)("div",{className:"flex justify-center items-center col-span-5",children:(0,u.jsx)(l.II,{value:e.FPC_Time,size:"xs",disabled:!0,style:{width:110}})}),(0,u.jsx)("div",{className:"flex justify-center items-center col-span-1",children:(0,u.jsx)(l.zx,{variant:"twoTone",size:"xs",icon:(0,u.jsx)(c.BZR,{}),title:"MOVE TIME",onClick:()=>(e=>{C((s=>s.map(((s,t)=>{if(t===e){const e=f(null===s||void 0===s?void 0:s.FPC_Time)||"00:00";return(0,i.Z)((0,i.Z)({},s),{},{newTime:e})}return s}))))})(s)})}),(0,u.jsx)("div",{className:"flex justify-center items-center col-span-6",children:(0,u.jsx)(l.MG,{size:"xs",value:e.newTime,onChange:e=>((e,s)=>{C((t=>t.map(((t,l)=>l===e?(0,i.Z)((0,i.Z)({},t),{},{newTime:s}):t))))})(s,e),style:{width:110,marginLeft:40}})})]},s))):(0,u.jsx)("p",{className:"text-gray-400 text-xs text-center mt-5",children:"No data available. Click the button above."})})]}),(0,u.jsx)("div",{className:"flex justify-end itmes-center w-full",children:(0,u.jsx)(l.zx,{size:"sm",className:"w-max font-normal",variant:"twoTone",style:{fontSize:"0.8rem",lineHeight:"1rem"},onClick:()=>{w?S(g):(0,m.openNotification)("warning","Please Select Date ")},children:"Apply"})})]})}}}]);
//# sourceMappingURL=7510.26c7a9e9.chunk.js.map