"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[7044],{92959:(e,t,n)=>{n.d(t,{C:()=>o,Q:()=>l});var a=n(46152);async function o(e){return a.Z.fetchData({url:"/columnsetting",method:"post",data:e})}async function l(e){return a.Z.fetchData({url:"/columnsetting/".concat(e),method:"get"})}},88449:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(2803),o=n(78820),l=n(80184);const s=e=>{let{onSaveClick:t,onCancel:n,BtnSaveTxt:s="Save",BtnCancelTxt:i="Discard"}=e;return(0,l.jsxs)("div",{className:"text-left w-full flex",children:[(0,l.jsx)(a.zx,{size:"sm",className:"mr-2",onClick:n,children:i}),(0,l.jsx)(a.zx,{size:"sm",className:"mr-2",variant:"solid",onClick:t,icon:(0,l.jsx)(o.JMf,{}),children:s})]})}},64582:(e,t,n)=>{n.d(t,{L:()=>o});var a=n(34045);const o=(e,t)=>{if(0===e.length)return void console.error("Data array is empty. Cannot export to Excel.");const n=a.P6.json_to_sheet(e,{skipHeader:!1}),o=Object.keys(e[0]).map((()=>({wch:10})));n["!cols"]=o;const l=e.reduce(((e,t)=>(Object.keys(t).forEach((n=>{const a=String(t[n]).length;e[n]=Math.max(e[n]||0,a)})),e)),{}),s=Object.keys(l).map((e=>({wch:Math.max(10,l[e])})));n["!cols"]=s;const i=a.P6.book_new();a.P6.book_append_sheet(i,n,t),a.NC(i,"".concat(t,".xlsx"))}},25146:(e,t,n)=>{n.d(t,{J:()=>i});var a=n(1413),o=(n(72791),n(25415)),l=n(64802),s=n(81320);const i=(e,t,n,i,r,d,c,u,m)=>{if(0===d.length)return void(0,s.openNotification)("info","No data to export");const h=d.map((e=>(0,a.Z)({},e))),p={};u.forEach((e=>{e.accessorKey&&(console.log(e.accessorKey),console.log(p[e.accessorKey]),p[e.accessorKey]=e.header)}));const x=h.map((e=>{const t={};return Object.keys(e).forEach((n=>{p[n]?t[p[n]]=e[n]:t[n]=e[n]})),t})),f=Object.keys(p).length>0?Object.keys(p).map((e=>p[e])):[],C=(f.map((e=>({header:e,key:e}))),new o.Workbook),v=C.addWorksheet(c);for(let a=0;a<i;a++)v.addRow([]);const g=[];for(let a=0;a<n;a++)g.push("");if(g.push(...f),v.addRow(g),e){v.getRow(i+1).font={bold:!0,size:10}}if(r){const e=v.getRow(i+1);e.font={bold:!0,size:12},e.eachCell((e=>{e.border={top:{style:"medium"},left:{style:"medium"},bottom:{style:"medium"},right:{style:"medium"}},m||(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"009dff"}})}))}if(x.forEach((e=>{const t=[];for(let o=0;o<n;o++)t.push("");f.forEach((n=>{t.push(e[n]||"")}));const a=v.addRow(t);a.font={size:10},a.eachCell(((t,n)=>{t.value instanceof Date&&(t.value=new Date(Date.UTC(t.value.getFullYear(),t.value.getMonth(),t.value.getDate()))),m&&e.EventDefaultBackColor&&(t.fill={type:"pattern",pattern:"solid",fgColor:{argb:e.EventDefaultBackColor.substring(1)}}),m&&e.EventDefaultFrontColor&&(t.font={color:{argb:e.EventDefaultFrontColor.substring(1)}}),r&&(t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}})}))})),v.columns.forEach((e=>{let t=10;e.eachCell((e=>{const n=(e.value||"").toString().length;t=Math.max(t,n)})),e.width=Math.min(30,t+2)})),v.views=[{state:"frozen",xSplit:n,ySplit:i+1,topLeftCell:"A".concat(i+2)}],t){const e=d.length+i+100,t=u.length>0?u.length+100:100;for(let n=1;n<=e;n++){const e=v.getRow(n);for(let n=1;n<=t;n++){const t=e.getCell(n);t.value=t.value||"",t.border={top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}}}}}}C.xlsx.writeBuffer().then((e=>{(0,l.saveAs)(new Blob([e]),"".concat(c,".xlsx"))}))}},60370:(e,t,n)=>{n.d(t,{Lx:()=>o,br:()=>a,mX:()=>l});const a={TelecastDate:"15-04-2025",ContentName:"Morning News",SlotDuration:30,Season:1,Episode:1},o={Location:"India",Channel:"Channel Name",PromoCaption:"Promo 1",PromoType:"Generic",Duration:"00:00:10:00",Language:"Hindi"},l={"SEG NO":1,"CONTENT NAME":"BHAGYAVIDHATA",TCIN:"10:00:00:00",TCOUT:"10:00:04:24","EPISODE NO":"71","HOUSE ID":"IG001380","Season No":"1"}},46069:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(1413),o=n(72791),l=n(2803),s=n(80184);const i=e=>{let{progression:t}=e;const n=(0,o.useMemo)((()=>t<100?{color:"green-500"}:100==t?{color:"blue-500"}:t>100?{color:"red-500"}:{}),[t]);return(0,s.jsx)(l.Ex,(0,a.Z)({size:"sm",percent:t},n))}},32734:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(2803),o=(n(72791),n(81320)),l=n(80184);const s=e=>{var t,n,s,i,r,d,c;let{Content:u,isContractPopup:m,closeDialogBoxContract:h,headerExtraContent:p}=e;return(0,l.jsx)(a.Vq,{width:1200,isOpen:m,onClose:h,children:0!==(null===u||void 0===u||null===(t=u.Details)||void 0===t?void 0:t.length)&&(0,l.jsxs)("div",{class:"grid grid-cols-12 gap-4",children:[(0,l.jsx)(a.Zb,{header:"Contract Deatils",className:"col-span-4",style:{background:"rgb(41, 52, 69)"},children:(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto ",children:null===(n=u.Details)||void 0===n?void 0:n.map(((e,t)=>{var n,s;return(0,l.jsxs)(a.Zb,{bodyClass:"flex items-center ",className:"mb-4",style:{background:"rgb(41, 52, 69)"},children:[(0,l.jsx)(a.qE,{className:"mr-4",src:null===e||void 0===e||null===(n=e.ContentMaster)||void 0===n?void 0:n.Content_Image}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{class:"text-white",children:[" ",null===e||void 0===e||null===(s=e.ContentMaster)||void 0===s?void 0:s.ContentName]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,l.jsx)("p",{className:"mr-2 text-slate-300",children:(0,o.FORMATDATE_FOR_EVERY)(e.ContractStartDate)}),"To",(0,l.jsx)("p",{className:"ml-2 text-slate-300",children:(0,o.FORMATDATE_FOR_EVERY)(e.ContractEndDate)})," "]})]})]},t)}))})}),(0,l.jsxs)(a.Zb,{header:"Contract Master",headerExtra:p,className:"col-span-8",style:{background:"rgb(41, 52, 69)"},bodyClass:"grid grid-cols-3 gap-x-4 gap-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Contract No"}),(0,l.jsx)("h5",{class:"text-white",children:null===u||void 0===u||null===(s=u.Data)||void 0===s?void 0:s.ContractNo})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Contract Name"}),(0,l.jsx)("h5",{class:"text-white",children:null===u||void 0===u||null===(i=u.Data)||void 0===i?void 0:i.ContractName})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Agreement Date"}),(0,l.jsx)("h5",{class:"text-white",children:null===u||void 0===u||null===(r=u.Data)||void 0===r?void 0:r.AgreementDate})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Authorised Person"}),(0,l.jsx)("h5",{class:"text-white",children:null===u||void 0===u||null===(d=u.Data)||void 0===d?void 0:d.AuthorisedPerson})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("p",{children:"Supplier Name"}),(0,l.jsx)("h5",{class:"text-white",children:"PlanetCast Media Services"})]}),(0,l.jsxs)("div",{className:"col-span-3",children:[(0,l.jsx)("p",{children:"Remarks"}),(0,l.jsx)("h5",{class:"text-white",children:null===u||void 0===u||null===(c=u.Data)||void 0===c?void 0:c.Remarks})]})]})]})})}},24188:(e,t,n)=>{n.d(t,{Z:()=>S});var a=n(1413),o=n(2803),l=n(1063),s=n(33792),i=n(72791),r=n(67388),d=n(41026),c=n(56355),u=n(60364),m=n(90303),h=n(25123),p=n(80184);const{TabNav:x,TabList:f,TabContent:C}=o.mQ,{Tr:v,Th:g,Td:b,THead:y,TBody:j}=d.Z,S=e=>{let{data:t,setdata:n,LocationCode:S,ChannelCode:N,SelectedDate:w,emptySegmentData:D,setemptySegmentData:T}=e;const E=(0,u.useDispatch)(),[k,P]=(0,i.useState)(!1),[R,z]=(0,i.useState)(!1),[A,O]=(0,i.useState)("tab1");(0,i.useEffect)((()=>{!1===k&&(async()=>{try{const e=await(0,r.dailyfpcAprovel)(S,N,w),t=[],o=[];let l=1,s=1,i=1;e.data.forEach(((e,n)=>{const r={key:"".concat(n),data:(0,a.Z)((0,a.Z)({},e),{},{Sr_NO:l++,segment:void 0,color:"red"})};e.segment&&e.segment.length>0?r.children=e.segment.map(((t,o)=>({key:"".concat(n,"-").concat(o),data:(0,a.Z)((0,a.Z)({},e),{},{Sr_NO:s++,ContentName:t.SegmentCaption,StartTime:t.TCIN,EndTime:t.TCOUT,ContentCode:t.ContentCode})}))):o.push((0,a.Z)((0,a.Z)({},e),{},{Sr_NO:i++,ContentCode:e.ContentCode,ContentName:e.ContentName,ContentTypeCode:e.ContentTypeCode,StartTime:e.StartTime,EndTime:e.EndTime,EpisodeNo:e.EpisodeNo,SeasonNo:e.SeasonNo,open:"dailyfpc",OriginalRepeatCode:e.OriginalRepeatCode})),t.push(r)}));const d=o.filter((e=>1===e.OriginalRepeatCode)).length;z(d),T(o),n(t)}catch(e){console.error("Error fetching data:",e)}})()}),[S,N,w,k]);return(0,p.jsxs)("div",{className:"max-h-[450px] overflow-y-auto",children:[k&&(0,p.jsx)(m.default,{setIsOpen:P}),!k&&(0,p.jsx)(o.Zb,{bodyClass:"p-3 pt-1",children:(0,p.jsxs)(o.mQ,{value:A,onChange:e=>O(e),children:[(0,p.jsxs)("div",{className:"flex justify-between items-center border-b-2 border-b-gray-700 mb-3",children:[(0,p.jsxs)(f,{className:"border-b-[0px]",children:[(0,p.jsx)(x,{value:"tab1",children:"FPC"}),(0,p.jsx)(x,{value:"tab2",children:"Missing Segment"})]}),"tab2"===A&&(0,p.jsxs)("p",{className:"rounded-full border-2 border-gray-700 px-3 py-1 text-xs",children:[(0,p.jsx)("span",{children:"Segments Not Found:"})," ",(0,p.jsx)("span",{className:"font-bold",children:R})]})]}),(0,p.jsxs)(C,{value:"tab1",children:[" ",(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsxs)(s.i,{resizableColumns:!0,value:t,tableStyle:{minWidth:"50rem"},rowClassName:e=>{var t,n;return{"bg-teal-500 text-black":"ORG"===(null===(t=e.data)||void 0===t?void 0:t.status),"bg-orange-500 text-black":"REP"===(null===(n=e.data)||void 0===n?void 0:n.status)}},scrollable:!0,scrollHeight:"400px",children:[(0,p.jsx)(l.s,{field:"Sr_NO",header:"Sr NO",expander:!0,style:{width:"100px"},body:e=>{var t;return(0,p.jsx)("span",{style:{color:"black",fontSize:12,fontWeight:600,width:70},children:null===(t=e.data)||void 0===t?void 0:t.Sr_NO})}}),(0,p.jsx)(l.s,{field:"StartTime",header:"Start Time",style:{width:"100px"},body:e=>{var t;return(0,p.jsx)("p",{style:{color:"black",fontSize:12,fontWeight:600,width:120},children:null===(t=e.data)||void 0===t?void 0:t.StartTime})}}),(0,p.jsx)(l.s,{field:"EndTime",header:"End Time",style:{width:"100px"},body:e=>{var t;return(0,p.jsx)("p",{style:{color:"black",fontSize:12,fontWeight:600,width:120},children:null===(t=e.data)||void 0===t?void 0:t.EndTime})}}),(0,p.jsx)(l.s,{field:"ContentName",header:"Content",style:{width:"300px"},body:e=>{var t;return(0,p.jsx)("p",{style:{color:"black",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:12,fontWeight:600,padding:2,margin:2},children:null===(t=e.data)||void 0===t?void 0:t.ContentName})}}),(0,p.jsx)(l.s,{field:"SlotDuration",header:"Dur",style:{width:"100px"},body:e=>{var t;return(0,p.jsx)("p",{style:{color:"black",fontSize:12,fontWeight:600,width:70},children:null===(t=e.data)||void 0===t?void 0:t.SlotDuration})}}),(0,p.jsx)(l.s,{field:"status",header:"ORG/REP",style:{width:"100px"},body:e=>{var t;return(0,p.jsx)("p",{style:{color:"black",fontSize:12,fontWeight:600,width:120},children:null===(t=e.data)||void 0===t?void 0:t.status})}}),(0,p.jsx)(l.s,{field:"SeasonNo",header:"Season & Episode ",style:{width:"150px"},body:e=>{var t,n,a,o,l;return(0,p.jsx)("p",{style:{color:"black",fontSize:12,fontWeight:600,width:200},children:1===(null===(t=e.data)||void 0===t?void 0:t.IsRecorded)?"LIVE":0===(null===(n=e.data)||void 0===n?void 0:n.EpisodeSpecific)?null===(a=e.data)||void 0===a?void 0:a.ContentTypeName:"S".concat(null===(o=e.data)||void 0===o?void 0:o.SeasonNo," & E").concat(null===(l=e.data)||void 0===l?void 0:l.EpisodeNo)})}})]})})]})," ",(0,p.jsx)(C,{value:"tab2",children:(0,p.jsxs)(d.Z,{compact:!0,borderlessRow:!1,overflow:!0,className:"mt-2",children:[(0,p.jsx)(y,{children:(0,p.jsxs)(v,{children:[(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"Sr No"}),(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"Start Time"}),(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"End Time"}),(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"Content"}),(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"SE & EP"}),(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"ORG / REP"}),(0,p.jsx)(g,{style:{width:70,fontSize:14,fontWeight:700},children:"Action"})]})}),(0,p.jsx)(j,{children:D.map(((e,t)=>(0,p.jsxs)(v,{className:"REP"===e.status?"bg-orange-500 ":"bg-teal-500 ",children:[(0,p.jsx)(b,{className:"dark:text-black border border-current  ",children:e.Sr_NO}),(0,p.jsx)(b,{style:{width:70,fontSize:14,fontWeight:700},className:"dark:text-black border border-current ",children:e.StartTime}),(0,p.jsx)(b,{style:{width:70,fontSize:14,fontWeight:700},className:"dark:text-black border border-current ",children:e.EndTime}),(0,p.jsx)(b,{style:{width:70,fontSize:14,fontWeight:700},className:"dark:text-black border border-current ",children:e.ContentName}),(0,p.jsxs)(b,{style:{width:70,fontSize:14,fontWeight:700},className:"dark:text-black border border-current ",children:["S",e.SeasonNo," & E",e.EpisodeNo]}),(0,p.jsx)(b,{style:{width:70,fontSize:14,fontWeight:700},className:"dark:text-black border border-current ",children:1===e.OriginalRepeatCode?"ORG":"REP"}),(0,p.jsx)(b,{style:{width:70,fontWeight:700},children:1===e.OriginalRepeatCode?(0,p.jsx)(o.zx,{size:"xs",variant:"twoTone",onClick:()=>(e=>{P(!0),E((0,h.VK)(e))})(e),icon:(0,p.jsx)(c.EIY,{})}):(0,p.jsx)(p.Fragment,{})})]},t)))})]})})]})})]})}},8333:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var a=n(1413),o=n(2803),l=n(92506),s=n(81724),i=n(67388),r=n(60364),d=n(58617),c=n(72791),u=n(57689),m=n(11087),h=n(81721),p=n(99917),x=n(1063),f=n(41026),C=(n(97918),n(46069)),v=n(79577),g=n(64582),b=n(87537),y=n(78820),j=n(24188),S=n(60370),N=n(763),w=n(54048),D=n(81320),T=n(16856),E=n(9494),k=n(88890),P=n(43235),R=n(28825),z=n(63524),A=n(25123),O=n(4500),M=n(45682),I=n(19129),F=n(39126),L=n(76053),Z=n(56355),G=n(32734),_=n(80184);const{Tr:B,Th:q,Td:W,THead:V,TBody:H}=f.Z,Y=[{value:"licenced",label:"Licenced"},{value:"nonLicenced",label:"Non-Licenced"},{value:"all",label:"All"}],U=["0","1","2","3","4","5","6"];function X(e){var t,n,l,s,m;let{objChannel:h,SelectedDate:X,setFCPSaveDt:K,isFPCAllowedToEdit:J}=e;const Q=(0,r.useDispatch)(),$=(0,u.s0)(),ee="DD MMM YYYY",{Content:te}=(0,r.useSelector)((e=>e.base.common)),[ne,ae]=(0,c.useState)([""]),[oe,le]=(0,c.useState)([""]),[se,ie]=(0,c.useState)([]),[re,de]=(0,c.useState)(null),[ce,ue]=(0,c.useState)(null),[me,he]=(0,c.useState)([]),[pe,xe]=(0,c.useState)([""]),[fe,Ce]=(0,c.useState)([""]),[ve,ge]=(0,c.useState)(0,0),[be,ye]=(0,c.useState)(60),[je,Se]=(0,c.useState)(0),[Ne,we]=(0,c.useState)(Y[2]),[De,Te]=(0,c.useState)([]),[Ee,ke]=(0,c.useState)([]),[Pe,Re]=(0,c.useState)(!1);console.log(X),(0,c.useEffect)((()=>{(async()=>{try{let e={LocationCode:tn.LocationCode,ChannelCode:tn.ChannelCode,EventContentCode:0};const t=await(0,i.apiGetContentmaster)(e);if(204==t.status)return void he([]);he(t.data),xe(t.data),Te(rn(t.data));const n=Math.max(...t.data.map((e=>e.SlotDuration))),a=Math.min(...t.data.map((e=>e.SlotDuration)));ye(n),Se(a)}catch(e){console.error("Error fetching data:",e)}})()}),[]);const[ze,Ae]=(0,c.useState)({});(0,c.useEffect)((()=>{(async()=>{try{console.log("slotDurationValue",ve);const e=pe.filter((e=>e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1]));he(e)}catch(e){console.error("Error fetching data:",e)}})()}),[ve]),(0,c.useEffect)((()=>{try{let e;if(2===ve.length&&pe.length>0){if(0===Ee.length)e="all"===Ne.value?pe.filter((e=>e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1])):"licenced"===Ne.value?pe.filter((e=>e.ContentContractDetails.length>0&&e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1])):pe.filter((e=>0===e.ContentContractDetails.length&&e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1]));else{const t=Ee.map((e=>e.value));e="all"===Ne.value?pe.filter((e=>t.includes(e.ContentType.ContentTypeName)&&e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1])):"licenced"===Ne.value?pe.filter((e=>t.includes(e.ContentType.ContentTypeName)&&e.ContentContractDetails.length>0&&e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1])):pe.filter((e=>t.includes(e.ContentType.ContentTypeName)&&0===e.ContentContractDetails.length&&e.SlotDuration>=ve[0]&&e.SlotDuration<=ve[1]))}he(e)}}catch(e){console.error("Error fetching data:",e)}}),[Ne,Ee,ve,pe]);const[Oe,Me]=(0,c.useState)(""),[Ie,Fe]=(0,c.useState)([]),[Le,Ze]=(0,c.useState)([]),[Ge,_e]=(0,c.useState)(null),[Be,qe]=(0,c.useState)(null),[We,Ve]=(0,c.useState)({}),[He,Ye]=(0,c.useState)({value:null,label:"Please Select Content"}),[Ue,Xe]=(0,c.useState)(""),[Ke,Je]=(0,c.useState)([]),[Qe,$e]=(0,c.useState)([]),[et,tt]=(0,c.useState)([]),nt=(0,r.useSelector)((e=>e.auth.session.token)),[at,ot]=(0,c.useState)(!1),[lt,st]=(0,c.useState)(!1),[it,rt]=(0,c.useState)(U),[dt,ct]=(0,c.useState)([]),[ut,mt]=(0,c.useState)(new Date),[ht,pt]=(0,c.useState)(new Date);(0,c.useEffect)((()=>{if(Qe&&Qe.length>0&&Qe[0].Consumption&&Qe[0].Consumption>1){0==Qe[0].MinDiff&&(Qe[0].MinDiff=1440);let e=Qe[0].MinDiff-Qe[0].Consumption;const t=Math.min(...me.map((e=>isNaN(e.SlotDuration)||null===e.SlotDuration?1/0:e.SlotDuration))),n=t===1/0||isNaN(t)?0:t;console.log("minDuration",t),e<n&&(e=n+10),ge([n,e])}const e=xt(Qe);K(e)}),[Qe]);const xt=e=>{let t=null,n=null;return e.map(((e,o)=>{let l;return l=0===o?new Date("".concat(e.TelecastDate,"T").concat(e.StartTime)):(0,k.m)(t,parseInt(n)),t=l,n=e.SlotDuration,(0,a.Z)((0,a.Z)({},e),{},{RowNumber:o+1,NewTelecastDate:(0,P.WU)(new Date(l),"yyyy-MM-dd HH:mm:ss")})}))},ft=e=>{const[t,n]=e;mt(t),pt(n)};(0,c.useEffect)((()=>{(async e=>{const t=await(0,i.apiGetPatternmasterDropDown)(void 0);if(Array.isArray(t.data)){const e=t.data.map((e=>({value:e.PatternCode,label:e.PatternName})));ct(e)}})(),(async e=>{ot(!0);const t=await(0,i.apiGetFPCMasterWithHouseID)(h.LocationCode,h.ChannelCode,X);ot(!1);var n=Mt(0,fe,t.data);Je(n),$e(n||[]);const a=Ct(n,"TimeCategoryStartTime","TimeCategoryEndTime"),o=vt(a);$e(o||[])})()}),[fe,X]);const Ct=(e,t,n)=>e.reduce(((e,a)=>{const o="".concat(a[t],"-").concat(a[n]);return e[o]||(e[o]=[]),e[o].push(a),e}),{}),vt=e=>Object.values(e).flatMap((e=>{const t=e.reduce(((e,t)=>e+(parseInt(t.SlotDuration,10)||0)),0);return e.map((e=>(0,a.Z)((0,a.Z)({},e),{},{Consumption:t})))})),gt=()=>{var e,t,n,a;return(0,_.jsx)(c.Fragment,{children:(0,_.jsx)("div",{className:"grid grid-cols-4 gap-4 pl-2 pr-10 pb-2",children:(0,_.jsx)("div",{className:"col-span-4",children:(0,_.jsx)("h5",{className:"font-bold",children:(0,_.jsx)(C.Z,{progression:Math.round(null!==(e=Qe[0])&&void 0!==e&&e.Consumption&&null!==(t=Qe[0])&&void 0!==t&&t.MinDiff?(null===(n=Qe[0])||void 0===n?void 0:n.Consumption)/(null===(a=Qe[0])||void 0===a?void 0:a.MinDiff)*100:0)})})})})})},bt=async e=>{try{ot(!0);const[t,n]=await Promise.all([(0,i.apiGetcontentcontractmasterId)(e),(0,i.apiGetcontentcontractdetailsId)(e)]);Q((0,A.Us)({Data:t.data,Details:n.data})),st(!0)}catch(t){console.error("Error fetching content contract data:",t)}finally{ot(!1)}},[yt,jt]=(0,c.useState)(!1),[St,Nt]=(0,c.useState)(!1),[wt,Dt]=(0,c.useState)("ADD"),[Tt,Et]=(0,c.useState)(!1),[kt,Pt]=(0,c.useState)(!1),Rt=(e,t)=>{Dt(t),jt(!0),$t(!1)},zt=e=>{const t=new Set,n=new Set;e.forEach((e=>{t.add(e.EpisodeNo),n.add(e.SeasonNo)}));const a=Array.from(t).sort(((e,t)=>e-t)).map((e=>({value:Number(e),label:Number(e)}))),o=Array.from(n).sort(((e,t)=>e-t)).map((e=>({value:Number(e),label:Number(e)})));0!=o.length?(1==a.length&&(_e({value:"1",label:"1"}),qe({value:"1",label:"1"})),Fe(o),Ze(a),Rt(0,wt)):(0,D.openNotification)("info","Please check Release Date/Season-Episode.")},At=()=>{},Ot=(e,t)=>{(0,v.w)({target:e.currentTarget,message:"Are you sure to remove this record?",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>(e=>{e?(console.log(e),console.log(Qe),$e((t=>{const n=t.filter((t=>!(t.ContentCode===e.ContentCode&&t.SeasonNo===e.SeasonNo&&t.EpisodeNo===e.EpisodeNo&&t.StartTime==e.StartTime&&t.EndTime==e.EndTime))),a=Ct(n,"TimeCategoryStartTime","TimeCategoryEndTime");return vt(a)})),(0,D.openNotification)("success","Removed successfully")):(0,D.openNotification)("warning","No row selected")})(t),reject:At})};function Mt(e,t,n){console.log("newStartTime",t);const a=[...n.sort(((e,t)=>e.RowNumber-t.RowNumber))];let o=a[e].TimeCategoryStartTime;a[e].StartTime=t;const l=parseInt(a[e].SlotDuration,10),s=It(a[e].StartTime,l);a[e].EndTime=s;for(let i=e+1;i<a.length;i++){let e=a[i].TimeCategoryStartTime;if(null!==a[i].StartTime&&""!==a[i].StartTime){const t=parseInt(a[i].SlotDuration,10);let n="",l="";if(o!==e){const t=/(\d{2}:\d{2}):\d{2}/,s=e.match(t);s?(l=s[1],n=l,o=e):(console.error("Invalid date-time string"),n=a[i-1].EndTime)}else n=a[i-1].EndTime;const s=It(n,t);a[i].StartTime=n,a[i].EndTime=s}}return a}function It(e,t){console.log("startTime",e),console.log("slotDuration",t);const[n,a]=e.split(":").map(Number),o=60*n+a+t,l=Math.floor(o/60)%24,s=o%60;return"".concat(l.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))}const Ft=async e=>{const t=new Map;if(null==ce||0==ce.length)ot(!0),(0,i.apiGetUSP_PG_FPC_Get_Content)("0",h.LocationCode,h.ChannelCode,X,e.label,nt).then((e=>e.json())).then((n=>{0==n.length?(ot(!1),ue([]),Fe([])):(ot(!1),n.forEach((n=>{if(n.ContentCode!==e.value)return;const a=n.SeasonNo;t.has(a)||t.set(a,a)})),ue(n));const a=Array.from(t,(e=>{let[t,n]=e;return{value:t,label:n}}));Fe(a)})),ot(!1);else{ce.forEach((n=>{if(n.ContentCode!==e.value)return;const a=n.SeasonNo;t.has(a)||t.set(a,a)}));const n=Array.from(t,(e=>{let[t,n]=e;return{value:t,label:n}}));Fe(n),ot(!1)}},Lt=async(e,t)=>{const n=new Map;if(null==ce)(0,i.apiGetUSP_PG_FPC_Get_Content)("0",h.LocationCode,h.ChannelCode,X,e.label,nt).then((e=>e.json())).then((a=>{a.forEach((a=>{if(a.ContentCode!==e.value)return;if(a.SeasonNo!==t.value)return;const o=a.EpisodeNo;n.has(o)||n.set(o,o)}));const o=Array.from(n,(e=>{let[t,n]=e;return{value:t,label:n}}));Ze(o)}));else{ce.forEach((a=>{if(a.ContentCode!==e.value)return;if(a.SeasonNo!==t.value)return;const o=a.EpisodeNo;n.has(o)||n.set(o,o)}));const a=Array.from(n,(e=>{let[t,n]=e;return{value:t,label:n}}));Ze(a)}},Zt=()=>(0,_.jsxs)("div",{style:{display:"flex",justifyContent:"end"},className:"mt-5",children:[(0,_.jsx)(o.zx,{variant:"solid",type:"button",className:"btnEdit mr-2",size:"sm",icon:"ADD"===wt?(0,_.jsx)(d.HQD,{}):(0,_.jsx)(d._vs,{}),onClick:()=>(async()=>{var e,t,n,a,o,l,s,i,r;if(me.filter((e=>e.ContentCode==He.value||e.ContentCode==He.ContentCode)),null==Ue||0==Ue||""==Ue)return void(0,D.openNotification)("info","Kindly Enter Duration!");if(null===Ge||0===Ge)return void(0,D.openNotification)("info","Please select Season!");if(null===Be||0===Be)return void(0,D.openNotification)("info","Please select Episode!");const d=ce.filter((e=>e.ContentCode==(He.value||He.ContentCode)&&e.SeasonNo==Ge.value&&e.EpisodeNo==Be.value));console.log("filteredArray:",d);let c=Qe.filter((e=>e.ContentCode==(He.value||He.ContentCode)&&e.SeasonNo==Ge.value&&e.EpisodeNo==Be.value));"Modify"===wt&&(c=[]),c.length>0&&(0,D.openNotification)("warning","Event Already Schdule For This Date");let u="",m=0;console.log("isAlreadySchdule",c),console.log("isAlreadySchdule.length",c.length),console.log("btnMode",wt,"..",d.length),console.log("ilteredArray.OriginalRepeatCode",d[0].OriginalRepeatCode),c.length>0||c.length>0&&"ADD"==wt||d.length>0&&"REP"==d[0].OriginalRepeatCode?(u="REP",m=2):(u="ORG",m=1),d.length>0||d.push(...c);const p={RowNumber:1,ContentCode:null===(e=d[0])||void 0===e?void 0:e.ContentCode,ContentName:null===(t=d[0])||void 0===t?void 0:t.ContentName,SlotDuration:Ue,EpisodeNo:null===(n=d[0])||void 0===n?void 0:n.EpisodeNo,SeasonNo:null===(a=d[0])||void 0===a?void 0:a.SeasonNo,status:u,Genre:null===(o=d[0])||void 0===o?void 0:o.Genre,HouseID:"",StartTime:"00:00",EndTime:"00:00",ActualDuration:"00",BreakPattern:We.label||"",BreakPatternCode:We.value||null,LocationCode:h.LocationCode,ChannelCode:h.ChannelCode,TelecastDate:X,EpisodeSpecific:null===(l=d[0])||void 0===l?void 0:l.EpisodeSpecific,Id:Qe.length+1,OriginalRepeatCode:m,ChannelTimeDescription:"",TimeCategoryEndTime:"",TimeCategoryStartTime:"",RowNumber:0==(null===Qe||void 0===Qe?void 0:Qe.length)?1:(null===Qe||void 0===Qe?void 0:Qe.length)+1,MinDiff:0,IsRecorded:null===(s=d[0])||void 0===s?void 0:s.IsRecorded,ContentTypeCode:null===(i=d[0])||void 0===i?void 0:i.ContentTypeCode,ContentTypeName:null===(r=d[0])||void 0===r?void 0:r.ContentTypeName};Qe.length,console.log("btnMode66",p),console.log("btnMode88",re),console.log("btnMode90",Qe);let x=0,f=Qe.filter((e=>e.Id===e.Id));console.log("updatedData",f);let C=[];if(wt===wt)if(re?C.push(re):C.push(f[f.length-1]),console.log("RefRow",C),C[0])if(p.LocationCode=C[0].LocationCode,p.ChannelCode=C[0].ChannelCode,p.ChannelTimeDescription=C[0].ChannelTimeDescription,p.Consumption=C[0].Consumption,p.TimeCategoryEndTime=C[0].TimeCategoryEndTime,p.TimeCategoryStartTime=C[0].TimeCategoryStartTime,p.RowNumber=C[0].RowNumber+1,p.MinDiff=C[0].MinDiff,console.log("btnMode",wt),"ADD"===(0,N.upperCase)(wt)){x=f.findIndex((e=>e.Id===C[0].Id));for(let e=x+1;e<f.length;e++)f[e].RowNumber=f[e].RowNumber+1;f.push(p)}else console.log("btnMode1",wt),x=f.findIndex((e=>e.Id===C[0].Id)),f[x]=p;else f.push(p);const v=f.filter((e=>null!==e.ContentCode&&""!==e.ContentCode));var g=Mt(0,fe,v);console.log("updtupdt",g),$e((e=>{const t=[...g],n=Ct(t,"TimeCategoryStartTime","TimeCategoryEndTime");return vt(n)})),jt(!1),Me(""),Ye({value:null,label:"Please Select Content"}),_e(null),qe(null),ue(null),Xe(""),Ve({})})(),children:wt}),(0,_.jsx)(o.zx,{type:"button",className:"btnEdit",size:"sm",onClick:()=>{jt(!1),Me(""),Ye({value:null,label:"Please Select Content"}),_e(null),qe(null),Xe(""),ue(null),Ve({})},children:"Cancel"})]}),Gt=async()=>{const e={FromDate:(0,D.formatStartDate)(ut),ToDate:(0,D.formatStartDate)(ht),selectedWeekdays:kt?U:it,LocationCode:h.LocationCode,ChannelCode:h.ChannelCode,TelecastDate:X};if(kt)try{return"200"===(await(0,i.PostFPCSaveAs2)(e,nt)).data.code?((0,D.openNotification)("success","FPC Saved successfully"),$("/fpcmaster"),Nt(!1),Et(!1),void Pt(!1)):((0,D.openNotification)("danger","FPC Did Not Saved"),Nt(!1),Et(!1),void Pt(!1))}catch(t){(0,D.openNotification)("danger","FPC Did Not Saved"),Nt(!1),Et(!1),Pt(!1)}else try{return"200"===(await(0,i.PostFPCSaveAs)(e,nt)).data.code?((0,D.openNotification)("success","FPC Saved successfully"),$("/fpcmaster"),Nt(!1),Et(!1),void Pt(!1)):((0,D.openNotification)("danger","FPC Did Not Saved"),Nt(!1),Et(!1),void Pt(!1))}catch(t){(0,D.openNotification)("danger","FPC Did Not Saved"),Nt(!1),Et(!1),Pt(!1)}},_t=()=>(0,_.jsx)("div",{className:"mt-5",children:(0,_.jsx)(o.zx,{variant:"solid",type:"button",className:"btnEdit",size:"sm",icon:(0,_.jsx)(y.JMf,{}),onClick:()=>Nt(!0),children:"Save"})}),[Bt,qt]=(0,c.useState)(!1),Wt=(0,u.TH)(),Vt=new URLSearchParams(Wt.search).get("dt"),[Ht,Yt]=(0,c.useState)(null),[Ut,Xt]=(0,c.useState)(!1),[Kt,Jt]=(0,c.useState)(!1),[Qt,$t]=(0,c.useState)(!1),en=e=>{Xt(!1)},tn=(0,r.useSelector)((e=>e.locale.selectedChannel));(0,c.useEffect)((()=>{Q((0,A.Us)("")),Q((0,A.VK)("")),Q((0,O.wL)(""));(async()=>{try{const e=await(0,E.apiCallstoreprocedure)("GetChannelStartTime",{par_LocationCode:tn.LocationCode,par_ChannelCode:tn.ChannelCode});if(e.data&&e.data.length>0){const t=e.data[0].StartTime;"string"===typeof t?Ce(t.substring(0,5)):(0,D.openNotification)("danger","Selected Channel Settings details Not Found.")}else(0,D.openNotification)("danger","Selected Channel Settings details Not Found.")}catch(e){(0,D.openNotification)("danger","Selected Channel Settings details Not Found.")}})()}),[tn]);const[nn,an]=(0,c.useState)([]);(0,c.useEffect)((()=>{(async e=>{const t=await(0,i.apiGetfpcorgrepmaster)(void 0);an(t.data)})()}),[]);const on=e=>(0,_.jsx)("div",{className:"text-lg",children:e}),[ln,sn]=(0,c.useState)(!1),rn=e=>{try{return Array.from(new Set(e.map((e=>e.ContentType.ContentTypeName)))).map((e=>({value:e,label:e.toUpperCase()})))}catch(t){throw t}},dn=(0,c.useCallback)((()=>{st(!1)}),[]),cn=(0,c.useCallback)((()=>{Q((0,A.Us)(te.Data)),$("/ContentContractEdit")}),[]),un=(0,c.useCallback)((()=>{jt(!1),Me(""),Ye({value:null,label:"Please Select Content"}),_e(null),qe(null),Xe(""),Ve({})}),[]),mn=(0,_.jsx)("span",{className:"flex items-center",children:(0,_.jsx)(o.zx,{icon:(0,_.jsx)(Z.CkN,{}),size:"sm",variant:"solid",onClick:cn,children:"Check Contract"})});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(G.Z,{Content:te,isContractPopup:lt,closeDialogBoxContract:dn,headerExtraContent:mn}),(0,_.jsx)(M.default,{showLoader:at}),(0,_.jsx)(gt,{}),(0,_.jsxs)("div",{className:"grid grid-cols-12 gap-1 p-0",children:[(0,_.jsx)("div",{className:"col-span-11 p-0",children:(0,_.jsxs)("div",{className:"card p-0",children:[(0,_.jsx)("div",{className:"datatable-container",children:(0,_.jsxs)(p.w,{style:{background:"transparent"},value:Qe,rowGroupMode:"subheader",groupRowsBy:"ChannelTimeDescription",sortMode:"single",sortField:"RowNumber",sortOrder:1,resizableColumns:!0,showGridlines:!0,reorderableRows:!0,expandedRows:se,onRowToggle:e=>ie(e.data),onRowReorder:e=>{const{value:t,dragIndex:n,dropIndex:o}=e;t[n].ChannelTimeDescription=Qe[o].ChannelTimeDescription,t[n].TimeCategoryStartTime=Qe[o].TimeCategoryStartTime,t[n].TimeCategoryEndTime=Qe[o].TimeCategoryEndTime,t[n].MinDiff=Qe[o].MinDiff;const l=t.map(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{RowNumber:t+1})));var s=Mt(0,fe,l);$e(s)},selectionMode:"single",onSelectionChange:e=>{console.log("onSelectionChange",e),de(e.value)},tableStyle:{minWidth:"5rem"},className:"custom-row-height",rowClassName:e=>(e=>{var t;if(1===e.IsRecorded&&"ORG"==e.status)return"bg-yellow-300";if(re&&re.Id==e.Id)return"bg-blue-400";const n=nn.filter((t=>t.ShortName==e.status));return"bg-".concat(null===(t=n[0])||void 0===t?void 0:t.NewColourCode)})(e),children:[(0,_.jsx)(x.s,{rowReorder:!0,style:{width:"3rem",paddingLeft:15,color:"black"}}),(0,_.jsx)(x.s,{field:"StartTime",header:"Start Time",headerStyle:{textAlign:"center"},bodyStyle:{textAlign:"center",color:"black",width:"7px"},body:e=>(0,_.jsx)("span",{style:{fontWeight:"bold"},children:e.StartTime})}),(0,_.jsx)(x.s,{field:"EndTime",header:"End Time",bodyStyle:{textAlign:"center",color:"black",width:"7px"},body:e=>(0,_.jsx)("span",{style:{fontWeight:"bold"},children:e.EndTime})}),(0,_.jsx)(x.s,{field:"ContentName",header:"Content ",bodyStyle:{textAlign:"center",color:"black"},body:e=>(0,_.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)("span",{style:{marginLeft:"5px"},children:e.ContentName}),(0,_.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[e.IsLicense>0&&(0,_.jsx)(o.u,{title:"Show License",children:(0,_.jsx)(o.zx,{type:"button",className:"btnEdit border-none",size:"xs",icon:(0,_.jsx)(L.qeN,{}),onClick:()=>{bt(e.IsLicense)},style:{background:"transparent",color:"black"}})}),(0,_.jsx)(o.u,{title:"Show Content Info",children:(0,_.jsx)(o.zx,{type:"button",className:"btnEdit border-none",size:"xs",icon:(0,_.jsx)(d.if7,{}),onClick:()=>{(async(e,t)=>{try{const e=await(0,i.apiGetContentmasterbyid)(t);console.log(e.data),Re(!0),Ae(e.data)}catch(n){}})(e.GroupName,e.ContentCode)},style:{background:"transparent",color:"black"}})})]})]})}),(0,_.jsx)(x.s,{field:"SlotDuration",header:"Dur[Min]",bodyStyle:{textAlign:"center",color:"black",width:"10px"}}),(0,_.jsx)(x.s,{field:"status",header:"Org/Rep",bodyStyle:{textAlign:"center",color:"black",width:"10px"},body:e=>(0,_.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,_.jsx)("p",{className:"py-0 px-2 rounded-full border border-gray-800 w-max",children:e.status})})}),(0,_.jsx)(x.s,{field:"SeasonNo",header:"Season & Episode",bodyStyle:{textAlign:"center",color:"black",width:"10px"},body:e=>{var t,n;null===(t=nn.filter((t=>t.ShortName==e.status))[0])||void 0===t||null===(n=t.NewColourCode)||void 0===n||n.split("-")[0];return(0,_.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:1===e.IsRecorded?(0,_.jsx)("p",{className:"py-0.5 px-2 rounded-full \n             bg-blue-900 text-white w-max",children:"LIVE"}):0===e.EpisodeSpecific?(0,_.jsx)("p",{className:"py-0.5 px-2 rounded-full \n           bg-blue-900 bg-opacity-80 text-white w-max",children:e.ContentTypeName}):(0,_.jsxs)("p",{className:"py-0.5 px-2 rounded-lg \n              bg-sky-700 text-white w-max",children:["S",e.SeasonNo," - E",e.EpisodeNo>9?e.EpisodeNo:"0"+e.EpisodeNo]})})}}),(0,_.jsx)(x.s,{field:"BreakPattern",header:"Pattern",bodyStyle:{textAlign:"center",color:"black"}}),(0,_.jsx)(x.s,{header:"Action",headerStyle:{width:"8rem",textAlign:"center"},bodyStyle:{textAlign:"center",color:"black",overflow:"visible"},body:e=>(e=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v.P,{}),(0,_.jsx)(o.u,{title:"Edit",placement:"top",children:(0,_.jsx)(o.zx,{type:"button",className:"btnEdit  mr-2",size:"xs",onClick:()=>{de(e);var t=Mt(0,fe,Qe);$e(t),Ye({value:e.ContentCode,label:e.ContentName,SeasonNo:e.SeasonNo,EpisodeNo:e.EpisodeNo}),_e({value:e.SeasonNo,label:e.SeasonNo}),qe({value:e.EpisodeNo,label:e.EpisodeNo}),Me(e.ContentName),Xe(e.SlotDuration),Ft({value:e.ContentCode,label:e.ContentName}),Lt({value:e.ContentCode,label:e.ContentName},{value:e.SeasonNo,label:e.SeasonNo}),Ve({value:e.BreakPatternCode,label:e.BreakPattern}),Rt(0,"Modify")},icon:(0,_.jsx)(d._vs,{}),label:"Confirm",style:{background:"transparent",color:"black"}})}),(0,_.jsx)(o.u,{title:"Delete",placement:"top",children:(0,_.jsx)(o.zx,{type:"button",className:"btnEdit mr-2",size:"xs",icon:(0,_.jsx)(d.Bhs,{}),onClick:t=>{Ot(t,e)},style:{background:"transparent",color:"black"}})}),(0,_.jsx)(o.u,{title:"Replace",placement:"top",children:(0,_.jsx)(o.zx,{type:"button",className:"btnEdit mr-2",size:"xs",icon:(0,_.jsx)(T.I0X,{}),onClick:()=>{Dt("REPLACE"),$t(!0)},style:{background:"transparent",color:"black"}})})]}))(e)})]})}),(0,_.jsxs)(o.Vq,{isOpen:yt,className:"z-50",onClose:un,width:600,children:[(0,_.jsxs)("div",{className:"flex  justify-between items-center mb-5",children:[(0,_.jsx)("h3",{className:"dark:text-blue-400",children:He.ContentName}),(0,_.jsxs)("div",{className:"text-end",children:[(0,_.jsxs)("h6",{className:"ml-2  dark:text-orange-400",children:["Dur: ",He.SlotDuration," Min"]}),(0,_.jsxs)("p",{className:"flex items-center",children:["Show Break Pattern",(0,_.jsx)(o.T5,{checked:ln,onChange:e=>{sn(!e)},className:"ml-2",unCheckedContent:on((0,_.jsx)(z.Nu2,{})),checkedContent:on((0,_.jsx)(z.Jl9,{}))})]})]})]}),(0,_.jsxs)("div",{className:"grid grid-cols-6 gap-2",children:[(0,_.jsx)("div",{className:"col-span-6",children:(0,_.jsx)("div",{className:"flex mb-2",children:(0,_.jsxs)("h6",{children:["Insert Start Time -"," ",null==re?null===(t=Qe[Number(Qe.length)-1])||void 0===t?void 0:t.StartTime:null===re||void 0===re?void 0:re.StartTime]})})}),1==Le.length?null:(0,_.jsx)("div",{className:"col-span-1",children:(0,_.jsx)(o.lm,{asterisk:!0,label:"Season",style:{width:"250px"},children:(0,_.jsx)(o.Ph,{options:Ie,isDisabled:1==Le.length,value:Ie.find((e=>e.value===Ge)),defaultValue:Ge,onChange:e=>{_e(e)}})})}),1==Le.length?null:(0,_.jsx)("div",{className:"col-span-1",children:(0,_.jsx)(o.lm,{asterisk:!0,label:"Episode",style:{width:"250px"},children:(0,_.jsx)(o.Ph,{options:Le,isDisabled:1==Le.length,value:Le.find((e=>e.value===Be)),defaultValue:Be,onChange:e=>qe(e)})})}),(0,_.jsx)("div",{className:"col-span-1",children:(0,_.jsx)(o.lm,{asterisk:!0,label:"Slot(Min)",style:{width:"250px"},children:(0,_.jsx)(o.II,{value:Ue,size:"sm",onChange:e=>{const t=e.target.value;/^[0-9]*$/.test(t)&&(""===t||Number(t)<=400)&&Xe(t)}})})}),ln&&(0,_.jsx)("div",{className:"col-span-3",children:(0,_.jsx)(o.lm,{label:"Break Pattern",style:{width:"250px"},children:(0,_.jsx)(o.Ph,{placeholder:"Select a Pattern",options:dt,value:dt.find((e=>e.value===We.value)),onChange:e=>Ve(e)})})})]}),(0,_.jsx)(Zt,{})]}),(0,_.jsxs)(o.Vq,{width:600,isOpen:Tt,onClose:()=>Et(!1),children:[(0,_.jsx)("h3",{className:"mb-5",children:"FPC SaveAs Date Wise"}),(0,_.jsxs)("div",{className:"grid grid-cols-6 md:grid-cols-6 gap-1",children:[(0,_.jsx)("div",{className:"col-span-6",children:(0,_.jsx)("label",{children:"Date Range"})}),(0,_.jsx)("div",{className:"col-span-6",children:(0,_.jsx)(b.Z,{minDate:new Date,value:[ut,ht],onChange:ft,inputFormat:ee,size:"sm"})})]}),(0,_.jsx)(_t,{})]}),(0,_.jsxs)(o.Vq,{width:600,isOpen:kt,onClose:()=>Pt(!1),children:[(0,_.jsx)("h3",{className:"mb-5",children:"FPC SaveAs Day Wise"}),(0,_.jsxs)("div",{className:"grid grid-cols-6 md:grid-cols-6 gap-1",children:[(0,_.jsx)("div",{className:"col-span-6",children:(0,_.jsx)("label",{children:"Date Range"})}),(0,_.jsx)("div",{className:"col-span-6",children:(0,_.jsx)(b.Z,{minDate:new Date,value:[ut,ht],onChange:ft,inputFormat:ee,size:"sm"})}),(0,_.jsx)("div",{className:"col-span-3"}),(0,_.jsx)("div",{className:"col-span-6   mt-6",children:(0,_.jsxs)(o.XZ.Group,{value:it,onChange:e=>{rt(e)},children:[(0,_.jsx)(o.XZ,{value:"6",children:"SU"}),(0,_.jsx)(o.XZ,{value:"0",children:"MO "}),(0,_.jsx)(o.XZ,{value:"1",children:"TU"}),(0,_.jsx)(o.XZ,{value:"2",children:"WS"}),(0,_.jsx)(o.XZ,{value:"3",children:"TH"}),(0,_.jsx)(o.XZ,{value:"4",children:"FR"}),(0,_.jsx)(o.XZ,{value:"5",children:"SA"})]})})]}),(0,_.jsx)("div",{className:"mt-5",children:(0,_.jsx)(o.zx,{variant:"solid",type:"button",className:"btnEdit",size:"sm",icon:(0,_.jsx)(y.JMf,{}),onClick:()=>Nt(!0),children:"Save"})})]}),(0,_.jsxs)(o.Vq,{isOpen:St,onClose:()=>Nt(!1),onRequestClose:()=>Nt(!1),children:[(0,_.jsx)("h5",{className:"mb-4",children:"Confirm?"}),(0,_.jsxs)("p",{children:["Are you sure want to Save As FPC for"," ",(0,D.formatDateToDDMMMYYYY)(ut)," to"," ",(0,D.formatDateToDDMMMYYYY)(ht)," ?"]}),(0,_.jsxs)("div",{className:"text-right mt-6",children:[(0,_.jsx)(o.zx,{onClick:()=>Nt(!1),size:"sm",className:"mr-2",children:"No"}),(0,_.jsx)(o.zx,{variant:"solid",onClick:()=>{Gt()},size:"sm",children:"Yes"})]})]}),(0,_.jsxs)(o.Vq,{isOpen:Bt,width:1200,height:600,onClose:()=>qt(!1),children:[(0,_.jsx)("h4",{className:"mb-4",children:"FPC Verify"}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(j.Z,{data:ne,setdata:ae,LocationCode:h.LocationCode,ChannelCode:h.ChannelCode,SelectedDate:X,emptySegmentData:oe,setemptySegmentData:le})}),(0,_.jsx)(o.zx,{label:"Save",variant:"solid",size:"sm",className:"mt-6",onClick:()=>{(async()=>{if(ot(!0),0==oe.length){let t=ne.map((e=>({RowNumber:e.data.RowNumber,ContentCode:1==e.data.GroupName?e.children[0].data.ContentCode:e.data.ContentCode,StartTime:e.data.StartTime,EndTime:e.data.EndTime,SlotDuration:e.data.SlotDuration,OriginalRepeatCode:e.data.OriginalRepeatCode,EpisodeNo:e.data.EpisodeNo,ContentName:1==e.data.GroupName?e.children[0].data.ContentName:e.data.ContentName,ActualDuration:e.data.ActualDuration,SeasonNo:e.data.SeasonNo,BreakPatternCode:e.data.BreakPatternCode,BreakPattern:e.data.BreakPattern,HouseID:e.data.HouseID,ChannelTimeDescription:e.data.ChannelTimeDescription,Id:e.data.Id,TimeCategoryStartTime:e.data.TimeCategoryStartTime,TimeCategoryEndTime:e.data.TimeCategoryEndTime,MinDiff:e.data.MinDiff,Consumption:e.data.Consumption,LocationCode:e.data.LocationCode,ChannelCode:e.data.ChannelCode,TelecastDate:e.data.TelecastDate})));t=xt(t);try{if("200"===(await(0,i.Postdailyfpc)(t,nt)).data.code)qt(!1),ot(!1),(0,D.openNotification)("success","Added Succesfully")}catch(e){if(500==e.response.status)return qt(!1),ot(!1),void(0,D.openNotification)("success","Added Succesfully")}}else qt(!1),ot(!1),(0,D.openNotification)("danger","Please Create Missing Segment First..")})()},children:"Save"})]})]})}),(0,_.jsxs)("div",{className:"col-span-1  flex justify-center",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"Insert",placement:"top",children:(0,_.jsx)(o.zx,{name:"insert",size:"sm",onClick:()=>{Dt("ADD"),$t(!0)},className:"mb-1 mr-1",icon:(0,_.jsx)(d.HQD,{})})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"SaveAs FPC Date",placement:"top",children:(0,_.jsx)(o.zx,{size:"sm",onClick:()=>{Et(!0)},className:"mb-1 mr-1",icon:(0,_.jsx)(F.KvO,{})})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"SaveAs FPC Days",placement:"top",children:(0,_.jsx)(o.zx,{size:"sm",onClick:()=>Pt(!0),className:"mb-1 mr-1",icon:(0,_.jsx)(I.ujk,{})})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"Export Excel",placement:"top",children:(0,_.jsx)(o.zx,{size:"sm",className:"mb-1 mr-1",onClick:()=>{(0,g.L)(Qe,"FPC-"+h.label+"-"+X,["StartTime","EndTime","ContentName","SlotDuration","status","HouseID","SeasonNo","EpisodeNo"])},icon:(0,_.jsx)(d.yFZ,{})})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"FPC Verify",placement:"top",children:(0,_.jsx)(o.zx,{size:"sm",className:"mb-1 mr-1",onClick:()=>qt(!0),icon:(0,_.jsx)(d.$Af,{}),disabled:!J})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"Download Import Template",placement:"top",children:(0,_.jsx)(o.zx,{size:"sm",className:"mb-1 mr-1",onClick:()=>{(0,g.L)([S.br],"FPC_Import_Template")},icon:(0,_.jsx)(d.Bge,{})})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"Import",placement:"top",children:(0,_.jsx)(o.zx,{name:"insert",size:"sm",onClick:()=>(Xt(!0),void tt([])),className:"mb-1 mr-1",icon:(0,_.jsx)(d.HQD,{})})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.u,{title:"Delete Created FPC",placement:"top",children:(0,_.jsx)(o.zx,{size:"sm",className:"mb-1 mr-1",onClick:()=>Jt(!0),icon:(0,_.jsx)(d.Bhs,{})})})})]}),(0,_.jsxs)(o.Vq,{isOpen:Kt,onClose:()=>Jt(!1),onRequestClose:()=>Jt(!1),children:[(0,_.jsx)("h4",{children:"Do you really want to delete the FPC that was created?"}),(0,_.jsxs)("div",{className:"text-right mt-6",children:[(0,_.jsx)(o.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:()=>Jt(!1),children:"Cancel"}),(0,_.jsx)(o.zx,{variant:"solid",onClick:()=>{$e([]),Jt(!1)},children:"OK"})]})]}),(0,_.jsxs)(o.Vq,{isOpen:Ut,onClose:en,onRequestClose:en,children:[et.length<=0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.gq,{beforeUpload:async(e,t)=>{if(t.length>=1)return"You can only upload ".concat(1," file(s)");const n=e[0];if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(n.type))return"Please upload an XLSX file!";Yt(n)},uploadLimit:1,tip:(0,_.jsx)("p",{className:"mt-2",children:"XLSX only"}),children:(0,_.jsx)(o.zx,{variant:"solid",icon:(0,_.jsx)(d.qX3,{}),children:"Upload your file"})}),(0,_.jsxs)("div",{className:"text-right mt-6",children:[(0,_.jsx)(o.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:en,children:"Cancel"}),(0,_.jsx)(o.zx,{variant:"solid",onClick:async()=>{const e={Accept:"*/*",Authorization:"Bearer ".concat(nt)},t=new FormData,n=new FileReader;n.onload=function(n){const a=n.target.result,o=new Blob([a],{type:Ht.type});t.append("file",o,Ht.name);try{fetch(w.Z.apiPrefix+"/fpcmaster/upload/?LocationCode=".concat(tn.LocationCode,"&ChannelCode=").concat(tn.ChannelCode,"&TelecastDate=").concat(Vt),{method:"POST",body:t,headers:e}).then((e=>e.json())).then((e=>{tt(e)})).catch((e=>{}))}catch(l){}},n.readAsArrayBuffer(Ht)},children:"OK"})]})]}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),et.length>0&&(0,_.jsx)("div",{style:{height:"auto",minHeight:"100px",maxHeight:"200px",overflowY:"auto"},children:(0,_.jsxs)(f.Z,{compact:!0,children:[(0,_.jsx)(V,{children:(0,_.jsx)(B,{children:["StartTime","Content","Remark"].map(((e,t)=>(0,_.jsx)(q,{children:e},t)))})}),(0,_.jsx)(H,{children:et.map(((e,t)=>(0,_.jsxs)(B,{style:{border:"1px solid #E3E5EB"},children:[(0,_.jsx)(W,{style:{border:"1px solid #E3E5EB"},children:e.StartTime}),(0,_.jsx)(W,{style:{border:"1px solid #E3E5EB"},children:e.ContentName}),(0,_.jsx)(W,{style:{border:"1px solid #E3E5EB"},children:e.Remark})]},t)))})]})})]})]}),(0,_.jsx)(o.Vq,{isOpen:Pe,width:1e3,onClose:()=>Re(!1),onRequestClose:()=>Re(!1),children:(0,_.jsxs)("div",{className:"w-full h-full grid grid-cols-2 gap-1",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"flex items-center mt-5",children:[(0,_.jsx)(o.qE,{size:"sm",src:"FAV.png"}),(0,_.jsx)("h6",{className:"ml-2 ",style:{letterSpacing:6,color:"rgb(127, 132, 138)"},children:1==(null===(n=ze.ContentClassification)||void 0===n?void 0:n.ClassificationCode)?"SERIES":"Movie"})]}),(0,_.jsx)("h1",{className:"mt-10 font-outfit  font-medium ",children:null===ze||void 0===ze?void 0:ze.ContentName}),(0,_.jsxs)("div",{className:"flex mt-5 ml-1",children:[(0,_.jsxs)("h6",{className:"mr-1",children:[Math.floor((null===ze||void 0===ze?void 0:ze.SlotDuration)/60),"Hr"]}),(0,_.jsxs)("h6",{children:[(null===ze||void 0===ze?void 0:ze.SlotDuration)%60,"Min"]})]}),(0,_.jsx)("div",{className:"flex mt-5",children:(0,_.jsx)("div",{style:{height:30,border:"1px solid #f6e6e61a",display:"flex",alignItems:"center",padding:"18px 25px",background:"#00000029",color:"white"},children:null===(l=ze.View)||void 0===l?void 0:l.ViewName})}),(0,_.jsxs)("div",{className:"flex mt-5",children:[(0,_.jsx)("p",{className:" font-outfit  font-medium mr-2",style:{height:30,border:"1px solid #f6e6e61a",display:"flex",alignItems:"center",padding:"18px 25px",background:"#00000029",color:"white"},children:null===(s=ze.GenreMaster)||void 0===s?void 0:s.GenreName}),(0,_.jsx)("p",{className:" font-outfit  font-medium",style:{height:30,border:"1px solid #f6e6e61a",display:"flex",alignItems:"center",padding:"18px 25px",background:"#00000029",color:"white"},children:null===(m=ze.SubGenreMaster)||void 0===m?void 0:m.SubGenreName})]}),(0,_.jsx)("h3",{className:"mt-7 font-outfit font-extrabold",children:" Synopsis"}),(0,_.jsx)("h6",{className:"mt-2 font-outfit  font-medium",children:null===ze||void 0===ze?void 0:ze.Synopsis})]}),(0,_.jsx)("div",{className:"flex justify-center items-center",children:ze.Content_Image?(0,_.jsx)("img",{src:null===ze||void 0===ze?void 0:ze.Content_Image,style:{aspectRatio:"3/2",objectFit:"contain",height:450,width:450}}):(0,_.jsx)("img",{src:"/img/3204121.jpg",style:{aspectRatio:"3/2",objectFit:"contain",height:450,width:450}})})]})}),(0,_.jsxs)(o.Vq,{isOpen:Qt,width:1200,className:"z-10",height:"95%",onClose:()=>$t(!1),onRequestClose:()=>$t(!1),contentClassName:"my-4 flex flex-col",children:[(0,_.jsxs)("div",{className:"flex justify-between items-center mr-3",children:[(0,_.jsx)("h4",{children:"Search Content"}),(0,_.jsx)(o.II,{size:"sm",prefix:(0,_.jsx)(d.O6C,{className:"text-lg"}),placeHolder:"Search Content",onChange:e=>Me(e.target.value),className:"w-[30%]"})]}),(0,_.jsxs)("div",{className:"flex justify-between items-center gap-2 mt-3 mb-4 mr-3",children:[(0,_.jsxs)("div",{className:"flex gap-2 grow",children:[null!==re&&(0,_.jsx)("div",{className:"flex items-center h-full p-2 border border-gray-700 rounded bg-teal-900 hover:cursor-not-allowed",style:{textWrap:"nowrap"},children:(0,_.jsxs)("p",{className:"dark:!text-white text-black ",children:[(0,_.jsx)("span",{children:"Insert Start Time - "}),(0,_.jsx)("span",{className:"font-bold",children:null===re||void 0===re?void 0:re.StartTime})]})}),(0,_.jsx)(o.Ph,{size:"sm",placeholder:"License",className:"min-w-[20%] max-w-20%]",options:Y,value:Ne,onChange:e=>we(e)}),(0,_.jsx)(o.Ph,{isMulti:!0,size:"sm",placeholder:"Genre",className:"min-w-[30%] max-w-full",options:De,value:Ee,onChange:e=>ke(e)})]}),(0,_.jsxs)("div",{className:" w-[30%] flex items-center",children:[(0,_.jsxs)("span",{className:"dark:!text-white text-black ",children:[ve[0]," Min"]}),null!=be&&(0,_.jsx)(R.i,{value:ve,onChange:e=>{e.value[0]>e.value[1]?ge([e.value[1],e.value[0]]):ge(e.value)},min:je,max:be,range:!0,className:"w-[180px] mx-3"}),(0,_.jsxs)("span",{className:"dark:!text-white text-black ",children:[ve[1]," Min"]})]})]}),(0,_.jsx)("div",{className:"grow grid grid-cols-2 gap-2 auto-rows-max mr-3 overflow-auto pr-2",children:me.filter((e=>{var t;return null===(t=e.ContentName)||void 0===t?void 0:t.toLowerCase().includes(Oe.toLowerCase())})).map(((e,t)=>{var n,a;return(0,_.jsx)("div",{className:"dark:!border-b dark:!border-[#484545] border-b border-[#49484857] pb-2",children:(0,_.jsx)("div",{className:"bgp",children:(0,_.jsxs)("div",{className:"flex ",children:[(0,_.jsx)("div",{children:(0,_.jsx)("img",{src:e.Content_Image,alt:"No Image Found",className:"rounded-lg hover:rounded-t-lg",style:{height:100,width:70}})}),(0,_.jsxs)("div",{className:"grow",children:[(0,_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,_.jsxs)("p",{className:" dark:!text-white text-black  font-semibold px-4 capitalize",children:[t+1,". ",e.ContentName]}),(0,_.jsxs)("div",{className:"flex gap-3 items-center",children:[e.ContentContractDetails.length>0&&(0,_.jsx)(o.u,{title:"Content Acquisition",children:(0,_.jsx)(o.zx,{icon:(0,_.jsx)(L.qeN,{className:"text-lg text-gray-200"}),size:"xs",shape:"circle",onClick:()=>bt(e.ContentContractDetails[0].id)})}),(0,_.jsx)(o.zx,{size:"xs",shape:"circle",icon:(0,_.jsx)(T.WZt,{}),onClick:()=>{(async e=>{const t=await(0,i.apiUSP_PG_FPC_Get_Content)("0",h.LocationCode,h.ChannelCode,X,e);if(console.log("resp.data",t.data),t.data.length>0&&0==t.data[0].ContentTypeCode&&0==t.data[0].ContentCode)return void(0,D.openNotification)("info",t.data[0].ContentName);ue(t.data);const n=zt(t.data);console.log(n)})(e.ContentName),Ye(e),Xe(e.SlotDuration)}})]})]}),(0,_.jsxs)("div",{className:"flex items-center mt-2",children:[(0,_.jsx)("p",{className:"px-4 capitalize",children:null===(n=new Date(e.FPCReleaseDate))||void 0===n?void 0:n.getFullYear()}),(0,_.jsx)("div",{className:"flex items-center text-xs dark:!text-white text-black  mr-2",style:{border:"1px solid #f6e6e61a",padding:"2px 10px",background:"#00000029"},children:null===(a=e.View)||void 0===a?void 0:a.ViewName}),(0,_.jsx)("p",{className:"text-sm text-blue-400",children:e.ContentType.ContentTypeName})]}),(0,_.jsxs)("p",{className:"text-sm  text-orange-400 px-4 mt-2",children:[e.SlotDuration," Min"]})]})]})})},t)}))})]})]})]})}var K=n(88449),J=n(749),Q=n(84373),$=n(36064),ee=n(29851),te=n(1680);const ne=s.Ry().shape({ContentName:s.Z_().min(3,"Too Short!").max(50,"Too Long!").required("ContentName Required"),ShortName:s.Z_().min(1,"Too Short!").max(200,"Too Long!").required("ShortName Required"),ContentTypeCode:s.Z_().min(1,"Too Short!").max(50,"Too Long!").required("ContentType Required"),Audience:s.Z_().required("Audience Required"),ClassificationCode:s.Z_().min(3,"Too Short!").max(50,"Too Long!").required("ClassificationCode Required"),LanguageCode:s.Z_().min(1,"Too Short!").max(200,"Too Long!").required("LanguageCode Required"),FPCReleaseDate:s.Z_().min(3,"Too Short!").max(200,"Too Long!").required("FPCReleaseDate Required"),SlotDuration:s.Z_().min(1,"Too Short!").max(50,"Too Long!").required("SlotDuration Required"),CensorshipCode:s.Z_().min(1,"Too Short!").max(200,"Too Long!").required("CensorshipCode Required"),IsActive:s.Z_().required("IsActives Required"),rememberMe:s.Xg()}),ae=()=>{var e,t,n,s,p,x,f;const C=(0,u.s0)(),v=(0,r.useDispatch)(),g=(0,r.useSelector)((e=>e.locale.selectedChannel)),[b,j]=(0,c.useState)(!1),[S,N]=(0,c.useState)(),w=(0,u.TH)(),T=new URLSearchParams(w.search),E=T.get("chl"),k=JSON.parse(decodeURIComponent(E));(0,c.useEffect)((()=>{v((0,$.rh)([S,g.label==te.CLIENT.USA_Forbes?"Playlist Template":"FPC Master"]));const e=document.getElementsByClassName("Gbox2")[0],t=document.getElementsByClassName("Gbox2")[0].children[1];return e&&(e.style.display="block",t.style.display="block"),()=>{e&&(e.style.display="none",t.style.display="none")}}),[S]),(0,c.useEffect)((()=>{k.objChannel.ChannelCode==g.ChannelCode||C(g.label==te.CLIENT.USA_Forbes?"/fpcmasterNew":"/FPCmaster")}),[g]);let P=T.get("dt");var R="";if(P){const e=new Date(P),t=e.toLocaleDateString("en-GB",{day:"2-digit"}),n=e.toLocaleDateString("en-GB",{month:"short"}),a=e.toLocaleDateString("en-GB",{year:"numeric"});R="".concat(t,"-").concat(n,"-").concat(a)}const z=e=>{console.log("handleDateChange",e),N(e)};(0,c.useEffect)((()=>{N(P)}),[]);const A=(0,r.useSelector)((e=>e.auth.session.token)),{state:O}=(0,u.TH)(),[I,F]=(0,c.useState)({value:"",label:""}),[L,Z]=(0,c.useState)({value:"",label:""}),[G,B]=(0,c.useState)(null),q={control:e=>(0,a.Z)((0,a.Z)({},e),{},{minHeight:"10px"})},W=(0,c.useRef)(),[V,H]=(0,c.useState)(!1),[Y,U]=(0,c.useState)([]),[ae,oe]=(0,c.useState)(null);(0,c.useEffect)((()=>{}),[Y]);const le=e=>{H(!1)};(0,c.useEffect)((()=>{(async e=>{const t=(await(0,i.apiGetContentTypemaster)(void 0)).data.map((e=>({value:e.ContentTypeCode,label:e.ContentTypeName})));F(t)})(),(async e=>{const t=(await(0,i.apiGetfpcorgrepmaster)(void 0)).data.map((e=>({value:e.OriginalRepeatCode,label:e.OriginalRepeatName})));Z(t)})()}),[]),(0,c.useEffect)((()=>{(async()=>{S&&g&&A&&oe(await(0,ee.Eu)(new Date(S),g,A))})()}),[S,g,A]);const se=(0,r.useSelector)((e=>e.auth.session.Username)),ie=(0,r.useSelector)((e=>e.auth.session)),re=async()=>{try{var e;if(console.log("FCPSaveDt",Y),0==Y.length)return void(0,D.openNotification)("info","Kindly Add atleast single row to save data.");j(!0);const t=Y.map((e=>(0,a.Z)((0,a.Z)({},e),{},{SlotDuration:"".concat(e.SlotDuration)})));await(0,i.PostFPC)(t);(0,D.openNotification)("success","FPC Saved successfully"),console.log(ie);const n=await(0,i.apisendnotification)({NotificationId:(Math.random()+1).toString(36).substring(7),user_ids:[64],message:(null===(e=new Date(R))||void 0===e?void 0:e.toDateString())+" FPC CREATED",image:"",type:"1",location:"FPC CREATED",locationLabel:se,Status:"1",isGroup:1,Ispriority:1,readed:0});console.log(n),j(!1)}catch(t){console.error(t)}};return(0,_.jsxs)("div",{children:[(0,_.jsx)(l.J9,{initialValues:{ContentCode:(null===O||void 0===O?void 0:O.editData.ContentCode)||"",ContentName:(null===O||void 0===O?void 0:O.editData.ContentName)||"",ShortName:(null===O||void 0===O?void 0:O.editData.ShortName)||"",ERPCode:(null===O||void 0===O?void 0:O.editData.ERPCode)||"",ContentTypeCode:(null===O||void 0===O||null===(e=O.editData.ContentType)||void 0===e?void 0:e.ContentTypeCode)||"",LanguageCode:(null===O||void 0===O||null===(t=O.editData.Language)||void 0===t?void 0:t.LanguageCode)||"",ClassificationCode:(null===O||void 0===O||null===(n=O.editData.Classification)||void 0===n?void 0:n.ClassificationCode)||"",FPCReleaseDate:(null===O||void 0===O||null===(s=O.editData.FPCReleaseDate)||void 0===s?void 0:s.FPCReleaseDate)||"",SlotDuration:(null===O||void 0===O?void 0:O.editData.SlotDuration)||"",GenreCode:(null===O||void 0===O||null===(p=O.editData.Genre)||void 0===p?void 0:p.GenreCode)||"",SubGenreCode:(null===O||void 0===O||null===(x=O.editData.SubGenre)||void 0===x?void 0:x.SubGenreCode)||"",CensorshipCode:(null===O||void 0===O||null===(f=O.editData.Censorship)||void 0===f?void 0:f.CensorshipCode)||"",TxMasterCode:(null===O||void 0===O?void 0:O.editData.TxMasterCode)||"",IsActive:1===(null===O||void 0===O?void 0:O.editData.IsActive)},validationSchema:ne,onSubmit:(e,t)=>{let{resetForm:n,setSubmitting:a}=t;setTimeout((()=>{null!==O&&void 0!==O&&O.editData.ContentCode?new Promise(((t,n)=>{a(!1),(async(e,t)=>{try{const n=await(0,i.PutContent)(e,t);if(console.log(n),"Updated"===n.data.msg)return;if("Entity is Already Exists"===n.data.msg)return}catch(n){return{}}})(e,A).then((e=>{t(e)})).catch((e=>{n(e)}))})):new Promise(((t,n)=>{(async(e,t)=>{try{const n=await(0,i.PostContent)(e,t);if("success"===n.data.msg)return;if("Server Error."===n.data.msg)return}catch(n){return{}}})(e,A).then((e=>{t(e)})).catch((e=>{n(e)}))})),n()}),400)},children:e=>{let{values:t,touched:n,errors:a}=e;return(0,_.jsxs)(o.Zb,{bodyClass:"text-center",children:[(0,_.jsxs)("div",{className:"flex justify-end items-center",children:[(0,_.jsx)("p",{className:"text-gray-300 font-normal mr-2",children:"Telecast Date"}),(0,_.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,_.jsx)("div",{children:(0,_.jsx)(o.Mt,{placeholder:"Select",value:S||new Date(R),size:"sm",inputFormat:"DD/MM/YYYY",clearable:!1,className:"my-1",onChange:z})}),(0,_.jsxs)(o.BZ,{children:[(0,_.jsx)(o.u,{title:"Prev Date",children:(0,_.jsx)(o.zx,{icon:(0,_.jsx)(Q.u1R,{}),size:"sm",shape:"none",className:"!rounded-l-lg",onClick:()=>{N((e=>{const t=e instanceof Date?e:new Date(S);return new Date(t.getTime()-864e5)}))}})}),(0,_.jsx)(o.u,{title:"Next Date",children:(0,_.jsx)(o.zx,{icon:(0,_.jsx)(Q.hjJ,{}),size:"sm",shape:"none",className:"!rounded-r-lg",onClick:()=>{N((e=>{const t=e instanceof Date?e:new Date(S);return new Date(t.getTime()+864e5)}))}})})]})]})]}),(0,_.jsx)(l.l0,{children:(0,_.jsxs)(o.Yb,{className:"pt-0",children:[(0,_.jsx)("div",{className:"grid grid-cols-6 md:grid-cols-6 gap-1 ",children:(0,_.jsx)("div",{className:"col-span-6 ",children:S&&(0,_.jsx)(X,{objChannel:k.objChannel,SelectedDate:(0,D.convertDateFormatyyyyMMdd)(S),setFCPSaveDt:U,isFPCAllowedToEdit:ae})})}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),(0,_.jsx)(h.gi,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,_.jsxs)("div",{className:"md:flex items-center flex",children:[(0,_.jsx)(m.rU,{to:"/FPCmaster",children:(0,_.jsx)(o.zx,{className:"mr-2",variant:"",size:"sm",icon:(0,_.jsx)(d.BCj,{}),children:"Back"})}),(0,_.jsx)(o.zx,{size:"sm",variant:"solid",onClick:re,disabled:!ae,icon:(0,_.jsx)(y.JMf,{}),type:"submit",children:"Save"}),!ae&&(0,_.jsx)("p",{className:"ml-2 text-red-500",children:"Backdated FPCs are non-editable"})]})})]})})]})}}),(0,_.jsxs)(o.dy,{title:"Filter",isOpen:V,onClose:le,onRequestClose:le,footer:(0,_.jsx)(K.Z,{onCancel:le,onSaveClick:()=>{var e;null===(e=W.current)||void 0===e||e.submitForm()},BtnSaveTxt:"Apply",ref:W}),children:[(0,_.jsxs)(o.Zb,{children:[(0,_.jsx)("div",{className:"col-span-4 mb-1",children:(0,_.jsx)("p",{children:"Content/House ID"})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.II,{size:"sm",placeholder:"Search By Content"})}),(0,_.jsx)("div",{className:"col-span-4 mt-1 mb-1",children:(0,_.jsx)("p",{children:"Search By Content Type"})}),(0,_.jsx)(J.N,{value:G,onChange:e=>B(e.value),options:I,optionLabel:"label",filter:!0,placeholder:"Select Content Type",maxSelectedLabels:3,className:"w-full md:w-20rem",styles:q})]}),(0,_.jsx)("br",{})]}),(0,_.jsx)(M.default,{showLoader:b})]})}},28825:(e,t,n)=>{n.d(t,{i:()=>b});var a=n(72791),o=n(87890),l=n(85388),s=n(42062),i=n(95854);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function c(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}function u(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,l,s,i=[],r=!0,d=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);r=!0);}catch(e){d=!0,o=e}finally{try{if(!r&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw o}}return i}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f={handle:function(e){var t=e.index,n=e.handleIndex;return(0,i.AK)("p-slider-handle",{"p-slider-handle-start":0===t,"p-slider-handle-end":1===t,"p-slider-handle-active":n.current===t})},range:"p-slider-range",root:function(e){var t=e.props,n=e.vertical,a=e.horizontal;return(0,i.AK)("p-slider p-component",t.className,{"p-disabled":t.disabled,"p-slider-horizontal":a,"p-slider-vertical":n})}},C=l.V.extend({defaultProps:{__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,children:void 0},css:{classes:f,styles:"\n@layer primereact {\n    .p-slider {\n        position: relative;\n    }\n    \n    .p-slider .p-slider-handle {\n        position: absolute;\n        cursor: grab;\n        touch-action: none;\n        display: block;\n        z-index: 1;\n    }\n    \n    .p-slider .p-slider-handle.p-slider-handle-active {\n        z-index: 2;\n    }\n    \n    .p-slider-range {\n        position: absolute;\n        display: block;\n    }\n    \n    .p-slider-horizontal .p-slider-range {\n        top: 0;\n        left: 0;\n        height: 100%;\n    }\n    \n    .p-slider-horizontal .p-slider-handle {\n        top: 50%;\n    }\n    \n    .p-slider-vertical {\n        height: 100px;\n    }\n    \n    .p-slider-vertical .p-slider-handle {\n        left: 50%;\n    }\n    \n    .p-slider-vertical .p-slider-range {\n        bottom: 0;\n        left: 0;\n        width: 100%;\n    }\n}\n",inlineStyles:{handle:{position:"absolute"},range:{position:"absolute"}}}});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=a.memo(a.forwardRef((function(e,t){var n=a.useContext(o.Ou),d=C.getProps(e,n),c=a.useRef(null),u=a.useRef(0),m=a.useRef(!1),h=a.useRef(!1),f=a.useRef(0),v=a.useRef(0),b=a.useRef(0),y=a.useRef(0),j=d.range?d.value||[d.min,d.max]:d.value||0,S="horizontal"===d.orientation,N="vertical"===d.orientation,w=x((0,s.OR)({type:"mousemove",listener:function(e){return W(e)}}),2),D=w[0],T=w[1],E=x((0,s.OR)({type:"mouseup",listener:function(e){return V(e)}}),2),k=E[0],P=E[1],R=x((0,s.OR)({type:"touchmove",listener:function(e){return W(e)}}),2),z=R[0],A=R[1],O=x((0,s.OR)({type:"touchend",listener:function(e){return V(e)}}),2),M=O[0],I=O[1],F=C.setMetaData({props:d}),L=F.ptm,Z=F.cx,G=F.sx,_=F.isUnstyled;(0,l.e)(C.css.styles,_,{name:"slider"});var B=function(e,t){var n=d.range?j[u.current]:j,a=(d.step||1)*t;U(e,n+a),e.preventDefault()},q=function(e,t){d.disabled||(h.current=!0,H(),m.current=!0,u.current=t)},W=function(e){h.current&&(Y(e),e.preventDefault())},V=function(e){if(h.current){h.current=!1;var t=Y(e);d.onSlideEnd&&d.onSlideEnd({originalEvent:e,value:t}),T(),P(),A(),I()}},H=function(){var e=c.current.getBoundingClientRect();f.current=e.left+i.p7.getWindowScrollLeft(),v.current=e.top+i.p7.getWindowScrollTop(),b.current=c.current.offsetWidth,y.current=c.current.offsetHeight},Y=function(e){var t,n=i.gb.isNotEmpty(e.touches)?e.touches[0].pageX:e.pageX,a=i.gb.isNotEmpty(e.touches)?e.touches[0].pageY:e.pageY;if(n&&a){t=S?100*(n-f.current)/b.current:100*(v.current+y.current-a)/y.current;var o=(d.max-d.min)*(t/100)+d.min;if(d.step){var l=d.range?j[u.current]:j,s=o-l;s<0?o=l+Math.ceil(o/d.step-l/d.step)*d.step:s>0&&(o=l+Math.floor(o/d.step-l/d.step)*d.step)}else o=Math.floor(o);return U(e,o)}},U=function(e,t){var n=parseFloat(t.toFixed(10)),a=n;return d.range?(0===u.current?n<d.min?n=d.min:n>d.max&&(n=d.max):n>d.max?n=d.max:n<d.min&&(n=d.min),(a=p(j))[u.current]=n,d.onChange&&d.onChange({originalEvent:e,value:a})):(n<d.min?n=d.min:n>d.max&&(n=d.max),a=n,d.onChange&&d.onChange({originalEvent:e,value:a})),a},X=function(e,t,n){e=i.gb.isEmpty(e)?null:e,t=i.gb.isEmpty(t)?null:t;var o={transition:h.current?"none":null,left:null!=e&&e+"%",bottom:null!=t&&t+"%"},l=(0,i.dG)(g({className:Z("handle",{index:n,handleIndex:u}),style:g(g({},G("handle",{dragging:h,leftValue:e,bottomValue:t})),o),tabIndex:d.tabIndex,role:"slider",onMouseDown:function(e){return function(e,t){D(),k(),q(0,t)}(0,n)},onTouchStart:function(e){return function(e,t){z(),M(),q(0,t)}(0,n)},onKeyDown:function(e){return function(e,t){if(!d.disabled){u.current=t;var n=e.key;"ArrowRight"===n||"ArrowUp"===n?B(e,1):"ArrowLeft"!==n&&"ArrowDown"!==n||B(e,-1)}}(e,n)},"aria-valuemin":d.min,"aria-valuemax":d.max,"aria-valuenow":e||t||0,"aria-orientation":d.orientation},J),L("handle"));return a.createElement("span",l)};a.useImperativeHandle(t,(function(){return{props:d,getElement:function(){return c.current}}}));var K=C.getOtherProps(d),J=i.gb.reduceKeys(K,i.p7.ARIA_PROPS),Q=d.range?function(){var e=100*(j[0]<d.min?d.min:j[0]-d.min)/(d.max-d.min),t=100*(j[1]>d.max?d.max:j[1]-d.min)/(d.max-d.min),n=S?X(e,null,0):X(null,e,0),o=S?X(t,null,1):X(null,t,1),l=t>e?t-e:e-t,s=t>e?e:t,r=S?{left:s+"%",width:l+"%"}:{bottom:s+"%",height:l+"%"},c=(0,i.dG)({className:Z("range"),style:g(g({},G("range")),r)},L("range"));return a.createElement(a.Fragment,null,a.createElement("span",c),n,o)}():function(){var e;e=j<d.min?d.min:j>d.max?d.max:100*(j-d.min)/(d.max-d.min);var t=S?{width:e+"%"}:{height:e+"%"},n=S?X(e,null,null):X(null,e,null),o=(0,i.dG)({className:Z("range"),style:g(g({},G("range")),t)},L("range"));return a.createElement(a.Fragment,null,a.createElement("span",o),n)}(),$=(0,i.dG)({style:d.style,className:Z("root",{vertical:N,horizontal:S}),onClick:function(e){if(!d.disabled){if(!m.current){H();var t=Y(e);d.onSlideEnd&&d.onSlideEnd({originalEvent:e,value:t})}m.current=!1}}},C.getOtherProps(d),L("root"));return a.createElement("div",r({id:d.id,ref:c},$),Q)})));b.displayName="Slider"},97918:()=>{}}]);
//# sourceMappingURL=7044.8630b05e.chunk.js.map