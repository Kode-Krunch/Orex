"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[218],{44630:(e,t,a)=>{a.d(t,{Z:()=>s});var o=a(72791);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;const[t,a]=(0,o.useState)("");return(0,o.useEffect)((()=>{if(t){let t=setTimeout((()=>a("")),e);return()=>{clearTimeout(t)}}}),[t]),[t,a]}},96361:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(79139),s=a(60364),i=a(11087),r=a(80184);const n=e=>{let{ModuleText:t="Admin",Component:a,links:n}=e;(0,s.useSelector)((e=>e.auth.session.currentRouteKey));const l=(0,s.useSelector)((e=>e.base.common.currentRouteTitle));console.log(l);const{title:m,Moduletitle:d}=(0,s.useSelector)((e=>e.auth.user));return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xl font-medium",children:l}),(0,r.jsxs)(o.Breadcrumbs,{style:{marginLeft:"-15px",width:"auto"},children:[(0,r.jsx)(i.rU,{to:"/home",className:"opacity-60 text-xs",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,r.jsx)(i.rU,{to:"/".concat("SALES ADMIN"===d?"SalesAdmin":d),className:"opacity-60 text-xs",children:(0,r.jsx)("span",{children:d})}),(0,r.jsx)(i.rU,{to:"#",className:"text-xs",children:(0,r.jsx)("span",{children:l})})]})]})}},30218:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var o=a(1413),s=a(72791),i=a(2803),r=a(81721),n=a(92506),l=a(58121),m=a.n(l),d=a(78820),c=a(81724),p=a(57689),u=a(11308),E=a(44630),h=a(60364),g=a(96361),C=a(54748),_=a(80184);const x=e=>{let{touched:t,errors:a}=e;const{setFieldValue:o}=(0,n.u6)();let s=Object.keys(a);if(s.length)for(let i of s)(0,C.Vw)(i);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("h5",{children:"Basic Information"}),(0,_.jsxs)("div",{className:"grid grid-cols-4 gap-2 mt-4",children:[(0,_.jsx)(i.xJ,{asterisk:!0,label:"First Name",invalid:a.Emp_FirstName&&t.Emp_FirstName,errorMessage:a.Emp_FirstName,children:(0,_.jsx)(n.gN,{type:"text",autoComplete:"off",maxLength:"15",name:"Emp_FirstName",placeholder:"First Name",component:i.II,onChange:e=>{const t=e.target.value;(0,C.K9)(t)&&o("Emp_FirstName",t)},size:"sm"})}),(0,_.jsx)(i.xJ,{label:"Last Name",asterisk:!0,invalid:a.Emp_LastName&&t.Emp_LastName,errorMessage:a.Emp_LastName,children:(0,_.jsx)(n.gN,{type:"text",autoComplete:"off",maxLength:"15",name:"Emp_LastName",placeholder:"Last Name",component:i.II,onChange:e=>{const t=e.target.value;(0,C.K9)(t)&&o("Emp_LastName",t)},size:"sm"})}),(0,_.jsx)(i.xJ,{label:"Email",asterisk:!0,invalid:a.Emp_Email&&t.Emp_Email,errorMessage:a.Emp_Email,children:(0,_.jsx)(n.gN,{type:"text",autoComplete:"off",maxLength:"45",name:"Emp_Email",placeholder:"Email",component:i.II,onChange:e=>{const t=e.target.value;(0,C.Jh)(t)&&o("Emp_Email",t)},size:"sm"})}),(0,_.jsx)(i.xJ,{asterisk:!0,label:"Contact",invalid:a.Emp_Contact1&&t.Emp_Contact1,errorMessage:a.Emp_Contact1,children:(0,_.jsx)(n.gN,{type:"text",autoComplete:"off",maxLength:"10",name:"Emp_Contact1",placeholder:"Contact",component:i.II,onChange:e=>{const t=e.target.value;(0,C.n1)(t)&&o("Emp_Contact1",t)},size:"sm"})})]})]})};var D=a(91323),f=a(85848);function v(e,t){const a=(0,D.Q)(e);if(isNaN(t))return(0,f.L)(e,NaN);if(!t)return a;const o=a.getDate(),s=(0,f.L)(e,a.getTime());s.setMonth(a.getMonth()+t+1,0);return o>=s.getDate()?s:(a.setFullYear(s.getFullYear(),s.getMonth(),o),a)}function N(e,t){return v(e,12*t)}var y=a(40113);const j=c.Ry().shape({Emp_FirstName:c.Z_().min(2,"Too Short!").max(30,"Too Long!").required("Required"),Emp_LastName:c.Z_().min(2,"Too Short!").max(30,"Too Long!").required("Required"),Emp_Email:c.Z_().email("Invalid email format").min(5,"Email must be at least 5 characters long").max(254,"Email must be less than 255 characters long").required("required"),Emp_Contact1:c.Z_().matches(/^[0-9]+$/,"Only numeric characters are allowed").min(10,"Too Short!").max(15,"Too Long!").required("Required")}),S={Emp_Image:"",EmployeeCode:"",Emp_FirstName:"",Emp_LastName:"",Emp_Code:"",Emp_Email:"",Emp_Addr1:"address line 1",Emp_Addr2:"NA",PlaceCode:"",StateCode:"",CountryCode:"",Emp_Contact1:"",Emp_Contact2:"1234567890",Emp_Grade:"A",Emp_DOB:"1999-03-12",Emp_DOJ:(0,C.Tk)(new Date),Emp_DOL:(0,C.Tk)(N(new Date,1)),Emp_BloodGroup:"A+",Pincode:"000000",DepartmentCode:9,DesignationCode:1,ReportingTo:"",RegionCode:4,Emp_Description:"",IsActive:!0,tags:[]},b=(0,s.forwardRef)(((e,t)=>{const{token:a}=(0,h.useSelector)((e=>e.auth.session)),l=(0,h.useSelector)((e=>e.auth.session.Username)),[c,C]=(0,s.useState)(S),[D,f]=(0,s.useState)(""),v=(0,p.s0)(),[N,b]=(0,E.Z)(),{state:w}=(0,p.TH)();return(0,s.useEffect)((()=>{(async()=>{var e,t,a,s;let i=m()(S);const r=await(0,u.A1)(),n=[];r.data.forEach((e=>{e.children.forEach((t=>{t.children.forEach((a=>{n.push({CountryCode:e.CountryCode,StateCode:"".concat(t.StateCode),PlaceCode:"".concat(a.PlaceCode),PlaceName:"".concat(a.PlaceName),value:"".concat(a.PlaceCode),label:a.PlaceName})}))}))}));const l=(await(0,u.h8)()).data.map((e=>({value:e.EmployeeCode,label:e.Emp_FirstName})));i=(0,o.Z)((0,o.Z)({},i),{},{PlaceCode:"".concat(null===(e=n[0])||void 0===e?void 0:e.PlaceCode)||"",StateCode:"".concat(null===(t=n[0])||void 0===t?void 0:t.StateCode)||"",CountryCode:"".concat(null===(a=n[0])||void 0===a?void 0:a.CountryCode)||"",ReportingTo:(null===(s=l[0])||void 0===s?void 0:s.value)||""}),null!==w&&void 0!==w&&w.editData&&(i=(0,o.Z)((0,o.Z)({},i),{},{Emp_FirstName:w.editData.Emp_FirstName||"",Emp_LastName:w.editData.Emp_LastName||"",Emp_Email:w.editData.Emp_Email||"",PlaceCode:"".concat(w.editData.PlaceCode||i.PlaceCode),StateCode:"".concat(w.editData.StateCode||i.StateCode),CountryCode:"".concat(w.editData.CountryCode||i.CountryCode),ReportingTo:w.editData.ReportingTo||i.ReportingTo,EmployeeCode:w.editData.EmployeeCode||"",Emp_Image:w.editData.Emp_Image||"",Emp_Code:w.editData.Emp_Code||"",Emp_Addr1:w.editData.Emp_Addr1||"",Emp_Addr2:w.editData.Emp_Addr2||"NA",Emp_Contact1:w.editData.Emp_Contact1||"",Emp_Contact2:w.editData.Emp_Contact2||"1234567890",Emp_Grade:w.editData.Emp_Grade||"",Emp_DOB:w.editData.Emp_DOB||"",Emp_DOJ:w.editData.Emp_DOJ||"",Emp_DOL:w.editData.Emp_DOL||"",Emp_BloodGroup:w.editData.Emp_BloodGroup||"",Pincode:w.editData.Pincode||"",DepartmentCode:w.editData.DepartmentCode||"",DesignationCode:w.editData.DesignationCode||"",RegionCode:w.editData.RegionCode||"",Emp_Description:w.editData.Emp_Description||"",IsActive:0!==w.editData.IsActive})),C(i)})()}),[w]),(0,_.jsxs)(_.Fragment,{children:[N&&(0,_.jsx)(i.bZ,{className:"mb-4",type:D,showIcon:!0,children:N}),(0,_.jsx)(i.Zb,{header:(0,_.jsx)(g.Z,{}),className:"h-full flex flex-col",bodyClass:"grow h-0",children:(0,_.jsx)(n.J9,{enableReinitialize:!0,innerRef:t,initialValues:c,validationSchema:j,onSubmit:(e,t)=>{let{setSubmitting:o}=t;setTimeout((()=>{new Promise(null===w?(t,o)=>{(0,y.i)(e,a,b,f,v,l).then((e=>{t(e)})).catch((e=>{o(e)}))}:(t,s)=>{o(!1),(0,y.R)(e,a,b,f,v,l).then((e=>{t(e)})).catch((e=>{s(e)}))})}),400)},children:e=>{let{touched:t,errors:a,isSubmitting:o}=e;return(0,_.jsx)(n.l0,{className:"h-full",children:(0,_.jsxs)(i.Yb,{className:"h-full flex flex-col",children:[(0,_.jsx)("div",{className:"grow h-0",children:(0,_.jsx)(x,{touched:t,errors:a})}),(0,_.jsx)(r.gi,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:(0,_.jsxs)("div",{className:"md:flex items-center flex",children:[(0,_.jsx)(i.zx,{size:"sm",className:"ltr:mr-3 rtl:ml-3",onClick:()=>v("/UserMaster"),type:"button",children:"Discard"}),(0,_.jsx)(i.zx,{size:"sm",variant:"solid",loading:o,icon:(0,_.jsx)(d.JMf,{}),type:"submit",children:"Save"})]})})]})})}})})]})}));b.defaultProps={type:"edit"};const w=b},40113:(e,t,a)=>{a.d(t,{R:()=>r,i:()=>i});var o=a(11308),s=a(67388);const i=async(e,t,a,i,r,n)=>{try{const m=await(0,o.hi)(e,t);var l;if(200==m.data.code)return i("success"),a("Data Inserted Successfully."),setTimeout((()=>{r("/UserMaster")}),2e3),void await(0,s.apisendnotification)({NotificationId:(Math.random()+1).toString(36).substring(7),user_ids:[64],message:(null===(l=new Date)||void 0===l?void 0:l.toDateString())+" Employee CREATED",image:"",type:"1",location:"Employee CREATED",locationLabel:n,Status:"1",isGroup:1,Ispriority:1,readed:0});if("Server Error."===m.data.msg)return i("error"),void a("Server Error.")}catch(m){return{}}},r=async(e,t,a,i,r,n)=>{try{const m=await(0,o.Ki)(e,t);var l;if(200==m.data.code)return i("success"),a("Data Updated Successfully"),setTimeout((()=>{r("/UserMaster")}),2e3),void await(0,s.apisendnotification)({NotificationId:(Math.random()+1).toString(36).substring(7),user_ids:[64],message:(null===(l=new Date)||void 0===l?void 0:l.toDateString())+" Employee CREATED",image:"",type:"1",location:"Employee CREATED",locationLabel:n,Status:"1",isGroup:1,Ispriority:1,readed:0});if("Location is Already Exists"===m.data.msg)return i("warning"),void a(m.data.msg)}catch(m){return{}}}}}]);
//# sourceMappingURL=218.e3c3da99.chunk.js.map