(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[3105,5682],{13105:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ge,toggleStackedSideNav:()=>fe});var a=s(72791),n=s(73273),r=s(11819),l=s(41093),o=s(81694),i=s.n(o),c=s(68585),d=s(2803),u=s(58617),h=s(11087);function m(e,t){return e.length===t+1}s(80354);var x=s(60364),p=s(71672),v=s(36064),f=s(67388),y=s(54048),g=s(56355),C=s(1680),j=s(80184);const{apiPrefixNotification:N}=y.Z,b="h-72",S=e=>{const{type:t,target:s,image:a}=e;switch(t){case"0":return(0,j.jsx)(d.qE,{shape:"circle",className:"bg-red-100 text-red-600 dark:bg-red-500/20 dark:text-red-100",icon:(0,j.jsx)(g.a_$,{})});case"Bill":return(0,j.jsx)(d.qE,{shape:"circle",className:"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100",icon:(0,j.jsx)(g.a_$,{})});case"Booking":return(0,j.jsx)(d.qE,{shape:"circle",className:"bg-green-100 text-green-600 dark:bg-green-500/20 dark:text-green-100",icon:(0,j.jsx)(g.iCz,{})});case"Info":return(0,j.jsx)(d.qE,{shape:"circle",className:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/20 dark:text-yellow-100",icon:(0,j.jsx)(u.Uet,{})});case"string":return(0,j.jsx)(d.qE,{shape:"circle",className:"bg-purple-100 text-purple-600 dark:bg-purple-500/20 dark:text-purple-100",icon:(0,j.jsx)(u.Bge,{})});case"1":return(0,j.jsx)(d.qE,{shape:"circle",className:"bg-red-100 text-red-600 dark:bg-red-500/20 dark:text-red-100",icon:(0,j.jsx)(u.$Af,{})});default:return(0,j.jsx)(d.qE,{})}},k=e=>{let{className:t,badgeCount:s}=e;return(0,j.jsx)("div",{className:i()("text-2xl",t),children:(0,j.jsx)(d.Ct,{badgeStyle:{top:"3px",right:"6px"},content:s,children:(0,j.jsx)(u.Uet,{})})})},w=(0,c.Z)((e=>{let{className:t,userId:s=1}=e;const n=(0,x.useSelector)((e=>e.auth.session.LoginId)),r=(0,x.useSelector)((e=>e.locale.NotificationList)),l=(0,x.useSelector)((e=>e.locale.selectedChannel)),o=(0,x.useDispatch)(),[c,y]=(0,a.useState)(!1),[g,w]=(0,a.useState)(0),[_,I]=(0,a.useState)(!1),{larger:T}=(0,p.Z)(),L=(0,x.useSelector)((e=>e.theme.direction)),[E,M]=(0,a.useState)(null);(0,a.useEffect)((()=>{var e,t;if(l.label!==C.CLIENT.FOOD_INDIA&&l.label!==C.CLIENT.FOOD_USA&&(r&&null!==(e=r[0])&&void 0!==e&&e.location&&0==(null===(t=r[0])||void 0===t?void 0:t.readed))){var s;const e=(0,j.jsx)(d.P_,{customIcon:(0,j.jsx)(u.gHG,{className:"text-2xl text-indigo-600"}),children:null===(s=r[0])||void 0===s?void 0:s.message});d.Am.push(e)}}),[r]);const P=(0,a.useCallback)((async()=>{(async()=>{200===(await(0,f.apiMarkNotificationsAsRead)(n)).status&&w(0)})(),(async()=>{const e=(await(0,f.apiFetchNotifications)(n)).data.data.filter((e=>0===e.readed)).length;w(e)})()}),[r]);return(0,a.useEffect)((()=>{l.label!==C.CLIENT.FOOD_INDIA&&l.label!==C.CLIENT.FOOD_USA&&(()=>{I(!0);const e=new WebSocket("".concat(N,"/notification/ws/").concat(n));M(e),I(!1),e.onmessage=e=>{const t=JSON.parse(e.data);o((0,v.y4)([t,...r]));const s=[t,...r].filter((e=>0===e.readed)).length;w(s)}})()}),[n]),(0,a.useEffect)((()=>((async()=>{const e=await(0,f.apiFetchNotifications)(n),t=e.data.data.filter((e=>0===e.readed)).length;w(t),o((0,v.y4)(e.data.data))})(),()=>o((0,v.y4)([])))),[]),(0,j.jsx)(j.Fragment,{children:l.label!==C.CLIENT.FOOD_INDIA&&l.label!==C.CLIENT.FOOD_USA&&(0,j.jsxs)(d.Lt,{renderTitle:(0,j.jsx)(k,{badgeCount:g,className:t}),menuClass:"p-0 min-w-[280px] md:min-w-[340px]",placement:T.md?"bottom-end":"bottom-center",onOpen:P,children:[(0,j.jsx)(d.Lt.Item,{variant:"header",children:(0,j.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-600 px-4 py-2 flex items-center justify-between",children:[(0,j.jsx)("h6",{children:"Notifications"}),(0,j.jsx)(d.u,{title:"Mark all as read",children:(0,j.jsx)(d.zx,{variant:"plain",shape:"circle",size:"sm",icon:(0,j.jsx)(u.wHo,{className:"text-xl"})})})]})}),(0,j.jsx)("div",{className:i()("overflow-y-auto",b),children:(0,j.jsxs)(d.Bl,{direction:L,children:[r&&r.length>0?r.map(((e,t)=>(0,j.jsxs)("div",{className:"relative flex px-4 py-4 cursor-pointer hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-black dark:hover:bg-opacity-20 ".concat(m(r,t)?"":"border-b border-gray-200 dark:border-gray-600"),children:[(0,j.jsx)("div",{children:S(e)}),(0,j.jsxs)("div",{className:"ltr:ml-2 rtl:mr-2",children:[(0,j.jsx)("div",{children:(0,j.jsx)("span",{children:e.message})}),(0,j.jsx)("span",{className:"text-xs",children:e.date})]}),(0,j.jsx)(d.Ct,{className:"absolute top-1 ltr:right-2 mt-1",innerClass:"".concat(1===e.readed?"bg-red-300":"bg-green-300"," ")})]},e.id))):_&&(0,j.jsx)("div",{className:i()("flex items-center justify-center",b),children:(0,j.jsx)(d.$j,{size:40})}),c&&(0,j.jsx)("div",{className:i()("flex items-center justify-center",b),children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("img",{className:"mx-auto mb-2 max-w-[150px]",src:"/img/others/no-notification.png",alt:"No notifications"}),(0,j.jsx)("h6",{className:"font-semibold",children:"No notifications!"}),(0,j.jsx)("p",{className:"mt-1",children:"Please try again later"})]})})]})}),(0,j.jsx)(d.Lt.Item,{variant:"header",children:(0,j.jsx)("div",{className:"flex justify-center border-t border-gray-200 dark:border-gray-600 px-4 py-2",children:(0,j.jsx)(h.rU,{to:"/ActiveLog",className:"font-semibold cursor-pointer p-2 px-3 text-gray-600 hover:text-gray-900 dark:text-gray-200 dark:hover:text-white",children:"View All Activity"})})})]})})}));var _=s(88874),I=s(1413),T=s(98669),L=s(45987),E=s(350),M=s(81721),P=s(30543),Z=s(37634),F=s(65306),D=s(66364),A=s.n(D),O=s(10173),K=s(11308),z=s(4500),B=s(27353);const U=["navMode","onChange","routeKey","activeKeys","onSetActiveKey","userAuthority","mode","direction"],R=e=>{const{navMode:t,onChange:s,routeKey:n,activeKeys:r,onSetActiveKey:l,userAuthority:o,mode:i,direction:c}=e,u=(0,L.Z)(e,U),m=(0,x.useDispatch)(),p=(0,x.useSelector)((e=>e.auth.session.LoginId)),{token:v,signedIn:f}=(0,x.useSelector)((e=>e.auth.session)),[y,g]=(0,a.useState)([""]);let C=[...[{key:"home",path:"/home",title:"Home",translateKey:"nav.Dashboard",icon:"Home",type:E.vS,authority:[O.G,O.x],subMenu:[]}],...y.map((e=>{const{key:t,path:s,title:a,translateKey:n,type:r,icon:l,authority:o,subMenu:i}=e;return i&&i.length>0?{key:t,path:"",title:a,translateKey:n,icon:l,type:r,authority:o,subMenu:i.map((e=>{const{key:t,title:a,translateKey:n,type:r,subMenu:l}=e;return l&&l.length>0?{key:t,path:"",icon:t,title:a,translateKey:n,type:r,authority:o,subMenu:l.map((e=>{const{key:t,title:s,translateKey:a,rights:n,path:r,FormCode:l}=e;return{key:"".concat(r),path:"/".concat(r),title:s,canread:n[0].CanRead,translateKey:a,icon:t,type:"NAV_ITEM_TYPE_ITEM",authority:o,FormCode:l,subMenu:[]}}))}:{key:"".concat(s),path:"/".concat(s),title:a,FormCode:0,translateKey:n,icon:"FcFilingCabinet",type:"NAV_ITEM_TYPE_ITEM",authority:o,subMenu:[]}}))}:{key:t,path:"/".concat(t),title:a,translateKey:n,icon:"FcFilingCabinet",type:"NAV_ITEM_TYPE_ITEM",authority:o,subMenu:[]}}))];(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,K.QY)(p,v);g(e.data)}catch(e){console.error("Error fetching rights or flattening menu:",e)}})()}),[]),(0,a.useEffect)((()=>{const e=((e,t)=>{const s=[],a=t.reduce(((e,t)=>{const s=t.key.toLowerCase();return e[s]||(e[s]=[]),e[s].push(t.path,t.title),e}),{}),n=e=>{e.forEach((e=>{var t;const r=null===(t=e.key)||void 0===t?void 0:t.toLowerCase();a[r]&&a[r].forEach(((t,a,n)=>{s.push({key:e.key,path:t,FormCode:a,title:n})})),e.subMenu&&e.subMenu.length>0&&n(e.subMenu)}))};return n(e),s})(C,B.Fl);m((0,z.O4)([...e,{key:"access-denied",path:"/access-denied"},{key:"ActiveLog",path:"/ActiveLog"},{key:"cloudPlayout",path:"/cloudPlayout"}]))}),[C]);const{includedRouteTree:N}=(0,F.Z)(C,n),b=e=>{let{key:t,title:a,menu:n,translateKey:r}=e;s({title:a,menu:n,translateKey:r}),l([t])},S=e=>{let{key:t}=e;s({}),l([t])};return(0,a.useEffect)((()=>{N.type===E.vS||A()(N)||s({key:N.key,title:N.title,menu:N.subMenu,translateKey:N.translateKey})}),[N.key]),(0,j.jsx)("div",(0,I.Z)((0,I.Z)({},u),{},{children:(0,j.jsx)(d.Bl,{autoHide:!0,direction:c,children:(0,j.jsx)(d.v2,{className:"",variant:t,defaultActiveKeys:r||[N.key],children:(0,j.jsx)("div",{style:"dark"==i?{borderTop:"1px solid #304050"}:{borderTop:"1px solid #e5e7eb"},children:8==p?P.Z.map((e=>(0,j.jsx)(M.XW,{authority:e.authority,userAuthority:o,children:e.subMenu&&e.subMenu.length>0?(0,j.jsx)(d.v2.MenuItem,{eventKey:e.key,className:"mb-2",onSelect:()=>b({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey}),children:(0,j.jsx)("div",{className:"text-2xl",children:Z.Z[e.icon]})}):(0,j.jsx)(h.rU,{to:e.path,className:"flex items-center h-full w-full",onClick:()=>S({key:e.key}),children:(0,j.jsx)(d.v2.MenuItem,{eventKey:e.key,className:"mb-2",children:(0,j.jsx)("div",{className:"text-2xl",children:Z.Z[e.icon]})})})},e.key))):C.map((e=>(0,j.jsx)(M.XW,{authority:e.authority,userAuthority:o,children:e.subMenu&&e.subMenu.length>0?(0,j.jsx)(h.rU,{to:e.title.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase())).replace(/\s/g,""),className:" py-5 flex justify-center w-full",style:"dark"==i?{borderBottom:"1px solid #304050"}:{borderBottom:"1px solid #e5e7eb"},onClick:()=>{m((0,z.qB)(e.title)),b({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey})},children:(0,j.jsx)(d.v2.MenuItem,{eventKey:e.key,className:"flex justify-center",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"text-2xl flex justify-center  mb-2 ",children:Z.Z[e.title.replace(" ","")]}),(0,j.jsx)("p",{className:"text-xs font-normal capitalize",children:e.title})]})})}):(0,j.jsx)(h.rU,{to:e.path,className:" py-2 flex items-center w-full",style:"dark"==i?{borderBottom:"1px solid #304050"}:{borderBottom:"1px solid #e5e7eb"},onClick:()=>S({key:e.key}),children:(0,j.jsx)(d.v2.MenuItem,{eventKey:e.key,className:"flex justify-center",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"text-2xl flex justify-center  mb-2",children:Z.Z[e.icon]}),(0,j.jsx)("p",{className:"text-xs font-normal capitalize",children:e.title})]})})})},e.key)))})})})}))};var q=s(43122);const $=["className","title","menu","routeKey","onCollapse","direction","userAuthority","navMode"],V=e=>{const{className:t,title:s,menu:a,routeKey:n,onCollapse:r,direction:l,userAuthority:o,navMode:c}=e,h=(0,L.Z)(e,$);return(0,j.jsxs)("div",(0,I.Z)((0,I.Z)({className:i()("h-full",t)},h),{},{children:[(0,j.jsxs)("div",{className:"".concat(T.Gx," flex items-center justify-between gap-4 pl-6 pr-4"),children:[(0,j.jsx)("h5",{className:"font-bold",children:s}),(0,j.jsx)(d.zx,{shape:"circle",variant:"plain",size:"sm",icon:(0,j.jsxs)(j.Fragment,{children:[l===T.TM&&(0,j.jsx)(u.WFz,{}),l===T.hn&&(0,j.jsx)(u.GUJ,{})]}),onClick:()=>{r()}})]}),(0,j.jsx)(d.Bl,{autoHide:!0,direction:l,children:(0,j.jsx)(q.default,{routeKey:n,navigationTree:a,userAuthority:o,navMode:c})})]}))};var W=s(22020),H=s(60488);const G={width:T.dO},Y=()=>{const{t:e}=(0,W.$)(),[t,s]=(0,a.useState)({}),[n,r]=(0,a.useState)([]),l=(0,x.useSelector)((e=>e.theme.themeColor)),o=(0,x.useSelector)((e=>e.theme.primaryColorLevel)),i=(0,x.useSelector)((e=>e.theme.navMode)),c=(0,x.useSelector)((e=>e.theme.mode)),d=(0,x.useSelector)((e=>e.theme.direction)),u=(0,x.useSelector)((e=>e.auth.session.currentRouteKey)),h=((0,x.useSelector)((e=>e.base.common.currentRouteTitle)),(0,x.useSelector)((e=>e.auth.user.authority))),{larger:m}=(0,p.Z)(),v=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i===T.Xc&&s?"bg-".concat(l,"-").concat(o," ").concat(e,"-").concat(t):"".concat(e,"-").concat(t)};return(0,j.jsx)(j.Fragment,{children:m.md&&(0,j.jsxs)("div",{className:"stacked-side-nav h-full",children:[(0,j.jsx)(R,{className:"stacked-side-nav-mini ".concat(v("stacked-side-nav-mini",i)),style:G,routeKey:u,activeKeys:n,navMode:i,onChange:e=>{s(e),(0,H.f$)()},onSetActiveKey:e=>{r(e)},userAuthority:h,mode:c,direction:d}),(0,j.jsx)("div",{className:"stacked-side-nav-secondary pb-16 h-full ".concat(v("stacked-side-nav-secondary",c,!1)),style:(0,I.Z)({width:T.kQ},A()(t)?(()=>{let e={};const t="".concat(-T.kQ,"px");return d===T.TM&&(e={marginLeft:t}),d===T.hn&&(e={marginRight:t}),e})():{}),children:!A()(t)&&(0,j.jsx)(V,{title:e(t.translateKey,t.title),menu:t.menu,routeKey:u,navMode:T.d0,onCollapse:()=>{s({}),r([])},direction:d,userAuthority:h})})]})})};var Q=s(37315),X=s(26235),J=s(81320),ee=s(45682),te=s(89151),se=s(87118);const ae=()=>{const{PasswordExpiry:e,ChannelCode:t,LocationCode:s}=(0,x.useSelector)((e=>e.auth.user)),n=(0,x.useSelector)((e=>e.auth.session.Username)),r=(0,x.useSelector)((e=>e.auth.session.LoginId)),l=(0,x.useSelector)((e=>e.locale.selectedChannel)),o=(0,x.useSelector)((e=>e.auth.session.ChannelSettingMain)),i=(0,x.useDispatch)(),[c,u]=(0,a.useState)(null),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(!1),y=(0,a.useRef)(null);(0,a.useEffect)((()=>{try{(async()=>{f(!0);const e=await g();m(e);const s=e.filter((e=>e.ChannelCode==t));i((0,v.z8)(...s)),i((0,v.Uy)(e)),e.length>0?!(0,J.isChannelSelected)(l)&&y.current&&y.current.click():i((0,v.z8)([])),f(!1)})()}catch(e){(0,J.openNotification)("danger","Something went wrong while fetching channel list."),f(!1)}}),[]),(0,a.useEffect)((()=>{try{(0,J.isChannelSelected)(l)&&u(l.imgPath)}catch(e){}if(o&&o.length>0){const e=o.filter((e=>e.Channel.ChannelCode==(null===l||void 0===l?void 0:l.ChannelCode)));i((0,se.DT)(e))}}),[l]);const g=async()=>{let e=[];const t=await(0,K.bu)(r);if(200===t.status){var s,a,n,o,c,d,u,h,m,x;e=t.data.map((e=>({value:e.ChannelCode+"-"+e.LocationCode,label:e.ChannelName===C.CLIENT.USA_Forbes?e.ChannelName:e.ChannelName===C.CLIENT.BeIN_Sports||e.ChannelName===C.CLIENT.NEWS?e.ChannelName+" "+e.LocationName:e.LocationName+" "+e.ChannelName,ChannelCode:e.ChannelCode,LocationCode:e.LocationCode,ChannelName:e.ChannelName,ColorClass:"bg-rose-500",LocationName:e.LocationName,imgPath:e.Channel_Image})));const r=null===(s=e)||void 0===s?void 0:s.filter((e=>e.ChannelCode==(null===l||void 0===l?void 0:l.ChannelCode)&&e.LocationCode==(null===l||void 0===l?void 0:l.LocationCode)));i((0,v.z8)({value:(null===(a=r[0])||void 0===a?void 0:a.ChannelCode)+"-"+(null===(n=r[0])||void 0===n?void 0:n.LocationCode),label:(null===(o=r[0])||void 0===o?void 0:o.LocationName)+" "+(null===(c=r[0])||void 0===c?void 0:c.ChannelName),ChannelCode:null===(d=r[0])||void 0===d?void 0:d.ChannelCode,LocationCode:null===(u=r[0])||void 0===u?void 0:u.LocationCode,ChannelName:null===(h=r[0])||void 0===h?void 0:h.ChannelName,ColorClass:"bg-rose-500",LocationName:null===(m=r[0])||void 0===m?void 0:m.LocationName,imgPath:null===(x=r[0])||void 0===x?void 0:x.imgPath}))}else 204===!t.status&&(0,J.openNotification)("danger","Unable to fetch channels. Server responded with status code ".concat(t.status));return e},N=(0,j.jsx)("div",{className:"flex items-center mt-1 ml-2 mr-2",ref:y,children:(0,j.jsx)("div",{className:"py-1 px-3 border border-gray-600 rounded-full mb-1",children:Array.isArray(l)?(0,j.jsx)("h6",{className:"!text-yellow-400 inline-block mr-2",children:"Channels Not Assigned"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h6",{className:"!text-yellow-400 inline-block mr-2",children:null===l||void 0===l?void 0:l.ChannelName}),(0,j.jsx)("span",{className:"!text-yellow-400 text-xs align-baseline",children:null===l||void 0===l?void 0:l.LocationName})]})})}),b=h.length>1?(0,j.jsx)(d.u,{title:"Select Channel",placement:"bottom",wrapperClass:"hover:cursor-pointer",children:N}):(0,j.jsx)(d.u,{title:"No channels assigned. Please contact your administrator",placement:"bottom",wrapperClass:"hover:cursor-pointer",children:N});return(0,j.jsxs)("div",{className:"Gbox flex items-center",children:[h.length>1?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"ml-2",children:"Select Channel :"}),(0,j.jsxs)(d.Lt,{menuStyle:{minWidth:300},renderTitle:b,placement:"bottom-end",children:[(0,j.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-600 px-4 py-2 flex items-center justify-between",children:(0,j.jsx)("h6",{children:"Select Channel"})}),(0,j.jsx)("div",{className:"p-5",children:(0,j.jsx)(te.Z,{location:null===l||void 0===l?void 0:l.LocationCode,channel:null===l||void 0===l?void 0:l.ChannelCode,channelList:h,onChange:t=>{i((0,v.z8)(t)),(async(e,t)=>{await(0,K.B$)(r,e,t)})(t.LocationCode,t.ChannelCode),i((0,z.av)({avatar:"Anonymous",userName:n,authority:"user",email:"Anonymous",PasswordExpiry:e,ChannelCode:t.ChannelCode,LocationCode:t.LocationCode})),y.current.click()}})})]})]}):b,(0,j.jsx)(ee.default,{showLoader:p})]})};var ne=s(57689),re=s(97244),le=s(16856);var oe=s(23532),ie=s(48573),ce=s.n(ie),de=s(96263),ue=s.n(de);const he=[],me=e=>{const{icon:t,label:s,url:a="",isLast:n,keyWord:r,onNavigate:l}=e,{textTheme:o}=(0,oe.Z)();return(0,j.jsx)(h.rU,{to:a,onClick:l,children:(0,j.jsxs)("div",{className:i()("flex items-center justify-between rounded-lg p-3.5 cursor-pointer user-select","bg-gray-50 dark:bg-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-700/90",!n&&"mb-3"),children:[(0,j.jsxs)("div",{className:"flex items-center",children:[(0,j.jsx)("div",{className:i()("mr-4 rounded-md ring-1 ring-slate-900/5 shadow-sm text-xl group-hover:shadow h-6 w-6 flex items-center justify-center bg-white dark:bg-gray-700",o,"dark:text-gray-100"),children:t&&Z.Z[t]}),(0,j.jsx)("div",{className:"text-gray-900 dark:text-gray-300",children:(0,j.jsx)(ue(),{autoEscape:!0,highlightClassName:i()(o,"underline bg-transparent font-semibold dark:text-white"),searchWords:[r],textToHighlight:s})})]}),(0,j.jsx)(u.MOd,{className:"text-lg"})]})})},xe=(0,c.Z)((e=>{var t;let{className:s}=e;const n=(0,x.useSelector)((e=>e.auth.session.LoginId)),{token:r,signedIn:l}=(0,x.useSelector)((e=>e.auth.session)),o=(0,ne.s0)(),[c,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(he),[v,f]=(0,a.useState)([]),[y,g]=(0,a.useState)(!1),C=(0,a.useRef)(),N=ce()((async function(e){if(!e)return void p(he);y&&g(!1);const t=S(v,e);t&&(0===t.length&&g(!0),p(t))}),200),b=()=>{h(!1),N(""),y&&setTimeout((()=>{g(!1),p(he)}),300)};(0,a.useEffect)((()=>{if(c){let e=setTimeout((()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.focus()}),100);return()=>{clearTimeout(e)}}}),[c]),(0,a.useEffect)((()=>{(async e=>{const t=await(0,K.QY)(n,r);f(k(t.data))})()}),[]);const S=(e,t)=>{const s=[];return e.forEach((e=>{if(e.title.toLowerCase().includes(t.toLowerCase())){const a=e.data?e.data.filter((e=>e.title.toLowerCase().includes(t.toLowerCase()))):[];a.length>0&&s.push({title:e.title,data:a})}else if(e.data){const a=e.data.filter((e=>e.title.toLowerCase().includes(t.toLowerCase())));a.length>0&&s.push({title:e.title,data:a})}})),s},k=e=>{let t=[];const s=(e,t)=>{let a=[];return e.forEach((e=>{e.path&&a.push({title:e.title,url:e.path,icon:t,category:t,categoryTitle:t}),e.subMenu&&e.subMenu.length>0&&(a=a.concat(s(e.subMenu,t)))})),a};return e.forEach((e=>{if(e.subMenu&&e.subMenu.length>0){let a={title:e.title,data:[]};a.data=s(e.subMenu,e.key),t.push(a)}})),t};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:i()(s,"text-2xl"),onClick:()=>{h(!0)},children:(0,j.jsx)(u.O6C,{})}),(0,j.jsx)(d.Vq,{contentClassName:"p-0",isOpen:c,closable:!1,onRequestClose:b,children:(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"px-4 flex items-center justify-between border-b border-gray-200 dark:border-gray-600",children:[(0,j.jsxs)("div",{className:"flex items-center",children:[(0,j.jsx)(u.O6C,{className:"text-xl"}),(0,j.jsx)("input",{ref:C,className:"ring-0 outline-none block w-full p-4 text-base bg-transparent text-gray-900 dark:text-gray-100",placeholder:"Search...",onChange:e=>{N(e.target.value)}})]}),(0,j.jsx)(d.zx,{size:"xs",onClick:b,children:"Esc"})]}),(0,j.jsxs)("div",{className:"py-6 px-5 max-h-[550px] overflow-y-auto",children:[m.map((e=>(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsx)("h6",{className:"mb-3",children:e.title}),e.data.map(((e,t)=>{var s;return(0,j.jsx)(me,{icon:e.icon,label:e.title,url:e.url,keyWord:(null===(s=C.current)||void 0===s?void 0:s.value)||"",onNavigate:()=>(o(e.url),void b())},e.title+t)}))]},e.title))),0===m.length&&y&&(0,j.jsxs)("div",{className:"my-10 text-center text-lg",children:[(0,j.jsx)("span",{children:"No results for "}),(0,j.jsxs)("span",{className:"heading-text",children:["'",null===(t=C.current)||void 0===t?void 0:t.value,"'"]})]})]})]})})]})}));var pe=s(97286);const ve=()=>{const e=(0,ne.s0)(),t=(0,x.useSelector)((e=>e.theme.mode)),{signOut:s}=(0,pe.Z)(),[n,r]=(0,a.useState)([]),{ModuleList:l}=(0,x.useSelector)((e=>e.auth.user)),o=(0,x.useSelector)((e=>e.auth.session.currentRouteKey));(0,a.useEffect)((()=>{if((null===l||void 0===l?void 0:l.length)>0&&""!=o){let t=!1;l.forEach((e=>{e.key.toLowerCase()==o.toLowerCase()&&(t=!0)})),t||e("/access-denied")}i()}),[o]);const i=async()=>{try{const e=await(0,re.EH)();if(200==e.status){const t=e.data.map((e=>({key:e.FormName,name:e.FormName})));r(t)}else 204==e.status&&r([])}catch(e){if("401"==e.response.status)return void r([]);r([])}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(_.Z,{}),(0,j.jsx)(X.Z,{mode:t,type:"streamline",gutter:T.ZJ}),(0,j.jsxs)("div",{className:"flex items-center ",children:[(0,j.jsx)(d.zx,{onClick:fe,shape:"circle",variant:"plain",size:"sm",icon:(0,j.jsx)(u.gXc,{})}),(0,j.jsx)(d.zx,{onClick:()=>(0,H.Dh)(),shape:"circle",variant:"plain",size:"sm",id:"leftIndicator",icon:(0,j.jsx)(u.Tsu,{})}),(0,j.jsx)(d.zx,{onClick:()=>(0,H.f$)(),shape:"circle",id:"rightIndicator",variant:"plain",size:"sm",icon:(0,j.jsx)(u.mR2,{})}),window.localStorage.getItem("OneSolutionURL")&&(0,j.jsx)(d.zx,{variant:"twoTone",icon:(0,j.jsx)(le.IUz,{}),size:"sm",onClick:()=>{s(),localStorage.removeItem("admin"),window.location.href=window.localStorage.getItem("OneSolutionURL")+"/?token="+window.localStorage.getItem("tokenValue"),localStorage.removeItem("tokenValue"),localStorage.removeItem("OneSolutionURL")},children:(0,j.jsx)("span",{children:"Exit Scheduler"})}),(0,j.jsx)(xe,{})]})]})};function fe(){const e=document.getElementsByClassName("stacked-side-nav")[0];return e.classList.toggle("hidden"),e.classList.contains("hidden")}const ye=()=>{const e=12,{PasswordExpiry:t}=(0,x.useSelector)((e=>e.auth.user)),s=(0,x.useSelector)((e=>e.auth.session.LoginId)),n=(0,x.useSelector)((e=>e.auth.session.token)),o=(0,x.useSelector)((e=>e.auth.session.Username)),[i,c]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[p,v]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[g,N]=(0,a.useState)(!1),[b,S]=(0,a.useState)("password"),[k,_]=(0,a.useState)("password"),[I,T]=(0,a.useState)(1==t),L=()=>{c(""),m(""),0==t&&T(!1),_("password"),S("password"),y(!0),N(!1),v([])},E=(0,j.jsx)("span",{className:"cursor-pointer",onClick:e=>(e=>{e.preventDefault(),_("password"===k?"text":"password")})(e),children:"password"===k?(0,j.jsx)(u.E6r,{}):(0,j.jsx)(u.Vvo,{})}),M=(0,j.jsx)("span",{className:"cursor-pointer",onClick:e=>(e=>{e.preventDefault(),S("password"===b?"text":"password")})(e),children:"password"===b?(0,j.jsx)(u.E6r,{}):(0,j.jsx)(u.Vvo,{})}),P=(0,x.useSelector)((e=>e.locale.selectedChannel));console.log("ChannelChannelChannel",P);const Z=(0,x.useDispatch)();return(0,j.jsxs)("div",{className:"flex items-center",children:[(0,j.jsx)(ae,{}),(null===P||void 0===P?void 0:P.label)!==C.CLIENT.FOOD_INDIA&&(null===P||void 0===P?void 0:P.label)!==C.CLIENT.FOOD_USA&&(0,j.jsx)(w,{}),(0,j.jsx)(r.Z,{}),(0,j.jsx)(l.Z,{hoverable:!1}),(0,j.jsx)(d.Vq,{isOpen:!1,width:390,onClose:L,children:(0,j.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,j.jsx)("div",{className:"mb-4",children:(0,j.jsx)(d.II,{placeholder:"Enter your name",prefix:(0,j.jsx)(u.HHH,{className:"text-lg"}),value:o,disabled:!0})}),(0,j.jsxs)("div",{children:[(0,j.jsx)(d.II,{type:b,value:i,onChange:e=>c(e.target.value),suffix:M,onBlur:t=>(t=>{const s=[];t.length<e?s.push("Password must be at least ".concat(e," characters long.")):/[A-Z]/.test(t)?/[a-z]/.test(t)?/\d/.test(t)?/[^a-zA-Z0-9]/.test(t)||s.push("Password must contain at least one special symbol."):s.push("Password must contain at least one number."):s.push("Password must contain at least one lowercase letter."):s.push("Password must contain at least one uppercase letter."),0===s.length&&y(!1),v(s)})(t.target.value),onPaste:e=>(e.preventDefault(),!1),onCopy:e=>(e.preventDefault(),!1),maxLength:"20",placeholder:"New Password"}),p.length>0&&(0,j.jsx)("ul",{children:p.map((e=>(0,j.jsx)("li",{className:"text-red-600",children:e},e)))}),(0,j.jsxs)("div",{style:{marginTop:"15px"},children:[(0,j.jsx)(d.II,{type:k,value:h,disabled:f,maxLength:"20",onChange:e=>m(e.target.value),onBlur:e=>N(i==e.target.value),onPaste:e=>(e.preventDefault(),!1),onCopy:e=>(e.preventDefault(),!1),suffix:E,placeholder:"Confirm Password"}),!g&&!f&&(0,j.jsx)("div",{className:"text-red-500 text-sm mt-1",children:"Passwords do not match."})]})]}),(0,j.jsxs)("div",{className:"text-right mt-6",children:[(0,j.jsx)(d.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:()=>L(),children:"Cancel"}),(0,j.jsx)(d.zx,{disabled:!g,variant:"solid",onClick:()=>{let e={};e.password=i,(0,K.$y)(s,e,n).then((e=>{200===e.status?((0,J.openNotification)("success","  Password Updated Successfully"),Z((0,z.av)({avatar:"Anonymous",userName:o,authority:"user",email:"Anonymous",PasswordExpiry:0,ChannelCode:P.ChannelCode,LocationCode:P.LocationCode})),T(!1)):(0,J.openNotification)("danger",e.detail)}))},children:"Submit"})]})]})})]})},ge=()=>(0,j.jsx)("div",{className:"app-layout-stacked-side flex flex-auto flex-col",children:(0,j.jsx)("div",{className:"flex flex-auto min-w-0",children:(0,j.jsxs)("div",{className:"flex flex-col flex-auto h-screen min-w-0 relative w-full",children:[(0,j.jsx)(n.Z,{className:"shadow dark:shadow-2xl ".concat(T.Gx),headerStart:(0,j.jsx)(ve,{}),headerEnd:(0,j.jsx)(ye,{})}),(0,j.jsxs)("div",{className:"flex w-full grow",children:[(0,j.jsx)(Y,{}),(0,j.jsx)("div",{className:"flex  w-full ",children:(0,j.jsx)(Q.Z,{})})]})]})})})},89151:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(45987),n=s(1413),r=s(2803),l=(s(72791),s(58617)),o=s(88406),i=s(80184);const c=["children"];const d=function(e){let{location:t,channel:s,channelList:d,onChange:u}=e;const{Control:h}=o.c;return console.log("channelList",d),(0,i.jsx)(r.Ph,{options:d,components:{Option:e=>{let{innerProps:t,label:s,data:a,isSelected:r}=e;return(0,i.jsxs)("div",(0,n.Z)((0,n.Z)({className:"flex items-center justify-between p-2 ".concat(r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("img",{src:a.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),(0,i.jsx)("span",{className:"ml-2 rtl:mr-2",children:s})]}),r&&(0,i.jsx)(l.dZ6,{className:"text-emerald-500 text-xl"})]}))},Control:e=>{let{children:t}=e,s=(0,a.Z)(e,c);const r=s.getValue()[0];return(0,i.jsxs)(h,(0,n.Z)((0,n.Z)({},s),{},{children:["\xa0\xa0",r&&(0,i.jsx)("img",{src:r.imgPath,style:{height:"20px",width:"20px",borderRadius:20}}),t]}))}},value:d.filter((e=>e.ChannelCode===s&&e.LocationCode==t)),onChange:u,placeholder:"Select",className:"caret-white",defaultMenuIsOpen:!0,blurInputOnSelect:!0,autoFocus:!0,styles:{menuList:e=>(0,n.Z)((0,n.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),control:e=>(0,n.Z)((0,n.Z)({},e),{},{"&:hover":{cursor:"pointer"}}),input:e=>(0,n.Z)((0,n.Z)({},e),{},{color:"white"})}})}},45682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(2803),n=(s(72791),s(80184));const r=function(e){let{showLoader:t}=e;return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,n.jsx)(a.$j,{size:"3.25rem"})}):(0,n.jsx)(n.Fragment,{})})}},60488:(e,t,s)=>{"use strict";s.d(t,{Dh:()=>x,SE:()=>m,SU:()=>y,a1:()=>d,aP:()=>c,f$:()=>p,rp:()=>h,yw:()=>v});var a=s(1413),n=(s(81320),s(72791)),r=s(56355),l=s(2803),o=s(80184);const i=e=>e.split(":").map((e=>e.padStart(2,"0"))).join(":").substring(0,11);function c(e){let t=0;const s=[];return e.forEach((e=>{"NTC"!==e.F_C_S_P&&t++;const n=(0,a.Z)((0,a.Z)({},e),{},{PrimaryID:t});s.push(n)})),s}function d(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"CM",r=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,c="00:00:00:00",d=r||"00:00:00:00";return e.map(((e,h)=>{if(l&&"NTC"===e.F_C_S_P&&"DTM"===e.NtcTypeName)return e;if("NTC"===e.F_C_S_P||"BR"===e.F_C_S_P)return e.OffsetStartTime?(0,a.Z)((0,a.Z)({},e),{},{Start_Time:e.OffsetStartTime,Tel_Time:e.OffsetStartTime}):(0,a.Z)((0,a.Z)({},e),{},{Start_Time:"00:00:00:00",Tel_Time:"00:00:00:00",OffsetStartTime:"00:00:00:00"});let m=d;if(t)return"CT"!==e.F_C_S_P?e.F_C_S_P===n&&s||"NTC"===e.F_C_S_P||"BR"===e.F_C_S_P?(d=i(d),(0,a.Z)((0,a.Z)({},e),{},{Start_Time:d,Tel_Time:d})):(m=u(d,c,o),c=e.Duration,m=i(m),d=i(m),(0,a.Z)((0,a.Z)({},e),{},{Start_Time:m,Tel_Time:m})):(d=e.FPC_Time+":00:00",c=e.Duration,m=i(m),d=i(d),(0,a.Z)((0,a.Z)({},e),{},{Start_Time:d,Tel_Time:d}));if(0===h)d=r||e.Start_Time,c=e.Duration;else{if(m=u(d,c,o),m=i(m),d=i(m),"NTC"===e.F_C_S_P&&s||"BR"===e.F_C_S_P)return(0,a.Z)((0,a.Z)({},e),{},{Start_Time:d,Tel_Time:d});c=e.Duration,m=i(m),d=i(m)}return(0,a.Z)((0,a.Z)({},e),{},{Start_Time:m,Tel_Time:m})}))}const u=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24;try{const a=60,n=60,r=24,[l,o,i,c]=e.split(":").map(Number),[d,u,h,m]=t.split(":").map(Number);let x=c+m,p=Math.floor(x/s);x%=s;let v=i+h+p,f=Math.floor(v/a);v%=a;let y=o+u+f,g=Math.floor(y/n);y%=n;let C=l+d+g;C%=r;return String(C).padStart(2,"0")+":"+String(y).padStart(2,"0")+":"+String(v).padStart(2,"0")+":"+String(x).padStart(2,"0")}catch(a){throw a}};function h(e){let t=0;return e.forEach((e=>{const[s,a,n,r]=e.CommercialDuration.split(":").map((e=>parseInt(e)));t+=3600*s+60*a+n+r/30})),t}function m(){document.getElementsByClassName("stacked-side-nav")[0].classList.add("hidden");document.getElementsByClassName("footer")[0].classList.add("hidden")}function x(){var e,t;const s=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=s&&(null===s||void 0===s||s.classList.add("hidden")),null===(e=document.getElementById("rightIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("leftIndicator"))||void 0===t||t.classList.add("hidden")}function p(){var e,t;const s=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=s&&(null===s||void 0===s||s.classList.remove("hidden")),null===(e=document.getElementById("leftIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("rightIndicator"))||void 0===t||t.classList.add("hidden")}const v=(e,t)=>e.map((e=>{let s=(0,a.Z)({},e);return"S"===s.F_C_S_P||s.F_C_S_P,"NTC"===s.F_C_S_P?(s.PrimaryID=t.PrimaryID,s.SeasonNo=t.SeasonNo,s.Ep_No=t.Ep_No,s.ContentCode=t.ContentCode,s.BreakNumber=t.BreakNumber,s.SeasonNo=t.SeasonNo,s.FPC_ID=t.FPC_ID):"CM"===s.F_C_S_P?(s.PrimaryID=t.PrimaryID,s.SeasonNo=t.SeasonNo,s.Ep_No=t.Ep_No,s.ContentCode=t.ContentCode,s.BreakNumber=t.BreakNumber,s.SeasonNo=t.SeasonNo,s.FPC_ID=t.FPC_ID,s.ScheduleTime=t.ScheduleTime):(s.SeasonNo=t.SeasonNo,s.Ep_No=t.Ep_No,s.ContentCode=t.ContentCode,s.BreakNumber=t.BreakNumber,s.SeasonNo=t.SeasonNo,s.FPC_ID=t.FPC_ID),s.SequenceNo=t.SequenceNo,s.Start_Time="00:00:00:00",s})),f=e=>{const t=Math.floor(e/60),s=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(s).padStart(2,"0"))};const y=e=>{let{Progress:t,PromoSchdulingSave:s,openNotification:a}=e;const[i,c]=(0,n.useState)(0),[d,u]=(0,n.useState)(0),[h,m]=(0,n.useState)(0),[x,p]=(0,n.useState)(!1),v=(0,n.useRef)(!0),[y,g]=(0,n.useState)(!1),[C,j]=(0,n.useState)(""),N=e=>{let{percent:t}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{onClick:()=>{g(!0)},style:{cursor:"pointer"},children:(0,o.jsx)("p",{style:{marginTop:"5px",fontSize:"12px",color:"white"},children:f(d)})}),(0,o.jsx)("p",{style:{cursor:"pointer",color:"white",marginLeft:"10px"},onClick:()=>{p(!x)},children:x?(0,o.jsx)(r.Wh,{}):(0,o.jsx)(r.gmG,{})})]})};(0,n.useEffect)((()=>{b(10)}),[]),(0,n.useEffect)((()=>{let e;return x&&d>0?e=setInterval((()=>{u((e=>Math.max(e-1,0))),c((e=>{const t=100-d/(h||1)*100;return Math.min(t,100)}))}),1e3):0===d&&x&&(s(),a("info"),u(h)),()=>clearInterval(e)}),[x,d,h]),(0,n.useEffect)((()=>{v.current&&(v.current=!1)}),[d]);const b=e=>{const t=parseInt(e,10);if(!isNaN(t)&&t>0){const e=60*t;u(e),m(e),c(0),p(!0)}},S=e=>{console.log("onDialogClose",e),g(!1)};return(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(l.Vq,{isOpen:y,width:300,height:200,onClose:S,onRequestClose:S,children:(0,o.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,o.jsx)("h5",{className:"mb-4",children:"Set Timer"}),(0,o.jsx)("div",{className:"flex align-center",children:(0,o.jsx)(l.II,{maxLength:"2",value:C,onChange:e=>{const t=e.target.value;(/^\d{0,2}$/.test(t)||""===t)&&j(t)}})}),(0,o.jsxs)("div",{className:"text-right mt-6",children:[(0,o.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:()=>{b(C),S()},children:"Set"}),(0,o.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:S,children:"Cancel"})]})]})}),(0,o.jsx)("div",{className:"flex",style:{width:"120px"},children:(0,o.jsx)(t,{variant:"circle",className:"mx-6",size:"sm",width:50,percent:i,customInfo:(0,o.jsx)(N,{percent:i})})})]})}},20821:(e,t,s)=>{var a=s(26050),n=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(n,""):e}},26050:e=>{var t=/\s/;e.exports=function(e){for(var s=e.length;s--&&t.test(e.charAt(s)););return s}},48573:(e,t,s)=>{var a=s(8092),n=s(50072),r=s(42582),l=Math.max,o=Math.min;e.exports=function(e,t,s){var i,c,d,u,h,m,x=0,p=!1,v=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var s=i,a=c;return i=c=void 0,x=t,u=e.apply(a,s)}function g(e){return x=e,h=setTimeout(j,t),p?y(e):u}function C(e){var s=e-m;return void 0===m||s>=t||s<0||v&&e-x>=d}function j(){var e=n();if(C(e))return N(e);h=setTimeout(j,function(e){var s=t-(e-m);return v?o(s,d-(e-x)):s}(e))}function N(e){return h=void 0,f&&i?y(e):(i=c=void 0,u)}function b(){var e=n(),s=C(e);if(i=arguments,c=this,m=e,s){if(void 0===h)return g(m);if(v)return clearTimeout(h),h=setTimeout(j,t),y(m)}return void 0===h&&(h=setTimeout(j,t)),u}return t=r(t)||0,a(s)&&(p=!!s.leading,d=(v="maxWait"in s)?l(r(s.maxWait)||0,t):d,f="trailing"in s?!!s.trailing:f),b.cancel=function(){void 0!==h&&clearTimeout(h),x=0,i=m=c=h=void 0},b.flush=function(){return void 0===h?u:N(n())},b}},50072:(e,t,s)=>{var a=s(97009);e.exports=function(){return a.Date.now()}},42582:(e,t,s)=>{var a=s(20821),n=s(8092),r=s(70152),l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var s=o.test(e);return s||i.test(e)?c(e.slice(2),s?2:8):l.test(e)?NaN:+e}}}]);
//# sourceMappingURL=3105.ec1ff4b7.chunk.js.map