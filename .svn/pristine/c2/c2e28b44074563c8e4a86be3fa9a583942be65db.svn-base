(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[9486],{54547:(e,a,l)=>{"use strict";l.d(a,{Z:()=>s});var t=l(1413),r=l(2803),n=(l(72791),l(80184));const s=e=>{let{selected:a,setSelected:l,List:s,name:o,handlePromoTypeChange:i,dis:d}=e;return(0,n.jsx)("div",{className:"card flex flex-column align-items-center  h-9",children:(0,n.jsx)(r.Ph,{size:"sm",className:"mb-4 w-full",placeholder:"Select",options:s,isDisabled:!!d,value:null!==s?s.filter((e=>e.value==a)):[{value:"",label:"Data Not Found"}].filter((e=>e.value)),onChange:e=>{"PromoTypeCode"!=o&&"CommercialType"!=o&&"SongCategoryCode"!=o||i(e.value),l((a=>(0,t.Z)((0,t.Z)({},a),{},{epNo:e.end}))),l((a=>(0,t.Z)((0,t.Z)({},a),{},{[o]:e.value})))}})})}},85731:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>h});var t=l(1413),r=l(2803),n=l(92506),s=l(81724),o=l(34786),i=l(60364),d=l(72791),u=(l(54748),l(54547),l(11308)),c=l(80184);const m=s.Ry().shape({AgencyMaster:s.Z_().required("Agency Required"),ClientMaster:s.Z_().required("Client Required"),AgencyCity:s.Z_().required("AgencyCity Required"),DealNo:s.Z_().required("AgencyCity Required"),BankName:s.Z_().matches(/^[A-Za-z ]+$/,"Only alphabetic characters are allowed").min(1,"Too Short!").max(20,"Too Long!"),NetValue:s.Z_().matches(/^[0-9]+$/,"Only numeric characters are allowed").min(1,"Too Short!").max(7,"Too Long!").required("NetValue Required"),rememberMe:s.Xg()}),h=(0,d.forwardRef)(((e,a)=>{const{setMessage:l,setlog:s}=e,h=(0,i.useSelector)((e=>e.locale.selectedChannel)),v=(0,i.useSelector)((e=>e.auth.session.token)),[x,f]=(0,d.useState)(""),[g,y]=(0,d.useState)(!1),[p,b]=(0,d.useState)(!1),[j,C]=(0,d.useState)(!1),[N,D]=(0,d.useState)([]),[A,S]=(0,d.useState)([]),[P,T]=(0,d.useState)([]),[M,q]=(0,d.useState)([]),w=async(e,a)=>{try{const t=await w(e,a);if("Updated"===t.data.msg)return s("success"),void l("Data Updated Successfully");if("Data Already Exists."===t.data.msg)return s("warning"),void l(t.data.msg)}catch(t){return{}}},{Content:V}=(0,i.useSelector)((e=>e.base.common));return(0,d.useEffect)((()=>{(async e=>{const a=(await(0,o.oy)(void 0)).data.map((e=>({value:e.AgencyCode,label:e.AgencyName})));D(a)})()}),[]),console.log(h),(0,c.jsx)("div",{children:(0,c.jsx)(n.J9,{innerRef:a,initialValues:{PayId:"",LocationCode:h.LocationCode,ChannelCode:h.ChannelCode,AgencyMaster:V.AgencyCode||"",AgencyCity:V.PlaceCode||"",ClientMaster:V.ClientCode||"",DealNo:V.DealNumber||"",PaymentType:V.PaymentModeCode||"",DDChqNo:V.DDChqNo||"",DDChqDate:V.ChqueDate||"",BankName:V.BankName||"",GrossAmount:V.GrossAmount||"",GSTTAX:18,TaxPer:"",TaxAmt:V.TaxAmt||"",NetValue:V.NetAmount||"",ReceivedDDChequeAmount:V.RecdAmt||"",TDS:V.TDSYN||"",TDSval:V.TDSAmt||"",Remark:V.Remarks||"",IsActive:1},validationSchema:m,onSubmit:(e,a)=>{let{resetForm:t,setSubmitting:r}=a;setTimeout((()=>{console.log(e),V.PayId?new Promise(((a,l)=>{r(!1),w(e,v).then((e=>{a(e)})).catch((e=>{l(e)}))})):(alert("hello"),new Promise(((a,t)=>{(async(e,a)=>{try{const t=await(0,o.FY)(e,a,h);if("success"===t.data.msg)return s("success"),void l("Data Inserted Successfully.");if("Server Error."===t.data.msg)return s("error"),void l("Server Error.")}catch(t){return{}}})(e,v).then((e=>{a(e)})).catch((e=>{t(e)}))}))),t()}),400)},children:e=>{let{values:a,touched:l,errors:s}=e;return(0,c.jsx)(n.l0,{children:(0,c.jsx)(r.Zb,{header:"Agency Payment Master",children:(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsx)(r.Zb,{children:(0,c.jsx)("div",{className:"inline-flex flex-wrap xl:flex gap-2",children:(0,c.jsxs)(r.Yb,{children:[(0,c.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[(0,c.jsx)(r.xJ,{asterisk:!0,label:"Agency",invalid:s.AgencyMaster&&l.AgencyMaster,errorMessage:s.AgencyMaster,children:(0,c.jsx)(n.gN,{name:"AgencyMaster",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.Ph,{field:l,form:t,options:N,value:null===N||void 0===N?void 0:N.filter((e=>e.value===a.AgencyMaster)),onChange:e=>{t.setFieldValue(l.name,null===e||void 0===e?void 0:e.value),(async e=>{try{const a=(await(0,u.BY)(e)).data.map((e=>{var a,l;return{value:null===(a=e.Place)||void 0===a?void 0:a.PlaceCode,label:null===(l=e.Place)||void 0===l?void 0:l.PlaceName}}));T(a)}catch(a){T([])}})(null===e||void 0===e?void 0:e.value),(async e=>{try{const a=(await(0,o.LH)(e)).data.map((e=>({value:e.ClientCode,label:e.ClientName})));S(a)}catch(a){S([])}})(null===e||void 0===e?void 0:e.value)}})}})}),(0,c.jsx)(r.xJ,{asterisk:!0,label:"AgencyCity",invalid:s.AgencyCity&&l.AgencyCity,errorMessage:s.AgencyCity,children:(0,c.jsx)(n.gN,{name:"AgencyCity",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.Ph,{field:l,form:t,options:P,value:null===P||void 0===P?void 0:P.filter((e=>e.value===a.AgencyCity)),onChange:e=>t.setFieldValue(l.name,null===e||void 0===e?void 0:e.value)})}})}),(0,c.jsx)(r.xJ,{asterisk:!0,label:"Client",invalid:s.ClientMaster&&l.ClientMaster,errorMessage:s.ClientMaster,children:(0,c.jsx)(n.gN,{name:"ClientMaster",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.Ph,{field:l,form:t,options:A,value:null===A||void 0===A?void 0:A.filter((e=>e.value===a.ClientMaster)),onChange:e=>{t.setFieldValue(l.name,null===e||void 0===e?void 0:e.value),(async(e,a)=>{try{const l=(await(0,o.iV)(e,a)).data.map((e=>({value:e.DealNumber,label:e.DealCode})));q(l)}catch(l){q([])}})(a.AgencyMaster,null===e||void 0===e?void 0:e.value)}})}})}),(0,c.jsx)(r.xJ,{asterisk:!0,label:"Deal No.",invalid:s.DealNo&&l.DealNo,errorMessage:s.DealNo,children:(0,c.jsx)(n.gN,{name:"DealNo",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.Ph,{field:l,form:t,options:M,value:null===M||void 0===M?void 0:M.filter((e=>e.value===a.DealNo)),onChange:e=>t.setFieldValue(l.name,null===e||void 0===e?void 0:e.value)})}})}),(0,c.jsx)(r.lm,{label:"Bank Name",children:(0,c.jsx)(n.gN,{size:"sm",type:"text",autoComplete:"off",name:"BankName",placeholder:"Bank Name",component:r.II})}),(0,c.jsx)(r.lm,{label:"Gross Amount",children:(0,c.jsx)(n.gN,{size:"sm",type:"text",autoComplete:"off",name:"NetValue",disabled:!0,placeholder:"Gross Amount",component:r.II})}),(0,c.jsx)(r.lm,{asterisk:!0,label:"Net Value",children:(0,c.jsx)(n.gN,{name:"NetValue",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.II,{field:l,form:t,value:a.NetValue,onChange:e=>{t.setFieldValue(l.name,e.target.value),t.setFieldValue("PayableAmount",18*Number(e.target.value)/100+Number(e.target.value)),t.setFieldValue("ReceivedDDChequeAmount",18*Number(e.target.value)/100+Number(e.target.value)),t.setFieldValue("TaxAmt",18*Number(e.target.value)/100),t.setFieldValue("PayableAmount",18*Number(e.target.value)/100+Number(e.target.value)),console.log(e.target.value)}})}})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(r.lm,{label:"TDS",children:(0,c.jsx)(n.gN,{name:"TDS",className:"mt-2",children:e=>{let{field:l,form:t}=e;return(0,c.jsxs)(r.Y8.Group,{value:a.radio,onChange:e=>t.setFieldValue(l.name,e),children:[(0,c.jsx)(r.Y8,{value:1,children:"Yes"}),(0,c.jsx)(r.Y8,{value:0,children:"No"})]})}})}),1==a.TDS&&(0,c.jsx)(r.lm,{label:"TDS %",children:(0,c.jsx)(n.gN,{name:"TDSval",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.II,{field:l,form:t,value:a.TDSval,onChange:e=>{t.setFieldValue(l.name,e.target.value),t.setFieldValue("PayableAmount",Number(a.PayableAmount)*e.target.value/100-Number(a.PayableAmount)+10),console.log(e.target.value)}})}})})]}),(0,c.jsx)(r.lm,{label:"Payable Amount",children:(0,c.jsx)(n.gN,{name:"PayableAmount",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.II,{field:l,form:t,disabled:!0,value:a.PayableAmount,onChange:e=>{t.setFieldValue(l.name,e.target.value),console.log(e.target.value)}})}})}),(0,c.jsx)("div",{className:"col-span-1"}),(0,c.jsxs)(r.Zb,{header:(0,c.jsx)("div",{className:"text-white",children:"Payment Type"}),headerClass:"bg-sky-600",children:[(0,c.jsx)(r.lm,{children:(0,c.jsx)(n.gN,{name:"PaymentType",children:e=>{let{field:l,form:t}=e;return(0,c.jsxs)(r.Y8.Group,{value:a.PaymentType,onChange:e=>{const a=e;console.log(a);"R"==e&&(t.setFieldValue("DDChqNo",""),t.setFieldValue("DDChqDate","")),t.setFieldValue("PaymentType",a)},children:[(0,c.jsx)(r.Y8,{defaultChecked:!0,name:"simpleRadioExample",value:"2",children:"DD"}),(0,c.jsx)(r.Y8,{value:"1",children:"Cheque"}),(0,c.jsx)(r.Y8,{value:"3",children:"RTGS"})]})}})}),(0,c.jsx)(r.lm,{className:"mt-2",label:"DD/Chq No.",children:(0,c.jsx)(n.gN,{name:"DDChqNo",children:e=>{let{field:l,form:n}=e;return(0,c.jsx)(r.II,(0,t.Z)((0,t.Z)({},l),{},{size:"sm",type:"text",maxLength:"10",autoComplete:"off",placeholder:"DD/Chq No.",disabled:"3"===a.PaymentType}))}})}),(0,c.jsx)(r.lm,{label:"DD/Chq Date",className:"mt-2",children:(0,c.jsx)(n.gN,{name:"DDChqDate",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.Mt,{field:l,form:t,value:a.DDChqDate,disabled:"3"===a.PaymentType,onChange:e=>{console.log(e),t.setFieldValue(l.name,e)}})}})})]}),(0,c.jsxs)(r.Zb,{header:(0,c.jsx)("div",{className:"text-white",children:"Payment Terms"}),headerClass:"bg-green-500",children:[(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)(r.lm,{label:"GST TAX",children:(0,c.jsx)(n.gN,{size:"sm",type:"text",maxlength:"2",autoComplete:"off",name:"GSTTAX",placeholder:"18 %",disabled:!0,component:r.II})})}),(0,c.jsx)(r.lm,{className:"mt-2",label:"Received DD/Cheque Amount",children:(0,c.jsx)(n.gN,{name:"ReceivedDDChequeAmount",children:e=>{let{field:l,form:t}=e;return(0,c.jsx)(r.II,{field:l,form:t,value:a.ReceivedDDChequeAmount,onChange:e=>{t.setFieldValue(l.name,e.target.value),console.log(e.target.value)}})}})})]}),(0,c.jsx)(r.lm,{label:"Remark",children:(0,c.jsx)(n.gN,{size:"sm",type:"textArea",maxlength:"100",autoComplete:"off",name:"Remark",placeholder:"Remark",component:r.II,textArea:!0})})]}),(0,c.jsx)(r.xJ,{children:(0,c.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,c.jsx)(r.zx,{type:"reset",children:"Reset"}),(0,c.jsx)(r.zx,{variant:"solid",type:"submit",children:"Submit"})]})})]})})}),(0,c.jsx)(r.Zb,{})]})})})}})})}))},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{},38416:(e,a,l)=>{var t=l(64062);e.exports=function(e,a,l){return(a=t(a))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e},e.exports.__esModule=!0,e.exports.default=e.exports},42122:(e,a,l)=>{var t=l(38416);function r(e,a){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),l.push.apply(l,t)}return l}e.exports=function(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?r(Object(l),!0).forEach((function(a){t(e,a,l[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(l,a))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},95036:(e,a,l)=>{var t=l(18698).default;e.exports=function(e,a){if("object"!=t(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,a||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64062:(e,a,l)=>{var t=l(18698).default,r=l(95036);e.exports=function(e){var a=r(e,"string");return"symbol"==t(a)?a:a+""},e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function a(l){return e.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,a(l)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=9486.88260def.chunk.js.map