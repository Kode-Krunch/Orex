(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[3899],{28179:(e,t,a)=>{"use strict";a.d(t,{$H:()=>r,$o:()=>j,Bo:()=>S,D_:()=>w,Eg:()=>N,JN:()=>T,M0:()=>m,ND:()=>i,OY:()=>s,SR:()=>C,Sd:()=>f,U2:()=>v,U3:()=>D,XV:()=>h,fU:()=>A,fy:()=>x,fz:()=>Z,g7:()=>B,h:()=>p,iH:()=>l,ih:()=>k,jS:()=>b,kP:()=>d,ko:()=>u,m1:()=>y,mg:()=>I,pc:()=>P,qm:()=>g});var o=a(54048),n=a(46152);a(60630);const c=a(74569);async function r(e){return n.Z.fetchData({url:"/commercialtypemaster/",method:"get",data:e})}async function i(e,t,a){return n.Z.fetchData({url:"/spotcancellation/?CancelRemarkCode=".concat(t,"&IsNTC=").concat(a),method:"put",data:e})}const s=(e,t)=>new Promise(((a,n)=>{let r=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),i={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:r};c.request(i).then((e=>{a(e)})).catch((e=>{n(e)}))})),l=(e,t)=>new Promise(((a,n)=>{let r=JSON.stringify({CommercialTypeName:e.CommercialTypeName,CommercialTypeShortName:e.CommercialTypeShortName,IsActive:e.IsActive?1:0}),i={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialtypemaster/".concat(e.CommercialTypeCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:r};c.request(i).then((e=>{a(e)})).catch((e=>{n(e)}))}));async function d(e){return n.Z.fetchData({url:"/commercialmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&IsNTC=").concat(e.IsNTC,"&fromdate=").concat(e.FromDate,"&todate=").concat(e.ToDate),method:"get"})}async function m(e,t){return n.Z.fetchData({url:"/bookingmaster/?IsNTC=".concat(e.IsNTC,"&LocationCode=").concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function h(e,t,a,o,c,r,i,s,l,d,m){return n.Z.fetchData({url:"/spotschedule/USP_SA_RO_SpotSchedule/?From_DT=".concat(e,"&To_DT=").concat(t,"&DealNumber=").concat(a,"&BookingNumber=").concat(o,"&ChannelCode=").concat(r,"&LocationCode=").concat(i,"&ScheduleDate=").concat(c,"&IsMakeGoodRO=").concat(s?1:0,"&BookingRefNumber=").concat(l,"&IsNTC=").concat(d,"&BrandCode=").concat(m),method:"get"})}async function u(e,t,a,o,c,r){return n.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(o,"&ChannelCode=").concat(c,"&ClientCode=").concat(t.value,"&BrandCode=").concat(e.value,"&DurInSec=").concat(a.DurInSec,"&IsNTC=").concat(r),method:"get"})}async function p(e,t,a,o,c){return n.Z.fetchData({url:"/commercialmaster/get_Commercial/?LocationCode=".concat(a,"&ChannelCode=").concat(o,"&ClientCode=").concat(t,"&BrandCode=").concat(e,"&IsNTC=").concat(c),method:"get"})}const C=(e,t)=>new Promise(((a,n)=>{let r={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};console.log(r.url),c.request(r).then((e=>{a(e)})).catch((e=>{n(e)}))})),y=(e,t,a)=>new Promise(((n,r)=>{let i={method:"put",maxBodyLength:1/0,url:o.Z.apiPrefix+"/commercialmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};c.request(i).then((e=>{n(e)})).catch((e=>{r(e)}))}));async function f(e){return n.Z.fetchData({url:"/positionmaster/drop/",method:"get",data:e})}async function g(e){return n.Z.fetchData({url:"/spotpositiontypemaster/drop/",method:"get",data:e})}async function x(e){return n.Z.fetchData({url:"/cancelremarkmaster/",method:"get",data:e})}const T=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})}),N=(e,t)=>fetch(o.Z.apiPrefix+"/cancelremarkmaster/".concat(e.CancelRemarkCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({CancelRemarkName:e.CancelRemarkName,IsActive:e.IsActive})});async function D(e){return n.Z.fetchData({url:"/yearmaster/",method:"get",data:e})}const A=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})}),S=(e,t)=>fetch(o.Z.apiPrefix+"/yearmaster/".concat(e.Yearcode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({Description:e.Description,StartDate:e.StartDate,EndDate:e.EndDate,IsActive:e.IsActive})});async function b(e){return n.Z.fetchData({url:"/taxmaster/",method:"get",data:e})}async function j(e){return n.Z.fetchData({url:"/taxmaster/",method:"post",data:e})}async function v(e,t){return n.Z.fetchData({url:"/taxmaster/".concat(t),method:"put",data:e})}const Z=(e,t,a)=>{try{return n.Z.fetchData({method:"get",url:"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&traficmonth=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},w=(e,t,a,o)=>{try{return n.Z.fetchData({method:"get",url:"/trafficdayclose/asperfromto/?LocationCode=".concat(a.LocationCode,"&ChannelCode=").concat(a.ChannelCode,"&fromdate=").concat(e,"&todate=").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}})}catch(c){throw new Error(c)}},I=async(e,t,a)=>{try{return new Promise(((n,r)=>{let i={method:"post",maxBodyLength:1/0,url:o.Z.apiPrefix+"/trafficdayclose/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};c.request(i).then((e=>{n(e)})).catch((e=>{r(e)}))}))}catch(n){throw n}},k=(e,t,a)=>{try{return n.Z.fetchData({method:"get",url:"/bookingmaster/getbookingbyclient/?LocationCode=".concat(t.LocationCode,"&ChannelCode=").concat(t.ChannelCode,"&ClientCode=").concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}},B=(e,t)=>{try{return n.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivity/?BookingNumber=".concat(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(a){throw new Error(a)}},P=(e,t,a)=>{try{return console.log(e),n.Z.fetchData({method:"get",url:"/bookingactivity/get_bookingactivitybydate?BookingNumber=".concat(t,"&ChangeType=").concat(e.type,"&ChangeOn=").concat(e.dateTime,"&ChangeBy=").concat(e.executerId),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})}catch(o){throw new Error(o)}}},97745:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(1413),n=a(2803),c=a(72791),r=a(28179),i=a(96361),s=a(46657),l=a(60364),d=a(4621),m=a(32640),h=a(80184);const u=[{field:"serialNumber",header:"Sr.",width:"0.5%"},{field:"TaxName",header:"TaxName",width:"20%"}],p=()=>{const e=(0,l.useSelector)((e=>e.auth.session.token)),[t,a]=(0,c.useState)(""),[p,C]=(0,c.useState)(!1),[y,f]=(0,c.useState)(""),[g,x]=(0,c.useState)(!1),[T,N]=(0,c.useState)(),[D,A]=(0,c.useState)(),S=(0,c.useRef)(null);(0,c.useEffect)((()=>{(async()=>{const e=[...(await(0,r.jS)()).data].reverse().map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{serialNumber:t+1})));A(e)})()}),[]);const b=e=>{const t=[...D];let a=t[e];a.IsActive=1==a.IsActive?0:1,(0,r.U2)(a,a.TaxCode).then((e=>204==e.status?(j("Data Already Exists.","warning"),null):e.json())).then((o=>{o.serialNumber=a.serialNumber,o.IsActive=a.IsActive,o.TaxName=a.TaxName,t[e]=o,A(t),j("Data Updated Succesfully","success")})).catch((e=>{console.log(e)}))};function j(e,t){n.Am.push((0,h.jsx)(n.P_,{closable:!0,type:t,duration:1e3,title:t.charAt(0).toUpperCase()+t.slice(1),children:e}))}return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.F,{ref:S}),(0,h.jsx)(d.Q,{group:"declarative",visible:g,onHide:()=>x(!1),message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{b(T)}}),(0,h.jsx)(n.Zb,{header:(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)("div",{children:(0,h.jsx)("span",{className:"flex items-center",children:(0,h.jsx)(i.Z,{ModuleText:"Programming",Component:"Tax"})})}),(0,h.jsx)("div",{className:"flex flex-col items-center",style:{marginLeft:"-20%"}}),(0,h.jsx)("div",{})]}),headerExtra:(0,m.W)(y,f,C,p,(()=>{if(t){const o={TaxName:t,IsActive:1};(0,r.$o)(o,e).then((e=>{if(204==e.status)return j("Data Already Exists.","warning"),null;200==e.status&&(o.serialNumber=D.length+1,A((e=>[...e,o])),j("Data Added Succesfully","success")),a(""),C(!1)})).catch((e=>{console.log(e)}))}else j("Kindly Enter Tax Name","danger")}),t,a,"Tax",D,u),bodyClass:"text-center",children:(0,h.jsx)(m.Z,{data:D,onRowEditComplete:e=>{let t=[...D],{newData:a,index:o}=e;a.TaxName&&(t[o]=a,(0,r.U2)(a,a.TaxCode).then((e=>{if(200===e.status)t[o]=e.data,t[o].serialNumber=a.serialNumber,A(t),j("Data Updated Succesfully","success");else{if(204==e.status)return j("Data Already Exists.","warning"),null;j("Something went wrong","danger")}})).catch((e=>{console.log(e)})))},globalFilter:y,dataKey:"TaxCode",columns:u,setyup:N,scrollHeight:"70vh",setVisible:x})})]})}},72950:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=3899.a6da96f6.chunk.js.map