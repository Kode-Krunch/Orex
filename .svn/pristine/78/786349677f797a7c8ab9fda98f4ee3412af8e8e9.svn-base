"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[4117,5682],{78498:(e,t,a)=>{a.d(t,{D:()=>o,Q:()=>n});a(54048);var s=a(46152);a(74569);async function n(e,t){return s.Z.fetchData({url:"/dealmaster/search/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&keys=").concat(t),method:"get"})}async function o(e){return s.Z.fetchData({url:"/cancelremarkmaster/",method:"get"})}},25579:(e,t,a)=>{a.d(t,{Ei:()=>g,I6:()=>f,Qj:()=>i,U$:()=>m,Uy:()=>y,Z_:()=>l,_K:()=>p,b6:()=>r,d:()=>c,db:()=>S,fh:()=>h,gg:()=>x,hu:()=>o,iD:()=>d,rd:()=>u,w_:()=>C});a(54048);var s=a(46152),n=a(54748);a(74569);async function o(e){return s.Z.fetchData({url:"/dealmaster/".concat(e),method:"get"})}async function l(e){return s.Z.fetchData({url:"/dealattachment/".concat(e),method:"get"})}async function r(e,t,a){return s.Z.fetchData({url:"/dealmaster/dealforapproval/?DealNumber=".concat(e,"&IsApproved=").concat(t,"&RejectRemark=").concat(a),method:"get"})}async function c(e,t){return s.Z.fetchData({url:"/dealmaster/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&StartDate=").concat((0,n.Tk)(t[0]),"&EndDate=").concat((0,n.Tk)(t[1])),method:"get"})}async function i(e){return s.Z.fetchData({url:"/sponsortypemaster/drop/",method:"get",data:e})}async function d(e){return s.Z.fetchData({url:"/spottypemaster/drop/",method:"get",data:e})}async function m(e){return s.Z.fetchData({url:"/dealdetail/".concat(e),method:"get"})}async function u(e){return s.Z.fetchData({url:"/dealmaster/USP_Sch_DealConsumptionCheck/?DealNumber=".concat(e),method:"get"})}async function h(e,t,a,n,o,l){return s.Z.fetchData({url:"/dealmaster/bindstartnendtime/?LocationCode=".concat(o,"&ChannelCode=").concat(l,"&DealPeriodToDate=").concat(e,"&DealPeriodFromDate=").concat(t,"&ContentCode=").concat(a,"&OriginalRepeatCode=").concat(n),method:"get"})}async function p(e,t,a){return s.Z.fetchData({url:"/bookingdetails/bookingchange/?flag=".concat(e,"&IsNtc=").concat(a),method:"put",data:t})}async function x(e,t){var a={params:t};return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:a,method:"post"})}async function g(e){return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:{params:{}},method:"post"})}async function f(e,t,a){var n={params:{Bookingcode:t,IsNTC:a}};return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:n,method:"post"})}async function S(e){var t={params:{CheckMonth:e}};return s.Z.fetchData({url:"/callstoreprocedure/USP_DealDashboardDoughnut",data:t,method:"post"})}async function y(e,t){var a={params:{BookingNumber:t,deallineitemno:0}};return s.Z.fetchData({url:"/callstoreprocedure/"+e,data:a,method:"post"})}async function C(e){return s.Z.fetchData({url:"currencyexchangerate/?basecurrency=".concat(e),method:"post"})}},96361:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(79139),n=a(60364),o=a(11087),l=a(80184);const r=e=>{let{ModuleText:t="Admin",Component:a,links:r}=e;(0,n.useSelector)((e=>e.auth.session.currentRouteKey));const c=(0,n.useSelector)((e=>e.base.common.currentRouteTitle));console.log(c);const{title:i,Moduletitle:d}=(0,n.useSelector)((e=>e.auth.user));return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xl font-medium",children:c}),(0,l.jsxs)(s.Breadcrumbs,{style:{marginLeft:"-15px",width:"auto"},children:[(0,l.jsx)(o.rU,{to:"/home",className:"opacity-60 text-xs",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,l.jsx)(o.rU,{to:"/".concat("SALES ADMIN"===d?"SalesAdmin":d),className:"opacity-60 text-xs",children:(0,l.jsx)("span",{children:d})}),(0,l.jsx)(o.rU,{to:"#",className:"text-xs",children:(0,l.jsx)("span",{children:c})})]})]})}},45682:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(2803),n=(a(72791),a(80184));const o=function(e){let{showLoader:t}=e;return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,n.jsx)(s.$j,{size:"3.25rem"})}):(0,n.jsx)(n.Fragment,{})})}},67207:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(2803),n=(a(72791),a(80184));const o=function(e){let{isDialogOpen:t,title:a,description:o,descClassName:l,submitButtonTitle:r,submitButtonColor:c,handleDialogSubmit:i,handleDialogClose:d,overlayClassName:m,secondaryDescription:u}=e;return(0,n.jsxs)(s.Vq,{isOpen:t,onClose:d,onRequestClose:d,overlayClassName:m,children:[(0,n.jsx)("h5",{className:"mb-4",children:a}),(0,n.jsx)("p",{className:l,children:o}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,n.jsx)("p",{children:u}),(0,n.jsx)(s.zx,{variant:"solid",color:c,onMouseDown:i,children:r})]})]})}},67135:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var s=a(2803),n=a(72791),o=a(60488),l=a(93673),r=a(47475),c=a(45682),i=a(60364),d=a(54748),m=a(9494),u=a(81320),h=a(1413),p=a(1063),x=a(99917),g=a(80184);const f=function(e){let{isFilteredListDialogOpen:t,setIsFilteredListDialogOpen:a,date:o,bookingType:l,filterType:r,selectedFilteredRow:c,setSelectedFilteredRow:h,setShowLoader:f}=e;const S=(0,i.useSelector)((e=>e.locale.selectedChannel)),[y,C]=(0,n.useState)([]),[N,j]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{if(r){f(!0);const e={par_Location:S.LocationCode,par_Channel:S.ChannelCode,par_TelecastDate:(0,d.Tk)(o),par_Flag:r.value,par_Mode:l.value};let t=await(0,m.apiCallstoreprocedure)("USP_Sch_Bulk_Dropingsummary",e);200===t.status?C(t.data):204===t.status?((0,u.openNotification)("info","No ".concat(r.label,"s found")),C([])):((0,u.openNotification)("danger","Something went wrong while fetching ".concat(r.label,"s. Server responded with status code ").concat(t.status)),C([])),f(!1)}}catch(e){(0,u.openNotification)("danger","Something went wrong while fetching ".concat(r.label,"s")),C([]),f(!1),console.error(e)}})()}),[r]),(0,n.useEffect)((()=>{try{t&&j(c)}catch(e){console.error(e)}}),[t,c]);const b=()=>{try{a(!1),j(null)}catch(e){console.error(e)}};return(0,g.jsxs)(s.Vq,{isOpen:t,onClose:b,onRequestClose:b,width:"85vw",contentClassName:"my-6",children:[(0,g.jsx)("h5",{children:r.label}),(0,g.jsx)("div",{className:"h-[70vh] mt-4",children:y.length>0?(0,g.jsxs)(x.w,{value:y,selection:N,onSelectionChange:e=>j(e.value),dataKey:"FilterType",tableStyle:{minWidth:"50rem"},scrollable:!0,scrollHeight:"flex",rowClassName:"datatable-row",children:[(0,g.jsx)(p.s,{selectionMode:"single",headerStyle:{width:"3rem",textWrap:"nowrap",paddingBlock:"0.7rem"},align:"center",bodyClassName:"!border !border-[0.5px] !border-gray-700 !w-max !max-w-max !px-2 !py-2"}),Object.keys(y[0]).map((e=>(0,g.jsx)(p.s,{field:e,header:"FilterType"===e?r.label:e,bodyClassName:"!border !border-[0.5px] !border-gray-700 !w-max !max-w-max !px-2 !py-1 text-white",headerStyle:{textWrap:"nowrap",paddingBlock:"0.7rem"}})))]}):(0,g.jsxs)(s.Zb,{className:"h-full",bodyClass:"h-full flex justify-center items-center",children:["No ",r.label," to show"]})}),(0,g.jsxs)("div",{className:"text-right mt-4 flex items-center justify-end",children:[(0,g.jsx)(s.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:b,children:"Cancel"}),(0,g.jsx)(s.zx,{variant:"solid",disabled:!N,onClick:()=>{try{h(N),b()}catch(e){console.error(e)}},children:"Select"})]})]})},S=[{value:"Booking",label:"Booking"},{value:"LOG",label:"Transmission Log"}],y=[{value:0,label:"Client"},{value:1,label:"Agency"},{value:2,label:"Brand"},{value:3,label:"Content / Program"},{value:4,label:"Schedule Time"},{value:5,label:"Spot Type"},{value:6,label:"Rate"},{value:7,label:"Hour"}];const C=function(e){let{date:t,setDate:a,bookingType:o,setBookingType:l,filterType:r,setFilterType:c,selectedFilteredRow:i,setSelectedFilteredRow:d,setShowLoader:m}=e;const[u,p]=(0,n.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"grid grid-cols-9 gap-6",children:[(0,g.jsxs)("div",{className:"col-span-2",children:[(0,g.jsxs)("p",{className:"text-white mb-1",children:["Date ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)(s.Mt,{placeholder:"Select",size:"sm",defaultOpen:!0,onChange:e=>a(e),minDate:new Date,clearable:!1,value:t})]}),(0,g.jsxs)("div",{className:"col-span-2",children:[(0,g.jsxs)("p",{className:"text-white mb-1",children:["Booking Type ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)(s.Ph,{placeholder:"Select",options:S,size:"sm",isDisabled:!t,onChange:e=>l(e),value:o})]}),(0,g.jsxs)("div",{className:"col-span-2",children:[(0,g.jsxs)("p",{className:"text-white mb-1",children:["Filter ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)(s.Ph,{placeholder:"Select",options:y,size:"sm",isDisabled:!o,onChange:e=>c(e),value:r})]}),(0,g.jsxs)("div",{className:"col-span-3",children:[(0,g.jsxs)("p",{className:"text-white mb-1",children:[r.label?r.label:"Entity"," ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)(s.Ph,(0,h.Z)((0,h.Z)({placeholder:"Select",options:[]},i&&i.FilterType&&{value:{value:i.FilterType,label:i.FilterType}}),{},{size:"sm",isDisabled:!r,onMenuOpen:e=>p(!0)}))]})]}),(0,g.jsx)(f,{isFilteredListDialogOpen:u,setIsFilteredListDialogOpen:p,date:t,bookingType:o,filterType:r,selectedFilteredRow:i,setSelectedFilteredRow:d,setShowLoader:m})]})};var N=a(81721),j=a(67207),b=a(81694),v=a.n(b),D=a(58617),w=a(78498),T=a(25579);const _=function(e){let{isConfirmDropDialogOpen:t,setIsConfirmDropDialogOpen:a,selectedSpots:o,setSelectedFilteredRow:l,setShowLoader:r}=e;const[c,i]=(0,n.useState)([]),[d,m]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),x=(0,n.useCallback)((()=>{try{if(!Array.isArray(o))return[];const e=o.reduce(((e,t)=>{if(t){const a="".concat(t.CommercialCaption,"-").concat(t.CommercialDuration);return e[a]||(e[a]={CommercialCaption:t.Caption,CommercialDuration:t.Duration,SpotAmountSum:0,TotalDuration:0,TotalCount:0}),e[a].SpotAmountSum+=t.Amount,e[a].TotalDuration+=t.Duration,e[a].TotalCount++,e}}),{});return Object.values(e||0)}catch(e){throw e}}),[o]);(0,n.useEffect)((()=>{(async()=>{try{if(t&&0===d.length){const e=(await(0,w.D)("")).data.map((e=>({value:e.CancelRemarkCode,label:e.CancelRemarkName})));m(e)}}catch(e){(0,u.openNotification)("danger","Something went wrong while fetching drop remarks"),console.error(e)}})()}),[t,d.length]),(0,n.useEffect)((()=>{try{i(x())}catch(e){console.error(e)}}),[x]);const f=()=>{try{a(!1)}catch(e){console.error(e)}};return(0,g.jsxs)(s.Vq,{isOpen:t,onClose:f,onRequestClose:f,children:[(0,g.jsx)("h4",{className:"mb-4",children:"Save Changes"}),(0,g.jsx)(s.Zb,{children:c.map(((e,t)=>(0,g.jsx)("div",{children:(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:v()("flex items-center justify-between rounded-lg p-2 cursor-pointer user-select","bg-gray-50 dark:bg-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-700/90","mb-3"),children:[(0,g.jsxs)("div",{className:"flex items-center rounded-full font-semibold text-xs",children:[(0,g.jsxs)("div",{className:"flex items-center px-2 py-1 border border-gray-300 rounded-full  mr-2",children:[(0,g.jsx)(D.$Af,{className:"text-base"}),(0,g.jsx)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:e.TotalCount})]}),"  ",(0,g.jsx)("div",{className:"flex items-center",children:(0,g.jsxs)("div",{className:"text-gray-900 dark:text-gray-300 text-xs",children:[e.CommercialCaption," [",e.CommercialDuration,"]"]})})]}),(0,g.jsx)("div",{className:"text-gray-900 dark:text-gray-300 text-lg",children:(0,g.jsx)(s.Vp,{showCloseButton:!1,children:(0,g.jsxs)("div",{className:"flex items-center text-sm",children:[(0,g.jsx)("span",{className:"mr-1",children:(0,g.jsx)(D.QCV,{})})," ",e.TotalDuration," sec"]})})}),(0,g.jsx)("div",{className:"text-gray-900 dark:text-gray-300 text-lg",children:(0,g.jsx)(s.Vp,{showCloseButton:!1,children:(0,g.jsx)("span",{className:"text-lg",children:e.SpotAmountSum})})})]})})},t)))}),(0,g.jsx)("h5",{className:"mt-2",children:"Select Remark"}),(0,g.jsx)(s.Ph,{options:d,onChange:e=>{p(e)}}),(0,g.jsxs)("div",{className:"text-right mt-6",children:[(0,g.jsx)(s.zx,{onClick:f,className:"mr-2",children:"Close"}),(0,g.jsx)(s.zx,{variant:"solid",className:"mr-2",onClick:async()=>{try{r(!0);const e=o.map((e=>({Id:e.BookingDetailID,BookingStatus:"E"}))),t=await(0,T._K)("BULKDROP",e,0);200===t.status?((0,u.openNotification)("success","Changes saved successfully"),l(null)):(0,u.openNotification)("danger","Unable to save changes. Server responded with status code ".concat(t.status)),a(!1),r(!1)}catch(e){(0,u.openNotification)("danger","Something went wrong. Unable to save changes"),a(!1),r(!1),console.error(e)}},children:"Save"})]})]})};const k=function(e){let{spotsTableData:t,selectedSpots:a,setSelectedSpots:o,setPaginationState:l,setRowSelection:r,setSelectedFilteredRow:c,setShowLoader:i}=e;const[d,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(N.gi,{className:"-mx-8 px-8 flex items-center justify-between py-4 pt-2 pb-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[a.length>0&&(0,g.jsx)(s.zx,{onClick:()=>p(!0),variant:"solid",type:"submit",size:"sm",children:"Proceed to Drop"}),(0,g.jsx)(s.zx,{onClick:()=>m(!0),size:"sm",children:"Reset"})]}),(0,g.jsxs)("div",{id:"myblock",className:"grid grid-cols-4 md:grid-cols-4 lg:grid-cols-4 gap-6 p-4 pt-0 pb-1 bg-gray-100 dark:bg-gray-800",children:[(0,g.jsxs)("div",{className:"flex flex-col lbl",children:[(0,g.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Total Spots"}),(0,g.jsx)("span",{className:"font-medium text-lg text-teal-500",children:t.length})]}),(0,g.jsxs)("div",{className:"flex flex-col lbl",children:[(0,g.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Selected Spots"}),(0,g.jsx)("span",{className:"font-medium text-lg text-teal-500",children:a.length})]}),(0,g.jsxs)("div",{className:"flex flex-col lbl",children:[(0,g.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Duration"}),(0,g.jsx)("span",{className:"font-medium text-lg text-teal-500",children:(0,u.numberToINRFormat)((0,u.getFieldTotal)(a,"Duration"))})]}),(0,g.jsxs)("div",{className:"flex flex-col lbl",children:[(0,g.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:"Spot Amount"}),(0,g.jsx)("span",{className:"font-medium text-lg text-teal-500",children:(0,u.numberToINRFormat)((0,u.getFieldTotal)(a,"Amount"))})]})]})]}),(0,g.jsx)(_,{isConfirmDropDialogOpen:h,setIsConfirmDropDialogOpen:p,selectedSpots:a,setSelectedFilteredRow:c,setShowLoader:i}),(0,g.jsx)(j.Z,{isDialogOpen:d,title:"Reset",description:"All the selections will be reset. Are you sure you want to reset?",submitButtonTitle:"Reset",handleDialogSubmit:()=>{try{r({}),o([]),l({pageIndex:0,pageSize:10}),m(!1)}catch(e){console.error(e)}},handleDialogClose:()=>m(!1)})]})};var F=a(96361);const Z=function(){const e=(0,i.useSelector)((e=>e.locale.selectedChannel)),[t,a]=(0,n.useState)(null),[h,p]=(0,n.useState)(""),[x,f]=(0,n.useState)(""),[S,y]=(0,n.useState)(null),[N,j]=(0,n.useState)([]),[b,v]=(0,n.useState)([]),[D,w]=(0,n.useState)([]),[T,_]=(0,n.useState)([]),[Z,P]=(0,n.useState)({pageIndex:0,pageSize:10}),[I,L]=(0,n.useState)({}),[B,R]=(0,n.useState)(!1);(0,n.useEffect)((()=>{try{(0,o.Dh)()}catch(e){console.error(e)}}),[]),(0,n.useEffect)((()=>{try{p(""),f(""),y(null),E()}catch(e){console.error(e)}}),[t]),(0,n.useEffect)((()=>{try{f(""),y(null),E()}catch(e){console.error(e)}}),[h]),(0,n.useEffect)((()=>{try{y(null),E()}catch(e){console.error(e)}}),[x]),(0,n.useEffect)((()=>{(async()=>{try{if(S&&"object"===typeof x&&"object"===typeof h){R(!0);const a={par_Location:e.LocationCode,par_Channel:e.ChannelCode,par_TelecastDate:(0,d.Tk)(t),par_Flag:x.value,par_Mode:h.value,FilterType:S.FilterType};let s=await(0,m.apiCallstoreprocedure)("USP_Sch_Bulk_DropingDetails",a);200===s.status?(j(s.data),v(Object.keys(s.data[0]).map((e=>({header:e,accessorKey:e})))),_([]),L({})):204===s.status?(E(),(0,u.openNotification)("info","No spots found for ".concat(S.FilterType))):(E(),(0,u.openNotification)("danger","Something went wrong while fetching spots for ".concat(S.FilterType,". Server responded with status code ").concat(s.status)))}else E();R(!1)}catch(a){(0,u.openNotification)("danger","Something went wrong while fetching spots for ".concat(S.FilterType)),E(),R(!1),console.error(a)}})()}),[S]);const E=()=>{try{j([]),v([]),_([]),L({})}catch(e){throw e}};return(0,g.jsxs)("div",{className:"min-h-full flex flex-col",children:[(0,g.jsxs)(s.Zb,{header:(0,g.jsx)(F.Z,{}),className:"mt-3 grow",bodyClass:"h-full p-3 pb-4 flex flex-col gap-6",bordered:!1,children:[(0,g.jsx)(C,{date:t,setDate:a,bookingType:h,setBookingType:p,filterType:x,setFilterType:f,selectedFilteredRow:S,setSelectedFilteredRow:y,setShowLoader:R}),N.length>0?(0,g.jsx)(l.Z,{tableData:N,tableName:"bulkDroppingSpots",originalColumns:b,managedColumns:D,setManagedColumns:w,exportFile:!1,columnsToFormatInINR:[],tableType:r.$.tableTypes.SELECTABLE,setSelectedRows:_,paginationState:Z,setPaginationState:P,rowSelection:I,setRowSelection:L}):(0,g.jsx)(s.Zb,{className:"grow",bodyClass:"h-full flex justify-center items-center",children:"No spots to show"})]}),(0,g.jsx)(k,{spotsTableData:N,selectedSpots:T,setSelectedSpots:_,setPaginationState:P,setRowSelection:L,setSelectedFilteredRow:y,setShowLoader:R}),(0,g.jsx)(c.default,{showLoader:B})]})}},60488:(e,t,a)=>{a.d(t,{Dh:()=>p,SE:()=>h,SU:()=>S,a1:()=>d,aP:()=>i,f$:()=>x,rp:()=>u,yw:()=>g});var s=a(1413),n=(a(81320),a(72791)),o=a(56355),l=a(2803),r=a(80184);const c=e=>e.split(":").map((e=>e.padStart(2,"0"))).join(":").substring(0,11);function i(e){let t=0;const a=[];return e.forEach((e=>{"NTC"!==e.F_C_S_P&&t++;const n=(0,s.Z)((0,s.Z)({},e),{},{PrimaryID:t});a.push(n)})),a}function d(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"CM",o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,i="00:00:00:00",d=o||"00:00:00:00";return e.map(((e,u)=>{if(l&&"NTC"===e.F_C_S_P&&"DTM"===e.NtcTypeName)return e;if("NTC"===e.F_C_S_P||"BR"===e.F_C_S_P)return e.OffsetStartTime?(0,s.Z)((0,s.Z)({},e),{},{Start_Time:e.OffsetStartTime,Tel_Time:e.OffsetStartTime}):(0,s.Z)((0,s.Z)({},e),{},{Start_Time:"00:00:00:00",Tel_Time:"00:00:00:00",OffsetStartTime:"00:00:00:00"});let h=d;if(t)return"CT"!==e.F_C_S_P?e.F_C_S_P===n&&a||"NTC"===e.F_C_S_P||"BR"===e.F_C_S_P?(d=c(d),(0,s.Z)((0,s.Z)({},e),{},{Start_Time:d,Tel_Time:d})):(h=m(d,i,r),i=e.Duration,h=c(h),d=c(h),(0,s.Z)((0,s.Z)({},e),{},{Start_Time:h,Tel_Time:h})):(d=e.FPC_Time+":00:00",i=e.Duration,h=c(h),d=c(d),(0,s.Z)((0,s.Z)({},e),{},{Start_Time:d,Tel_Time:d}));if(0===u)d=o||e.Start_Time,i=e.Duration;else{if(h=m(d,i,r),h=c(h),d=c(h),"NTC"===e.F_C_S_P&&a||"BR"===e.F_C_S_P)return(0,s.Z)((0,s.Z)({},e),{},{Start_Time:d,Tel_Time:d});i=e.Duration,h=c(h),d=c(h)}return(0,s.Z)((0,s.Z)({},e),{},{Start_Time:h,Tel_Time:h})}))}const m=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24;try{const s=60,n=60,o=24,[l,r,c,i]=e.split(":").map(Number),[d,m,u,h]=t.split(":").map(Number);let p=i+h,x=Math.floor(p/a);p%=a;let g=c+u+x,f=Math.floor(g/s);g%=s;let S=r+m+f,y=Math.floor(S/n);S%=n;let C=l+d+y;C%=o;return String(C).padStart(2,"0")+":"+String(S).padStart(2,"0")+":"+String(g).padStart(2,"0")+":"+String(p).padStart(2,"0")}catch(s){throw s}};function u(e){let t=0;return e.forEach((e=>{const[a,s,n,o]=e.CommercialDuration.split(":").map((e=>parseInt(e)));t+=3600*a+60*s+n+o/30})),t}function h(){document.getElementsByClassName("stacked-side-nav")[0].classList.add("hidden");document.getElementsByClassName("footer")[0].classList.add("hidden")}function p(){var e,t;const a=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=a&&(null===a||void 0===a||a.classList.add("hidden")),null===(e=document.getElementById("rightIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("leftIndicator"))||void 0===t||t.classList.add("hidden")}function x(){var e,t;const a=document.getElementsByClassName("stacked-side-nav-secondary")[0];void 0!=a&&(null===a||void 0===a||a.classList.remove("hidden")),null===(e=document.getElementById("leftIndicator"))||void 0===e||e.classList.remove("hidden"),null===(t=document.getElementById("rightIndicator"))||void 0===t||t.classList.add("hidden")}const g=(e,t)=>e.map((e=>{let a=(0,s.Z)({},e);return"S"===a.F_C_S_P||a.F_C_S_P,"NTC"===a.F_C_S_P?(a.PrimaryID=t.PrimaryID,a.SeasonNo=t.SeasonNo,a.Ep_No=t.Ep_No,a.ContentCode=t.ContentCode,a.BreakNumber=t.BreakNumber,a.SeasonNo=t.SeasonNo,a.FPC_ID=t.FPC_ID):"CM"===a.F_C_S_P?(a.PrimaryID=t.PrimaryID,a.SeasonNo=t.SeasonNo,a.Ep_No=t.Ep_No,a.ContentCode=t.ContentCode,a.BreakNumber=t.BreakNumber,a.SeasonNo=t.SeasonNo,a.FPC_ID=t.FPC_ID,a.ScheduleTime=t.ScheduleTime):(a.SeasonNo=t.SeasonNo,a.Ep_No=t.Ep_No,a.ContentCode=t.ContentCode,a.BreakNumber=t.BreakNumber,a.SeasonNo=t.SeasonNo,a.FPC_ID=t.FPC_ID),a.SequenceNo=t.SequenceNo,a.Start_Time="00:00:00:00",a})),f=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))};const S=e=>{let{Progress:t,PromoSchdulingSave:a,openNotification:s}=e;const[c,i]=(0,n.useState)(0),[d,m]=(0,n.useState)(0),[u,h]=(0,n.useState)(0),[p,x]=(0,n.useState)(!1),g=(0,n.useRef)(!0),[S,y]=(0,n.useState)(!1),[C,N]=(0,n.useState)(""),j=e=>{let{percent:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{onClick:()=>{y(!0)},style:{cursor:"pointer"},children:(0,r.jsx)("p",{style:{marginTop:"5px",fontSize:"12px",color:"white"},children:f(d)})}),(0,r.jsx)("p",{style:{cursor:"pointer",color:"white",marginLeft:"10px"},onClick:()=>{x(!p)},children:p?(0,r.jsx)(o.Wh,{}):(0,r.jsx)(o.gmG,{})})]})};(0,n.useEffect)((()=>{b(10)}),[]),(0,n.useEffect)((()=>{let e;return p&&d>0?e=setInterval((()=>{m((e=>Math.max(e-1,0))),i((e=>{const t=100-d/(u||1)*100;return Math.min(t,100)}))}),1e3):0===d&&p&&(a(),s("info"),m(u)),()=>clearInterval(e)}),[p,d,u]),(0,n.useEffect)((()=>{g.current&&(g.current=!1)}),[d]);const b=e=>{const t=parseInt(e,10);if(!isNaN(t)&&t>0){const e=60*t;m(e),h(e),i(0),x(!0)}},v=e=>{console.log("onDialogClose",e),y(!1)};return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(l.Vq,{isOpen:S,width:300,height:200,onClose:v,onRequestClose:v,children:(0,r.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,r.jsx)("h5",{className:"mb-4",children:"Set Timer"}),(0,r.jsx)("div",{className:"flex align-center",children:(0,r.jsx)(l.II,{maxLength:"2",value:C,onChange:e=>{const t=e.target.value;(/^\d{0,2}$/.test(t)||""===t)&&N(t)}})}),(0,r.jsxs)("div",{className:"text-right mt-6",children:[(0,r.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:()=>{b(C),v()},children:"Set"}),(0,r.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:v,children:"Cancel"})]})]})}),(0,r.jsx)("div",{className:"flex",style:{width:"120px"},children:(0,r.jsx)(t,{variant:"circle",className:"mx-6",size:"sm",width:50,percent:c,customInfo:(0,r.jsx)(j,{percent:c})})})]})}}}]);
//# sourceMappingURL=4117.9a69bb29.chunk.js.map