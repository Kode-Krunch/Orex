"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[862],{80317:(e,l,a)=>{a.d(l,{Z:()=>n});var t=a(2803),s=(a(72791),a(23853)),r=a(80184);const n=function(e){let{legends:l,renderTitle:a=(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 text-gray-300 opacity-90",children:[(0,r.jsx)(s.bax,{className:"text-lg"}),(0,r.jsx)("div",{children:"Legends"})]})}=e;return(0,r.jsxs)(t.Lt,{placement:"top-end",trigger:"hover",renderTitle:a,menuClass:"w-max p-3",toggleClassName:"hover:cursor-pointer",children:[(0,r.jsx)("div",{className:"pb-2 mb-1 border-b border-b-gray-500 text-white text-base font-semibold",children:"Legends"}),(0,r.jsx)("div",{className:"grid grid-cols-2 w-max",children:Object.keys(l).map(((e,a)=>l[e]?(0,r.jsxs)(t.Lt.Item,{className:"flex gap-1.5",children:[(0,r.jsx)("div",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:l[e]}}),(0,r.jsx)("div",{children:e})]},a):(0,r.jsx)(r.Fragment,{})))})]})}},50862:(e,l,a)=>{a.r(l),a.d(l,{default:()=>N});var t=a(1413),s=a(72791),r=a(80184);const n=function(e){let{label:l,value:a,color:t="teal"}=e;return(0,r.jsxs)("div",{className:"flex flex-col pr-5 mr-5 border-r border-gray-700 hover:cursor-default",children:[(0,r.jsx)("p",{className:"text-gray-300 text-[0.85rem]",children:l}),(0,r.jsx)("p",{className:"text-".concat(t,"-400 text-[1.05rem]"),children:a})]})};var o=a(91615),c=a(21260),d=a(44410),u=a(36608),i=a(60364),m=a(2803),x=a(80317),g=a(54748),h=a(87350),b=a(81320),S=a(1680),j=a(23853);const E=(0,s.lazy)((()=>a.e(5216).then(a.bind(a,15216))));const N=function(){const e=(0,i.useSelector)((e=>e.locale.selectedChannel)),l=(0,i.useSelector)((e=>e.auth.session.token)),a=(0,i.useSelector)((e=>e.auth.scheduling.unsavedWork)),N=(0,i.useDispatch)(),{page:p,schedulingTableData:C,schedulingTableSelectedRows:T,leftClickedSchTableRow:v,setShowLoader:f,date:w,resetAllSelectedRows:y,isScheduleAllowedToEdit:D}=(0,s.useContext)(o.Z),[O,_]=(0,s.useState)({startIndex:null,endIndex:null}),[I,k]=(0,s.useState)(!1),[P,R]=(0,s.useState)([]),[M,F]=(0,s.useState)({Program:null,Segment:null,Promo:null,Commercial:null,Song:null,NTC:null});(0,s.useEffect)((()=>{try{F(H())}catch(e){(0,b.openNotification)("danger","Something went wrong while fetching legends"),console.error(e)}}),[C]),(0,s.useEffect)((()=>{null!==v&&void 0!==v&&v.SongCode&&G(Number(v.SongCode),(0,g.Tk)(w),1)}),[v]),(0,s.useEffect)((()=>{I&&z(w)}),[I]),(0,s.useEffect)((()=>{try{const e=(0,d.Lz)(C,v);1===e.startIndex&&e.endIndex===C.length-1&&C.filter((e=>e.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION)).length>1?(y(),_({startIndex:null,endIndex:null})):_(e)}catch(e){console.error(e)}}),[C,v]);const L=(0,d.Pi)(O,C,v),A=(0,d.N9)(O,C,v),B=e.label===S.CLIENT.USA_Forbes,G=async(e,l,a)=>{const t=await(0,h.nr)(e,l,a),s=Z(t.data);k(!0),R(s)},Z=e=>e.map((e=>{const l=Object.keys(e)[0],a=l,t=(0,b.FORMATDATE_FOR_EVERY)(new Date(l));return{date:l,hoursData:e[l],label:t,labelIndex:a}})),W=e=>0===e?"SelectedSongRow ":e>=3?"SelectedSongRow red":e>=1&&e<3?"SelectedSongRow orange":"SelectedSongRow",z=e=>{let l=document.getElementById("SongschedulDetails").querySelector(".SongschedulDetails-".concat((0,g.Tk)(e)));null!=l&&l.scrollIntoView({behavior:"smooth",block:"center"})},H=()=>{try{let e=(0,t.Z)((0,t.Z)({},M),{},{"Back To Back":"rgb(234 88 12)"});for(let l=0;l<C.length;l++){const a=C[l];a.F_C_S_P!==c.rowDataTypesEnum.CONTENT_TERMINATION||e.Program?a.F_C_S_P!==c.rowDataTypesEnum.SEGMENT||e.Segment?a.F_C_S_P!==c.rowDataTypesEnum.PROMO||e.Promo?a.F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL||e.Commercial?a.F_C_S_P!==c.rowDataTypesEnum.SONG||e.Song?a.F_C_S_P!==c.rowDataTypesEnum.NTC||e.NTC||(e.NTC=a.EventDefaultBackColor):e.Song=a.EventDefaultBackColor:e.Commercial=a.EventDefaultBackColor:e.Promo=a.EventDefaultBackColor:e.Segment=a.EventDefaultBackColor:e.Program=a.EventDefaultBackColor;let t=!0;if(Object.keys(e).forEach((l=>{null!==e[l]||(t=!1)})),t)break}return p!==c.pagesEnum.FINAL_LOG&&p!==c.pagesEnum.COMMERCIAL||(e["Multi Spot"]="rgb(244 114 182)",e["Out Of Timeband"]="rgb(185 28 28)"),B&&(e.Content=e.Program,delete e.Program),e}catch(e){throw e}};return(0,r.jsx)(s.Suspense,{children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[I&&(0,r.jsxs)("div",{className:"grow h-0 flex flex-col",children:[(0,r.jsx)("div",{className:"table-container w-full",children:(0,r.jsx)("table",{border:"1",children:(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"SelectedSongHeader",children:"TeleCast Date"}),Array.from({length:24},((e,l)=>(0,r.jsx)("th",{className:"SelectedSongRow",children:l.toString().padStart(2,"0")},l))),(0,r.jsx)("th",{className:"SelectedSongRow",children:"Total"})]})})})}),(0,r.jsx)("div",{id:"SongschedulDetails",className:"table-container w-full flex-1",style:{overflowY:"auto"},children:(0,r.jsx)("table",{border:"1",children:(0,r.jsx)("tbody",{children:P.map(((e,l)=>(0,r.jsxs)("tr",{className:"SongschedulDetails-".concat(e.labelIndex),style:{background:"Today"===e.label?"#a4a0a012":"initial"},children:[(0,r.jsx)("td",{className:"SelectedSongHeader",children:e.label}),e.hoursData.map(((e,l)=>{const[a,t]=Object.entries(e)[0];return(0,r.jsx)("td",{className:W(t),children:0===t?"":t},l)}))]},l)))})})})]}),(0,r.jsxs)("div",{className:"bg-gray-700 bg-opacity-50 flex justify-between items-center py-1.5 px-3 rounded-lg border border-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[C[O.startIndex]&&C[O.startIndex].F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION&&(0,r.jsx)(m.u,{title:C[O.startIndex].Event_Name,children:(0,r.jsx)(n,{label:"Program",value:C[O.startIndex].Event_Name.length>15?"".concat(C[O.startIndex].Event_Name.substr(0,15),"..."):C[O.startIndex].Event_Name})}),p===c.pagesEnum.PROMO&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{label:"Selected Promos",value:(0,d.ih)(T)}),(0,r.jsx)(n,{label:"Commercials",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.COMMERCIAL)}),(0,r.jsx)(n,{label:"Promos",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.PROMO)})]}),p===c.pagesEnum.SONG&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{label:"Selected Songs",value:(0,d.ih)(T)}),(0,r.jsx)(n,{label:"Promos",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.PROMO)}),(0,r.jsx)(n,{label:"Commercials",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.COMMERCIAL)}),(0,r.jsx)(n,{label:"Songs",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.SONG)})]}),p===c.pagesEnum.COMMERCIAL&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{label:"Selected Commercials",value:(0,d.ih)(T)}),(0,r.jsx)(n,{label:"Commercials",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.COMMERCIAL)})]}),p===c.pagesEnum.NTC&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{label:"Selected NTCs",value:(0,d.ih)(T)}),(0,r.jsx)(n,{label:"NTCs",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.NTC)})]}),p===c.pagesEnum.FINAL_LOG&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{label:"Selected Events",value:(0,d.ih)(T)}),(0,r.jsx)(n,{label:"Commercials",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.COMMERCIAL)}),(()=>{const e=(0,d.gm)(O,C,v,c.rowDataTypesEnum.PROMO);return"00:00:00:00"!==e&&(0,r.jsx)(n,{label:"Promos",value:e})})(),(()=>{const e=(0,d.gm)(O,C,v,c.rowDataTypesEnum.SONG);return"00:00:00:00"!==e&&(0,r.jsx)(n,{label:"Songs",value:e})})()]}),(0,r.jsx)(n,{label:"Segments",value:(0,d.gm)(O,C,v,c.rowDataTypesEnum.SEGMENT)}),(0,r.jsx)(n,{label:"Slot Duration",value:A}),(0,r.jsx)(n,{label:"Total",value:L,color:L>A?"red":"teal"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(x.Z,{legends:M,renderTitle:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 text-gray-300 opacity-90\n                            ".concat(D&&"pr-3 border-r border-r-gray-700","\n                            "),children:[(0,r.jsx)(j.bax,{className:"text-lg"}),(0,r.jsx)("div",{children:"Legends"})]})}),D&&(0,r.jsx)(E,{width:53,strokeWidth:6,color:"teal-400",maxDurationInSec:900,dependencies:[C],executeFunction:()=>(0,u.bG)({setShowLoader:f,page:p,schedulingTableData:C,channel:e,date:w,token:l,unsavedWork:a,dispatch:N,isAutoSave:!0})})]})]})]})})}}}]);
//# sourceMappingURL=862.20d0864c.chunk.js.map