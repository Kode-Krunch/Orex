"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[2109],{92959:(e,t,a)=>{a.d(t,{C:()=>o,Q:()=>r});var n=a(46152);async function o(e){return n.Z.fetchData({url:"/columnsetting",method:"post",data:e})}async function r(e){return n.Z.fetchData({url:"/columnsetting/".concat(e),method:"get"})}},31562:(e,t,a)=>{a.d(t,{$o:()=>i,DY:()=>T,F5:()=>s,H6:()=>u,HE:()=>l,OR:()=>m,QW:()=>d,WV:()=>c});var n=a(54048),o=a(46152);const r=a(74569);async function s(e){return o.Z.fetchData({url:"/musicagencymst/",method:"get",data:e})}const l=(e,t)=>new Promise(((a,o)=>{let s=JSON.stringify({MusicAgencyName:e.MusicAgencyName,MusicAgency_Addr1:e.MusicAgency_Addr1,MusicAgency_Addr2:e.MusicAgency_Addr1,PlaceCode:e.PlaceCode,CountryCode:e.CountryCode,StateCode:e.StateCode,MusicAgency_Contact1:e.MusicAgency_Contact1,MusicAgency_Contact2:e.MusicAgency_Contact1,MusicAgency_Faxno:e.MusicAgency_Faxno,MusicAgency_Email:e.MusicAgency_Email,ContactPerson:e.ContactPerson,IsMusicAgency:1,IsMusicCompany:1,IsActive:1}),l={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/musicagencymst/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:s};r.request(l).then((e=>{a(e)})).catch((e=>{o(e)}))})),i=(e,t)=>new Promise(((a,o)=>{let s=JSON.stringify({MusicAgencyName:e.MusicAgencyName,MusicAgency_Addr1:e.MusicAgency_Addr1,MusicAgency_Addr2:e.MusicAgency_Addr1,PlaceCode:e.PlaceCode,CountryCode:e.CountryCode,StateCode:e.StateCode,MusicAgency_Contact1:e.MusicAgency_Contact1,MusicAgency_Contact2:e.MusicAgency_Contact1,MusicAgency_Faxno:e.MusicAgency_Faxno,MusicAgency_Email:e.MusicAgency_Email,ContactPerson:e.ContactPerson,IsMusicAgency:1,IsMusicCompany:1,IsActive:1}),l={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/musicagencymst/".concat(e.MusicAgencyCode),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:s};r.request(l).then((e=>{a(e)})).catch((e=>{o(e)}))})),c=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/autoshufflepromo/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))}));async function u(e){return o.Z.fetchData({url:"/autoshufflepromo/drop/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get"})}async function d(e){return o.Z.fetchData({url:"/autoshufflepromo/".concat(e),method:"get"})}async function T(e,t,a){return o.Z.fetchData({url:"/promomaster/asperdate/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&fromdate=").concat(t,"&todate=").concat(a),method:"get"})}async function m(){return o.Z.fetchData({url:"/promomaster/drop/",method:"get"})}},87350:(e,t,a)=>{a.d(t,{Bs:()=>R,C4:()=>Y,CY:()=>Q,D7:()=>U,DD:()=>L,EF:()=>oe,FN:()=>v,FZ:()=>N,Fb:()=>i,Gm:()=>C,Hg:()=>j,Kc:()=>E,Ko:()=>D,LI:()=>f,MC:()=>O,NP:()=>P,Nq:()=>m,OK:()=>Z,QI:()=>W,SU:()=>J,Tf:()=>g,Ux:()=>q,V9:()=>I,VG:()=>d,VT:()=>X,Ww:()=>y,XC:()=>H,Xc:()=>s,_V:()=>_,ae:()=>K,c0:()=>k,c1:()=>h,c_:()=>ee,cn:()=>G,db:()=>w,f7:()=>x,fL:()=>T,fi:()=>p,gK:()=>z,hE:()=>c,hG:()=>V,je:()=>u,n5:()=>B,nR:()=>te,nY:()=>b,nr:()=>M,pp:()=>ae,qg:()=>ne,sb:()=>A,sd:()=>S,t2:()=>$,w4:()=>F,xl:()=>l});var n=a(54048),o=a(46152);const r=a(74569);async function s(e,t){const a=t?"&search=".concat(t):"",n="/promomaster/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode).concat(a);return o.Z.fetchData({url:n,method:"get",data:e})}async function l(e,t){let a="/promomaster/filter/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode);return t.PromoTypeCode&&(a+="&PromoTypeCode=".concat(t.PromoTypeCode)),t.Caption&&(a+="&Caption=".concat(t.Caption)),t.Duration[0]&&(a+="&Duration1=".concat(t.Duration[0])),t.Duration[1]&&(a+="&Duration2=".concat(t.Duration[1])),t.VideoID&&(a+="&VideoID=".concat(t.VideoID)),o.Z.fetchData({url:a,method:"get",data:t})}async function i(e){return o.Z.fetchData({url:"/smartshufflesetting/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function c(e,t){return o.Z.fetchData({url:"/smartshufflesetting/".concat(t),method:"put",data:e})}async function u(e){return o.Z.fetchData({url:"/smartshufflesetting/",method:"post",data:e})}async function d(e){return o.Z.fetchData({url:"/songgenre/",method:"get",data:e})}async function T(e){return o.Z.fetchData({url:"/songcategory/",method:"get",data:e})}async function m(e){return o.Z.fetchData({url:"/songmaster/?&LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode),method:"get",data:e})}async function p(e){return o.Z.fetchData({url:"/songmaster/".concat(e),method:"get"})}const h=(e,t)=>fetch(n.Z.apiPrefix+"/songgenre/".concat(e.SongGenreCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongGenreName:e.SongGenreName,IsActive:e.IsActive})}),C=(e,t)=>fetch(n.Z.apiPrefix+"/moviealbummaster",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({MovieAlbumName:e.MovieAlbumName,IsActive:e.IsActive})}),f=(e,t)=>fetch(n.Z.apiPrefix+"/moviealbummaster/".concat(e.MovieAlbumCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({MovieAlbumName:e.MovieAlbumName,IsActive:e.IsActive})}),S=(e,t)=>(console.log(e),fetch(n.Z.apiPrefix+"/songcategory/".concat(e.SongCategoryCode),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongCategoryName:e.SongCategoryName,IsActive:e.IsActive})})),E=(e,t)=>fetch(n.Z.apiPrefix+"/songgenre",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongGenreName:e.SongGenreName,IsActive:e.IsActive})}),D=(e,t)=>fetch(n.Z.apiPrefix+"/songcategory",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({SongCategoryName:e.SongCategoryName,IsActive:e.IsActive})}),I=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/promomaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),g=(e,t,a)=>new Promise(((o,s)=>{let l={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/promomaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(l).then((e=>{o(e)})).catch((e=>{s(e)}))}));async function y(e){return o.Z.fetchData({url:"/promotypemaster/drop/",method:"get",data:e})}async function _(e){return o.Z.fetchData({url:"/songgenre/drop/",method:"get",data:e})}async function N(e){return o.Z.fetchData({url:"/tapetypemaster/drop/",method:"get",data:e})}async function w(e){return o.Z.fetchData({url:"/songtempo/drop/",method:"get",data:e})}async function b(e,t,a){const n="promoscheduling/USP_Sch_PromoScheduling_GetDetails/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return o.Z.fetchData({url:n,method:"get"})}async function O(e,t,a){const n="ntcscheduling/USP_Sch_NTCScheduling_GetDetails/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return o.Z.fetchData({url:n,method:"get"})}async function P(e,t,a){const n="songscheduling/USP_Sch_SongScheduling_GetDetails/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return o.Z.fetchData({url:n,method:"get"})}async function R(e,t,a){const n="transmissionlog/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=").concat(a);return o.Z.fetchData({url:n,method:"get"})}async function A(e,t){const a="transmissionlog/Scheduling_FinalLog_ProgramChange?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t);return o.Z.fetchData({url:a,method:"get"})}async function F(e,t){const a="/transmissionlog/USP_Sch_Finalog_ExportCsv/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&Mode=S");return o.Z.fetchData({url:a,method:"get"})}async function L(e){const t="restore/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(e.TelecastDate,"&FormName=").concat(e.FormName);return o.Z.fetchData({url:t,method:"get"})}async function M(e,t,a){const n="songscheduling/GetSongschedulDetails/?SongCode=".concat(e,"&TelecastDate=").concat(t,"&InHour=").concat(a);return o.Z.fetchData({url:n,method:"get"})}async function v(e){const t="restore/audit_data/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(e.TelecastDate,"&FormName=").concat(e.FormName,"&D_date=").concat(e.D_date);return o.Z.fetchData({url:t,method:"post"})}async function G(e){const t="commercialscheduling/restoreauditcommercialscheduling/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&ScheduleDate=").concat(e.ScheduleDate,"&D_date=").concat(e.D_date);return o.Z.fetchData({url:t,method:"post"})}async function x(e,t){const a="commercialscheduling/getauditpromoscheduling/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&ScheduleDate=").concat(t);return o.Z.fetchData({url:a,method:"get"})}async function k(e,t){const a="globle/GetDailyFPCStatus?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&Screen=").concat(e.Screen,"&TelecastDate=").concat(t);return o.Z.fetchData({url:a,method:"get"})}async function Z(e,t,a,n){const r="promoscheduling/USP_Sch_Get_All_Promo/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&PromoTypeCode=").concat(a,"&PromoName=").concat(n);return o.Z.fetchData({url:r,method:"get"})}async function B(e,t,a,n){const r="ntcmaster/USP_Sch_Get_All_NTC/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&NTCTypeCode=").concat(a,"&NTCName=").concat(n);return o.Z.fetchData({url:r,method:"get"})}async function U(e,t,a,n){const r="songscheduling/USP_Sch_Get_All_Song/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t,"&SongType=").concat(a,"&OrderBy=2&SearchText=").concat(n);return o.Z.fetchData({url:r,method:"get"})}async function W(e){return o.Z.fetchData({url:"/musicagencymst/drop/",method:"get",data:e})}async function H(e){return o.Z.fetchData({url:"/moviealbummaster/drop/",method:"get",data:e})}async function j(e){return o.Z.fetchData({url:"/transmissionlog/addaudit/",method:"post",data:e})}async function V(e){return o.Z.fetchData({url:"/transmissionlog/insertdata/",method:"post",data:e})}async function Y(e){return o.Z.fetchData({url:"/transmissionlog/updatedata/",method:"put",data:e})}async function z(e,t){return o.Z.fetchData({url:"/transmissionlog/deletedata/?LocationCode=".concat(e.LocationCode,"&ChannelCode=").concat(e.ChannelCode,"&TelecastDate=").concat(t),method:"delete"})}const K=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/promoscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),q=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/songscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),X=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/ntcscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),J=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/transmissionlog/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),Q=(e,t)=>(console.log("url"),new Promise(((a,o)=>{let s={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/commercialscheduling/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))}))),$=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/songmaster/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),ee=(e,t,a)=>new Promise(((o,s)=>{let l={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/songmaster/".concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(l).then((e=>{o(e)})).catch((e=>{s(e)}))})),te=(e,t)=>new Promise(((a,o)=>{let s={method:"post",maxBodyLength:1/0,url:n.Z.apiPrefix+"/columnsetting/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},data:e};r.request(s).then((e=>{a(e)})).catch((e=>{o(e)}))})),ae=(e,t,a)=>new Promise(((o,s)=>{let l={method:"put",maxBodyLength:1/0,url:n.Z.apiPrefix+"/bookingdetails/bookingstatuschange/?BookingStatus=".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:e};r.request(l).then((e=>{o(e)})).catch((e=>{s(e)}))}));async function ne(e){return o.Z.fetchData({url:"teammapping/",method:"post",data:e})}async function oe(e){return o.Z.fetchData({url:"geneventcontent/Contentadd/",method:"post",data:e})}},25146:(e,t,a)=>{a.d(t,{J:()=>l});var n=a(1413),o=(a(72791),a(25415)),r=a(64802),s=a(81320);const l=(e,t,a,l,i,c,u,d,T)=>{if(0===c.length)return void(0,s.openNotification)("info","No data to export");const m=c.map((e=>(0,n.Z)({},e))),p={};d.forEach((e=>{e.accessorKey&&(console.log(e.accessorKey),console.log(p[e.accessorKey]),p[e.accessorKey]=e.header)}));const h=m.map((e=>{const t={};return Object.keys(e).forEach((a=>{p[a]?t[p[a]]=e[a]:t[a]=e[a]})),t})),C=Object.keys(p).length>0?Object.keys(p).map((e=>p[e])):[],f=(C.map((e=>({header:e,key:e}))),new o.Workbook),S=f.addWorksheet(u);for(let n=0;n<l;n++)S.addRow([]);const E=[];for(let n=0;n<a;n++)E.push("");if(E.push(...C),S.addRow(E),e){S.getRow(l+1).font={bold:!0,size:10}}if(i){const e=S.getRow(l+1);e.font={bold:!0,size:12},e.eachCell((e=>{e.border={top:{style:"medium"},left:{style:"medium"},bottom:{style:"medium"},right:{style:"medium"}},T||(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"009dff"}})}))}if(h.forEach((e=>{const t=[];for(let o=0;o<a;o++)t.push("");C.forEach((a=>{t.push(e[a]||"")}));const n=S.addRow(t);n.font={size:10},n.eachCell(((t,a)=>{t.value instanceof Date&&(t.value=new Date(Date.UTC(t.value.getFullYear(),t.value.getMonth(),t.value.getDate()))),T&&e.EventDefaultBackColor&&(t.fill={type:"pattern",pattern:"solid",fgColor:{argb:e.EventDefaultBackColor.substring(1)}}),T&&e.EventDefaultFrontColor&&(t.font={color:{argb:e.EventDefaultFrontColor.substring(1)}}),i&&(t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}})}))})),S.columns.forEach((e=>{let t=10;e.eachCell((e=>{const a=(e.value||"").toString().length;t=Math.max(t,a)})),e.width=Math.min(30,t+2)})),S.views=[{state:"frozen",xSplit:a,ySplit:l+1,topLeftCell:"A".concat(l+2)}],t){const e=c.length+l+100,t=d.length>0?d.length+100:100;for(let a=1;a<=e;a++){const e=S.getRow(a);for(let a=1;a<=t;a++){const t=e.getCell(a);t.value=t.value||"",t.border={top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}}}}}}f.xlsx.writeBuffer().then((e=>{(0,r.saveAs)(new Blob([e]),"".concat(u,".xlsx"))}))}},1680:(e,t,a)=>{a.r(t),a.d(t,{CLIENT:()=>n,CLIENTWiseUploadPath:()=>o});const n={LOCAL:"LOCAL",INDIA_SPORTS:"INDIA SPORTS TV",USA_Forbes:"Forbes",FOOD_INDIA:"India Food Food",FOOD_USA:"USA Food Food INT",SWAMI:"INDIA SWAMI FILMS",GEC:"GEC CHANNEL",USA_GEC:"USA GEC CHANNEL",INDIA_GEC:"INDIA GEC CHANNEL",NEWS:"NEWS CHANNEL",USA_NEWS:"NEWS CHANNEL USA",BeIN_Sports:"BeIN Sports",MASST_INDIA:"INDIA MASST",ASIANET:"INDIA ASIANET CINEMA",INDIAMYMOVIES:"INDIA MY MOVIES",ANI_PLUS:"SINGAPORE ANI PLUS",SATHIYAM_TV:"INDIA SATHIYAM TV"},o={USA_Forbes:"/playlist",ASIANET:"/video/volume1/playlist"}},29408:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Je});var n=a(72791),o=a(1413),r=a(91615),s=a(8458),l=a(78638),i=a(81320),c=a(21260),u=a(76061),d=a(60488),T=a(29851),m=a(60364),p=a(54748),h=a(1680),C=a(48851);const f=(e,t,a,n)=>{try{let o=[...t],r=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SECONDARY,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),s=(0,C.S0)(e,t,n);return o.splice(s,0,...r),o=(0,l.removeRowsFromTableData)(a,o),o}catch(o){throw o}},S=(e,t,a,n,o,r,s)=>{try{let l=(0,C.TT)(e.destination.index,t,o);return!!(0,C.Fs)(e,t,l)&&E(t,a,l,n,r,s)}catch(l){throw l}},E=(e,t,a,n,o,r)=>{let s=[...e],c=[...t],u=[];if(r){let t=(0,l.getNTCParentRow)(a,e);const{newTableData:o,insertedNTCs:r}=D(t,n,e,a);s=o,r.length<n.length&&(0,i.openNotification)("danger","Some NTCs are not inserted due to insufficient duration."),r[0].BookingDetailsID&&(u=r)}else{const e=(0,C.RK)({destIndex:a,tableData:s,selectedRows:n,channel:o,isAutoCalculateOffsetTime:r});if(!e)return!1;s.splice(a,0,...e),e.length<n.length&&(0,i.openNotification)("danger","Some NTCs are not inserted due to insufficient duration."),e[0].BookingDetailID&&(u=e)}return c=(0,l.removeRowsFromTableData)(u,c),{newSchTableData:s,newSecTableData:c}},D=(e,t,a,n)=>{const o=(0,i.getGroupedRows)(t,"NTCGroupCode"),r=(0,l.getRowWithNTC)([e],a,!1),s=(0,i.getGroupedRows)(r,"NTCGroupCode"),{newGroupedNTCs:u,insertedNTCs:d}=I(s,o,n,e),T=(0,i.getFlatArrForGroupedArr)(u);let m=(0,l.getTableDataWithAdditionalInfo)({tableData:T,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),p=[...a];return p=(0,l.removeRowsFromTableData)(r,p),p.splice(p.findIndex((t=>t.rowId===e.rowId))+1,0,...m),{newTableData:p,insertedNTCs:d}},I=(e,t,a,n)=>{let r={},s=[],l=(0,o.Z)({},e),c=Object.keys(l);return 0===c.length&&Object.keys(t).forEach((e=>{l[e]=[],c.push(e)})),c.forEach((e=>{const o=l[e],i=t[e];if(i){const l=o.findIndex((e=>e.rowIndex===a));if(-1===l){const a=g(o,i,n);r[e]=a.newNTCs,s=[...s,...a.insertedNTCs],delete t[e]}else{const a=y(o,i,n,l);r[e]=a.newNTCs,s=[...s,...a.insertedNTCs],delete t[e]}}else r[e]=l[e]})),Object.keys(t).length>0&&(r=(0,o.Z)((0,o.Z)({},r),_(t,["offsetTime","defaultGap"])),s=[...s,...(0,i.getFlatArrForGroupedArr)(t)]),{newGroupedNTCs:r,insertedNTCs:s}},g=(e,t,a)=>{let n=[...e],o=[];return t.forEach((e=>{let t=[...n,e];t=(0,C.XC)(t,["offsetTime","defaultGap"]);const r=t.at(-1);return(0,u.addTimes)(r.OffsetStartTime,r.Duration)<=a.Duration&&(n=[...t],o.push(e)),n})),{newNTCs:n,insertedNTCs:o}},y=(e,t,a,n)=>{let o=[...e],r=n,s=[];return t.forEach((e=>{let t=[...o];t.splice(r,0,e),t=(0,C.XC)(t,["offsetTime","defaultGap"]);const n=t.at(-1);return(0,u.addTimes)(n.OffsetStartTime,n.Duration)<=a.Duration&&(o=[...t],s.push(e),r++),o})),{newNTCs:o,insertedNTCs:s}},_=(e,t)=>{const a={};return Object.keys(e).forEach((n=>{const o=e[n],r=(0,C.XC)(o,t);a[n]=r})),a},{featuresEnum:N,rowDataTypesEnum:w}=a(21260),{getCorrectedDestIndexForFilteredTable:b,isBasicDragValid:O,isTelTimeBetweenStartAndEndTime:P,getCorrectedDestIndexIfDestIndexIsNtc:R}=a(78638),A=(e,t,a)=>{let n=e;return a[N.FILTER]&&(n=b(e,t)),n=R(n,t),n>1?n:2},F=e=>{let{dragInfo:t,destIndex:a,tableData:n,selectedRows:o}=e;if(t&&!O(t,a))return!1;if(L(n,a))return(0,i.openNotification)("danger","Commercials cannot be placed before NTC"),!1;let r=n[a-1],s=M(o,r);return s?(s.length<o.length&&(0,i.openNotification)("danger","One or more Commercials are out of time band"),s):((0,i.openNotification)("danger","Commercials are out of time band"),!1)},L=(e,t)=>e[t].F_C_S_P===w.NTC,M=(e,t)=>{const a=[];return e.forEach((e=>{P(t,e)&&a.push(e)})),a.length>0&&a},v=(e,t,a,n,o)=>{try{const r=e.source.droppableId,s=e.destination.droppableId,l=n.length>0?n:[a[e.source.index]];let i,u=[...t];if(r===c.droppableIdsEnum.SECONDARY&&s===c.droppableIdsEnum.SECONDARY)i=G(e,a,l,o);else if(r===c.droppableIdsEnum.SECONDARY&&s===c.droppableIdsEnum.SCHEDULING){const n=x(e,t,a,l,o);if(!n)return!1;u=n.newSchTableData,i=n.newSecTableData}return{newSchTableData:u,newSecTableData:i}}catch(r){throw r}},G=(e,t,a,n)=>{try{let o=[...t],r=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SECONDARY,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),s=((e,t,a)=>{const n=e.source.index,o=e.destination.index;let r=o;return a[N.FILTER]&&(r=b(o,t)),n<r&&(r+=1),r})(e,t,n);return o.splice(s,0,...r),o=(0,l.removeRowsFromTableData)(a,o),o}catch(o){throw o}},x=(e,t,a,n,o)=>{try{let r=[...t],s=[...a],i=A(e.destination.index,t,o);const c=F({dragInfo:e,destIndex:i,tableData:t,selectedRows:n});return!!c&&(r.splice(i,0,...c),s=(0,l.removeRowsFromTableData)(c,s),{newSchTableData:r,newSecTableData:s})}catch(r){throw r}},{featuresEnum:k,rowDataTypesEnum:Z,pagesEnum:B}=a(21260),{getCorrectedDestIndexForFilteredTable:U,getCorrectedDestIndexIfDestIndexIsNtc:W}=a(78638),H=(e,t,a,n)=>{let o=e;return a[k.FILTER]&&(o=U(e,t)),o=W(o,t),n===B.PROMO&&t[o-1].F_C_S_P===Z.COMMERCIAL&&(o-=1),o>1?o:2},j=(e,t,a,n)=>{try{let o=[...t],r=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SECONDARY,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),s=(0,l.getCorrectedDestIndexForIntraTableDrag)(e,t,n);return o.splice(s,0,...r),o=(0,l.removeRowsFromTableData)(a,o),o}catch(o){throw o}},V=(e,t,a,n,o)=>{try{let r=[...t],s=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),i=H(e.destination.index,t,n,o);return r.splice(i,0,...s),r}catch(r){throw r}},{featuresEnum:Y,rowDataTypesEnum:z,pagesEnum:K}=a(21260),{getCorrectedDestIndexForFilteredTable:q,getCorrectedDestIndexIfDestIndexIsNtc:X}=a(78638),J=(e,t,a,n)=>{let o=e;return a[Y.FILTER]&&(o=q(e,t)),o=X(o,t),n===K.SONG&&t[o-1].F_C_S_P===z.COMMERCIAL&&(o-=1),o>1?o:2},Q=(e,t,a,n)=>{try{let o=[...t],r=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SECONDARY,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),s=(0,l.getCorrectedDestIndexForIntraTableDrag)(e,t,n);return o.splice(s,0,...r),o=(0,l.removeRowsFromTableData)(a,o),o}catch(o){throw o}},$=(e,t,a,n,o)=>{try{let r=[...t],s=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),i=J(e.destination.index,t,n,o);return r.splice(i,0,...s),r}catch(r){throw r}},ee=(e,t,a,n)=>{const o=te(e,t),r=ae(o,t),s=(0,l.getNTCParentRow)(a,t),u=(0,l.getRowWithNTC)([s],t,!1),d=(0,i.getGroupedRows)(u,"NTCGroupCode"),T=(0,i.getGroupedRows)(e,"NTCGroupCode");let m;return m=Object.keys(r).includes(s.rowId)?ne({srcParentRowsWithGroupedNTCs:r,destParentRow:s,destParentNTCs:u,destParentGroupedNTCs:d,selectedGroupedNTCs:T,selNTCs:e,destIndex:a,tableData:t,activeFeatures:n}):re({destParentNTCs:u,destParentGroupedNTCs:d,selectedGroupedNTCs:T,destIndex:a,destParentRow:s,tableData:t,srcParentRowsWithGroupedNTCs:r,activeFeatures:n}),m.insertedNTCs.length<e.length&&(0,i.openNotification)("danger","Some NTCs are not ".concat(n[c.featuresEnum.COPY]?"copied":"moved"," due to insufficient duration")),m},te=(e,t)=>{let a=[];return e.forEach((e=>{a.push((0,l.getNTCParentRow)(e.rowIndex,t))})),a=(0,i.getUniqueObjects)(a,"rowId"),a},ae=(e,t)=>{let a={};return e.forEach((e=>{const n=(0,l.getRowWithNTC)([e],t,!1),o=(0,i.getGroupedRows)(n,"NTCGroupCode");a[e.rowId]=o})),a},ne=e=>{let{srcParentRowsWithGroupedNTCs:t,destParentRow:a,destParentNTCs:n,destParentGroupedNTCs:o,selectedGroupedNTCs:r,selNTCs:s,destIndex:u,tableData:d,activeFeatures:T}=e,m=T[c.featuresEnum.COPY]?o:oe(s,o);const{newGroupedNTCs:p,insertedNTCs:h}=I(m,r,u,a);m=p;const C=(0,i.getFlatArrForGroupedArr)(m);let f=T[c.featuresEnum.COPY]?h.filter((e=>e.BookingDetailID)):h,S=(0,l.getTableDataWithAdditionalInfo)({tableData:C,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),E=[...d];if(E=(0,l.removeRowsFromTableData)(n,E),E.splice(E.findIndex((e=>e.rowId===a.rowId))+1,0,...S),E=(0,l.getTableDataWithAdditionalInfo)({tableData:E,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_INDEX]}),Object.keys(t).length>1){delete t[a.rowId];const e=se(t,f);E=le(e,E)}return{newTableData:E,insertedNTCs:h}},oe=(e,t)=>{const a={},n=e.map((e=>e.rowId));return Object.keys(t).forEach((e=>{let r=[],s="00:00:00:00";t[e].forEach(((e,t)=>{n.includes(e.rowId)?0===t&&(s=e.OffsetStartTime):r.push(e)})),r=(0,C.XC)(r.map((e=>(0,o.Z)((0,o.Z)({},e),{},{OffsetStartTime:s}))),["offsetTime","defaultGap"]),a[e]=r})),a},re=e=>{let{destParentNTCs:t,destParentGroupedNTCs:a,selectedGroupedNTCs:n,destIndex:o,destParentRow:r,tableData:s,srcParentRowsWithGroupedNTCs:u,activeFeatures:d}=e;const{newGroupedNTCs:T,insertedNTCs:m}=I(a,n,o,r),p=(0,i.getFlatArrForGroupedArr)(T);let h=d[c.featuresEnum.COPY]?m.filter((e=>e.BookingDetailID)):m,C=(0,l.getTableDataWithAdditionalInfo)({tableData:p,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),f=[...s];f=(0,l.removeRowsFromTableData)(t,f),f.splice(f.findIndex((e=>e.rowId===r.rowId))+1,0,...C),f=(0,l.getTableDataWithAdditionalInfo)({tableData:f,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_INDEX]});const S=se(u,h);return f=le(S,f),{newTableData:f,insertedNTCs:m}},se=(e,t)=>{const a={},n=t.map((e=>e.rowId));return Object.keys(e).forEach((t=>{const r=e[t];let s={};Object.keys(r).forEach((e=>{const t=r[e],a=t[0].OffsetStartTime;let l=t.filter((e=>!n.includes(e.rowId)));l=l.map((e=>(0,o.Z)((0,o.Z)({},e),{},{OffsetStartTime:a}))),l=(0,C.XC)(l,["offsetTime","defaultGap"]),s[e]=l})),a[t]=s})),a},le=(e,t)=>{let a=[...t];return Object.keys(e).forEach((t=>{const n=a.find((e=>e.rowId===t)),o=(0,l.getRowWithNTC)([n],a,!1);a=(0,l.removeRowsFromTableData)(o,a);const r=e[t],s=(0,i.getFlatArrForGroupedArr)(r);a.splice(a.findIndex((e=>e.rowId===n.rowId))+1,0,...s),a=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_INDEX]})})),a},{rowDataTypesEnum:ie,tableTypesEnum:ce,additionalRowInfoEnum:ue,featuresEnum:de}=a(21260),{getCorrectedDestIndexForIntraTableDrag:Te,getTableDataWithAdditionalInfo:me,removeRowsFromTableData:pe,getCorrectedDestIndexIfDestIndexIsNtc:he}=a(78638),Ce=(e,t,a,n)=>{let o=[...e];const r=me({tableData:t,tableType:ce.SCHEDULING,additionalInfo:[ue.ROW_ID]});return o.splice(a,0,...r),n[de.COPY]||(o=pe(t,o)),o},fe=(e,t,a,n,o,r)=>{let s=[...e];const l=(0,C.RK)({destIndex:t,tableData:s,selectedRows:a,channel:o,isAutoCalculateOffsetTime:r});if(l){let e=me({tableData:l,tableType:ce.SCHEDULING,additionalInfo:[ue.ROW_ID]});s.splice(t,0,...e),l.length<a.length&&(0,i.openNotification)("danger","Some NTCs are not moved due to insufficient duration");let o=n[de.COPY]?l.filter((e=>e.BookingDetailID)):l;s=pe(o,s)}else(0,i.openNotification)("danger","NTCs are out of parent's duration");return{newTableData:s}},Se=(e,t,a,n)=>{const o=((e,t,a)=>{let n=e.destination.index;return n=Te(e,t,a),t[n-1].F_C_S_P===ie.COMMERCIAL&&(n-=1),n>1?n:2})(e,t,n);return Ce(t,a,o,n)},Ee=(e,t,a,n)=>{const o=((e,t,a)=>{let n=e.destination.index;return n=Te(e,t,a),t[n-1].F_C_S_P===ie.COMMERCIAL&&(n-=1),n>1?n:2})(e,t,n);return Ce(t,a,o,n)},De=(e,t,a,n)=>{const o=((e,t,a)=>{let n=e.destination.index;return n=Te(e,t,a),n>1?n:2})(e,t,n);return((e,t,a)=>{let n=[...e];const o=F({destIndex:t,tableData:e,selectedRows:a});if(!o)return!1;const r=me({tableData:o,tableType:ce.SCHEDULING,additionalInfo:[ue.ROW_ID]});return n.splice(t,0,...r),n=pe(o,n),{newTableData:n,validComm:o}})(t,o,a)},Ie=(e,t,a,n,r,s)=>{const l=((e,t,a)=>{let n=e.destination.index;return n=Te(e,t,a),n>1?n:2})(e,t,r);return function(e,t,a,n,r,s,l){let i,c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return!!(0,C.Fs)(e,a,n)&&(i=r?ee(t.map((e=>(0,o.Z)((0,o.Z)({},e),{},{OffsetStartTime:c?"00:00:00:00":e.OffsetStartTime}))),a,n,s):fe(a,n,t,s,l,r),i)}(e,a,t,l,n,r,s)},ge=(e,t,a,n,o,r)=>{let s=[...t];if(a.every((e=>e.F_C_S_P===c.rowDataTypesEnum.NTC)))s=Ie(e,t,a,n,o,r).newTableData;else{let n=[...a];1!==n.length||n[0].F_C_S_P!==c.rowDataTypesEnum.SEGMENT&&n[0].F_C_S_P!==c.rowDataTypesEnum.PROMO&&n[0].F_C_S_P!==c.rowDataTypesEnum.SONG&&n[0].F_C_S_P!==c.rowDataTypesEnum.LIVE||(n=(0,l.getRowWithNTC)(n,t));const r=((e,t,a)=>{let n=e.destination.index;return n=Te(e,t,a),n=he(n,t),n>1?n:2})(e,t,o),i=n.filter((e=>e.F_C_S_P===c.rowDataTypesEnum.COMMERCIAL));let u=[];i.length>0&&(u=F({destIndex:r,tableData:t,selectedRows:i}),u||(u=[]));const d=u.map((e=>e.rowId)),T=n.filter((e=>d.includes(e.rowId)||e.F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL)),m=(0,l.getTableDataWithAdditionalInfo)({tableData:T,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]});s.splice(r,0,...m);let p=[...T];o[c.featuresEnum.COPY]&&(p=p.filter((e=>e.F_C_S_P===c.rowDataTypesEnum.COMMERCIAL||e.F_C_S_P===c.rowDataTypesEnum.NTC&&e.BookingDetailID))),s=(0,l.removeRowsFromTableData)(p,s)}return s},ye=(e,t,a,n,o)=>{try{let r=[...t],s=[...a],i=A(e,t,o);const c=F({destIndex:i,tableData:t,selectedRows:n});return!!c&&(r.splice(i,0,...c),s=(0,l.removeRowsFromTableData)(c,s),{newSchTableData:r,newSecTableData:s})}catch(r){throw r}},_e=a(763);const{CLIENT:Ne}=a(1680),{rowDataTypesEnum:we,bulkInsertPositionEnum:be,tableTypesEnum:Oe,additionalRowInfoEnum:Pe}=a(21260),{isSegmentValid:Re,isRowBetweenValidTime:Ae,getNTCParentRow:Fe,getTableDataWithAdditionalInfo:Le,isRowLastSegment:Me}=a(78638);function ve(e){let{insertPosition:t,time:a,selectedBreaks:n,isSkipLastBreak:o,isOnlyLastBreak:r,selectedRows:s,descriptionType:l,bulkNTCInsDesc:i,durationType:c,bulkNTCInsDuration:u,bulkNTCInsOffsetTime:d,schedulingTableData:T,channel:m,isAutoCalcNtcOffsetTime:p,selProgramsFpcId:h}=e;try{let e=[];return e=m.label===Ne.USA_Forbes?function(e){let{selectedRows:t,time:a,descriptionType:n,bulkNTCInsDesc:o,durationType:r,bulkNTCInsDuration:s,bulkNTCInsOffsetTime:l,schedulingTableData:i,selProgramsFpcId:c}=e;try{let e=[];for(let u=0;u<i.length;u++){const d=i[u];if((d.F_C_S_P===we.PROMO||d.F_C_S_P===we.SONG||d.F_C_S_P===we.LIVE)&&Ae(d,a)&&c.includes(d.FPC_ID)){let a=(0,C.J4)(t,d,n,o,r,s,l);e.push(d),e=(0,C.fn)(e.length-1,e,a)}else e.push(d)}return e}catch(u){throw u}}({selectedRows:s,time:a,descriptionType:l,bulkNTCInsDesc:i,durationType:c,bulkNTCInsDuration:u,bulkNTCInsOffsetTime:d,schedulingTableData:T,selProgramsFpcId:h}):function(e){let{insertPosition:t,time:a,selectedBreaks:n,isSkipLastBreak:o,isOnlyLastBreak:r,selectedRows:s,descriptionType:l,bulkNTCInsDesc:i,durationType:c,bulkNTCInsDuration:u,bulkNTCInsOffsetTime:d,schedulingTableData:T,isAutoCalcNtcOffsetTime:m,selProgramsFpcId:p}=e;try{let e=[],h=!1;for(let f=0;f<T.length;f++){const S=T[f],E=T[f+1],I=S.F_C_S_P===we.SEGMENT||S.F_C_S_P===we.LIVE;if(S.F_C_S_P===we.CONTENT_TERMINATION?h=!1:I&&(h=Re(S,a,n,p)),h&&o&&(h=!Me(S,T)),r&&(h=Me(S,T)&&Re(S,a,null,p)),h){let a=(0,C.J4)(s,S,l,i,c,u,d);if(t===be.START&&I){if(e.push(S),e=Le({tableData:e,tableType:Oe.SCHEDULING,additionalInfo:[Pe.ROW_INDEX]}),m){const{newTableData:t}=D(e[e.length-1],a,e,e.length);e=Le({tableData:t,tableType:Oe.SCHEDULING,additionalInfo:[Pe.ROW_INDEX]})}else e=(0,C.fn)(e.length-1,e,a);continue}if(t===be.END&&(!E||E&&(E.F_C_S_P===we.CONTENT_TERMINATION||E.F_C_S_P===we.SEGMENT))){if(S.F_C_S_P!==we.COMMERCIAL&&S.F_C_S_P!==we.NTC&&S.F_C_S_P!==we.BREAK){if(e.push(S),e=Le({tableData:e,tableType:Oe.SCHEDULING,additionalInfo:[Pe.ROW_INDEX]}),m){const{newTableData:t}=D(e[e.length-1],a,e,e.length);e=Le({tableData:t,tableType:Oe.SCHEDULING,additionalInfo:[Pe.ROW_INDEX]})}else e=(0,C.fn)(e.length-1,e,a);continue}for(let t=e.length-1;t>=0;t--)if(e[t].F_C_S_P!==we.COMMERCIAL&&e[t].F_C_S_P!==we.NTC&&e[t].F_C_S_P!==we.BREAK){if(m){const{newTableData:n}=D(e[t],a,e,t+1);e=Le({tableData:n,tableType:Oe.SCHEDULING,additionalInfo:[Pe.ROW_INDEX]})}else e=(0,C.fn)(t,e,a);break}}}e.push(S),e=Le({tableData:e,tableType:Oe.SCHEDULING,additionalInfo:[Pe.ROW_INDEX]})}return e}catch(h){throw h}}({insertPosition:t,time:a,selectedBreaks:n,isSkipLastBreak:o,isOnlyLastBreak:r,selectedRows:s,descriptionType:l,bulkNTCInsDesc:i,durationType:c,bulkNTCInsDuration:u,bulkNTCInsOffsetTime:d,schedulingTableData:T,isAutoCalcNtcOffsetTime:p,selProgramsFpcId:h}),e}catch(f){throw f}}const Ge=a(763);const xe=(e,t,a)=>{let n=ke(e,t,a);return n=(0,C.Au)(n),n},ke=(e,t,a)=>{let n=[...e];return t.forEach((e=>{n[e.rowIndex]=(0,o.Z)((0,o.Z)({},e),{},{Event_Name:a.Event_Name,Duration:a.Duration,VideoID:a.HouseID,Tape_ID:a.Tape_ID,NtcTypeName:a.NtcTypeName})})),n},Ze=(e,t,a)=>{try{let n=[...t],o=(0,l.getCorrectedDestIndexIfDestIndexIsNtc)(e.destination.index,t);return n.splice(o,0,...a),n}catch(n){throw n}};var Be=a(54689),Ue=a(44410);const We=a(763);var He=a(80184);const je=e=>{let{children:t}=e;const a=(0,m.useSelector)((e=>e.locale.selectedChannel)),I=(0,m.useSelector)((e=>e.auth.session.ChannelSetting))[0],g=(0,m.useSelector)((e=>e.auth.session.token)),[y,_]=(0,n.useState)(null),[N,w]=(0,n.useState)(null),[b,O]=(0,n.useState)(null),[P,R]=(0,n.useState)(null),[A,F]=(0,n.useState)(!1),[L,M]=(0,n.useState)(null),[G,x]=(0,n.useState)(!1),[k,Z]=(0,n.useState)(null),[B,U]=(0,n.useState)([]),[W,Y]=(0,n.useState)([]),[z,K]=(0,n.useState)(s.Nd),[q,X]=(0,n.useState)(0),[ee,te]=(0,n.useState)({originalColumns:[],visibleColumns:[],removedColumns:[]}),[ae,ne]=(0,n.useState)([]),[oe,re]=(0,n.useState)(null),[se,le]=(0,n.useState)([]),[ie,ce]=(0,n.useState)(null),[ue,de]=(0,n.useState)(null),[Te,me]=(0,n.useState)([]),[pe,he]=(0,n.useState)([]),[Ce,fe]=(0,n.useState)(s.Nd),[Ne,be]=(0,n.useState)(0),[Oe,Pe]=(0,n.useState)({originalColumns:[],visibleColumns:[],removedColumns:[]}),[Re,Le]=(0,n.useState)(s.ti),[Me,je]=(0,n.useState)([]),[Ve,Ye]=(0,n.useState)(null),[ze,Ke]=(0,n.useState)([]),[qe,Xe]=(0,n.useState)([]),[Je,Qe]=(0,n.useState)([]),[$e,et]=(0,n.useState)([]),[tt,at]=(0,n.useState)([]),[nt,ot]=(0,n.useState)([]),[rt,st]=(0,n.useState)(""),[lt,it]=(0,n.useState)(!1),[ct,ut]=(0,n.useState)(null),[dt,Tt]=(0,n.useState)(null),[mt,pt]=(0,n.useState)(!1),[ht,Ct]=(0,n.useState)(!1),[ft,St]=(0,n.useState)(!1),[Et,Dt]=(0,n.useState)([]),[It,gt]=(0,n.useState)([]),[yt,_t]=(0,n.useState)([]),Nt=(0,n.useRef)(null),wt=(0,n.useRef)(null),bt=(0,n.useRef)({[c.featuresEnum.ROTATION_INFO]:10,[c.featuresEnum.ROTATION_INFO_WITH_MANAGE_COLUMNS]:10,[c.featuresEnum.HOURWISE_INVENTORY]:10,[c.featuresEnum.SUMMARY]:10,[c.featuresEnum.RULE_CHECK]:10,[c.featuresEnum.DURATION]:10}),Ot=a.label===h.CLIENT.USA_Forbes,Pt=a.label===h.CLIENT.ANI_PLUS;const Rt=async(e,t)=>{let a=W.map((e=>(0,o.Z)({},e))),n=[],r=[],s=[],l=new Map;a.forEach(((e,t)=>{e.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION&&(n.push(t),r.push(0),s.push(0))})),a.forEach(((e,t)=>{if(e.F_C_S_P===c.rowDataTypesEnum.SEGMENT&&n.length>0)for(let a=n.length-1;a>=0;a--)if(t>n[a]){r[a]+=1,s[a]+=(0,i.timeToSeconds)(e.Duration),l.set(t,a);break}})),n.forEach(((e,t)=>{let n=a[e];n.DurationInSeconds=(0,i.timeToSeconds)(n.FPC_TimeTo+":00:00")-(0,i.timeToSeconds)(n.FPC_Time+":00:00"),n.S_Count=r[t],n.Sum_of_S_Duration=s[t]})),a.forEach(((e,t)=>{if(e.F_C_S_P===c.rowDataTypesEnum.SEGMENT&&l.has(t)){let o=l.get(t),r=a[n[o]];r.S_Count>0?e.Calculated_Value=(r.DurationInSeconds-r.Sum_of_S_Duration)/r.S_Count:e.Calculated_Value=0}}));let u=-1;a.forEach(((e,t)=>{if(e.F_C_S_P===c.rowDataTypesEnum.SEGMENT)u=t;else if(-1!==u&&e.F_C_S_P!==c.rowDataTypesEnum.CONTENT_TERMINATION&&e.F_C_S_P!==c.rowDataTypesEnum.NTC&&e.F_C_S_P!==c.rowDataTypesEnum.SEGMENT){let t=(0,i.timeToSeconds)(e.Duration);a[u].Calculated_Value-=t}}));const d=await(0,Be.Fb)(e.value);return a=(0,Be.es)(a,d,t),{newSchedulingTableData:a}},At=e=>{let t=[],a=[];return W.forEach((n=>{e.includes(n.F_C_S_P)?n.F_C_S_P===c.rowDataTypesEnum.COMMERCIAL&&a.push(n):t.push(n)})),{newSchedulingTableData:t,newDropBucket:a}},Ft=async()=>{try{const e=(0,Ue.Lz)(W,oe),t=(0,T.jk)(W,e.startIndex).map((e=>e.rowId));let n=[];for(let r=0;r<W.length;r++){const e=W[r];if(n.push(e),t.includes(e.rowId)){let t=W[r+1];for(;t&&t.F_C_S_P===c.rowDataTypesEnum.NTC;)n.push(t),r++,t=W[r+1];const s=await(0,l.getNTCRowsForSegment)(e,a,N);if(ht){n=n.map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rowIndex:t})));const{newTableData:t,insertedNTCs:a}=D(n.find((t=>t.rowId===e.rowId)),s,n,n.length);n=t}else n.push(...s)}}return{newSchedulingTableData:n}}catch(e){throw e}},Lt=async()=>{try{let e=[];for(let t=0;t<W.length;t++){const n=W[t];if(e.push(n),n.F_C_S_P===c.rowDataTypesEnum.SEGMENT){let r=W[t+1];for(;r&&r.F_C_S_P===c.rowDataTypesEnum.NTC;)e.push(r),t++,r=W[t+1];const s=await(0,l.getNTCRowsForSegment)(n,a,N);if(ht){e=e.map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rowIndex:t})));const{newTableData:t,insertedNTCs:a}=D(e.find((e=>e.rowId===n.rowId)),s,e,e.length);e=t}else e.push(...s)}}return{newSchedulingTableData:e}}catch(e){throw e}},Mt=()=>{let e=[];if((0,l.isDtmfRowsPresent)(W))e=W.filter((e=>!(e.F_C_S_P===c.rowDataTypesEnum.NTC&&"DTM"===e.NtcTypeName)));else for(let t=0;t<W.length;t++){const a=W[t],n=W[t+1],r=n&&(n.F_C_S_P===c.rowDataTypesEnum.SEGMENT||n.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION)||!n;if(0===t)e.push(a);else if(r&&(a.PromoTypeName&&!a.PromoTypeName.toLowerCase().includes("parental rating disclaimer")||"19"!==a.PromoTypeCode)){e.push(a);for(let t=e.length-1;t>0;t--){const a=e[t];if(a.F_C_S_P===c.rowDataTypesEnum.PROMO||a.F_C_S_P===c.rowDataTypesEnum.SONG){e.splice(t+1,0,(0,o.Z)((0,o.Z)({},s.qR.DTMF_IN),{},{OffsetStartTime:a.Tel_Time,Duration:a.Duration}),(0,o.Z)((0,o.Z)({},s.qR.DTMF_OUT),{},{OffsetStartTime:(0,i.subtractTimes)((0,u.addTimes)(a.Tel_Time,a.Duration),"00:00:03:00")}));break}if(a.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION||a.F_C_S_P===c.rowDataTypesEnum.SEGMENT)break}}else e.push(a)}return{newSchedulingTableData:e}},vt=()=>{let e=[];if((0,l.isScteOnRowsPresent)(W))e=W.filter((e=>!(e.F_C_S_P===c.rowDataTypesEnum.NTC&&"SCT"===e.NtcTypeName)));else for(let t=0;t<W.length;t++){const a=W[t];if(0===t)e.push(a);else{const t=(0,i.subtractTimes)((0,u.addTimes)(a.Tel_Time,a.Duration),"00:00:04:00");a.F_C_S_P===c.rowDataTypesEnum.SEGMENT?e.push(a,(0,o.Z)((0,o.Z)({},s.ps),{},{OffsetStartTime:t,Duration:a.Duration})):e.push(a)}}return{newSchedulingTableData:e}},Gt=async()=>{try{const e=(0,Ue.Lz)(W,oe),t=(0,T.jk)(W,e.startIndex).map((e=>e.rowId));let n=[];for(let r=0;r<W.length;r++){const e=W[r];if(n.push(e),t.includes(e.rowId)){let t=W[r+1];for(;t&&t.F_C_S_P===c.rowDataTypesEnum.NTC;)n.push(t),r++,t=W[r+1];const s=await(0,l.getNowNTCsForSegment)(e,a,N,"Now",e.Start_Time);if(ht){n=n.map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rowIndex:t})));const{newTableData:t,insertedNTCs:a}=D(n.find((t=>t.rowId===e.rowId)),s,n,n.length);n=t}else n.push(...s)}}return{newSchedulingTableData:n}}catch(e){throw e}},xt=async()=>{try{const e=(0,Ue.Lz)(W,oe),t=(0,T.jk)(W,e.startIndex).map((e=>e.rowId));let n=[];for(let r=0;r<W.length;r++){const e=W[r];if(n.push(e),t.includes(e.rowId)){let t=W[r+1];for(;t&&t.F_C_S_P===c.rowDataTypesEnum.NTC;)n.push(t),r++,t=W[r+1];const s=await(0,l.getNowNTCsForSegment)(e,a,N,"Next",e.Start_Time);if(ht){n=n.map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rowIndex:t})));const{newTableData:t,insertedNTCs:a}=D(n.find((t=>t.rowId===e.rowId)),s,n,n.length);n=t}else n.push(...s)}}return{newSchedulingTableData:n}}catch(e){throw e}},kt=e=>{let t=[...W];return t.splice(oe.rowIndex+1,0,e),{newSchedulingTableData:t}},Zt=async()=>{try{const e=(0,Ue.Lz)(W,oe),t=W[e.startIndex].ContentCode;let n=[];for(let o=0;o<W.length;o++){const e=W[o];if(n.push(e),e.ContentCode===t&&(!Pt&&e.F_C_S_P===c.rowDataTypesEnum.SEGMENT||e.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION)){let t=W[o+1];for(;t&&t.F_C_S_P===c.rowDataTypesEnum.NTC;)n.push(t),o++,t=W[o+1];const r=await(0,l.getPromoRowsForSegment)(e,a,N);n.push(...r)}}return{newSchedulingTableData:n}}catch(e){throw e}},Bt=async()=>{try{let e=[];for(let t=0;t<W.length;t++){const n=W[t];if(e.push(n),!Pt&&n.F_C_S_P===c.rowDataTypesEnum.SEGMENT||n.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION){let o=W[t+1];for(;o&&o.F_C_S_P===c.rowDataTypesEnum.NTC;)e.push(o),t++,o=W[t+1];const r=await(0,l.getPromoRowsForSegment)(n,a,N);e.push(...r)}}return{newSchedulingTableData:e}}catch(e){throw e}};function Ut(){ne([]),re(null),je([]),Ye(null)}function Wt(){ce(null),de(null),me([]),he([]),fe(s.Nd),be(0),Pe({originalColumns:[],visibleColumns:[],removedColumns:[]}),Le(s.ti),je([]),Ye(null),ot([]),wt.current=null}function Ht(){et([]),at([])}function jt(){try{X((0,l.getTableScrolledOffset)(Nt)),be((0,l.getTableScrolledOffset)(wt))}catch(e){throw e}}return(0,He.jsx)(r.Z.Provider,{value:{page:y,date:N,featuresList:b,activeFeatures:P,loadUnsavedWork:A,unsavedWorkState:L,updateSchedulerStateInRedux:G,schedulingTableName:k,schedulingTableData:W,schTableSortingInfo:z,schedulingTableOffset:q,schedulingTableManagedColumns:ee,schedulingTableSelectedRows:ae,leftClickedSchTableRow:oe,schTableSelectedFilters:se,dropBucket:qe,lastMinuteSpots:Je,secondaryTableName:ie,secondaryTableType:ue,secondaryTableData:pe,secTableSortingInfo:Ce,secondaryTableOffset:Ne,secondaryTableManagedColumns:Oe,secondaryTableSelectedRows:Me,leftClickedSecTableRow:Ve,secTableSelectedFilters:ze,startTime:rt,undoStack:$e,redoStack:tt,schedulingTableRef:Nt,secondaryTableRef:wt,secondaryAreaZindexRef:bt,secTableToolbarState:Re,rotationInfoTableSelectedRows:nt,showLoader:lt,customCellColor:ct,isScheduleAllowedToEdit:dt,isInsertLiveDialogOpen:mt,isAutoCalcNtcOffsetTime:ht,isNtcGroupingEnabled:ft,promoTypeOptions:Et,songTypeOptions:It,ntcTypeOptions:yt,setPage:_,setDate:w,setFeaturesList:O,setActiveFeatures:R,setLoadUnsavedWork:F,setUnsavedWorkState:M,setUpdateSchedulerStateInRedux:x,setSchedulingTableName:Z,setOgSchTableData:U,setSchedulingTableData:Y,setSchTableSortingInfo:K,setSchedulingTableOffset:X,setSchedulingTableManagedColumns:te,setSchedulingTableSelectedRows:ne,setLeftClickedSchTableRow:re,setSchTableSelectedFilters:le,setSecondaryTableName:ce,setSecondaryTableType:de,setOgSecTableData:me,setSecondaryTableData:he,setSecTableSortingInfo:fe,setSecondaryTableOffset:be,setSecondaryTableManagedColumns:Pe,setSecondaryTableSelectedRows:je,setLeftClickedSecTableRow:Ye,setSecTableSelectedFilters:Ke,setStartTime:st,setDropBucket:Xe,setLastMinuteSpots:Qe,setUndoStack:et,setRedoStack:at,setSecTableToolbarState:Le,setRotationInfoTableSelectedRows:ot,setShowLoader:it,setCustomCellColor:ut,setIsScheduleAllowedToEdit:Tt,setIsInsertLiveDialogOpen:pt,setPromoTypeOptions:Dt,setSongTypeOptions:gt,setNtcTypeOptions:_t,executeOperation:async function(e){let{operation:t,dragInfo:n,insertPosition:r,time:m,selectedBreaks:_,isSkipLastBreak:w,isOnlyLastBreak:b,isRandomizeIns:A,isRepeatRandomIns:F,insCountPerSeg:M,isSkipInsInSameProg:G,selectedRowsToDelete:k,selectedRowsToDrop:Z,clickedProgram:z,clickedProgramSchedule:K,newProgramSchedule:q,startTimeValue:ee,tableType:ne,selectedFilters:oe,externalActiveFeatures:re,isHideCommercial:ie,isShowProgramBaseTime:ce,isShowNTC:ue,isFirstLoad:de=!1,isLoadUnsavedWork:Ce=!1,isGenerateLog:fe=!1,customCellColorParam:Ne,mode:be="Add",descriptionType:Oe,bulkNTCInsDesc:Pe,durationType:Re,bulkNTCInsDuration:Le,bulkNTCInsOffsetTime:Be,isShowSCTE:Ue,promoShuffleTemplate:He,deleteEventTypes:je,repeatInsertType:Ve,bulkInsertExactMatchString:Ye,liveRow:$e,newSchTableData:tt,selProgramsFpcId:nt,sortingInfo:ot}=e;try{var st,lt,it,Tt,mt;let e=!0,pt=rt,Et=t===c.operationTypesEnum.RESET_CELL_COLOR?null:Ne||ct;if(t===c.operationTypesEnum.INITIALIZE_SCHEDULER?(e=await async function(e,t,n,r,s){try{Ct(1===I.IsNTCAutoCalc),St(1===I.IsNTCGroup);let u,d,m=[],h=(0,l.getDefaultActiveFeatures)(y,dt);const C=(0,l.getFeaturesList)(y,dt);e&&t?(m=(0,l.getTableDataWithAdditionalInfo)({tableData:L.schedulingTableData,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ACTIONS],channel:a}),h=L.activeFeatures):m=await(0,l.getSchedulingTableData)(n,r,N,y,a);const f=await(0,T.dK)(y,m,g,a);te(f),[c.featuresEnum.MANAGE_COLUMNS]in C&&(h=(0,o.Z)((0,o.Z)({},h),{},{[c.featuresEnum.MANAGE_COLUMNS]:{isDropdownVisible:!1,isActive:f.removedColumns.length>0||(0,i.isJSONArrayEqual)(f.originalColumns,f.visibleColumns)}})),O(C),function(){try{X(0),ut(null),Ut(),Wt(),Ht()}catch(e){throw e}}();let S=m.length>0?m[1].Tel_Time:"";return y!==c.pagesEnum.COMMERCIAL&&y!==c.pagesEnum.FINAL_LOG||(u=await(0,l.getDroppedSpots)(a,(0,p.Tk)(N),m,s),d=await(0,l.getLastMinuteSpots)(a,(0,p.Tk)(N),m,[...u],y,s)),{newSchedulingTableData:m.map((e=>(0,o.Z)((0,o.Z)({},e),{},{DefaultGAP:"00:00:00:00"}))),newSecondaryTableData:[],newDropBucket:u,newLastMinuteSpots:d,newActiveFeatures:h,newStartTime:S}}catch(u){throw u}}(de,Ce,fe,be,t),pt=e.newStartTime):t===c.operationTypesEnum.DRAG_ROW?e=function(e){try{if(!e.destination)return!1;let t=[...W],n=[...pe],o=[...qe],r=[...Je],s=e.source.droppableId;if(s===c.droppableIdsEnum.SECONDARY){if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.PROMO){const a=((e,t,a,n,o,r)=>{try{const s=e.source.droppableId,l=e.destination.droppableId,i=n.length>0?n:[a[e.source.index]];let u,d=[...t];return s===c.droppableIdsEnum.SECONDARY&&l===c.droppableIdsEnum.SECONDARY?u=j(e,a,i,o):s===c.droppableIdsEnum.SECONDARY&&l===c.droppableIdsEnum.SCHEDULING&&(d=V(e,t,i,o,r)),{newSchTableData:d,newSecTableData:u}}catch(s){throw s}})(e,W,pe,Me,P,y);t=a.newSchTableData,n=a.newSecTableData}else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.SONG){const a=((e,t,a,n,o,r)=>{try{const s=e.source.droppableId,l=e.destination.droppableId,i=n.length>0?n:[a[e.source.index]];let u,d=[...t];return s===c.droppableIdsEnum.SECONDARY&&l===c.droppableIdsEnum.SECONDARY?u=Q(e,a,i,o):s===c.droppableIdsEnum.SECONDARY&&l===c.droppableIdsEnum.SCHEDULING&&(d=$(e,t,i,o,r)),{newSchTableData:d,newSecTableData:u}}catch(s){throw s}})(e,W,pe,Me,P,y);t=a.newSchTableData,n=a.newSecTableData}else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.NTC){const o=((e,t,a,n,o,r,s)=>{try{const l=e.source.droppableId,i=e.destination.droppableId,u=n.length>0?n:[a[e.source.index]];let d,T=[...t];if(l===c.droppableIdsEnum.SECONDARY&&i===c.droppableIdsEnum.SECONDARY)d=f(e,a,u,o);else if(l===c.droppableIdsEnum.SECONDARY&&i===c.droppableIdsEnum.SCHEDULING){const n=S(e,t,a,u,o,r,s);if(!n)return!1;T=n.newSchTableData,d=n.newSecTableData}return{newSchTableData:T,newSecTableData:d}}catch(l){throw l}})(e,W,pe,Me,P,a,ht);if(!o)return!1;t=o.newSchTableData,n=o.newSecTableData}else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.DROPPED_SPOTS){const a=v(e,W,pe,Me,P);if(!a)return!1;t=a.newSchTableData,n=a.newSecTableData,o=a.newSecTableData}else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.LAST_MINUTE_SPOTS){const a=v(e,W,pe,Me,P);t=a.newSchTableData,n=a.newSecTableData,r=a.newSecTableData}else if(P[c.featuresEnum.MANAGE_SEGMENT]){const a=((e,t,a,n)=>{try{const o=e.source.droppableId,r=e.destination.droppableId,s=n.length>0?n:[a[e.source.index]];if(o===c.droppableIdsEnum.SECONDARY&&r===c.droppableIdsEnum.SECONDARY)return!1;if(o===c.droppableIdsEnum.SECONDARY&&r===c.droppableIdsEnum.SCHEDULING){let n,o=[...t];const r=[];return s.forEach((e=>{r.push(...(0,T.R6)(a,e))})),o=Ze(e,t,r),{newSchTableData:o,newSecTableData:n}}}catch(o){throw o}})(e,W,pe,Me);if(!a)return!1;t=a.newSchTableData,n=a.newSecTableData}}else{if(s!==c.droppableIdsEnum.SCHEDULING)return!1;{const n=((e,t,a,n,o,r,s)=>{let l=a.length>0?a:[t[e.source.index]];return o===c.pagesEnum.PROMO?Se(e,t,l,n):o===c.pagesEnum.SONG?Ee(e,t,l,n):o===c.pagesEnum.COMMERCIAL?De(e,t,l,n).newTableData:o===c.pagesEnum.NTC?Ie(e,t,l,r,n,s).newTableData:o===c.pagesEnum.FINAL_LOG?ge(e,t,l,r,n,s):void 0})(e,W,ae,P,y,ht,a);if(!n)return!1;t=n}}return{newSchedulingTableData:t,newSecondaryTableData:n,newDropBucket:o,newLastMinuteSpots:r}}catch(t){throw t}}(n):t===c.operationTypesEnum.INSERT_ROW?e=function(){try{let e=[...W],t=[...pe],n=[...qe],o=[...Je],r=ae[0].rowIndex+1;if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.PROMO)e=((e,t,a,n,o)=>{try{let r=[...t],s=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),i=H(e,t,n,o);return r.splice(i,0,...s),r}catch(r){throw r}})(r,W,Me,P,y);else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.SONG)e=((e,t,a,n,o)=>{try{let r=[...t],s=(0,l.getTableDataWithAdditionalInfo)({tableData:a,tableType:c.tableTypesEnum.SCHEDULING,additionalInfo:[c.additionalRowInfoEnum.ROW_ID]}),i=J(e,t,n,o);return r.splice(i,0,...s),r}catch(r){throw r}})(r,W,Me,P,y);else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.NTC){const n=((e,t,a,n,o,r,s)=>{try{let i=[...t],c=[...a],u=(0,C.TT)(e,t,o);const d=(0,C.RK)({destIndex:u,tableData:t,selectedRows:n,channel:r,isAutoCalculateOffsetTime:s});return!!d&&(i.splice(u,0,...d),d[0].BookingDetailID&&(c=(0,l.removeRowsFromTableData)(n,c)),{newSchTableData:i,newSecTableData:c})}catch(i){throw i}})(r,W,pe,Me,P,a,ht);if(!n)return!1;e=n.newSchTableData,t=n.newSecTableData}else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.DROPPED_SPOTS){const a=ye(r,W,pe,Me,P);if(!a)return!1;e=a.newSchTableData,t=a.newSecTableData,n=a.newSecTableData}else{if(P[c.featuresEnum.INSERT].eventType!==c.secondaryTableTypesEnum.LAST_MINUTE_SPOTS)return!1;{const a=ye(r,W,pe,Me,P);if(!a)return!1;e=a.newSchTableData,t=a.newSecTableData,o=a.newSecTableData}}return{newSchedulingTableData:e,newSecondaryTableData:t,newDropBucket:n,newLastMinuteSpots:o}}catch(e){throw e}}():t===c.operationTypesEnum.REPEAT_INSERT_ROW?e=function(e){try{let t=[...W],n=ae[0].rowIndex+1;if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.NTC){const o=((e,t,a,n,o,r,s)=>{try{let c=[...t],u=e,d=[...a],T=0;for(;d.length>0;){if("randomizeInsert"===s&&(d=We.shuffle(d)),u=(0,C.TT)(u,c,n),!(0,C.Fs)(void 0,c,u,o))return!1;let e=(0,l.getNTCParentRow)(u,c);if(r){const{newTableData:t,insertedNTCs:a}=D(e,d,c,u);if(0===T&&0===a.length)return(0,i.openNotification)("danger","NTCs are out of parent duration"),!1;T++,c=t,d=a,u+=a.length}}return{newSchTableData:c}}catch(c){throw c}})(n,W,Me,P,a,ht,e);if(!o)return!1;t=o.newSchTableData}return{newSchedulingTableData:t}}catch(t){throw t}}(Ve):t===c.operationTypesEnum.BULK_INSERT_ROW?e=function(e){let{insertPosition:t,time:n,selectedBreaks:o,isSkipLastBreak:r,isOnlyLastBreak:s,isRandomizeIns:i,isRepeatRandomIns:u,insCountPerSeg:d,isSkipInsInSameProg:T,selectedRows:m,descriptionType:p,bulkNTCInsDesc:C,durationType:f,bulkNTCInsDuration:S,bulkNTCInsOffsetTime:E,selProgramsFpcId:D}=e,I=[];if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.PROMO)I=function(e,t,a,n,o,r,s,i,u,d,T,m,p,C){let f=p===h.CLIENT.USA_Forbes,S=[],E=!1;for(let h=0;h<m.length;h++){const p=m[h],D=m[h+1],I=p.F_C_S_P===c.rowDataTypesEnum.SEGMENT,g=p.F_C_S_P===c.rowDataTypesEnum.LIVE;if(p.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION?E=!1:I?E=(0,l.isSegmentValid)(p,t,a,T):g&&(E=(0,l.isSegmentValid)(p,t,a,T)&&!f),E&&n&&(E=!(0,l.isRowLastSegment)(p,m)),o&&(E=(0,l.isRowLastSegment)(p,m)&&(0,l.isSegmentValid)(p,t,null,T)),E){let t=u?[...d].filter((e=>e.ContentCode!==p.ContentCode)):[...d];if(e===c.bulkInsertPositionEnum.START&&I){if(r)if(s)S.push(p,...Ge.shuffle(t));else{const e=Ge.shuffle(t),a=e.slice(0,i);t=e.slice(i,e.length),S.push(p,...a)}else S.push(p,...t);continue}if(e===c.bulkInsertPositionEnum.END&&(!D||D&&(D.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION||D.F_C_S_P===c.rowDataTypesEnum.SEGMENT))){if(C!==c.pagesEnum.PROMO||p.F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL&&p.F_C_S_P!==c.rowDataTypesEnum.BREAK){if(r)if(s)S.push(p,...Ge.shuffle(t));else{const e=Ge.shuffle(t),a=e.slice(0,i);t=e.slice(i,e.length),S.push(p,...a)}else S.push(p,...t);continue}for(let e=S.length-1;e>=0;e--)if(S[e].F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL&&S[e].F_C_S_P!==c.rowDataTypesEnum.BREAK){let a=t;if(r)if(s)a=Ge.shuffle(t);else{const e=Ge.shuffle(t);a=e.slice(0,i),t=e.slice(i,e.length)}S.splice(e+1,0,...a);break}}}S.push(p)}return S}(t,n,o,r,s,i,u,d,T,m,D,W,a,y);else if(P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.SONG)I=function(e,t,a,n,o,r,s,i,u,d,T,m,p,C){let f=p===h.CLIENT.USA_Forbes,S=[],E=!1;for(let h=0;h<m.length;h++){const p=m[h],D=m[h+1],I=p.F_C_S_P===c.rowDataTypesEnum.SEGMENT,g=p.F_C_S_P===c.rowDataTypesEnum.LIVE;if(p.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION?E=!1:I?E=(0,l.isSegmentValid)(p,t,a,T):g&&(E=(0,l.isSegmentValid)(p,t,a,T)&&!f),E&&n&&(E=!(0,l.isRowLastSegment)(p,m)),o&&(E=(0,l.isRowLastSegment)(p,m)&&(0,l.isSegmentValid)(p,t,null,T)),E){let t=u?[...d].filter((e=>e.ContentCode!==p.ContentCode)):[...d];if(e===c.bulkInsertPositionEnum.START&&I){if(r)if(s)S.push(p,..._e.shuffle(t));else{const e=_e.shuffle(t),a=e.slice(0,i);t=e.slice(i,e.length),S.push(p,...a)}else S.push(p,...t);continue}if(e===c.bulkInsertPositionEnum.END&&(!D||D&&(D.F_C_S_P===c.rowDataTypesEnum.CONTENT_TERMINATION||D.F_C_S_P===c.rowDataTypesEnum.SEGMENT))){if(C!==c.pagesEnum.SONG||p.F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL&&p.F_C_S_P!==c.rowDataTypesEnum.BREAK){if(r)if(s)S.push(p,..._e.shuffle(t));else{const e=_e.shuffle(t),a=e.slice(0,i);t=e.slice(i,e.length),S.push(p,...a)}else S.push(p,...t);continue}for(let e=S.length-1;e>=0;e--)if(S[e].F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL&&S[e].F_C_S_P!==c.rowDataTypesEnum.BREAK){let a=t;if(r)if(s)a=_e.shuffle(t);else{const e=_e.shuffle(t);a=e.slice(0,i),t=e.slice(i,e.length)}S.splice(e+1,0,...a);break}}}S.push(p)}return S}(t,n,o,r,s,i,u,d,T,m,D,W,a);else{if(P[c.featuresEnum.INSERT].eventType!==c.secondaryTableTypesEnum.NTC)return!1;I=ve({insertPosition:t,time:n,selectedBreaks:o,isSkipLastBreak:r,isOnlyLastBreak:s,selectedRows:m,descriptionType:p,bulkNTCInsDesc:C,durationType:f,bulkNTCInsDuration:S,bulkNTCInsOffsetTime:E,schedulingTableData:W,channel:a,isAutoCalcNtcOffsetTime:ht,selProgramsFpcId:D})}return{newSchedulingTableData:I}}({insertPosition:r,time:m,selectedBreaks:_,isSkipLastBreak:w,isOnlyLastBreak:b,isRandomizeIns:A,isRepeatRandomIns:F,insCountPerSeg:M,isSkipInsInSameProg:G,selectedRows:Me.map((e=>(0,o.Z)((0,o.Z)({},e),{},{VideoID:e.HouseID}))),descriptionType:Oe,bulkNTCInsDesc:Pe,durationType:Re,bulkNTCInsDuration:Le,bulkNTCInsOffsetTime:Be,selProgramsFpcId:nt}):t===c.operationTypesEnum.BULK_INSERT_BELOW_EXACT_MATCH?e=await async function(e){let{time:t,bulkInsertExactMatchString:a,selectedRows:n,selProgramsFpcId:r}=e,s=[];P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.NTC&&(s=await function(e,t,a,n,r,s){return new Promise(((l,c)=>{try{let c=[],u=null;for(let l=0;l<a.length;l++){const i=a[l];if(c.push(i),c=c.map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rowIndex:t}))),s.includes(i.FPC_ID)&&(i.F_C_S_P===we.SEGMENT||i.F_C_S_P===we.PROMO||i.F_C_S_P===we.SONG)&&i.Event_Name.toLowerCase().includes(t.toLowerCase())&&Ae(i,e)){const e=c.length;let t=Fe(e,c);if(r){const{newTableData:a,insertedNTCs:r}=D(t,n,c,e);r.length>0&&null===u&&(u=!0),r.length>0&&(c=a.map(((e,t)=>(0,o.Z)((0,o.Z)({},e),{},{rowIndex:t}))))}}}null===u&&((0,i.openNotification)("danger","No NTC parent with exact match found"),c=!1),l(c)}catch(u){c(u)}}))}(t,a,W,n,ht,r));return!!s&&{newSchedulingTableData:s}}({time:m,bulkInsertExactMatchString:Ye,selectedRows:Me.map((e=>(0,o.Z)((0,o.Z)({},e),{},{VideoID:e.HouseID}))),selProgramsFpcId:nt}):t===c.operationTypesEnum.SHOW_SCTE?e=function(e){try{let t=[];if(e){let e=s.nN.map((e=>(0,o.Z)((0,o.Z)({},e),{},{VideoID:e.HouseID})));e=(0,C.J4)(e,void 0,c.ntcDescriptionTypesEnum.CUSTOM,"",c.ntcDurationTypesEnum.CUSTOM,"00:00:00:00","00:00:00:00");for(let a=0;a<W.length;a++){const n=W[a];n.F_C_S_P===c.rowDataTypesEnum.BREAK?(t.push(e[0]),t.push(n),t.push(e[1])):t.push(n)}}else t=W.filter((e=>"SCTE ON"!==e.Event_Name&&"SCTE OFF"!==e.Event_Name));return{newSchedulingTableData:t}}catch(t){throw t}}(Ue):t===c.operationTypesEnum.REPLACE_ROW?e=function(){try{const e=Me[0];let t=[...W];return P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.PROMO?t=((e,t,a)=>{let n=[...e];return t.forEach((e=>{n[e.rowIndex]=(0,o.Z)((0,o.Z)({},e),{},{Event_Name:a.Event_Name,Duration:a.Duration,VideoID:a.HouseID,Tape_ID:a.Tape_ID,PromoCode:a.PromoCode,PromoTypeCode:a.PromoType})})),n})(W,ae,e):P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.SONG?t=((e,t,a)=>{let n=[...e];return t.forEach((e=>{n[e.rowIndex]=(0,o.Z)((0,o.Z)({},e),{},{Event_Name:a.Event_Name,Duration:a.Duration,VideoID:a.HouseID,Tape_ID:a.Tape_ID,SongCode:a.SongCode,SongTypeCode:a.SongTypeCode,SongCategoryCode:a.SongCategoryCode})})),n})(W,ae,e):P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.NTC&&(t=((e,t,a,n)=>{let o;return o=n?xe(e,t,a):ke(e,t,a),o})(W,ae,e,ht)),{newSchedulingTableData:t}}catch(e){throw e}}():t===c.operationTypesEnum.REPLACE_ALL_ROW?e=function(){try{let e=[...W];const t=(0,i.getUniqueObjects)(ae,"Event_Name").map((e=>e.Event_Name)),a=Me[0];return P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.PROMO?e=((e,t,a)=>e.map((e=>{const n=(0,o.Z)({},e);return t.includes(e.Event_Name)&&(n.Event_Name=a.Event_Name,n.Duration=a.Duration,n.VideoID=a.HouseID,n.Tape_ID=a.Tape_ID,n.PromoCode=a.PromoCode,n.PromoTypeCode=a.PromoTypeCode),n})))(e,t,a):P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.SONG?e=((e,t,a)=>e.map((e=>{const n=(0,o.Z)({},e);return t.includes(e.Event_Name)&&(n.Event_Name=a.Event_Name,n.Duration=a.Duration,n.VideoID=a.HouseID,n.Tape_ID=a.Tape_ID,n.SongCode=a.SongCode,n.SongTypeCode=a.SongTypeCode,n.SongCategoryCode=a.SongCategoryCode),n})))(e,t,a):P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.NTC&&(e=((e,t,a)=>e.map((e=>{const n=(0,o.Z)({},e);return t.includes(e.Event_Name)&&(n.Event_Name=a.Event_Name,n.Duration=a.Duration,n.VideoID=a.HouseID,n.Tape_ID=a.Tape_ID,n.NtcTypeName=a.NtcTypeName),n})))(e,t,a)),{newSchedulingTableData:e}}catch(e){throw e}}():t===c.operationTypesEnum.DELETE_ROW?e=function(e){try{let t=e.map((e=>e.rowId)),a=[];if(ht){let e=null;W.forEach(((n,r)=>{let s=(0,o.Z)({},n);if(t.includes(n.rowId)){const t=W[r-1],a=W[r+1],o=n.F_C_S_P===c.rowDataTypesEnum.NTC,s=t.F_C_S_P===c.rowDataTypesEnum.NTC,l=t.NTCGroupCode===n.NTCGroupCode,i=n.NTCGroupCode===(null===a||void 0===a?void 0:a.NTCGroupCode);o&&(!s&&a&&i||s&&!l&&a&&i)&&(e=n.OffsetStartTime)}else n.F_C_S_P===c.rowDataTypesEnum.NTC&&e&&(s.OffsetStartTime=e,s.StartTime=e,s.Tel_Time=e,e=null),a.push(s)})),a=(0,C.Au)(a)}else a=[...W].filter((e=>!t.includes(e.rowId)));return{newSchedulingTableData:a,newSecondaryTableData:pe}}catch(t){throw t}}(k):t===c.operationTypesEnum.DROP_ROW?e=function(e){try{var t;let a,n,o=e.map((e=>e.rowId)),r=[...W].filter((e=>!o.includes(e.rowId))),s=(0,l.removeAdditionalInfoFromRows)(e);return a=Array.isArray(qe)&&qe.length>0?[...qe,...s]:[(0,T.Lp)(s[0]),...s],n=null!==(t=P[c.featuresEnum.INSERT])&&void 0!==t&&t.isActive&&P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.DROPPED_SPOTS?[...a]:[...pe],{newSchedulingTableData:r,newSecondaryTableData:n,newDropBucket:a}}catch(a){throw a}}(Z):t===c.operationTypesEnum.REPLACE_PROGRAM?e=function(e,t,a){try{const n=(0,l.getSegmentWiseContent)(t),o=(0,l.getProgramWithSegmentContent)(a,n,e);return{newSchedulingTableData:(0,l.updateProgramInSchedulingTableData)(e,o,W),newSecondaryTableData:pe}}catch(n){throw n}}(z,K,q):t===c.operationTypesEnum.MANAGE_START_TIME?pt=ee:t===c.operationTypesEnum.FILTER_ROW?(e=function(e,t){try{let a=[...W],n=[...pe],o=[...qe],r=[...Je];return e.forEach((e=>{var s,i;e===c.tableTypesEnum.SCHEDULING?(a=(0,l.getFilteredTableData)(a,t),0===t.length&&le([])):(n=(0,l.getFilteredTableData)(n,t),(null===(s=P[c.featuresEnum.INSERT])||void 0===s?void 0:s.eventType)===c.secondaryTableTypesEnum.DROPPED_SPOTS?o=[...n]:(null===(i=P[c.featuresEnum.INSERT])||void 0===i?void 0:i.eventType)===c.secondaryTableTypesEnum.LAST_MINUTE_SPOTS&&(r=[...n]),0===t.length&&Ke([]))})),{newSchedulingTableData:a,newSecondaryTableData:n,newDropBucket:o,newLastMinuteSpots:r}}catch(a){throw a}}(ne,oe),ne.includes(c.tableTypesEnum.SCHEDULING)&&U(e.newSchedulingTableData),ne.includes(c.tableTypesEnum.SECONDARY)&&me(e.newSecondaryTableData)):t===c.operationTypesEnum.SORT?e=function(e){if(e.tableType===c.tableTypesEnum.SCHEDULING){let t=[];return t="none"===e.sort?[...B]:[B[0],...(0,i.sortArray)(B.slice(1),e.column,e.sort)],{newSchedulingTableData:t}}{let t=[];return t="none"===e.sort?[...Te]:[Te[0],...(0,i.sortArray)(Te.slice(1),e.column,e.sort)],P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.DROPPED_SPOTS?{newSecondaryTableData:t,newDropBucket:t}:P[c.featuresEnum.INSERT].eventType===c.secondaryTableTypesEnum.LAST_MINUTE_SPOTS?{newSecondaryTableData:t,newLastMinuteSpots:t}:{newSecondaryTableData:t}}}(ot):t===c.operationTypesEnum.HIDE_COMMERCIAL?e=function(e,t){try{let a=(0,l.getFilteredTableData)([...W],[...se,{columnKey:"F_C_S_P",filter:c.tableFilterOptionsEnum.HIDE_COMMERCIAL,searchValue:e.toString()}]);const n=a.shift();return a=(0,d.a1)(a,P[c.featuresEnum.SHOW_PROGRAM_BASE_TIME],e,void 0,t,Number(I.FramePerSec)),{newSchedulingTableData:[n,...a],newSecondaryTableData:[...pe]}}catch(a){throw a}}(ie,pt):t===c.operationTypesEnum.SHOW_PROGRAM_BASE_TIME?e=function(e,t){try{let a=[...W];const n=a.shift();return a=(0,d.a1)(a,e,P[c.featuresEnum.HIDE_COMMERCIALS],void 0,t,Number(I.FramePerSec)),{newSchedulingTableData:[n,...a],newSecondaryTableData:[...pe]}}catch(a){throw a}}(ce,pt):t===c.operationTypesEnum.SHOW_NTC?e=function(e){try{return{newSchedulingTableData:(0,l.getFilteredTableData)([...W],[...se,{columnKey:"F_C_S_P",filter:c.tableFilterOptionsEnum.SHOW_NTC,searchValue:e.toString()}]),newSecondaryTableData:[...pe]}}catch(t){throw t}}(ue):t===c.operationTypesEnum.INSERT_NTC_BY_START_TIME?e=function(){try{let e=[...W],t=[...pe];const n=Me[0].Start_Time,o=(0,u.addTimes)(n,Me[0].Duration);let r=e.findIndex(((e,t)=>0!==t&&(e.F_C_S_P!==c.rowDataTypesEnum.CONTENT_TERMINATION&&e.F_C_S_P!==c.rowDataTypesEnum.COMMERCIAL&&e.F_C_S_P!==c.rowDataTypesEnum.NTC&&n>=e.Start_Time&&o<=(0,u.addTimes)(e.Start_Time,e.Duration))));if(-1===r)return(0,i.openNotification)("danger","No valid insertion point found"),{newSchedulingTableData:e,newSecondaryTableData:t};{r+=1;let n=(0,l.getNTCParentRow)(r,W),o=[...Me].map((e=>(0,l.updateOffsetStartTime)(e,n)));const s=E(e,t,r,o,a,ht);return!!s&&(e=s.newSchTableData,t=s.newSecTableData,{newSchedulingTableData:e,newSecondaryTableData:t})}}catch(e){throw e}}():t===c.operationTypesEnum.PROMO_AUTO_SHUFFLE?e=await Rt(He,m):t===c.operationTypesEnum.DELETE_EVENTS?e=At(je):t===c.operationTypesEnum.IMPORT_NTCS_FOR_SEL_CONTENT?e=await Ft():t===c.operationTypesEnum.IMPORT_NTCS_FOR_ALL_CONTENTS?e=await Lt():t===c.operationTypesEnum.TOGGLE_DTMF_PATTERN?e=Mt():t===c.operationTypesEnum.TOGGLE_SCTE_ON_PATTERN?e=vt():t===c.operationTypesEnum.INSERT_NOW_NTCS?e=await Gt():t===c.operationTypesEnum.INSERT_NEXT_NTCS?e=await xt():t===c.operationTypesEnum.INSERT_LIVE_EVENT?e=kt($e):t===c.operationTypesEnum.IMPORT_PROMOS_FOR_SEL_CONTENT?e=await Zt():t===c.operationTypesEnum.IMPORT_PROMOS_FOR_ALL_CONTENTS?e=await Bt():t===c.operationTypesEnum.UPDATE_TABLE&&(e={newSchedulingTableData:tt}),!e)return!1;let Dt=null!==(st=e)&&void 0!==st&&st.newSchedulingTableData?e.newSchedulingTableData:[...W],It=null!==(lt=e)&&void 0!==lt&&lt.newSecondaryTableData?e.newSecondaryTableData:[...pe],gt=null!==(it=e)&&void 0!==it&&it.newDropBucket?e.newDropBucket:[...qe],yt=null!==(Tt=e)&&void 0!==Tt&&Tt.newLastMinuteSpots?e.newLastMinuteSpots:[...Je],_t=null!==(mt=e)&&void 0!==mt&&mt.newActiveFeatures?e.newActiveFeatures:re||(P||(0,l.getDefaultActiveFeatures)(y));if(t!==c.operationTypesEnum.FILTER_ROW&&t!==c.operationTypesEnum.HIDE_COMMERCIAL&&t!==c.operationTypesEnum.SHOW_PROGRAM_BASE_TIME&&t!==c.operationTypesEnum.SHOW_NTC&&!Ce){const e=(0,l.finalizeData)({schedulingTableData:Dt,secondaryTableData:It,dropBucket:gt,lastMinuteSpots:yt,startTime:pt,newActiveFeatures:_t,customCellColor:Et,page:y,channel:a,isNtcGroupingEnabled:ft,isFirstLoad:de,frames:Number(I.FramePerSec)});Dt=e.newSchedulingTableData,It=e.newSecondaryTableData,gt=e.newDropBucket,yt=e.newLastMinuteSpots}return Dt=Ot?Dt.map((e=>(0,o.Z)((0,o.Z)({},e),{},{isHidden:e.F_C_S_P===c.rowDataTypesEnum.SEGMENT&&!0}))):Dt,Y(Dt),t!==c.operationTypesEnum.SORT&&U(Dt),he(It),Xe(gt),Qe(yt),x(!0),R(_t),Et=Et||(0,l.getCustomCellColorFromTable)(Dt),ut(Et),t!==c.operationTypesEnum.INITIALIZE_SCHEDULER&&(et((e=>[...e,{schedulingTableData:[...W],secondaryTableData:[...pe],dropBucket:Array.isArray(qe)?[...qe]:e.length>0&&[e.length-1].dropBucket?[e.length-1].dropBucket:null,schTableSelectedFilters:[...se],secTableSelectedFilters:[...ze],customCellColor:(0,o.Z)({},ct)}])),at([]),Ut(),jt()),{newSchedulingTableData:Dt,newSecondaryTableData:It,newDropBucket:gt}}catch(pt){throw pt}},resetAllSelectedRows:Ut,resetSecondaryTableStates:Wt,resetUndoRedoStacks:Ht,maintainScrolledOffsetOfTables:jt,resetPage:function(){w(null),O(null),R(null),F(!1),M(null),x(!1),Z(null),U([]),Y([]),K(s.Nd),X(0),te({originalColumns:[],visibleColumns:[],removedColumns:[]}),ne([]),re(null),le([]),ce(null),de(null),me([]),he([]),fe(s.Nd),be(0),Pe({originalColumns:[],visibleColumns:[],removedColumns:[]}),Le(s.ti),je([]),Ye(null),Ke([]),Xe([]),Qe([]),et([]),at([]),ot([]),st(""),it(!1),ut(null),Nt.current=null,wt.current=null}},children:t})};var Ve=a(36064);var Ye=a(57689);const ze=(0,n.lazy)((()=>Promise.all([a.e(6856),a.e(8536),a.e(2758)]).then(a.bind(a,42758)))),Ke=(0,n.lazy)((()=>a.e(7194).then(a.bind(a,97194)))),qe=(0,n.lazy)((()=>a.e(5682).then(a.bind(a,45682))));function Xe(){const e=(0,m.useSelector)((e=>e.locale.selectedChannel)),t=(0,m.useSelector)((e=>e.base.common.Path)),a=(0,m.useDispatch)(),{page:o,setPage:s,date:l,setDate:i,showLoader:u,resetPage:d}=(0,n.useContext)(r.Z),T=(0,Ye.TH)();(0,n.useEffect)((()=>C),[]),(0,n.useEffect)((()=>{d()}),[e]),(0,n.useEffect)((()=>{T.state&&T.state.date&&i(T.state.date)}),[T.state]),(0,n.useEffect)((()=>{try{s(f())}catch(e){console.error(e)}}),[t]),(0,n.useEffect)((()=>{try{((e,t,a,n,o)=>{try{const r=document.getElementsByClassName("Gbox2")[0],s=document.getElementsByClassName("Gbox2")[0].children[1];e===c.pagesEnum.PROMO?t(a([(0,p.Tk)(n),"Promo Scheduling"])):e===c.pagesEnum.SONG?t(a([(0,p.Tk)(n),"Song Scheduling"])):e===c.pagesEnum.COMMERCIAL?t(a([(0,p.Tk)(n),"Commercial Scheduling"])):e===c.pagesEnum.NTC?t(a([(0,p.Tk)(n),"NTC Scheduling"])):e===c.pagesEnum.FINAL_LOG&&t(a([(0,p.Tk)(n),o.label===h.CLIENT.USA_Forbes?"PlayList Final":"Final Log"])),r&&(r.style.display="block",s.style.display="block")}catch(r){throw r}})(o,a,Ve.rh,l,e)}catch(t){console.error(t)}}),[o,l]);const C=()=>{try{const e=document.getElementsByClassName("Gbox2")[0],t=document.getElementsByClassName("Gbox2")[0].children[1];e&&(e.style.display="none",t.style.display="none")}catch(e){throw e}},f=()=>{try{let e=null;return t.length>0&&(e=t.split("/").slice(-1)[0].toLowerCase()),e}catch(e){throw e}};return(0,He.jsxs)(n.Suspense,{fallback:(0,He.jsx)(qe,{showLoader:!0}),children:[o&&(0,He.jsx)(He.Fragment,{children:l?(0,He.jsx)(ze,{}):(0,He.jsx)(Ke,{})}),(0,He.jsx)(qe,{showLoader:u})]})}const Je=function(){return(0,He.jsx)(je,{children:(0,He.jsx)(Xe,{})})}},44410:(e,t,a)=>{a.d(t,{Lz:()=>l,N9:()=>c,Pi:()=>u,gm:()=>i,ih:()=>s});var n=a(81320),o=a(21260),r=a(76061);const s=e=>{try{const t=e.length;let a="00:00:00:00";return e.forEach((e=>a=(0,r.addTimes)(a,e.Duration))),"".concat(t,"-[").concat(a.slice(0,11),"]")}catch(t){(0,n.openNotification)("danger","Something went wrong while fetching summary"),console.error(t)}},l=(e,t)=>{try{if(t){const a=e.findIndex((e=>e.rowId===t.rowId));let n,r;const s=e.slice(0,a+1);for(let t=s.length-1;t>=0;t--)if(s[t].F_C_S_P===o.rowDataTypesEnum.CONTENT_TERMINATION){n=e.findIndex((e=>e.rowId===s[t].rowId));break}for(let t=a+1;t<e.length;t++)if(e[t].F_C_S_P===o.rowDataTypesEnum.CONTENT_TERMINATION){r=e.findIndex((a=>a.rowId===e[t].rowId))-1;break}return{startIndex:n||1,endIndex:r||e.length-1}}return{startIndex:null,endIndex:null}}catch(a){throw a}},i=(e,t,a,o)=>{try{let n="00:00:00:00";if(a&&null!==e.startIndex&&null!==e.endIndex){t.slice(e.startIndex,e.endIndex+1).filter((e=>e.F_C_S_P===o)).forEach((e=>{n=(0,r.addTimes)(n,e.Duration)}))}return n}catch(s){(0,n.openNotification)("danger","Something went wrong while fetching summary"),console.error(s)}},c=(e,t,a)=>{try{let r="00:00:00:00";if(a&&null!==e.startIndex&&null!==e.endIndex){const a=t[e.startIndex];a.F_C_S_P===o.rowDataTypesEnum.CONTENT_TERMINATION&&(r=(0,n.subtractTimes)("".concat(a.FPC_TimeTo,":00:00"),"".concat(a.FPC_Time,":00:00")))}return r}catch(r){(0,n.openNotification)("danger","Something went wrong while fetching summary"),console.error(r)}},u=(e,t,a)=>{try{let n="00:00:00:00";if(a&&null!==e.startIndex&&null!==e.endIndex)for(let a=e.startIndex;a<=e.endIndex;a++)t[a]&&t[a].F_C_S_P!==o.rowDataTypesEnum.NTC&&(n=(0,r.addTimes)(n,t[a].Duration));return n}catch(n){throw n}}},54689:(e,t,a)=>{a.d(t,{Fb:()=>l,at:()=>s,es:()=>i});var n=a(31562),o=a(81320),r=a(21260);const s=async e=>{let t=[];try{let a={LocationCode:e.LocationCode,ChannelCode:e.ChannelCode};const r=await(0,n.H6)(a);200===r.status?t=r.data.map((e=>({label:e.TemplateNo,value:e.TemplateNo}))):204===r.status?(0,o.openNotification)("info","No templates found"):(0,o.openNotification)("danger","Something went wrong while retrieving Auto Shuffle Template")}catch(a){(0,o.openNotification)("danger","Something went wrong while retrieving Auto Shuffle Template")}return t},l=async e=>{let t=[];try{const a=await(0,n.QW)(e);200===a.status?t=a.data.map((e=>({PromoCode:e.PromoMaster.PromoCode,VideoID:e.PromoMaster.VideoID,Event_Name:e.PromoMaster.PromoCaption,Duration:e.PromoMaster.PromoDuration,TapeId:e.PromoMaster.VideoID}))):204===a.status?(0,o.openNotification)("info","No Promos found for selected template"):(0,o.openNotification)("danger","Something went wrong while retrieving Promos for selected template")}catch(a){(0,o.openNotification)("danger","Something went wrong while retrieving Promos for selected template"),console.error(a)}return t};function i(e,t,a){let n=[],s=1,l=(0,o.convertDateToHHMMSSFF)(a.start),i=(0,o.convertDateToHHMMSSFF)(a.end);for(let c=0;c<e.length;c++){let a=e[c],u=a.F_C_S_P===r.rowDataTypesEnum.CONTENT_TERMINATION?"".concat(a.FPC_Time,":00:00"):"".concat(a.Tel_Time,":00:00");if(n.push(a),u>=l&&u<=i&&null!=u&&a.F_C_S_P===r.rowDataTypesEnum.SEGMENT){let e=a.Calculated_Value,l=null;for(;e>0;){let i=t.filter((t=>(0,o.timeToSeconds)(t.Duration)<=e&&t.PromoCode!==l));if(0===i.length)break;let c=i[Math.floor(Math.random()*i.length)],u=(0,o.timeToSeconds)(c.Duration);n.push({PromoCode:c.PromoCode,VideoID:c.VideoID,Event_Name:c.Event_Name,Duration:c.Duration,Tape_ID:c.TapeId,Id:s++,FPC_ID:a.FPC_ID,LocationCode:null,ChannelCode:null,FPC_Time:"",FPC_TimeTo:"00:00:00:00",Start_Time:"00:00:00:00",ContentCode:a.ContentCode,PromoTypeCode:"2",SeasonNo:"1",Ep_No:"1",BreakNumber:a.BreakNumber,F_C_S_P:r.rowDataTypesEnum.PROMO,EventDefaultFrontColor:"#333333",EventDefaultBackColor:"#3d84c7",Position:1,isFiltered:!0,Tel_Time:"00:00:00:00",SequenceNo:s}),l=c.PromoCode,e-=u}}}return n}},91615:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a(72791).createContext()},48851:(e,t,a)=>{a.d(t,{Au:()=>M,Fs:()=>F,J4:()=>R,RK:()=>I,S0:()=>E,TT:()=>D,XC:()=>L,fn:()=>A});var n=a(1413);const{featuresEnum:o,rowDataTypesEnum:r,ntcDescriptionTypesEnum:s,ntcDurationTypesEnum:l}=a(21260),{getCorrectedDestIndexForFilteredTable:i,getRowWithNTC:c,getNTCParentRow:u,isBasicDragValid:d,isTelTimeBetweenStartAndEndTime:T}=a(78638),{addTimes:m}=a(76061),{CLIENT:p}=a(1680),{openNotification:h,subtractTimes:C,getFlatArrForGroupedArr:f,getGroupedRows:S}=a(81320),E=(e,t,a)=>{const n=e.source.index,r=e.destination.index;let s=r;return a[o.FILTER]&&(s=i(r,t)),n<s&&(s+=1),s},D=(e,t,a)=>{let n=e;return a[o.FILTER]&&(n=i(e,t)),n>1?n:2},I=e=>{let t,{dragInfo:a,destIndex:n,tableData:o,selectedRows:r,channel:s,isAutoCalculateOffsetTime:l,isSchTableDrag:i=!1}=e,c=s.label===p.USA_Forbes;if(a&&!d(a,n))return!1;if(g(o,n))return h("danger","NTC cannot be placed after Commercial"),!1;if(y(o,n))return h("danger","NTC cannot be placed after Content Termination"),!1;if(c&&_(o,n))return h("danger","NTC cannot be placed after Live Event"),!1;let T=u(n,o);if(l)t=N(T,r,o,i);else{if(t=w(r,T),!t)return h("danger","NTCs are out of parent duration"),!1;if(t.length<r.length&&h("danger","One or more NTCs are out of parent duration"),r[0].BookingDetailsID&&(t=b(t,o[n])),!t)return h("danger","NTCs are out of time band"),!1;t.length<r.length&&h("danger","One or more NTCs are out of time band")}return t},g=(e,t)=>e[t-1].F_C_S_P===r.COMMERCIAL,y=(e,t)=>e[t-1].F_C_S_P===r.CONTENT_TERMINATION,_=(e,t)=>e[t-1].F_C_S_P===r.LIVE,N=(e,t,a,n)=>{const o=c([e],a,!1);let r=S(o,"NtcTypeName");const s=O(r),l=S(t,"NtcTypeName"),i=P(l,s,e,n),u=f(i);return 0===u.length?(h("danger","NTCs are out of parent duration"),!1):(u.length<t.length&&h("danger","One or more NTCs are out of parent duration"),u)},w=(e,t)=>{let a=[];return e.forEach((e=>{const n=m(t.Start_Time,e.OffsetStartTime);m(n,e.Duration)<=m(t.Start_Time,t.Duration)&&a.push(e)})),a.length>0&&a},b=(e,t)=>{try{let a=[];return e.forEach((e=>{T(t,e)&&a.push(e)})),a.length>0&&a}catch(a){throw a}},O=e=>{const t={};return Object.keys(e).forEach((a=>{const n=e[a].at(-1);t[a]=m(n.Tel_Time,n.Duration)})),t},P=(e,t,a,o)=>{const r={};return Object.keys(e).forEach((s=>{let l=t[s]?t[s]:o?"00:00:00:00":e[s][0].OffsetStartTime;e[s].forEach((e=>{(t[s]||r[s])&&e.Gap&&(l=m(l,e.Gap));let o=(0,n.Z)((0,n.Z)({},e),{},{OffsetStartTime:l});delete o.Gap;let i=w([o],a);if(r[s]){let e=r[s].at(-1);o.BookingDetailsID&&(i=b(i,e)),i&&(r[s].push(o),e=r[s].at(-1),l=m(e.OffsetStartTime,e.Duration))}else if(o.BookingDetailsID&&(i=b(i,a)),i){r[s]=i;const e=r[s].at(-1);l=m(e.OffsetStartTime,e.Duration)}}))})),r},R=(e,t,a,o,r,i,c)=>{try{return e.map((e=>(0,n.Z)((0,n.Z)({},e),{},{Description:a===s.PARENT?t.Event_Name:a===s.CUSTOM?o:e.Description,Duration:r===l.PARENT?C(t.Duration,c):r===l.CUSTOM?i:e.Duration,OffsetStartTime:c})))}catch(u){throw u}},A=(e,t,a)=>{try{const o=t[e];let r=[...t],s=e+1;return a.forEach((e=>{const t=m(o.Start_Time,e.OffsetStartTime);m(t,e.Duration)<=m(o.Start_Time,o.Duration)&&(r.splice(s,0,(0,n.Z)((0,n.Z)({},e),{},{Start_Time:t,Tel_Time:t})),s+=1)})),r}catch(o){throw o}},F=(e,t,a)=>{let n=!0;return e&&!d(e,a)&&(n=!1),g(t,a)&&(h("danger","NTC cannot be placed after Commercial"),n=!1),y(t,a)&&(h("danger","NTC cannot be placed after Content Termination"),n=!1),n},L=(e,t)=>{const a=[];return e.forEach(((e,o)=>{const r=a[o-1];let s,l;r&&t.includes("offsetTime")&&(s=m(r.OffsetStartTime,r.Duration,r.DefaultGAP)),t.includes("defaultGap")&&(l=e.Gap?e.Gap:e.DefaultGAP),0===o?a.push((0,n.Z)((0,n.Z)({},e),{},{DefaultGAP:l})):a.push((0,n.Z)((0,n.Z)({},e),{},{OffsetStartTime:s,DefaultGAP:l}))})),a},M=e=>{const t=[];return e.forEach(((e,a)=>{if(0===a)t.push(e);else{const o=t[a-1];if(o.F_C_S_P!==r.NTC)t.push(e);else if(o.NTCGroupCode!==e.NTCGroupCode)t.push(e);else{const a=m(o.OffsetStartTime,o.Duration,o.DefaultGAP);t.push((0,n.Z)((0,n.Z)({},e),{},{OffsetStartTime:a,Start_Time:a,Tel_Time:a}))}}})),t}}}]);
//# sourceMappingURL=2109.8fabdceb.chunk.js.map