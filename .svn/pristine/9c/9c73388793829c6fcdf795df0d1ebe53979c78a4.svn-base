{"version":3,"file":"static/js/6144.dadca0ec.chunk.js","mappings":"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","sources":["views/Accounts/Accounts.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { apiCallstoreprocedure } from 'services/CommonService';\r\nimport DashboardHeader from 'views/Controls/Dashboard/DashboardHeader';\r\nimport DashboardShortcutCards from 'views/Controls/Dashboard/DashboardShortcutCards';\r\nimport { ACCOUNTS_DASHBOARD_SHORTCUTS } from 'views/Controls/Dashboard/constants/dashboardShortcuts';\r\nimport { TW_COLORS } from 'views/Controls/Dashboard/constants/tw_colors';\r\nimport ApexChart from 'react-apexcharts';\r\nimport { Avatar, Tabs, Tooltip } from 'components/ui';\r\nimport { BsBuildingsFill } from 'react-icons/bs';\r\nimport { getRandomColor } from 'views/Controls/GLOBALFUNACTION';\r\nimport { getRandomColorClass } from 'views/Billing/BillGeneration/dtat';\r\nconst { TabNav, TabList, TabContent } = Tabs;\r\n/* CONSTANTS */\r\n\r\nconst CHART_OPTIONS = {\r\n  chart: {\r\n    stacked: true,\r\n    toolbar: { show: false },\r\n  },\r\n  dataLabels: { enabled: false },\r\n  plotOptions: {\r\n    bar: {\r\n      columnWidth: '40%',\r\n      horizontal: false,\r\n      borderRadius: 4,\r\n      borderRadiusApplication: 'end',\r\n      borderRadiusWhenStacked: 'last',\r\n    },\r\n  },\r\n  xaxis: {\r\n    axisTicks: { show: false },\r\n  },\r\n  legend: {\r\n    markers: { strokeWidth: 0 },\r\n  },\r\n};\r\nconst CHART_OPTIONSBooking = {\r\n  toolbar: { show: false },\r\n  dataLabels: { enabled: false },\r\n  plotOptions: {\r\n    bar: {\r\n      columnWidth: '40%',\r\n      horizontal: false,\r\n      borderRadius: 4,\r\n      borderRadiusApplication: 'end',\r\n      borderRadiusWhenStacked: 'last',\r\n    },\r\n  },\r\n  xaxis: {\r\n    axisTicks: { show: false },\r\n  },\r\n  legend: {\r\n    markers: { strokeWidth: 0 },\r\n  },\r\n};\r\nconst formatRevenueData = (data) => {\r\n  const categories = data.map((item) => {\r\n    return `${item.RevenueMonth}-${item.RevenueYear}`;\r\n  });\r\n\r\n  const series = [\r\n    {\r\n      name: 'Booked',\r\n      data: data.map((item) => item.BookedRevenue),\r\n      color: TW_COLORS.emerald['500'],\r\n    },\r\n    {\r\n      name: 'Dropped',\r\n      data: data.map((item) => item.DroppedRevenue),\r\n      color: TW_COLORS.blue['500'],\r\n    },\r\n    {\r\n      name: 'Cancelled',\r\n      data: data.map((item) => item.CancelledRevenue),\r\n      color: TW_COLORS.rose['500'],\r\n    },\r\n  ];\r\n\r\n  return { categories, series };\r\n};\r\n\r\nconst formatBookingData = (data) => {\r\n  const categories = data.map((item) => {\r\n    return `${item.RevenueMonth}-${item.RevenueYear}`;\r\n  });\r\n\r\n  const series = [\r\n    {\r\n      name: 'Billed',\r\n      data: data.map((item) => item.BilledAmount.toFixed(1)),\r\n      color: TW_COLORS.emerald['500'],\r\n    },\r\n    {\r\n      name: 'Collection',\r\n      data: data.map((item) => item.CollectionAmount.toFixed(1)),\r\n      color: TW_COLORS.blue['500'],\r\n    },\r\n  ];\r\n\r\n  return { categories, series };\r\n};\r\n\r\nconst Accounts = () => {\r\n  const Channel = useSelector((state) => state.locale.selectedChannel);\r\n  const monthlyRevenueStatusChartRef = useRef(null);\r\n  const bookedVsBilledChartRef = useRef(null);\r\n  const [revenueData, setRevenueData] = useState([]);\r\n  const [bookingBillingData, setBookingBillingData] = useState([]);\r\n  const [showLoader, setShowLoader] = useState(false);\r\n\r\n  const [TopAC, setTopAC] = useState([]);\r\n  useEffect(() => {\r\n    (async (values) => {\r\n      const params = {};\r\n      const resp = await apiCallstoreprocedure(\r\n        'GetAgencyOutstandingAmount',\r\n        params,\r\n      );\r\n\r\n      setTopAC(resp.data);\r\n    })();\r\n    setShowLoader(true);\r\n    const data = {\r\n      par_LocationCode: Channel.LocationCode,\r\n      par_ChannelCode: Channel.ChannelCode,\r\n    };\r\n\r\n    apiCallstoreprocedure('usp_Billing_GetMonthlyBookedRevenue', data)\r\n      .then((response) => {\r\n        if (response.status == 204) {\r\n          setRevenueData([]);\r\n          return;\r\n        }\r\n        if (response.status === 200) {\r\n          setRevenueData(response.data);\r\n        }\r\n        setShowLoader(false);\r\n      })\r\n      .catch(() => {\r\n        setRevenueData([]);\r\n        setShowLoader(false);\r\n      });\r\n  }, [Channel]);\r\n\r\n  useEffect(() => {\r\n    setShowLoader(true);\r\n    const data = {\r\n      par_LocationCode: Channel.LocationCode,\r\n      par_ChannelCode: Channel.ChannelCode,\r\n    };\r\n    apiCallstoreprocedure('GetMonthlyBilledvsCollection', data)\r\n      .then((response) => {\r\n        if (response.status == 204) {\r\n          setBookingBillingData([]);\r\n          return;\r\n        }\r\n        if (response.status == 200) {\r\n          setBookingBillingData(response.data);\r\n        }\r\n        setShowLoader(false);\r\n      })\r\n      .catch(() => {\r\n        setBookingBillingData([]);\r\n        setShowLoader(false);\r\n      });\r\n  }, [Channel]);\r\n\r\n  useEffect(() => {\r\n    if (monthlyRevenueStatusChartRef.current) {\r\n      monthlyRevenueStatusChartRef.current.chart.windowResizeHandler();\r\n    }\r\n    if (bookedVsBilledChartRef.current) {\r\n      bookedVsBilledChartRef.current.chart.windowResizeHandler();\r\n    }\r\n  }, [revenueData, bookingBillingData]);\r\n\r\n  const { categories, series: revenueSeries } = formatRevenueData(revenueData);\r\n  const { categories: bookingCategories, series: bookingSeries } =\r\n    formatBookingData(bookingBillingData);\r\n\r\n  const MONTHLY_REVENUE_STATUS_CHART = {\r\n    options: {\r\n      ...CHART_OPTIONS,\r\n      xaxis: { ...CHART_OPTIONS.xaxis, categories },\r\n    },\r\n    series: revenueSeries,\r\n  };\r\n\r\n  const BOOKED_VS_BILLED_CHART = {\r\n    options: {\r\n      ...CHART_OPTIONSBooking,\r\n      xaxis: { ...CHART_OPTIONSBooking.xaxis, categories: bookingCategories },\r\n    },\r\n    series: bookingSeries,\r\n  };\r\n  return (\r\n    <div>\r\n      <DashboardHeader\r\n        Name={'Accounts Dashboard'}\r\n        Page={'Accounts'}\r\n        Links={'Accounts'}\r\n      />\r\n      <div\r\n        className={`grid grid-cols-${ACCOUNTS_DASHBOARD_SHORTCUTS.length} gap-4`}\r\n      >\r\n        <DashboardShortcutCards shortcuts={ACCOUNTS_DASHBOARD_SHORTCUTS} />\r\n      </div>{' '}\r\n      <div className=\"grid grid-cols-3 gap-4\">\r\n        <div className=\"col-span-1 web-card pb-1 pt-3.5 dark:!bg-[#1f2639] !bg-[#fff] border-none\">\r\n          <h4 className=\"px-3.5\">\r\n            Monthly Revenue <span style={{ fontSize: '11px' }}>[Lakhs]</span>\r\n          </h4>\r\n          <ApexChart\r\n            ref={monthlyRevenueStatusChartRef}\r\n            options={MONTHLY_REVENUE_STATUS_CHART.options}\r\n            series={MONTHLY_REVENUE_STATUS_CHART.series}\r\n            type=\"bar\"\r\n            width=\"100%\"\r\n            height={300}\r\n          />\r\n        </div>\r\n        <div className=\"col-span-1 web-card pb-1 pt-3.5 dark:!bg-[#1f2639] !bg-[#fff] border-none \">\r\n          <h4 className=\"px-3.5\">\r\n            Collection <span style={{ fontSize: '11px' }}>[Lakhs]</span>\r\n          </h4>\r\n          <ApexChart\r\n            ref={bookedVsBilledChartRef}\r\n            options={BOOKED_VS_BILLED_CHART.options}\r\n            series={BOOKED_VS_BILLED_CHART.series}\r\n            type=\"bar\"\r\n            width=\"100%\"\r\n            height={300}\r\n          />\r\n        </div>\r\n        <div className=\"col-span-1 \">\r\n          <Tabs\r\n            defaultValue=\"tab1\"\r\n            // variant=\"pill\"\r\n            className=\"web-card px-5 py-3 dark:!bg-[#1f2639] !bg-[#fff] border-none\"\r\n          >\r\n            <TabList>\r\n              <TabNav value=\"tab1\" icon={<BsBuildingsFill />}>\r\n                Most OutStanding\r\n              </TabNav>\r\n            </TabList>\r\n            <TabContent value=\"tab1\">\r\n              <div className=\"mt-3\">\r\n                <div\r\n                  className=\"flex justify-between items-center px-2 py-2 dark:!bg-[#191f31] bg-white\"\r\n                  style={{\r\n                    borderBottom: '1px solid #9d9d9d7a',\r\n                  }}\r\n                >\r\n                  <p className=\"font-semibold dark:!text-white text-black\">\r\n                    Agency\r\n                  </p>\r\n                  <p className=\"font-semibold dark:!text-white text-black\">\r\n                    Amount\r\n                  </p>\r\n                </div>\r\n                <div\r\n                  style={{ height: 250 }}\r\n                  className=\"overflow-hidden hover:overflow-y-scroll  hover:overflow-x-scroll hover:pr-2\"\r\n                >\r\n                  {TopAC &&\r\n                    TopAC.map((item, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"flex justify-between items-center px-1 py-2\"\r\n                        style={{\r\n                          borderBottom: '1px solid #9d9d9d7a',\r\n                          borderStyle: 'dashed',\r\n                        }}\r\n                      >\r\n                        <Tooltip title={item.Agency} placement=\"top-start\">\r\n                          <div className=\"flex items-center\">\r\n                            <Avatar\r\n                              size=\"sm\"\r\n                              className={`mr-2 dark:${getRandomColorClass()} ${getRandomColorClass()} dark:!text-white text-black`}\r\n                            >\r\n                              {item.Agency.slice(0, 1)}\r\n                            </Avatar>\r\n                            <p\r\n                              className=\"font-semibold text-xs dark:!text-white text-black\"\r\n                              style={{\r\n                                width: 160,\r\n                                whiteSpace: 'nowrap',\r\n                                overflow: 'hidden',\r\n                                textOverflow: 'ellipsis',\r\n                              }}\r\n                            >\r\n                              {item.Agency}\r\n                            </p>\r\n                          </div>\r\n                        </Tooltip>\r\n                        <p className=\"font-semibold text-md dark:!text-white text-black\">\r\n                          â‚¹\r\n                          {item.AgencyOutstandingAmount?.toLocaleString(\r\n                            'en-IN',\r\n                          )}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n            </TabContent>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Accounts;\r\n"],"names":["TabNav","TabList","TabContent","Tabs","CHART_OPTIONS","chart","stacked","toolbar","show","dataLabels","enabled","plotOptions","bar","columnWidth","horizontal","borderRadius","borderRadiusApplication","borderRadiusWhenStacked","xaxis","axisTicks","legend","markers","strokeWidth","CHART_OPTIONSBooking","Channel","useSelector","state","locale","selectedChannel","monthlyRevenueStatusChartRef","useRef","bookedVsBilledChartRef","revenueData","setRevenueData","useState","bookingBillingData","setBookingBillingData","showLoader","setShowLoader","TopAC","setTopAC","useEffect","async","resp","apiCallstoreprocedure","data","par_LocationCode","LocationCode","par_ChannelCode","ChannelCode","then","response","status","catch","current","windowResizeHandler","categories","series","revenueSeries","map","item","RevenueMonth","RevenueYear","name","BookedRevenue","color","TW_COLORS","DroppedRevenue","CancelledRevenue","bookingCategories","bookingSeries","BilledAmount","toFixed","CollectionAmount","formatBookingData","MONTHLY_REVENUE_STATUS_CHART","options","BOOKED_VS_BILLED_CHART","Name","Page","Links","className","ACCOUNTS_DASHBOARD_SHORTCUTS","shortcuts","style","fontSize","ref","type","width","height","defaultValue","value","icon","borderBottom","index","borderStyle","title","Agency","placement","size","getRandomColorClass","slice","whiteSpace","overflow","textOverflow","AgencyOutstandingAmount","toLocaleString"],"sourceRoot":""}