"use strict";(self.webpackChunkelstar=self.webpackChunkelstar||[]).push([[6492,5682],{96361:(e,a,s)=>{s.d(a,{Z:()=>o});var t=s(79139),l=s(60364),r=s(11087),n=s(80184);const o=e=>{let{ModuleText:a="Admin",Component:s,links:o}=e;(0,l.useSelector)((e=>e.auth.session.currentRouteKey));const i=(0,l.useSelector)((e=>e.base.common.currentRouteTitle));console.log(i);const{title:d,Moduletitle:c}=(0,l.useSelector)((e=>e.auth.user));return(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xl font-medium",children:i}),(0,n.jsxs)(t.Breadcrumbs,{style:{marginLeft:"-15px",width:"auto"},children:[(0,n.jsx)(r.rU,{to:"/home",className:"opacity-60 text-xs",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})}),(0,n.jsx)(r.rU,{to:"/".concat("SALES ADMIN"===c?"SalesAdmin":c),className:"opacity-60 text-xs",children:(0,n.jsx)("span",{children:c})}),(0,n.jsx)(r.rU,{to:"#",className:"text-xs",children:(0,n.jsx)("span",{children:i})})]})]})}},45682:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(2803),l=(s(72791),s(80184));const r=function(e){let{showLoader:a}=e;return(0,l.jsx)(l.Fragment,{children:a?(0,l.jsx)("div",{className:"dialog-overlay flex justify-center items-center z-50",children:(0,l.jsx)(t.$j,{size:"3.25rem"})}):(0,l.jsx)(l.Fragment,{})})}},64200:(e,a,s)=>{s.r(a),s.d(a,{default:()=>K});var t=s(1413),l=s(72791),r=s(2803),n=s(58617),o=s(60364),i=s(80184);const d=e=>{let{item:a,setIsCustomCardVisible:s,setCustomCardName:t,getDealMasterData:l,statusCount:d,percent:c,handleClickFn:x}=e;const m=(0,o.useSelector)((e=>e.theme.mode));return(0,i.jsx)("div",{className:"web-card animate__animated onlythis cursor-pointer dark:!bg-[#1f2639] !bg-white dark:!border-[#374558] dark:!border",onClick:x,children:(0,i.jsxs)("div",{className:"card-bodyR",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("div",{children:"dark"===m?(0,i.jsx)("div",{className:"animate__animated onlythis2  order order".concat(a.id),children:(0,i.jsx)("span",{children:(0,i.jsx)(n.mgc,{className:"text-3xl",style:{color:a.color}})})}):(0,i.jsx)(r.zx,{size:"lg",icon:(0,i.jsx)(n.mgc,{className:"text-3xl",style:{color:a.color}}),className:"!bg-[#307ef3] !bg-opacity-25 !border-transparent"})}),(0,i.jsx)(n.JEI,{})]}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsx)("span",{className:"text-lg font-extrabold dark:!text-gray-400 text-black",children:a.title}),(0,i.jsx)("h4",{className:"text-2xl dark:!text-white text-black",children:d}),c&&(0,i.jsx)("div",{className:"dark:!text-gray-400 text-black ml-1 mt-2",children:(0,i.jsx)(r.Ex,{percent:c,size:"xl"})})]}),(0,i.jsx)("p",{className:"mt-2 text-xs dark:!text-gray-400 text-black",children:a.describe})]})})};var c=s(9494),x=s(81320),m=s(45682);const h=[{id:"",key:"ActiveDeal",title:"Active Deal",value:[1,0,0,"USP_DealDisplay_Active"],color:"#307ef3",describe:"Explore all currently active deals with just a click!"},{id:"1",key:"ApprovalPending",title:"Approval Pending",value:[0,0,0,"USP_DealDisplay_Active"],color:"#D94245",describe:"The approval of deal is pending.Kindly check with approver authority."},{id:"2",key:"DealExpires",title:"Expires in 30 Days",value:[1,1,0,"USP_DealDisplay_Active"],color:"#E3941A",describe:" Expiration occurs within a month; kindly take necessary actions."},{id:"3",key:"3",title:"Sales Target",value:[],color:"#5FC5A4",describe:""}];var u=s(54748);const p=e=>{var a,s;let{montlyProjection:t=[]}=e;const l=(e,a,s)=>{var t;return(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsxs)("h6",{children:["\u20b9 ",(null===e||void 0===e||null===(t=e.TargetAcieved)||void 0===t?void 0:t.toLocaleString("en-IN"))||0]}),(0,i.jsxs)("p",{className:"ml-2 text-sm font-normal text-slate-400",children:["(",a,")"]})]}),(0,i.jsx)(r.Ex,{percent:(null===e||void 0===e?void 0:e.TargetAcievedPercent)||0,size:"xl",color:s,customInfo:(0,i.jsx)(i.Fragment,{})})]})};return(0,i.jsxs)("div",{className:"web-card animate__animated col-span-2 dark:!bg-[#1f2639] !bg-white dark:!border-[#374558] dark:!border px-2 pb-2",children:[(0,i.jsx)("h4",{className:"mb-2 mt-2 text-lg font-bold dark:text-gray-400 text-gray-800",children:"Monthly Deal Projection"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("h4",{className:"text-2xl font-medium dark:text-gray-400 text-gray-800",children:["\u20b9 ",(null===(a=t[1])||void 0===a||null===(s=a.TargetAcieved)||void 0===s?void 0:s.toLocaleString("en-IN"))||0]}),(0,i.jsx)("p",{className:"ml-2 text-sm font-normal dark:text-gray-400 text-gray-800",children:"Total Revenue"})]}),l(t[0],"Previous Month","red-500"),l(t[1],"Current Month","amber-500")]})};var g=s(43235),b=s(3874);function v(e,a){return(0,b.E)(e,-a)}var j=s(25579),f=s(56355),y=s(51722);const N=e=>{let{currentDate:a,dashBoardDoughnut:s=[],sum:t,handlePreviousMonth:l,handleNextMonth:r,title:n}=e;const o=(0,g.WU)(a,"dd MMM yyyy"),d=s.length>0,c="p-2 rounded bg-black dark:bg-sky-700 hover:bg-sky-700 cursor-pointer";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h4",{className:"mt-5 mx-5 text-lg font-bold dark:text-gray-400 text-gray-800",children:n}),(0,i.jsxs)("div",{className:"flex justify-between items-center mx-5 mt-5",children:[(0,i.jsx)("button",{className:c,onClick:l,children:(0,i.jsx)(f.bUI,{})}),(0,i.jsx)("div",{className:"text-md font-black dark:text-blue-50 text-gray-800",children:o}),(0,i.jsx)("button",{className:c,onClick:r,children:(0,i.jsx)(f.Dli,{})})]}),(0,i.jsxs)("div",{className:"card-bodyR text-center mt-4",children:[d?(0,i.jsx)(y.Z,{data:s,name:"DealMaster"}):(0,i.jsx)("h3",{children:"Data Not Found"}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("h3",{className:"font-normal dark:text-slate-200 text-gray-800",children:["\u20b9",(null===t||void 0===t?void 0:t.toLocaleString("en-IN"))||0]}),(0,i.jsx)("h3",{children:"Total Earn"})]})]})]})};var D=s(34927),C=s(63821),k=s(57689),w=s(87537),S=s(16856),A=s(72299),M=s(25123),E=s(97261),I=s(93673),P=s(39126),T=s(81721);const F=e=>{let{type:a,COLORS:s}=e;const[t,r]=(0,l.useState)({series:[{name:"Session Duration",data:[0,14,5,20,14,30]}]});return(0,i.jsx)("div",{children:(0,i.jsx)(T.kL,{type:a,series:t.series,customOptions:{colors:s,stroke:{width:2},yaxis:{labels:{show:!1}},xaxis:{labels:{show:!1}},grid:{show:!1}},height:80})})},z=e=>{let{thisMonthDealList:a=[],handleShowDetailsClick:s,monthlySalesGrowthData:t=0,dueAmountandOverDueAmount:o={},salesExecutiveData:d=[],openDialog:c}=e;const m=(0,l.useMemo)((()=>a.map(((e,a)=>(0,i.jsx)("div",{className:"flex flex-col gap-1 py-2 border-b border-b-gray-700",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(r.qE,{size:"sm",className:"mr-2 dark:".concat(e.color," ").concat(e.color),children:(0,i.jsx)("p",{className:"text-base",children:" D"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-base font-semibold dark:text-gray-200 text-gray-800 capitalize",children:[e.DealCode,(0,i.jsx)(r.u,{title:"Show Details",children:(0,i.jsx)(r.zx,{shape:"circle",icon:(0,i.jsx)(P.DpK,{className:"text-xs"}),size:"xs",className:"!h-5 !w-5 ml-2",onClick:()=>s(e)})})]})})]}),(0,i.jsx)(r.Vp,{prefix:!0,prefixClass:"bg-emerald-500",showCloseButton:!1,children:(0,i.jsxs)("span",{className:"text-[1rem] text-gray-400",children:[e.CurrencySymbol," ",(0,x.numberToINRFormat)(e.TotalAmount)]})})]})},a)))),[a,s]);return(0,i.jsxs)("div",{className:"grid grid-cols-8 gap-2",children:[(0,i.jsxs)("div",{className:"col-span-3 web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border px-5",children:[(0,i.jsx)("h4",{className:"mt-2 pb-2 border-b border-gray-700 dark:text-slate-200 text-gray-800 text-lg font-bold",children:"This Month Deal"}),(0,i.jsx)("div",{className:"h-[200px] overflow-hidden hover:overflow-y-scroll hover:pr-2",children:m})]}),(0,i.jsxs)("div",{className:"col-span-2",children:[(0,i.jsxs)("div",{className:"p-2 web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pr-2",children:[(0,i.jsx)("h4",{className:"p-3 dark:text-gray-200 text-gray-800 text-lg font-bold",children:"Monthly Sale"}),(0,i.jsx)(n.JEI,{})]}),(0,i.jsxs)("div",{className:"flex items-center mt-[-15px]",children:[(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("h6",{children:"Growth"}),(0,i.jsx)("h3",{children:t})]}),(0,i.jsx)(F,{type:"area",COLORS:["red-500"]})]})]}),(0,i.jsxs)("div",{className:"p-4 web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pr-2",children:[(0,i.jsx)("h4",{className:"dark:text-gray-200 text-gray-800 text-lg font-bold",children:"Invoices"}),(0,i.jsx)(n.JEI,{})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:["Due","Overdue"].map(((e,a)=>(0,i.jsxs)("div",{className:0===a?"border-r border-dashed":"",children:[(0,i.jsx)("h4",{className:"text-center dark:text-gray-200 text-gray-800 text-md font-semibold",children:e}),(0,i.jsx)("h4",{className:"text-center dark:text-gray-200 text-gray-800 text-lg font-semibold",children:(0,i.jsx)(x.CurrencyFormatter,{amountString:0===a?o.DueAmount:o.OverDueAmount})})]},a)))})]})]}),(0,i.jsx)("div",{className:"col-span-3",children:(0,i.jsxs)("div",{className:"px-5 py-3 web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border ",children:[(0,i.jsx)("h4",{className:"mt-5 dark:text-gray-200 text-gray-800 text-lg font-bold",children:"Sales Executive"}),(0,i.jsxs)("div",{className:"flex justify-between items-center px-4 py-4 border-b border-dashed border-gray-400",children:[(0,i.jsx)("h5",{className:"dark:text-gray-200 text-gray-800",children:"User Name"}),(0,i.jsx)("h5",{className:"dark:text-gray-200 text-gray-800",children:"Yearly Achievement (%)"})]}),null===d||void 0===d?void 0:d.map(((e,a)=>(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 px-1 py-1 cursor-pointer border-b border-dashed border-gray-400",onClick:()=>c(a),children:[(0,i.jsx)("div",{className:"mx-4",children:(0,i.jsx)("p",{className:"uppercase dark:text-gray-200 text-gray-800",children:e.Emp_FirstName})}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(r.Ex,{size:"sm",percent:e.TargetAcievedPercent,color:e.TargetAcievedPercent>100?"green-500":e.TargetAcievedPercent>50?"blue-500":"red-500",customInfo:!0}),(0,i.jsxs)("p",{className:"dark:text-gray-200 text-gray-800",children:[e.TargetAcievedPercent,"%"]})]})]},a)))]})})]})};var L=s(27450);const _=e=>{let{salesExecutiveData:a=[],isAchievementDialogOpen:s,getSalesExecutiveId:t,setIsAchievementDialogOpen:n,setGetSalesExecutiveId:o}=e;const d=(0,l.useMemo)((()=>a[t]||{}),[a,t]),c=()=>{n(!1),o("")};return(0,i.jsxs)(r.Vq,{isOpen:s,onClose:c,onRequestClose:c,children:[(0,i.jsx)("h5",{className:"mb-4",children:"Achievement"}),void 0!==d.TargetAmount?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"border-b border-dashed pb-3 flex justify-between mt-2",children:[(0,i.jsx)("p",{children:"Target Amount"}),(0,i.jsx)("p",{children:d.TargetAmount.toLocaleString("en-IN")})]}),(0,i.jsxs)("div",{className:"border-b border-dashed pb-3 flex justify-between mt-2",children:[(0,i.jsx)("p",{children:"Target Achieved"}),(0,i.jsx)("p",{children:d.TargetAcieved.toLocaleString("en-IN")})]}),(0,i.jsxs)("div",{className:"border-b border-dashed pb-3 flex justify-between mt-2",children:[(0,i.jsx)("p",{children:"Target Achieved Percent"}),(0,i.jsxs)("p",{children:[d.TargetAcievedPercent,"%"]})]})]}):(0,i.jsx)("p",{className:"text-center text-gray-500",children:"No data available"}),(0,i.jsx)("div",{className:"text-right mt-6",children:(0,i.jsx)(r.zx,{variant:"solid",onClick:c,children:"Okay"})})]})};var U=s(66651),Z=s(51523),O=s.n(Z),R=s(85880),B=s(96361);const G=e=>{let{data:a,setIsCustomCardVisible:s,Name:t}=e;const d=(0,o.useDispatch)(),c=(0,k.s0)(),[x,m]=(0,l.useState)(""),[h,u]=(0,l.useState)(null),[p,b]=(0,l.useState)(!1),[v,j]=(0,l.useState)({}),y=(0,l.useMemo)((()=>a.filter((e=>{let{IsApproved:a,DealCode:s,TotalAmount:t}=e;return(3===a||1===a||0===a)&&((null===s||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))||(null===t||void 0===t?void 0:t.toString().includes(x)))}))),[a,x]);return(0,i.jsxs)(r.Zb,{header:(0,i.jsx)(B.Z,{}),headerExtra:(0,i.jsxs)("div",{className:"flex gap-4 mr-3",children:[(0,i.jsx)(r.II,{type:"text",block:!0,placeholder:"Search...",value:x,size:"sm",onChange:e=>m(e.target.value)}),(0,i.jsx)(r.zx,{variant:"solid",size:"sm",icon:(0,i.jsx)(n.yEd,{}),onClick:()=>{d((0,M.Us)("")),c("/DealMasterAdd")},children:"Add Deal"})]}),children:[(0,i.jsx)("h3",{className:"mb-2",children:t}),(0,i.jsx)("div",{className:" grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3 sm:grid-cols-1 gap-4",style:{height:560,overflow:"scroll"},children:y.map(((e,a)=>(0,i.jsx)("div",{className:"web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border h-64",children:(0,i.jsxs)("div",{className:"card-bodyR",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(n.mgc,{className:"text-3xl"}),(0,i.jsxs)("div",{className:"cursor-pointer flex-grow",children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("h5",{onClick:()=>{d((0,M.Us)(e)),c("/DealMasterAdd")},children:e.DealCode}),(0,i.jsx)(r.u,{title:"Show Details",children:(0,i.jsx)(r.zx,{shape:"circle",icon:(0,i.jsx)(P.DpK,{className:"text-xs"}),size:"xs",className:"h-5 w-5 mt-1 ml-2",onClick:()=>{j(e),b(!0)}})})]}),(0,i.jsx)("span",{children:e.ClientName})]})]}),(0,i.jsx)(r.Vp,{className:"border-0 dark:text-white ".concat(1===e.IsApproved?"dark:bg-green-500/75":"dark:bg-amber-500"),showCloseButton:!1,children:1===e.IsApproved?"Approved":"Pending"})]}),(0,i.jsxs)("div",{className:"flex items-center mt-3 mb-1 w-fit alex dark:bg-[#191f31] bg-[#a1a5a966]",children:[(0,i.jsx)(f.Pll,{className:"text-xs"}),"\xa0",(0,i.jsx)("span",{className:"text-xs",children:(0,g.WU)(e.DealPeriodFromDate,"MMM dd, yyyy")}),"\xa0-\xa0",(0,i.jsx)("span",{className:"text-xs",children:(0,g.WU)(e.DealPeriodToDate,"MMM dd, yyyy")})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("div",{className:"cursor-pointer alex  dark:!bg-[#191f31] !bg-[#a1a5a966]",onClick:()=>u(h===a?null:a),children:h===a?(0,i.jsxs)("div",{className:"flex items-center text-amber-500 font-semibold text-lg",children:[(0,i.jsx)(O(),{path:U._VZ,size:.8,className:"mr-1"}),(0,i.jsx)(P._4u,{className:"text-amber-500 text-lg"}),e.TotalAmount]}):(0,i.jsxs)("div",{className:"flex text-lg font-semibold",children:[(0,i.jsx)(O(),{path:U.qS7,size:.8,className:"mr-1"}),"*********"]})}),(0,i.jsxs)("div",{className:"alex  dark:!bg-[#191f31] !bg-[#a1a5a966]",children:[(0,i.jsx)(R.t4c,{className:"text-xs"}),"\xa0",(0,i.jsx)("span",{className:"text-xs",children:e.TotalSeconds})]}),(0,i.jsxs)("div",{className:"p-1 text-center min-w-[60px] dark:!bg-[#191f31] !bg-[#a1a5a966]",children:[(0,i.jsx)("p",{className:" font-semibold ".concat(e.ExpiredinDays<0?"text-red-500 text-md ":"text-blue-500 text-lg"),children:e.ExpiredinDays<0?"Expired":e.ExpiredinDays}),e.ExpiredinDays>0&&(0,i.jsx)("p",{className:"text-xs text-gray-400",children:"Days Remaining"})]})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-gray-400 text-xs mb-2",children:[(0,i.jsx)("span",{children:"Utilized"}),(0,i.jsxs)("span",{children:[e.BalancedPercent,"%"]})]}),(0,i.jsx)(r.Ex,{percent:e.BalancedPercent,customInfo:!0})]})]})},a)))}),p&&(0,i.jsx)(L.Z,{isDialogOpen:p,setIsDialogOpen:()=>{b(!1),j({})},dealNumber:v.DealNumber,dealCode:v.DealCode}),(0,i.jsx)(T.gi,{className:"border-t-4 border-transparent bg-white dark:bg-gray-800",children:(0,i.jsx)(r.zx,{variant:"solid",onClick:()=>s(!0),children:"Back"})})]})},V={groupBy:!1,manageColumns:!1},K=()=>{var e,a,s;const n=(0,o.useDispatch)(),f=(0,k.s0)(),y=(0,o.useSelector)((e=>e.locale.selectedChannel)),[T,F]=(0,l.useState)(!1),[U,Z]=(0,l.useState)(!1),[O,R]=(0,l.useState)([]),[B,K]=(0,l.useState)(""),[q,W]=(0,l.useState)("tab1"),[H,J]=(0,l.useState)(!0),[Y,$]=(0,l.useState)(""),[Q,X]=(0,l.useState)([]),[ee,ae]=(0,l.useState)([]),[se,te]=(0,l.useState)({}),[le,re]=(0,l.useState)(0),[ne,oe]=(0,l.useState)(0),[ie,de]=(0,l.useState)(0),[ce,xe]=(0,l.useState)([]),[me,he]=(0,l.useState)([]),[ue,pe]=(0,l.useState)(new Date),[ge,be]=(0,l.useState)([new Date((new Date).setDate((new Date).getDate()-60)),new Date((new Date).setDate((new Date).getDate()+30))]),[ve,je]=(0,l.useState)(""),[fe,ye]=(0,l.useState)([]),[Ne,De]=(0,l.useState)([]),[Ce,ke]=(0,l.useState)([]),[we,Se]=(0,l.useState)([]),[Ae,Me]=(0,l.useState)([]),[Ee,Ie]=(0,l.useState)([]),[Pe,Te]=(0,l.useState)([]),[Fe,ze]=(0,l.useState)([]),[Le,_e]=(0,l.useState)([]),[Ue,Ze]=(0,l.useState)(!1),[Oe,Re]=(0,l.useState)({DealNumber:"",DealCode:""}),[Be,Ge]=(0,l.useState)(),[Ve,Ke]=(0,l.useState)(!1),[qe,We]=(0,l.useState)(!1),[He,Je]=(0,l.useState)(1),Ye=(0,l.useMemo)((()=>[{header:"Deal Number",accessorKey:"DealCode",cell:e=>{let{row:{original:a}}=e;return(0,i.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,i.jsx)("div",{className:"cursor-pointer bg-gray-500 dark:bg-[#5B92E633] text-black dark:text-gray-400 px-3 py-1 rounded-full font-bold",onClick:()=>{n((0,M.Us)(a)),f("/DealMasterAdd",{state:{mode:"edit"}})},children:a.DealCode}),(0,i.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,i.jsx)(r.u,{title:"Show Details",children:(0,i.jsx)(r.zx,{shape:"circle",icon:(0,i.jsx)(P.DpK,{className:"text-sm"}),size:"xs",className:"!h-5 !w-5",onClick:()=>sa(a)})}),(0,i.jsx)(r.u,{title:"Copy Deal",children:(0,i.jsx)(r.zx,{shape:"circle",icon:(0,i.jsx)(S.Fqs,{className:"text-sm"}),size:"xs",className:"!h-6 !w-6",onClick:()=>{n((0,M.Us)(a)),f("/DealMasterAdd",{state:{mode:"copy"}})}})})]})]})},options:{cell:{style:{paddingBlock:0}}}},{header:"Client",accessorKey:"ClientName",cell:e=>{let{row:{original:a}}=e;return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(r.qE,{size:25,className:"dark:".concat(a.color," ").concat(a.color," dark:text-gray-200 text-gray-800"),children:a.ClientName.charAt(0)}),(0,i.jsx)("p",{className:"ml-2 capitalize",children:a.ClientName})]})},options:{cell:{style:{paddingBlock:0}}}},{header:"Start Date",accessorKey:"DealPeriodFromDate",cell:e=>{let{row:{original:a}}=e;return(0,i.jsx)("p",{className:"capitalize",children:(0,g.WU)(new Date(a.DealPeriodFromDate),"dd MMM yyyy")})},options:{cell:{style:{paddingBlock:0}}}},{header:"End Date",accessorKey:"DealPeriodToDate",cell:e=>{let{row:{original:a}}=e;return(0,i.jsx)("p",{className:"capitalize",children:(0,g.WU)(new Date(a.DealPeriodToDate),"dd MMM yyyy")})},options:{cell:{style:{paddingBlock:0}}}},{header:"Utilization",cell:e=>{let{row:{original:a}}=e;const s=Number(a.TotalAmount),t=Number(a.BalanceAmount),l=0===s?0:(t/s*100).toFixed(2);return(0,i.jsx)(r.Ex,{color:l<90?"green-500":"red-500",size:"sm",className:"rounded",percent:100-l,customInfo:!0})},options:{cell:{style:{paddingBlock:0}}}},{header:"Amount",accessorKey:"TotalAmount",cell:e=>{let{row:{original:a}}=e;const{TotalAmount:s,CurrencySymbol:t}=a,l=new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(s);return(0,i.jsx)("p",{className:"cursor-pointer flex items-center font-semibold",children:"".concat(t," ").concat(l)})},options:{cell:{style:{paddingBlock:0}}}}]),[]);(0,l.useEffect)((()=>{(async()=>{F(!0);const e={LocationCode:y.LocationCode,ChannelCode:y.ChannelCode},a=[{key:"salesPerformance",procedure:"USP_DealDashboardSalesPerformance",params:e},{key:"dueAmount",procedure:"Get_DueAmountandOverDueAmount",params:e},{key:"monthlyProjection",procedure:"USP_DealDashboardMontlyProjection",params:e},{key:"yearlyTarget",procedure:"USP_DealDashboardYearlyTargetAcheived",params:{}},{key:"activeDeals",procedure:"USP_DealDashboardActiveDeals",params:e},{key:"approvalPending",procedure:"USP_DealDashboardApprovalPendingDeals",params:e},{key:"dealExpires",procedure:"USP_DealDashboardDealExpiresinMonth",params:e},{key:"thisMonthDeal",procedure:"usp_Deal_ThisMonthDeal",params:e},{key:"monthlySalesGrowth",procedure:"USP_MonthlySalesGrowth",params:e}];try{const e=await Promise.allSettled(a.map((e=>{let{procedure:a,params:s}=e;return(0,c.apiCallstoreprocedure)(a,s)})));null===e||void 0===e||e.forEach(((e,s)=>{var l,r,n,o,i,d;const{key:c}=a[s];if("fulfilled"===e.status)switch(c){case"salesPerformance":he(204===e.value.status?[]:e.value.data);break;case"dueAmount":te(204===e.value.status?{}:e.value.data[0]);break;case"monthlyProjection":X(e.value.data);break;case"yearlyTarget":ae(e.value.data);break;case"activeDeals":re((null===(l=e.value.data[0])||void 0===l?void 0:l.ActiveDeals)||0);break;case"approvalPending":oe((null===(r=e.value.data[0])||void 0===r?void 0:r.ApprovalPendingDeals)||0);break;case"dealExpires":de((null===(n=e.value.data[0])||void 0===n?void 0:n.DealExpiresinMonth)||0);break;case"thisMonthDeal":De(null===e||void 0===e||null===(o=e.value)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((e=>(0,t.Z)({color:(0,E.H)()},e))));break;case"monthlySalesGrowth":Ge((null===(d=e.value.data[0])||void 0===d?void 0:d.MonthlySalesGrowth)||0)}else console.error("Error fetching ".concat(c,":"),e.reason)}))}catch(s){console.error("Unexpected error fetching dashboard data:",s)}finally{F(!1),Z(!0)}})()}),[]),(0,l.useEffect)((()=>{(async e=>{try{const e=(await(0,j.db)((0,g.WU)(ue,"yyyy-MM-dd"))).data.filter((e=>"DealType"===e.ReportType)).map((e=>({name:e.FieldType,quantity:e.FieldAmount})));R(e);let a=[];e.forEach((function(e){a.push(e.quantity)})),K(a.reduce(((e,a)=>e+a),0))}catch(a){R([])}})()}),[ue]),(0,l.useEffect)((()=>{ge[0]&&ge[1]&&(Qe(),ea())}),[ge,He,y]),(0,l.useEffect)((()=>{Xe(),aa()}),[He,y]);const $e=async(e,a,s,t)=>{F(!0);let l={par_IsApproved:e,par_IsExpiring:a,par_IsRejected:s,par_LocationCode:y.LocationCode,par_ChannelCode:y.ChannelCode};try{let e=await(0,c.apiCallstoreprocedure)(t,l);200==e.status?xe(e.data):204===e.status&&xe([])}catch(r){500==r.response.status&&(0,x.openNotification)("warning","Please Contact Team"),console.error("Error fetching data:",r)}finally{F(!1)}},Qe=async()=>{F(!0);let e={LocationCode:y.LocationCode,ChannelCode:y.ChannelCode};try{const a=await(0,j.d)(e,ge);if(200==a.status){const e=a.data.map((e=>(0,t.Z)({color:(0,E.H)()},e)));ye(e)}else 204===a.status&&ye([])}catch(a){(0,x.openNotification)("warning","Deals Not Found!"),console.error("Error fetching data:",a)}finally{F(!1)}},Xe=async()=>{F(!0);let e={LocationCode:y.LocationCode,ChannelCode:y.ChannelCode};try{const a=await(0,c.apiCallstoreprocedure)("RecentlyAddDeal",e);if(200==a.status){const e=a.data.map((e=>(0,t.Z)({color:(0,E.H)()},e)));Se(e)}else 204===a.status&&Se([])}catch(a){(0,x.openNotification)("warning","Recently Added Deal Not Found!"),console.error("Error fetching data:",a)}finally{F(!1)}},ea=async()=>{F(!0);let e={LocationCode:y.LocationCode,ChannelCode:y.ChannelCode,FromDate:(0,g.WU)(ge[0],"yyyy-MM-dd"),Todate:(0,g.WU)(ge[1],"yyyy-MM-dd")};try{const a=await(0,c.apiCallstoreprocedure)("USP_DEAL_GetExpireDeal",e);if(200==a.status){const e=a.data.map((e=>(0,t.Z)({color:(0,E.H)()},e)));Ie(e)}else 204===a.status&&Ie([])}catch(a){(0,x.openNotification)("warning","Expired Deal Not Found!"),console.error("Error fetching data:",a)}finally{F(!1)}},aa=async()=>{F(!0);let e={par_IsApproved:0,par_IsExpiring:0,par_IsRejected:2,par_LocationCode:y.LocationCode,par_ChannelCode:y.ChannelCode};try{const a=await(0,c.apiCallstoreprocedure)("USP_DealDisplay",e);if(200==a.status){const e=a.data.map((e=>(0,t.Z)({color:(0,E.H)()},e)));ze(e)}else 204===a.status&&ze([])}catch(a){(0,x.openNotification)("warning","Rejected Deal Not Found!"),console.error("Error fetching data:",a)}finally{F(!1)}},sa=e=>{Re({DealNumber:e.DealNumber,DealCode:e.DealCode}),Ze(!0)};return(0,i.jsxs)("div",{className:"p-4 mb-4 dark:bg-slate-800 bg-slate-100",children:[U&&(0,i.jsx)(i.Fragment,{children:H?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"grid grid-cols-6 gap-2 mb-2",children:[(0,i.jsx)(d,{item:h[0],setIsCustomCardVisible:J,setCustomCardName:$,getDealMasterData:$e,statusCount:le}),(0,i.jsx)(d,{item:h[1],setIsCustomCardVisible:J,setCustomCardName:$,getDealMasterData:$e,statusCount:ne}),(0,i.jsx)(d,{item:h[2],setIsCustomCardVisible:J,setCustomCardName:$,getDealMasterData:$e,statusCount:ie}),(0,i.jsx)(d,{item:h[3],setIsCustomCardVisible:J,setCustomCardName:$,getDealMasterData:$e,statusCount:"\u20b9 ".concat((0,u.of)(null===(e=ee[0])||void 0===e?void 0:e.TargetAmount)),percent:null!=(null===(a=ee[0])||void 0===a?void 0:a.TargetAchievedPercent.toFixed())?null===(s=ee[0])||void 0===s?void 0:s.TargetAchievedPercent.toFixed():0,handleClickFn:()=>f("/SalesTarget")}),(0,i.jsx)(p,{montlyProjection:Q})]}),(0,i.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,i.jsx)("div",{className:"col-span-4 web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border ",children:(0,i.jsx)("div",{className:"card-bodyR",children:(0,i.jsxs)(r.mQ,{value:q,onChange:e=>{W(e),je("")},variant:"pill",className:"h-[500px] flex flex-col",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)(C.Z,{children:[(0,i.jsx)(D.Z,{value:"tab1",children:"Recent Deal"}),(0,i.jsx)(D.Z,{value:"tab2",children:"All Deal"}),(0,i.jsx)(D.Z,{value:"tab3",children:"Expired Deal"}),(0,i.jsx)(D.Z,{value:"tab4",children:"Rejected Deals"})]}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(A.Z,{value:"tab2",children:(0,i.jsx)(w.Z,{value:ge,placeholder:"Pick date & time",size:"sm",className:"mr-2",onChange:e=>be(e)})}),(0,i.jsx)(A.Z,{value:"tab3",children:(0,i.jsx)(w.Z,{value:ge,placeholder:"Pick date & time",size:"sm",className:"mr-2 flex justify-end items-center",onChange:e=>be(e)})}),(0,i.jsx)(r.II,{style:{width:"200px"},size:"sm",value:null!==ve&&void 0!==ve?ve:"",className:"ml-2",placeholder:"Search",onChange:e=>{/^[0-9a-zA-Z\s/]*$/.test(e.target.value)&&je(e.target.value)}}),(0,i.jsx)(r.zx,{onClick:()=>{f("/DealMasterAdd",{state:{mode:"add"}}),n((0,M.Us)([]))},size:"sm",variant:"solid",className:"ml-2",children:"Add Deal"}),(0,i.jsx)(r.zx,{onClick:()=>{Je(Math.floor(100*Math.random())+1)},size:"sm",variant:"solid",className:"ml-2",icon:(0,i.jsx)(S.Ffb,{})})]})]}),(0,i.jsx)(A.Z,{value:"tab1",className:"grow",style:{overflow:"scroll"},children:(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(I.Z,{tableData:we,originalColumns:Ye,managedColumns:Ae,setManagedColumns:Me,toolbarOptions:V,exportFileName:"Recent Deals",tableName:"Recent Deals",externalGlobalFilter:ve,columnsToFormatInINR:[]})})}),(0,i.jsx)(A.Z,{value:"tab2",className:"grow",style:{overflow:"scroll"},children:(0,i.jsx)("div",{className:"mt-2 ",children:(0,i.jsx)(I.Z,{tableData:fe,originalColumns:Ye,managedColumns:Ce,setManagedColumns:ke,toolbarOptions:V,exportFileName:"All Deals",tableName:"All Deals",externalGlobalFilter:ve,columnsToFormatInINR:[]})})}),(0,i.jsx)(A.Z,{value:"tab3",className:"grow",style:{overflow:"scroll"},children:(0,i.jsx)("div",{className:"mt-2 ",children:(0,i.jsx)(I.Z,{tableData:Ee,originalColumns:Ye,managedColumns:Pe,setManagedColumns:Te,toolbarOptions:V,exportFileName:"Expired Deals",tableName:"Expired Deals",externalGlobalFilter:ve,columnsToFormatInINR:[]})})}),(0,i.jsx)(A.Z,{value:"tab4",className:"grow",style:{overflow:"scroll"},children:(0,i.jsx)("div",{className:"mt-2 ",children:(0,i.jsx)(I.Z,{tableData:Fe,originalColumns:Ye,managedColumns:Le,setManagedColumns:_e,toolbarOptions:V,exportFileName:"Rejected Deals",tableName:"Rejected Deals",externalGlobalFilter:ve,columnsToFormatInINR:[]})})})]})})}),(0,i.jsx)("div",{className:"web-card dark:!bg-[#1f2639] !bg-[#fff] dark:!border-[#374558] dark:!border h-[600px]",children:(0,i.jsx)(N,{handlePreviousMonth:()=>{const e=v(ue,1);pe(e)},handleNextMonth:()=>{const e=(0,b.E)(ue,1);pe(e)},currentDate:ue,dashBoardDoughnut:O,sum:B,title:"Earn by Categories"})})]}),(0,i.jsx)(z,{thisMonthDealList:Ne,handleShowDetailsClick:sa,monthlySalesGrowthData:Be,dueAmountandOverDueAmount:se,salesExecutiveData:me,openDialog:e=>{We(e),Ke(!0)}}),Ue&&(0,i.jsx)(L.Z,{isDialogOpen:Ue,setIsDialogOpen:Ze,dealNumber:Oe.DealNumber,dealCode:Oe.DealCode}),Ve&&(0,i.jsx)(_,{salesExecutiveData:me,isAchievementDialogOpen:Ve,getSalesExecutiveId:qe,setIsAchievementDialogOpen:Ke,setGetSalesExecutiveId:We})]}):(0,i.jsx)(G,{data:ce,setIsCustomCardVisible:J,Name:Y})}),(0,i.jsx)(m.default,{showLoader:T})]})}},51722:(e,a,s)=>{s.d(a,{Z:()=>d});var t=s(72791),l=s(13496);const r={50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"}[300],n={50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"}[500],o={50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"}[500],i={50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"}[500];function d(e){let{data:a,name:s}=e,d=[],c=[];return a.forEach((function(e){d.push(e.name),c.push(e.quantity)})),t.createElement(l.Z,{type:"donut",series:c,labels:{show:!1,name:{show:!1}},options:{dataLabels:{enabled:!1},plotOptions:{pie:{donut:{labels:{show:"DealMaster"!=s,total:{showAlways:"DealMaster"!=s,show:"DealMaster"!=s}}}}},labels:d,legend:{show:!1,position:"bottom"},colors:[r,n,o,i]}})}},987:(e,a,s)=>{s.d(a,{v:()=>n});var t=s(72791),l=s(15036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},r.apply(this,arguments)}var n=t.memo(t.forwardRef((function(e,a){var s=l.A.getPTI(e);return t.createElement("svg",r({ref:a,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),t.createElement("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"}))})));n.displayName="ChevronDownIcon"},88170:(e,a,s)=>{s.d(a,{X:()=>n});var t=s(72791),l=s(15036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},r.apply(this,arguments)}var n=t.memo(t.forwardRef((function(e,a){var s=l.A.getPTI(e);return t.createElement("svg",r({ref:a,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),t.createElement("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"}))})));n.displayName="ChevronRightIcon"}}]);
//# sourceMappingURL=6492.30754be5.chunk.js.map