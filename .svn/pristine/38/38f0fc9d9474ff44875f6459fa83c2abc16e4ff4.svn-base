{"version":3,"file":"static/js/2577.91796026.chunk.js","mappings":"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","sources":["services/DealServices.js","views/Salesadmin/MakeGood/MakeGood.js"],"sourcesContent":["import appConfig from 'configs/app.config';\r\nimport ApiService from './ApiService';\r\nimport { convertDateToYMD } from 'components/validators';\r\n\r\nconst axios = require('axios');\r\n\r\nconst APIURL = process.env.APIURL;\r\nexport async function apidealmasterBYID(ID) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/${ID}`,\r\n    method: 'get',\r\n  });\r\n}\r\nexport async function apidealattachmentBYID(dealNumber) {\r\n  return ApiService.fetchData({\r\n    url: `/dealattachment/${dealNumber}`,\r\n    method: 'get',\r\n  });\r\n}\r\nexport async function readUploadedFileByName(fileName) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/readuploadedfile/${fileName}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport async function apidealmasterDealforapprovalBYID(selectedDeal, isApproved, rejectRemark) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/dealforapproval/?DealNumber=${selectedDeal}&IsApproved=${isApproved}&RejectRemark=${rejectRemark}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport async function apiGetdealmaster(param, dateRange) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/?LocationCode=${param.LocationCode}&ChannelCode=${param.ChannelCode\r\n      }&StartDate=${convertDateToYMD(dateRange[0])}&EndDate=${convertDateToYMD(\r\n        dateRange[1],\r\n      )}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport async function apiGetsponsortypemasterdrop(data) {\r\n  return ApiService.fetchData({\r\n    url: '/sponsortypemaster/drop/',\r\n    method: 'get',\r\n    data,\r\n  });\r\n}\r\nexport async function apiGetspottypemasterdrop(data) {\r\n  return ApiService.fetchData({\r\n    url: '/spottypemaster/drop/',\r\n    method: 'get',\r\n    data,\r\n  });\r\n}\r\nexport async function apiGetdealdetailId(ID) {\r\n  return ApiService.fetchData({\r\n    url: `/dealdetail/${ID}`,\r\n    method: 'get',\r\n  });\r\n}\r\nexport async function apiUSP_Sch_DealConsumptionCheck(ID) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/USP_Sch_DealConsumptionCheck/?DealNumber=${ID}`,\r\n    method: 'get',\r\n  });\r\n}\r\nexport async function apiUSP_Sch_DealConsumptionMonthwise(ID) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/USP_Sch_DealConsumptionMonthwise/?DealNumber=${ID}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport async function apiGetbindstartnendtime(\r\n  DealPeriodToDate,\r\n  DealPeriodFromDate,\r\n  ContentCode,\r\n  OriginalRepeatCode,\r\n  LocationCode,\r\n  ChannelCode,\r\n) {\r\n  return ApiService.fetchData({\r\n    url: `/dealmaster/bindstartnendtime/?LocationCode=${LocationCode}&ChannelCode=${ChannelCode}&DealPeriodToDate=${DealPeriodToDate}&DealPeriodFromDate=${DealPeriodFromDate}&ContentCode=${ContentCode}&OriginalRepeatCode=${OriginalRepeatCode}`,\r\n    method: 'get',\r\n  });\r\n}\r\n\r\nexport async function apipostbookingdetails(RESCHEDULE, data, IsNtc) {\r\n  return ApiService.fetchData({\r\n    url: `/bookingdetails/bookingchange/?flag=${RESCHEDULE}&IsNtc=${IsNtc}`,\r\n    method: 'put',\r\n    data,\r\n  });\r\n}\r\n\r\nexport async function apiGetdealDashboard() {\r\n  var d = {\r\n    params: {},\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/USP_DealDashboardSummaryAmount',\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\nexport async function apiCallstoreprocedure_WithOutParam(proc_name, params) {\r\n  var d = {\r\n    params: params,\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\nexport async function apiCallstoreprocedure_WithOutParamEntity(proc_name) {\r\n  var d = {\r\n    params: {},\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\nexport async function apiCallstoreprocedure_WithOutParamreject(proc_name) {\r\n  var d = {\r\n    params: {\r\n      IsApproved: 0,\r\n      IsExpiring: 0,\r\n      IsRejected: 2,\r\n    },\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\nexport async function apiCallstoreprocedure_WithOutParamRRR(\r\n  proc_name,\r\n  date,\r\n  channel,\r\n  loc,\r\n) {\r\n  var d = {\r\n    params: {\r\n      Location: loc,\r\n      Channel: channel,\r\n      FromDate: convertDateToYMD(date[0]),\r\n      Todate: convertDateToYMD(date[1]),\r\n    },\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\nexport async function apiCallstoreprocedure_WithOutParamDash(\r\n  proc_name,\r\n  channel,\r\n  loc,\r\n) {\r\n  var d = {\r\n    params: {\r\n      Location: loc,\r\n      Channel: channel,\r\n    },\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\n\r\nexport async function apiCallstoreprocedure_WithOutParamgg(\r\n  proc_name,\r\n  BookingCode,\r\n  IsNTC,\r\n) {\r\n  var d = {\r\n    params: { Bookingcode: BookingCode, IsNTC: IsNTC },\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\n\r\nexport async function apiCallstoreprocedure_WithOutParamstatus(\r\n  proc_name,\r\n  data,\r\n) {\r\n  var d = {\r\n    params: {},\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\n\r\nexport async function apiDashboardDoughnut(format) {\r\n  var d = {\r\n    params: {\r\n      CheckMonth: format,\r\n    },\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/USP_DealDashboardDoughnut',\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\n\r\nexport async function apiCallforbookdeatil(proc_name, f) {\r\n  var d = {\r\n    params: { BookingNumber: f, deallineitemno: 0 },\r\n  };\r\n\r\n  return ApiService.fetchData({\r\n    url: '/callstoreprocedure/' + proc_name,\r\n    data: d,\r\n    method: 'post',\r\n  });\r\n}\r\n\r\nexport async function apiGetExchangeRatesForBaseCurrency(baseCurShortName) {\r\n  return ApiService.fetchData({\r\n    url: `currencyexchangerate/?basecurrency=${baseCurShortName}`,\r\n    method: 'post',\r\n  });\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport {\r\n  apiGetclientmasterdropmaster,\r\n  apiGetspotcancellation,\r\n} from 'services/CreditcontrolService';\r\nimport { Button, Card, Dialog, Select, Tag } from 'components/ui';\r\nimport HeaderExtra from 'views/Controls/HeaderExtra';\r\nimport DatePickerRange from 'components/ui/DatePicker/DatePickerRange';\r\nimport SearchInput from 'views/Controls/SearchInput';\r\nimport { StickyFooter } from 'components/shared';\r\nimport {\r\n  openNotification,\r\n  parseDuration,\r\n} from 'views/Controls/GLOBALFUNACTION';\r\nimport { hideStackedSideNav_secondary } from 'views/Scheduling/general';\r\nimport { HiClock, HiOutlineClipboardCheck } from 'react-icons/hi';\r\nimport classNames from 'classnames';\r\nimport { apipostbookingdetails } from 'services/DealServices';\r\nimport { useSelector } from 'react-redux';\r\nimport { reportsTableEnum } from 'views/Controls/ReportsTable/enums/ReportsTableEnums';\r\nimport ReportsTable from 'views/Controls/ReportsTable/ReportsTable';\r\n\r\n/* CONSTANTS */\r\nconst COLUMNS = [\r\n  { header: 'Agency', accessorKey: 'AgencyName' },\r\n  { header: 'Client', accessorKey: 'ClientName' },\r\n  { header: 'Brand', accessorKey: 'BrandName' },\r\n  { header: 'Commercial', accessorKey: 'CommercialCaption' },\r\n  { header: 'Duration', accessorKey: 'CommercialDuration' },\r\n  { header: 'Content', accessorKey: 'ContentName' },\r\n  { header: 'Schedule Date', accessorKey: 'BookingScheduleDate' },\r\n  { header: 'Schedule Time', accessorKey: 'ScheduleTime' },\r\n  { header: 'Spot Rate', accessorKey: 'SpotRate' },\r\n  { header: 'Spot Amount', accessorKey: 'SpotAmount' },\r\n  { header: 'Line Item From Date', accessorKey: 'LineItemFromDate' },\r\n  { header: 'Line Item End Date', accessorKey: 'LineItemEndDate' },\r\n  { header: 'BookingCode', accessorKey: 'BookingCode' },\r\n];\r\n\r\nconst SPOT_TYPE = [\r\n  { value: '2', label: 'Booked But Not Telecasted' },\r\n  { value: '1', label: 'Booked And Missed' },\r\n];\r\n\r\nconst MakeGood = () => {\r\n  const currentHref = window.location.href; // Get the full URL\r\n  const hashPart = currentHref.split('#')[1]; // Get the part after the '#'\r\n  const spotBooking = hashPart ? hashPart.split('/')[1] : ''; // Extract \"SpotBooking\"\r\n  const IsNTCPage = spotBooking === 'SpotMakeGood' ? 0 : 1;\r\n  /* REDUX */\r\n\r\n  /* STATES */\r\n  const Channel = useSelector((state) => state.locale.selectedChannel);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [selectedItem, setSelectedItem] = useState([]);\r\n  const [clientList, setClientList] = useState(['']);\r\n  const [spotTypedata, setSpotTypedata] = useState(['']);\r\n  const [formState, setFormState] = useState({});\r\n  const [tableData, setTableData] = useState([]);\r\n  const [selectedRows, setSelectedRows] = useState([]);\r\n  const [distinctdata, setDistinctData] = useState([]);\r\n  const [summarydata, setSummarydata] = useState([]);\r\n  const [isFinalSummaryDialogOpen, setIsFinalSummaryDialogOpen] =\r\n    useState(false);\r\n  const [managedColumns, setManagedColumns] = useState([]);\r\n  const [paginationState, setPaginationState] = useState({\r\n    pageIndex: 0,\r\n    pageSize: 10,\r\n  });\r\n  const [rowSelection, setRowSelection] = useState({});\r\n  const [initialLoad, setInitialLoad] = useState(true);\r\n\r\n  /* USE EFFECTS */\r\n  useEffect(() => {\r\n    try {\r\n      if (initialLoad) {\r\n        hideStackedSideNav_secondary();\r\n        (async (values) => {\r\n          const response = await apiGetclientmasterdropmaster(values);\r\n          const clientListOptions = response.data.map((client) => ({\r\n            label: client.ClientName,\r\n            value: client.ClientCode,\r\n          }));\r\n          setClientList(clientListOptions);\r\n        })();\r\n        setInitialLoad(false);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [initialLoad]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (\r\n        formState?.datesrange?.length === 2 &&\r\n        formState.datesrange[0] &&\r\n        formState.datesrange[1] &&\r\n        spotTypedata.value > 0\r\n      ) {\r\n        const resp = await apiGetspotcancellation(\r\n          formState,\r\n          selectedItem,\r\n          spotTypedata.value,\r\n          'BÂ R',\r\n          IsNTCPage,\r\n          Channel.LocationCode,\r\n          Channel.ChannelCode,\r\n        );\r\n\r\n        if (resp?.data?.length > 0) {\r\n          setTableData(resp.data);\r\n        } else {\r\n          setTableData([]);\r\n        }\r\n      }\r\n    })();\r\n  }, [formState.datesrange, spotTypedata, Channel]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setDistinctData(getDistinctSums(selectedRows));\r\n      calculateSums(selectedRows);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }, [selectedRows]);\r\n\r\n  /* EVENT HANDLERS */\r\n  const handleConfirm = async () => {\r\n    const finalData = selectedRows.map((item) => ({\r\n      Id: item.Id,\r\n      CommercialCode: 0,\r\n      BookingStatus: '',\r\n      SpotTypeCode: spotTypedata.value,\r\n    }));\r\n    try {\r\n      const resp = await apipostbookingdetails(\r\n        'MAKEGOOD',\r\n        finalData,\r\n        IsNTCPage,\r\n      );\r\n      if (resp.status === 200) {\r\n        setIsFinalSummaryDialogOpen(false);\r\n        resetData();\r\n        openNotification('success', 'Spot MakeGood Successfully');\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      if (error.response.status === 500) {\r\n        openNotification('danger', 'Server Error.');\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  /* HELPER FUNCTIONS */\r\n  const getDistinctSums = (selectedRowData) => {\r\n    try {\r\n      if (!Array.isArray(selectedRowData)) {\r\n        return [];\r\n      }\r\n      const result = selectedRowData.reduce((acc, item) => {\r\n        if (item) {\r\n          const key = `${item.CommercialCaption}-${item.CommercialDuration}`;\r\n          if (!acc[key]) {\r\n            acc[key] = {\r\n              CommercialCaption: item.CommercialCaption,\r\n              CommercialDuration: item.CommercialDuration,\r\n              CurrencySymbol: item.CurrencySymbol,\r\n              SpotAmountSum: 0,\r\n              TotalDuration: 0,\r\n              TotalCount: 0,\r\n            };\r\n          }\r\n          acc[key].SpotAmountSum += item.SpotAmount;\r\n          acc[key].TotalDuration += parseDuration(item.CommercialDuration);\r\n          acc[key].TotalCount++;\r\n          return acc;\r\n        }\r\n      }, {});\r\n      return Object.values(result || 0);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const calculateSums = (selectedRowData) => {\r\n    try {\r\n      const sums = selectedRowData.reduce(\r\n        (acc, item) => {\r\n          if (item) {\r\n            acc.spotAmountSum += item.SpotAmount;\r\n            acc.spotRateSum += item.SpotRate;\r\n            acc.Duration += parseDuration(item.CommercialDuration);\r\n          }\r\n          return acc;\r\n        },\r\n        { spotAmountSum: 0, spotRateSum: 0, Duration: 0 },\r\n      );\r\n      setSummarydata(sums);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const resetData = () => {\r\n    setInputValue('');\r\n    setSelectedItem([]);\r\n    setClientList(['']);\r\n    setSpotTypedata(['']);\r\n    setFormState({});\r\n    setTableData([]);\r\n    setSelectedRows([]);\r\n    setDistinctData([]);\r\n    setSummarydata([]);\r\n    setIsFinalSummaryDialogOpen(false);\r\n    setManagedColumns([]);\r\n    setPaginationState({\r\n      pageIndex: 0,\r\n      pageSize: 10,\r\n    });\r\n    setRowSelection({});\r\n    setInitialLoad(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card header={<HeaderExtra />}>\r\n        <div className=\"mb-5\">\r\n          <div className=\"grid grid-cols-4 gap-x-5\">\r\n            <div className=\"col-span-3\">\r\n              <p className=\"lbale\">Search Client</p>\r\n              {clientList && (\r\n                <SearchInput\r\n                  className={'block'}\r\n                  SelectedItem={selectedItem}\r\n                  setSelectedItem={setSelectedItem}\r\n                  data={clientList}\r\n                  placeholder=\"Search Client...\"\r\n                  setInputValue={setInputValue}\r\n                  InputValue={inputValue}\r\n                  ResetData={resetData}\r\n                ></SearchInput>\r\n              )}\r\n            </div>\r\n            <div className=\"col-span-1 \">\r\n              {selectedItem?.length != 0 && (\r\n                <>\r\n                  <p className=\"lbale \">Spot Type</p>\r\n                  <Select\r\n                    size=\"sm\"\r\n                    value={SPOT_TYPE.filter(\r\n                      (option) => option.value == spotTypedata?.value,\r\n                    )}\r\n                    className=\"mb-4\"\r\n                    placeholder=\"Please Select\"\r\n                    options={SPOT_TYPE}\r\n                    onChange={(e) => setSpotTypedata(e)}\r\n                  ></Select>\r\n                </>\r\n              )}\r\n            </div>\r\n            <div className=\"col-span-1\">\r\n              {selectedItem?.length != 0 && (\r\n                <>\r\n                  <p className=\"lbale\">Select Date Range</p>\r\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                    <DatePickerRange\r\n                      placeholder=\"Select datesrange\"\r\n                      style={{ fontSize: '15px', marginRight: '10px' }}\r\n                      value={formState?.datesrange}\r\n                      onChange={(e) => {\r\n                        setFormState((prevFormState) => ({\r\n                          ...prevFormState,\r\n                          datesrange: e,\r\n                        }));\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {tableData && (\r\n          <ReportsTable\r\n            tableData={tableData}\r\n            tableName={'spotMakeGood'}\r\n            originalColumns={COLUMNS}\r\n            managedColumns={managedColumns}\r\n            setManagedColumns={setManagedColumns}\r\n            exportFile={false}\r\n            columnsToFormatInINR={[]}\r\n            tableType={reportsTableEnum.tableTypes.SELECTABLE}\r\n            setSelectedRows={setSelectedRows}\r\n            paginationState={paginationState}\r\n            setPaginationState={setPaginationState}\r\n            rowSelection={rowSelection}\r\n            setRowSelection={setRowSelection}\r\n          />\r\n        )}\r\n      </Card>\r\n      {selectedRows.length > 0 && (\r\n        <StickyFooter\r\n          className=\"-mx-8 px-8 flex items-center justify-between py-4 pt-2 pb-2\"\r\n          stickyClass=\"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700\"\r\n        >\r\n          <div className=\"md:flex items-center\">\r\n            <Button\r\n              onClick={() => setIsFinalSummaryDialogOpen(true)}\r\n              variant=\"solid\"\r\n              type=\"submit\"\r\n              size=\"sm\"\r\n            >\r\n              Proceed to Make Good\r\n            </Button>\r\n            &nbsp;\r\n            <Button onClick={() => resetData()} type=\"button\" size=\"sm\">\r\n              Discard\r\n            </Button>\r\n          </div>\r\n          <div\r\n            id=\"myblock\"\r\n            className=\"grid grid-cols-4 md:grid-cols-4 lg:grid-cols-4 gap-6 p-4 pt-0 pb-1 \r\n                                    bg-gray-100 dark:bg-gray-800\"\r\n          >\r\n            <div className=\"flex flex-col lbl\">\r\n              <span className=\"font-medium text-gray-600 dark:text-gray-300 text-sm\">\r\n                Total Spots\r\n              </span>\r\n              <span className=\"font-medium text-lg text-teal-500\">\r\n                {tableData.length}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex flex-col lbl\">\r\n              <span className=\"font-medium text-gray-600 dark:text-gray-300 text-sm\">\r\n                Selected Spots\r\n              </span>\r\n              <span className=\"font-medium text-lg text-teal-500\">\r\n                {selectedRows.length}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex flex-col lbl\">\r\n              <span className=\"font-medium text-gray-600 dark:text-gray-300 text-sm\">\r\n                Duration\r\n              </span>\r\n              <span className=\"font-medium text-lg text-teal-500\">\r\n                {summarydata?.Duration}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex flex-col lbl\">\r\n              <span className=\"font-medium text-gray-600 dark:text-gray-300 text-sm\">\r\n                Spot Amount\r\n              </span>\r\n              <span className=\"font-medium text-lg text-teal-500\">\r\n                {summarydata?.spotAmountSum}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </StickyFooter>\r\n      )}\r\n      <Dialog\r\n        isOpen={isFinalSummaryDialogOpen}\r\n        onClose={() => setIsFinalSummaryDialogOpen(false)}\r\n        onRequestClose={() => setIsFinalSummaryDialogOpen(false)}\r\n      >\r\n        <Card>\r\n          {distinctdata.map((item, index) => (\r\n            <div key={index}>\r\n              <div>\r\n                <div\r\n                  className={classNames(\r\n                    'flex items-center justify-between rounded-lg p-2 cursor-pointer user-select',\r\n                    'bg-gray-50 dark:bg-gray-700/60 hover:bg-gray-100 dark:hover:bg-gray-700/90',\r\n                    'mb-3',\r\n                  )}\r\n                >\r\n                  <div className=\"flex items-center rounded-full font-semibold text-xs\">\r\n                    <div className=\"flex items-center px-2 py-1 border border-gray-300 rounded-full  mr-2\">\r\n                      <HiOutlineClipboardCheck className=\"text-base\" />\r\n                      <span className=\"ml-1 rtl:mr-1 whitespace-nowrap\">\r\n                        {item.TotalCount}\r\n                      </span>\r\n                    </div>\r\n                    {'  '}\r\n                    <div className=\"flex items-center\">\r\n                      <div className=\"text-gray-900 dark:text-gray-300 text-xs\">\r\n                        {item.CommercialCaption} [{item.CommercialDuration}]\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-gray-900 dark:text-gray-300 text-lg\">\r\n                    <Tag showCloseButton={false}>\r\n                      <div className=\"flex items-center text-sm\">\r\n                        <span className=\"mr-1\">\r\n                          <HiClock />\r\n                        </span>{' '}\r\n                        {item.TotalDuration} sec\r\n                      </div>\r\n                    </Tag>\r\n                  </div>\r\n                  <div className=\"text-gray-900 dark:text-gray-300 text-lg\">\r\n                    <Tag showCloseButton={false}>\r\n                      <span className=\"text-lg\">\r\n                        {item.CurrencySymbol} {item.SpotAmountSum}\r\n                      </span>\r\n                    </Tag>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </Card>\r\n        <div className=\"text-right mt-6 \">\r\n          <Button variant=\"solid\" className=\"mr-2\" onClick={handleConfirm}>\r\n            Confirm\r\n          </Button>\r\n          <Button onClick={() => setIsFinalSummaryDialogOpen(false)}>\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MakeGood;\r\n"],"names":["require","async","apidealmasterBYID","ID","ApiService","url","method","apidealattachmentBYID","dealNumber","apidealmasterDealforapprovalBYID","selectedDeal","isApproved","rejectRemark","apiGetdealmaster","param","dateRange","LocationCode","ChannelCode","convertDateToYMD","apiGetsponsortypemasterdrop","data","apiGetspottypemasterdrop","apiGetdealdetailId","apiUSP_Sch_DealConsumptionCheck","apiGetbindstartnendtime","DealPeriodToDate","DealPeriodFromDate","ContentCode","OriginalRepeatCode","apipostbookingdetails","RESCHEDULE","IsNtc","apiCallstoreprocedure_WithOutParam","proc_name","params","d","apiCallstoreprocedure_WithOutParamEntity","apiCallstoreprocedure_WithOutParamgg","BookingCode","IsNTC","Bookingcode","apiDashboardDoughnut","format","CheckMonth","apiCallforbookdeatil","f","BookingNumber","deallineitemno","apiGetExchangeRatesForBaseCurrency","baseCurShortName","COLUMNS","header","accessorKey","SPOT_TYPE","value","label","hashPart","window","location","href","split","IsNTCPage","Channel","useSelector","state","locale","selectedChannel","inputValue","setInputValue","useState","selectedItem","setSelectedItem","clientList","setClientList","spotTypedata","setSpotTypedata","formState","setFormState","tableData","setTableData","selectedRows","setSelectedRows","distinctdata","setDistinctData","summarydata","setSummarydata","isFinalSummaryDialogOpen","setIsFinalSummaryDialogOpen","managedColumns","setManagedColumns","paginationState","setPaginationState","pageIndex","pageSize","rowSelection","setRowSelection","initialLoad","setInitialLoad","useEffect","hideStackedSideNav_secondary","clientListOptions","apiGetclientmasterdropmaster","map","client","ClientName","ClientCode","error","console","datesrange","length","resp","apiGetspotcancellation","getDistinctSums","calculateSums","selectedRowData","Array","isArray","result","reduce","acc","item","key","CommercialCaption","CommercialDuration","CurrencySymbol","SpotAmountSum","TotalDuration","TotalCount","SpotAmount","parseDuration","Object","values","sums","spotAmountSum","spotRateSum","SpotRate","Duration","resetData","className","SelectedItem","placeholder","InputValue","ResetData","size","filter","option","options","onChange","e","style","display","alignItems","fontSize","marginRight","prevFormState","tableName","originalColumns","exportFile","columnsToFormatInINR","tableType","reportsTableEnum","stickyClass","onClick","variant","type","id","isOpen","onClose","onRequestClose","index","classNames","showCloseButton","finalData","Id","CommercialCode","BookingStatus","SpotTypeCode","status","openNotification","response"],"sourceRoot":""}